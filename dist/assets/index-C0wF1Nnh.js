const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index.es-DC_IzSnG.js","assets/vendor-QIh_Ax-4.js","assets/firebase-BOA1D7cS.js"])))=>i.map(i=>d[i]);
import{r as h1,t as of,a as xe,g as Cu,u as d1,i as dn,j as h,M as Ao,B as Le,T as _e,I as ur,b as ko,c as Lo,d as Wn,e as it,f as Po,h as wt,S as Rc,A as qt,k as ki,l as Gt,F as Eh,m as Al,n as kl,o as Ll,p as xn,P as Un,q as f1,s as eo,v as Ot,G as De,L as Pl,C as cr,w as Ir,x as Sa,y as ja,z as Sr,D as Nl,E as Ih,Z as ri,H as En,J as Oh,K as co,N as p1,O as g1,Q as m1,R as v1,U as Tu,V as b1,W as Fh,X as Dh,Y as Cl,_ as Mh,$ as Tl,a0 as ba,a1 as lf,a2 as cf,a3 as uf,a4 as hf,a5 as df,a6 as y1,a7 as Bh,a8 as x1,a9 as Kt,aa as hn,ab as w1,ac as _1,ad as S1,ae as j1,af as A1,ag as dl,ah as k1,ai as L1,aj as P1}from"./vendor-QIh_Ax-4.js";import{_ as N1,C as C1,r as qh,S as T1,F as R1,g as E1,a as I1,b as O1,c as F1,d as D1,i as M1,e as B1,f as q1,h as $1,o as z1,s as U1,j as W1,G as ff,k as pf,l as H1,m as ya,n as un,p as to,q as xi,u as ro,t as V1,w as $h,v as zh}from"./firebase-BOA1D7cS.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=t(s);fetch(s.href,i)}})();var gf,Uh=h1;gf=Uh.createRoot,Uh.hydrateRoot;function mf(n,e,t){return(e=of(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function G1(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function K1(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,of(r.key),r)}}function J1(n,e,t){return e&&K1(n.prototype,e),Object.defineProperty(n,"prototype",{writable:!1}),n}var Y1=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,X1={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},Z1=function(e){return X1[e]},Q1=function(e){return e.replace(Y1,Z1)};function Wh(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Hh(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wh(Object(t),!0).forEach(function(r){mf(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wh(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var ru={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:Q1},vf,bf=xe.createContext();function eg(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ru=Hh(Hh({},ru),n)}function tg(){return ru}var rg=function(){function n(){G1(this,n),this.usedNamespaces={}}return J1(n,[{key:"addUsedNamespaces",value:function(t){var r=this;t.forEach(function(s){r.usedNamespaces[s]||(r.usedNamespaces[s]=!0)})}},{key:"getUsedNamespaces",value:function(){return Object.keys(this.usedNamespaces)}}]),n}();function ng(n){vf=n}function sg(){return vf}var ig={type:"3rdParty",init:function(e){eg(e.options.react),ng(e)}};function ag(){if(console&&console.warn){for(var n,e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];typeof t[0]=="string"&&(t[0]="react-i18next:: ".concat(t[0])),(n=console).warn.apply(n,t)}}var Vh={};function nu(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];typeof e[0]=="string"&&Vh[e[0]]||(typeof e[0]=="string"&&(Vh[e[0]]=new Date),ag.apply(void 0,e))}function Gh(n,e,t){n.loadNamespaces(e,function(){if(n.isInitialized)t();else{var r=function s(){setTimeout(function(){n.off("initialized",s)},0),t()};n.on("initialized",r)}})}function og(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=e.languages[0],s=e.options?e.options.fallbackLng:!1,i=e.languages[e.languages.length-1];if(r.toLowerCase()==="cimode")return!0;var a=function(c,d){var g=e.services.backendConnector.state["".concat(c,"|").concat(d)];return g===-1||g===2};return t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!a(e.isLanguageChangingTo,n)?!1:!!(e.hasResourceBundle(r,n)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||a(r,n)&&(!s||a(i,n)))}function lg(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!e.languages||!e.languages.length)return nu("i18n.languages were undefined or empty",e.languages),!0;var r=e.options.ignoreJSONStructure!==void 0;return r?e.hasLoadedNamespace(n,{precheck:function(i,a){if(t.bindI18n&&t.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!a(i.isLanguageChangingTo,n))return!1}}):og(n,e,t)}function cg(n){if(Array.isArray(n))return n}function ug(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,i,a,l=[],c=!0,d=!1;try{if(i=(t=t.call(n)).next,e!==0)for(;!(c=(r=i.call(t)).done)&&(l.push(r.value),l.length!==e);c=!0);}catch(g){d=!0,s=g}finally{try{if(!c&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return l}}function Kh(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function hg(n,e){if(n){if(typeof n=="string")return Kh(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Kh(n,e):void 0}}function dg(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fg(n,e){return cg(n)||ug(n,e)||hg(n,e)||dg()}function Jh(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Ec(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Jh(Object(t),!0).forEach(function(r){mf(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Jh(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}var pg=function(e,t){var r=xe.useRef();return xe.useEffect(function(){r.current=e},[e,t]),r.current};function fn(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.i18n,r=xe.useContext(bf)||{},s=r.i18n,i=r.defaultNS,a=t||s||sg();if(a&&!a.reportNamespaces&&(a.reportNamespaces=new rg),!a){nu("You will need to pass in an i18next instance by using initReactI18next");var l=function(V){return Array.isArray(V)?V[V.length-1]:V},c=[l,{},!1];return c.t=l,c.i18n={},c.ready=!1,c}a.options.react&&a.options.react.wait!==void 0&&nu("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");var d=Ec(Ec(Ec({},tg()),a.options.react),e),g=d.useSuspense,v=d.keyPrefix,m=i||a.options&&a.options.defaultNS;m=typeof m=="string"?[m]:m||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(m);var f=(a.isInitialized||a.initializedStoreOnce)&&m.every(function(E){return lg(E,a,d)});function y(){return a.getFixedT(null,d.nsMode==="fallback"?m:m[0],v)}var _=xe.useState(y),j=fg(_,2),x=j[0],k=j[1],S=m.join(),N=pg(S),D=xe.useRef(!0);xe.useEffect(function(){var E=d.bindI18n,V=d.bindI18nStore;D.current=!0,!f&&!g&&Gh(a,m,function(){D.current&&k(y)}),f&&N&&N!==S&&D.current&&k(y);function K(){D.current&&k(y)}return E&&a&&a.on(E,K),V&&a&&a.store.on(V,K),function(){D.current=!1,E&&a&&E.split(" ").forEach(function(L){return a.off(L,K)}),V&&a&&V.split(" ").forEach(function(L){return a.store.off(L,K)})}},[a,S]);var M=xe.useRef(!0);xe.useEffect(function(){D.current&&!M.current&&k(y),M.current=!1},[a,v]);var R=[x,a,f];if(R.t=x,R.i18n=a,R.ready=f,f||!f&&!g)return R;throw new Promise(function(E){Gh(a,m,function(){E()})})}function gg(n){var e=n.i18n,t=n.defaultNS,r=n.children,s=xe.useMemo(function(){return{i18n:e,defaultNS:t}},[e,t]);return xe.createElement(bf.Provider,{value:s},r)}var Ru={},Ic={};const mg=Cu(d1);var Yh;function pn(){return Yh||(Yh=1,function(n){"use client";Object.defineProperty(n,"__esModule",{value:!0}),Object.defineProperty(n,"default",{enumerable:!0,get:function(){return e.createSvgIcon}});var e=mg}(Ic)),Ic}var vg=dn;Object.defineProperty(Ru,"__esModule",{value:!0});var yf=Ru.default=void 0,bg=vg(pn()),yg=h;yf=Ru.default=(0,bg.default)((0,yg.jsx)("path",{d:"M3 18h18v-2H3zm0-5h18v-2H3zm0-7v2h18V6z"}),"Menu");var Eu={},xg=dn;Object.defineProperty(Eu,"__esModule",{value:!0});var su=Eu.default=void 0,wg=xg(pn()),_g=h;su=Eu.default=(0,wg.default)((0,_g.jsx)("path",{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2m6.93 6h-2.95c-.32-1.25-.78-2.45-1.38-3.56 1.84.63 3.37 1.91 4.33 3.56M12 4.04c.83 1.2 1.48 2.53 1.91 3.96h-3.82c.43-1.43 1.08-2.76 1.91-3.96M4.26 14C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2zm.82 2h2.95c.32 1.25.78 2.45 1.38 3.56-1.84-.63-3.37-1.9-4.33-3.56m2.95-8H5.08c.96-1.66 2.49-2.93 4.33-3.56C8.81 5.55 8.35 6.75 8.03 8M12 19.96c-.83-1.2-1.48-2.53-1.91-3.96h3.82c-.43 1.43-1.08 2.76-1.91 3.96M14.34 14H9.66c-.09-.66-.16-1.32-.16-2 0-.68.07-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2m.25 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95c-.96 1.65-2.49 2.93-4.33 3.56M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2z"}),"Language");var Iu={},Sg=dn;Object.defineProperty(Iu,"__esModule",{value:!0});var iu=Iu.default=void 0,jg=Sg(pn()),Ag=h;iu=Iu.default=(0,jg.default)((0,Ag.jsx)("path",{d:"m17 7-1.41 1.41L18.17 11H8v2h10.17l-2.58 2.58L17 17l5-5zM4 5h8V3H4c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h8v-2H4z"}),"Logout");var Ou={},kg=dn;Object.defineProperty(Ou,"__esModule",{value:!0});var Fu=Ou.default=void 0,Lg=kg(pn()),Pg=h;Fu=Ou.default=(0,Lg.default)((0,Pg.jsx)("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add");var Du={},Ng=dn;Object.defineProperty(Du,"__esModule",{value:!0});var Mu=Du.default=void 0,Cg=Ng(pn()),Tg=h;Mu=Du.default=(0,Cg.default)((0,Tg.jsx)("path",{d:"M3 17.25V21h3.75L17.81 9.94l-3.75-3.75zM20.71 7.04c.39-.39.39-1.02 0-1.41l-2.34-2.34a.9959.9959 0 0 0-1.41 0l-1.83 1.83 3.75 3.75z"}),"Edit");var Bu={},Rg=dn;Object.defineProperty(Bu,"__esModule",{value:!0});var qu=Bu.default=void 0,Eg=Rg(pn()),Ig=h;qu=Bu.default=(0,Eg.default)((0,Ig.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6zM19 4h-3.5l-1-1h-5l-1 1H5v2h14z"}),"Delete");var $u={},Og=dn;Object.defineProperty($u,"__esModule",{value:!0});var zl=$u.default=void 0,Fg=Og(pn()),Dg=h;zl=$u.default=(0,Fg.default)((0,Dg.jsx)("path",{d:"M17 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V7zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3m3-10H5V5h10z"}),"Save");var zu={},Mg=dn;Object.defineProperty(zu,"__esModule",{value:!0});var Aa=zu.default=void 0,Bg=Mg(pn()),qg=h;Aa=zu.default=(0,Bg.default)((0,qg.jsx)("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close");const $g=({open:n,onClose:e,students:t,onAddStudent:r,onEditStudent:s,onDeleteStudent:i,studentImageUrls:a})=>{const{t:l}=fn(),[c,d]=xe.useState(""),[g,v]=xe.useState(void 0),[m,f]=xe.useState(""),[y,_]=xe.useState(null),[j,x]=xe.useState(""),[k,S]=xe.useState(void 0),[N,D]=xe.useState(""),M=2*1024*1024,R=["image/jpeg","image/png","image/webp"],E=te=>te?R.includes(te.type)?te.size>M?"Max size 2MB":"":"Only JPG, PNG, or WEBP allowed":"",V=te=>{const $=E(te);f($),$||v(te)},K=te=>{const $=E(te);D($),$||S(te)},L=()=>{c.trim()!==""&&(m||(r(c.trim(),g),d(""),v(void 0),f("")))},A=te=>{_(te),x(t[te])},U=()=>{y===null||j.trim()===""||N||(s(y,j.trim(),k),_(null),x(""),S(void 0),D(""))},z={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100vw",sm:"80vw",md:600},maxWidth:"100vw",bgcolor:"background.paper",boxShadow:24,p:{xs:1,sm:4},borderRadius:{xs:0,sm:2},maxHeight:{xs:"100vh",sm:"80vh"},height:{xs:"100vh",sm:"auto"},overflowY:"auto"};return h.jsx(Ao,{open:n,onClose:e,children:h.jsxs(Le,{sx:z,children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsx(_e,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:l("student_list")}),h.jsx(ur,{onClick:e,children:h.jsx(Aa,{fontSize:"small"})})]}),h.jsxs(ko,{sx:{"& th, & td":{padding:{xs:"4px",sm:"8px"},fontSize:{xs:"0.75rem",sm:"0.875rem"}}},children:[h.jsx(Lo,{children:h.jsxs(Wn,{children:[h.jsx(it,{sx:{fontWeight:"bold"},children:l("name")}),h.jsx(it,{sx:{fontWeight:"bold"},children:l("actions")})]})}),h.jsxs(Po,{children:[t.map((te,$)=>h.jsxs(Wn,{children:[h.jsx(it,{children:y===$?h.jsx(wt,{value:j,onChange:W=>x(W.target.value),size:"small",onBlur:U,onKeyPress:W=>{W.key==="Enter"&&U()},autoFocus:!0,sx:{width:{xs:"100%",sm:"200px"}}}):h.jsxs(Rc,{direction:"row",spacing:1,alignItems:"center",children:[h.jsx(qt,{sx:{width:28,height:28},src:a?.[$]}),h.jsx("span",{children:te})]})}),h.jsx(it,{children:h.jsxs(Le,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[y===$&&h.jsxs(Rc,{direction:"row",spacing:1,alignItems:"center",children:[h.jsx("input",{id:`edit-file-${$}`,type:"file",accept:"image/*",style:{display:"none"},onChange:W=>K(W.target.files?.[0])}),h.jsx(ki,{title:"Upload image (JPG/PNG/WEBP, max 2MB)",children:h.jsx("label",{htmlFor:`edit-file-${$}`,children:h.jsx(Gt,{variant:"outlined",component:"span",size:"small",children:l("upload")||"Upload"})})}),h.jsx(qt,{sx:{width:36,height:36},src:k?URL.createObjectURL(k):a?.[$]||void 0,alt:"preview"}),N&&h.jsx(Eh,{error:!0,sx:{ml:1},children:N})]}),y===$?h.jsx(ur,{onClick:U,children:h.jsx(zl,{color:"success",fontSize:"small"})}):h.jsx(ur,{onClick:()=>A($),children:h.jsx(Mu,{fontSize:"small"})}),h.jsx(ur,{onClick:()=>i($),children:h.jsx(qu,{color:"error",fontSize:"small"})})]})})]},$)),h.jsxs(Wn,{children:[h.jsx(it,{children:h.jsxs(Le,{sx:{display:"flex",gap:1,alignItems:"center",flexWrap:"wrap"},children:[h.jsx(wt,{value:c,onChange:te=>d(te.target.value),placeholder:l("enter_student_name"),size:"small",sx:{width:{xs:"100%",sm:"200px"}},onKeyPress:te=>{te.key==="Enter"&&L()}}),h.jsxs(Rc,{direction:"row",spacing:1,alignItems:"center",children:[h.jsx("input",{id:"add-file",type:"file",accept:"image/*",style:{display:"none"},onChange:te=>V(te.target.files?.[0])}),h.jsx(ki,{title:"Upload image (JPG/PNG/WEBP, max 2MB)",children:h.jsx("label",{htmlFor:"add-file",children:h.jsx(Gt,{variant:"outlined",component:"span",size:"small",children:l("upload")||"Upload"})})}),h.jsx(qt,{sx:{width:36,height:36},src:g?URL.createObjectURL(g):void 0,alt:"preview"}),m&&h.jsx(Eh,{error:!0,sx:{ml:1},children:m})]}),h.jsx(Gt,{variant:"contained",color:"primary",onClick:L,disabled:c.trim()==="",startIcon:h.jsx(Fu,{}),children:l("add")})]})}),h.jsx(it,{})]})]})]})]})})},zg=({open:n,onClose:e,subjects:t,onAddSubject:r,onEditSubject:s,onDeleteSubject:i})=>{const{t:a}=fn(),[l,c]=xe.useState(""),[d,g]=xe.useState(""),[v,m]=xe.useState(""),[f,y]=xe.useState(null),[_,j]=xe.useState({name:"",total:0,teacher:""}),x=()=>{const D=parseInt(d,10);l.trim()===""||isNaN(D)||D<=0||(r(l.trim(),D,v.trim()||void 0),c(""),g(""),m(""))},k=D=>{y(D),j(t[D])},S=()=>{f===null||_.name.trim()===""||_.total<=0||(s(f,_.name.trim(),_.total,(_.teacher||"").trim()||void 0),y(null),j({name:"",total:0,teacher:""}))},N={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100vw",sm:"80vw",md:600},maxWidth:"100vw",bgcolor:"background.paper",boxShadow:24,p:{xs:1,sm:4},borderRadius:{xs:0,sm:2},maxHeight:{xs:"100vh",sm:"80vh"},height:{xs:"100vh",sm:"auto"},overflowY:"auto"};return h.jsx(Ao,{open:n,onClose:e,children:h.jsxs(Le,{sx:N,children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsx(_e,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:a("subject_list")}),h.jsx(ur,{onClick:e,children:h.jsx(Aa,{fontSize:"small"})})]}),h.jsxs(ko,{sx:{"& th, & td":{padding:{xs:"4px",sm:"8px"},fontSize:{xs:"0.75rem",sm:"0.875rem"}}},children:[h.jsx(Lo,{children:h.jsxs(Wn,{children:[h.jsx(it,{sx:{fontWeight:"bold"},children:a("subject_name")}),h.jsx(it,{sx:{fontWeight:"bold"},children:a("total_score")}),h.jsx(it,{sx:{fontWeight:"bold"},children:a("teacher")||"Teacher"}),h.jsx(it,{sx:{fontWeight:"bold"},children:a("actions")})]})}),h.jsxs(Po,{children:[t.map((D,M)=>h.jsxs(Wn,{children:[h.jsx(it,{children:f===M?h.jsx(wt,{value:_.name,onChange:R=>j({..._,name:R.target.value}),size:"small",autoFocus:!0,sx:{width:{xs:"100%",sm:"150px"}}}):D.name}),h.jsx(it,{children:f===M?h.jsx(wt,{type:"number",value:_.total,onChange:R=>j({..._,total:parseInt(R.target.value,10)||0}),size:"small",inputProps:{min:0},sx:{width:{xs:"60px",sm:"80px"}}}):D.total}),h.jsx(it,{children:f===M?h.jsx(wt,{value:_.teacher||"",onChange:R=>j({..._,teacher:R.target.value}),size:"small",placeholder:(a("teacher")||"Teacher")+` (${a("optional")||"optional"})`,sx:{width:{xs:"100%",sm:"160px"}}}):D.teacher||"—"}),h.jsx(it,{children:h.jsxs(Le,{sx:{display:"flex",gap:1},children:[f===M?h.jsx(ur,{onClick:S,children:h.jsx(zl,{color:"success",fontSize:"small"})}):h.jsx(ur,{onClick:()=>k(M),children:h.jsx(Mu,{fontSize:"small"})}),h.jsx(ur,{onClick:()=>i(M),children:h.jsx(qu,{color:"error",fontSize:"small"})})]})})]},M)),h.jsxs(Wn,{children:[h.jsx(it,{children:h.jsx(wt,{value:l,onChange:D=>c(D.target.value),placeholder:a("enter_subject_name"),size:"small",sx:{width:{xs:"100%",sm:"150px"}},onKeyPress:D=>{D.key==="Enter"&&d.trim()!==""&&x()}})}),h.jsx(it,{children:h.jsx(wt,{type:"number",value:d,onChange:D=>g(D.target.value),placeholder:a("total"),size:"small",inputProps:{min:0},sx:{width:{xs:"60px",sm:"80px"}},onKeyPress:D=>{D.key==="Enter"&&l.trim()!==""&&x()}})}),h.jsx(it,{children:h.jsx(wt,{value:v,onChange:D=>m(D.target.value),placeholder:(a("teacher")||"Teacher")+` (${a("optional")||"optional"})`,size:"small",sx:{width:{xs:"100%",sm:"160px"}},onKeyPress:D=>{D.key==="Enter"&&l.trim()!==""&&d.trim()!==""&&x()}})}),h.jsx(it,{children:h.jsx(ur,{onClick:x,disabled:l.trim()===""||d.trim()===""||parseInt(d,10)<=0,children:h.jsx(Fu,{color:"primary",fontSize:"small"})})})]})]})]})]})})},Ug=({open:n,onClose:e,students:t,onGenerateReport:r,onGenerateAllReports:s,selectedSequence:i,selectedResultView:a,enableTermChoice:l,onChangeResultView:c})=>{const{t:d}=fn(),[g,v]=xe.useState(null),m=()=>{g!==null&&(r(g),e(),v(null))},f=()=>{s(),e(),v(null)},y={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100vw",sm:"80vw",md:600},maxWidth:"100vw",bgcolor:"background.paper",boxShadow:24,p:{xs:1,sm:4},borderRadius:{xs:0,sm:2},maxHeight:{xs:"100vh",sm:"80vh"},height:{xs:"100vh",sm:"auto"},overflowY:"auto"};return h.jsx(Ao,{open:n,onClose:e,children:h.jsxs(Le,{sx:y,children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsxs(_e,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:[d("generate_student_reports")," - ",d(i)," (",d(a),")"]}),h.jsx(ur,{onClick:e,children:h.jsx(Aa,{fontSize:"small"})})]}),l&&h.jsxs(Al,{fullWidth:!0,sx:{mb:2},children:[h.jsx(kl,{id:"term-select-label",children:d("select_term")||"Select term"}),h.jsxs(Ll,{labelId:"term-select-label",value:a,label:d("select_term")||"Select term",onChange:_=>c&&c(_.target.value),children:[h.jsx(xn,{value:"firstTerm",children:d("firstTerm")||"First Term"}),h.jsx(xn,{value:"secondTerm",children:d("secondTerm")||"Second Term"}),h.jsx(xn,{value:"thirdTerm",children:d("thirdTerm")||"Third Term"}),h.jsx(xn,{value:"annual",children:d("annual")||"Annual"})]})]}),h.jsxs(Al,{fullWidth:!0,sx:{mb:2},children:[h.jsx(kl,{id:"student-select-label",children:d("select_student")}),h.jsx(Ll,{labelId:"student-select-label",value:g!==null?g:"",label:d("select_student"),onChange:_=>v(Number(_.target.value)),children:t.map((_,j)=>h.jsx(xn,{value:j,children:_},j))})]}),h.jsxs(Le,{sx:{display:"flex",gap:2,flexWrap:"wrap"},children:[h.jsx(Gt,{variant:"contained",color:"primary",onClick:m,disabled:g===null,children:d("generate_report")}),h.jsx(Gt,{variant:"contained",color:"secondary",onClick:f,children:d("generate_all_reports")})]})]})})},Wg=({open:n,onClose:e,students:t,subjects:r,selectedSequence:s,onSave:i})=>{const{t:a}=fn(),[l,c]=xe.useState(""),[d,g]=xe.useState([]);xe.useEffect(()=>{g(Array(t.length).fill(""))},[t,n]);const v=(y,_)=>{const j=[...d],x=_===""?"":Number(_),k=r.find(N=>N.name===l),S=k?k.total:100;(x===""||typeof x=="number"&&x>=0&&x<=S)&&(j[y]=x,g(j))},m=()=>{if(!l)return;const y=r.find(_=>_.name===l);y&&(d.forEach((_,j)=>{i(j,l,_.toString(),y.total)}),e())},f={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:{xs:"100vw",sm:"80vw",md:600},maxWidth:"100vw",bgcolor:"background.paper",boxShadow:24,p:{xs:1,sm:4},borderRadius:{xs:0,sm:2},maxHeight:{xs:"100vh",sm:"80vh"},height:{xs:"100vh",sm:"auto"},overflowY:"auto"};return h.jsx(Ao,{open:n,onClose:e,children:h.jsxs(Le,{sx:f,children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[h.jsxs(_e,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:[a("bulk_marks_entry")," - ",a(s)]}),h.jsx(ur,{onClick:e,children:h.jsx(Aa,{fontSize:"small"})})]}),h.jsxs(Al,{fullWidth:!0,sx:{mb:2},children:[h.jsx(kl,{id:"subject-select-label",children:a("subject_name")}),h.jsx(Ll,{labelId:"subject-select-label",value:l,label:a("subject_name"),onChange:y=>c(y.target.value),size:"small",children:r.map(y=>h.jsxs(xn,{value:y.name,children:[y.name," (/",y.total,")"]},y.name))})]}),l&&h.jsxs(h.Fragment,{children:[h.jsx(Le,{sx:{overflowX:"auto",mt:2},children:h.jsxs(ko,{sx:{"& th, & td":{padding:{xs:"4px",sm:"8px"},fontSize:{xs:"0.75rem",sm:"0.875rem"}}},children:[h.jsx(Lo,{children:h.jsxs(Wn,{children:[h.jsx(it,{sx:{fontWeight:"bold"},children:a("student")}),h.jsxs(it,{sx:{fontWeight:"bold"},children:[a("mark")," (/",r.find(y=>y.name===l)?.total,")"]})]})}),h.jsx(Po,{children:t.map((y,_)=>h.jsxs(Wn,{children:[h.jsx(it,{children:y}),h.jsx(it,{children:h.jsx(wt,{type:"number",size:"small",value:d[_],onChange:j=>v(_,j.target.value),inputProps:{min:0,max:r.find(j=>j.name===l)?.total,step:"0.01"},sx:{width:{xs:"80px",sm:"100px"}}})})]},_))})]})}),h.jsx(Gt,{variant:"contained",color:"primary",onClick:m,startIcon:h.jsx(zl,{}),sx:{mt:2},children:a("save_all")})]})]})})};var Uu={},Hg=dn;Object.defineProperty(Uu,"__esModule",{value:!0});var xf=Uu.default=void 0,Vg=Hg(pn()),Gg=h;xf=Uu.default=(0,Vg.default)((0,Gg.jsx)("path",{d:"M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"}),"Home");var Wu={},Kg=dn;Object.defineProperty(Wu,"__esModule",{value:!0});var wf=Wu.default=void 0,Jg=Kg(pn()),Yg=h;wf=Wu.default=(0,Jg.default)((0,Yg.jsx)("path",{d:"M4 7h16v2H4zm0 6h16v-2H4zm0 4h7v-2H4zm0 4h7v-2H4zm11.41-2.83L14 16.75l-1.41 1.41L15.41 21 20 16.42 18.58 15zM4 3v2h16V3z"}),"Grading");var Hu={},Xg=dn;Object.defineProperty(Hu,"__esModule",{value:!0});var _f=Hu.default=void 0,Zg=Xg(pn()),Qg=h;_f=Hu.default=(0,Zg.default)((0,Qg.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"}),"Calculate");var Vu={},em=dn;Object.defineProperty(Vu,"__esModule",{value:!0});var Sf=Vu.default=void 0,tm=em(pn()),rm=h;Sf=Vu.default=(0,tm.default)((0,rm.jsx)("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment");var Gu={},nm=dn;Object.defineProperty(Gu,"__esModule",{value:!0});var jf=Gu.default=void 0,sm=nm(pn()),im=h;jf=Gu.default=(0,sm.default)((0,im.jsx)("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print");const am=({value:n,onChange:e})=>{const{t}=fn();return h.jsx(Un,{sx:{position:"fixed",bottom:0,left:0,right:0,zIndex:1e3,display:{xs:"block",sm:"none"}},elevation:3,children:h.jsxs(f1,{showLabels:!0,value:n,onChange:e,sx:{"& .Mui-selected":{"& .MuiSvgIcon-root, & .MuiBottomNavigationAction-label":{color:"primary.main"},transform:"translateY(-3px)",transition:"transform 0.2s ease-in-out"},"& .MuiBottomNavigationAction-root":{transition:"transform 0.2s ease-in-out",minWidth:0,padding:"6px 2px","@media (maxWidth: 380px)":{"& .MuiBottomNavigationAction-label":{fontSize:"0.65rem"}}}},children:[h.jsx(eo,{label:t("home"),icon:h.jsx(xf,{})}),h.jsx(eo,{label:t("grades"),icon:h.jsx(wf,{})}),h.jsx(eo,{label:t("calculate"),icon:h.jsx(_f,{})}),h.jsx(eo,{label:t("results"),icon:h.jsx(Sf,{})}),h.jsx(eo,{label:t("print"),icon:h.jsx(jf,{})})]})})},Xh=Ot(h.jsx("path",{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6z"}),"Add"),Af=Ot(h.jsx("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20z"}),"ArrowBack"),Pi=Ot(h.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2M9 17H7v-7h2zm4 0h-2V7h2zm4 0h-2v-4h2z"}),"Assessment"),om=Ot(h.jsx("path",{d:"M19 3h-4.18C14.4 1.84 13.3 1 12 1c-1.3 0-2.4.84-2.82 2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-7 0c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1m2 14H7v-2h7zm3-4H7v-2h10zm0-4H7V7h10z"}),"Assignment"),lm=Ot(h.jsx("path",{d:"M7.5 5.6 10 7 8.6 4.5 10 2 7.5 3.4 5 2l1.4 2.5L5 7zm12 9.8L17 14l1.4 2.5L17 19l2.5-1.4L22 19l-1.4-2.5L22 14zM22 2l-2.5 1.4L17 2l1.4 2.5L17 7l2.5-1.4L22 7l-1.4-2.5zm-7.63 5.29a.9959.9959 0 0 0-1.41 0L1.29 18.96c-.39.39-.39 1.02 0 1.41l2.34 2.34c.39.39 1.02.39 1.41 0L16.7 11.05c.39-.39.39-1.02 0-1.41zm-1.03 5.49-2.12-2.12 2.44-2.44 2.12 2.12z"}),"AutoFixHigh"),fl=Ot(h.jsx("path",{d:"M18 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2M6 4h5v8l-2.5-1.5L6 12z"}),"Book"),Zh=Ot(h.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m-5.97 4.06L14.09 6l1.41 1.41L16.91 6l1.06 1.06-1.41 1.41 1.41 1.41-1.06 1.06-1.41-1.4-1.41 1.41-1.06-1.06 1.41-1.41zm-6.78.66h5v1.5h-5zM11.5 16h-2v2H8v-2H6v-1.5h2v-2h1.5v2h2zm6.5 1.25h-5v-1.5h5zm0-2.5h-5v-1.5h5z"}),"Calculate"),cm=Ot(h.jsx("path",{d:"M20 3h-1V1h-2v2H7V1H5v2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2m0 18H4V8h16z"}),"CalendarToday"),uo=Ot(h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m-2 15-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8z"}),"CheckCircle"),kf=Ot(h.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"}),"Close"),um=Ot(h.jsx("path",{d:"M9 11H7v2h2zm4 0h-2v2h2zm4 0h-2v2h2zm2-7h-1V2h-2v2H8V2H6v2H5c-1.11 0-1.99.9-1.99 2L3 20c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2m0 16H5V9h14z"}),"DateRange"),hm=Ot(h.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"}),"Download"),dm=Ot(h.jsx("path",{d:"M19 5h-2V3H7v2H5c-1.1 0-2 .9-2 2v1c0 2.55 1.92 4.63 4.39 4.94.63 1.5 1.98 2.63 3.61 2.96V19H7v2h10v-2h-4v-3.1c1.63-.33 2.98-1.46 3.61-2.96C19.08 12.63 21 10.55 21 8V7c0-1.1-.9-2-2-2M5 8V7h2v3.82C5.84 10.4 5 9.3 5 8m14 0c0 1.3-.84 2.4-2 2.82V7h2z"}),"EmojiEvents"),Qh=Ot(h.jsx("path",{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"}),"ExpandLess"),ed=Ot(h.jsx("path",{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"}),"ExpandMore"),fm=Ot(h.jsx("path",{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-7 12h-2v-2h2zm0-4h-2V6h2z"}),"Feedback"),pm=Ot(h.jsx("path",{d:"M19 9h-4V3H9v6H5l7 7zM5 18v2h14v-2z"}),"GetApp"),gm=Ot(h.jsx("path",{d:"M12 2C6.49 2 2 6.49 2 12s4.49 10 10 10c1.38 0 2.5-1.12 2.5-2.5 0-.61-.23-1.2-.64-1.67-.08-.1-.13-.21-.13-.33 0-.28.22-.5.5-.5H16c3.31 0 6-2.69 6-6 0-4.96-4.49-9-10-9m5.5 11c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5m-3-4c-.83 0-1.5-.67-1.5-1.5S13.67 6 14.5 6s1.5.67 1.5 1.5S15.33 9 14.5 9M5 11.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5S7.33 13 6.5 13 5 12.33 5 11.5m6-4c0 .83-.67 1.5-1.5 1.5S8 8.33 8 7.5 8.67 6 9.5 6s1.5.67 1.5 1.5"}),"Palette"),Oc=Ot(h.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4m0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4"}),"Person"),td=Ot(h.jsx("path",{d:"M11 2v20c-5.07-.5-9-4.79-9-10s3.93-9.5 9-10m2.03 0v8.99H22c-.47-4.74-4.24-8.52-8.97-8.99m0 11.01V22c4.74-.47 8.5-4.25 8.97-8.99z"}),"PieChart"),mm=Ot(h.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.89-2-2-2m0 16H5V7h14zm-5.5-6c0 .83-.67 1.5-1.5 1.5s-1.5-.67-1.5-1.5.67-1.5 1.5-1.5 1.5.67 1.5 1.5M12 9c-2.73 0-5.06 1.66-6 4 .94 2.34 3.27 4 6 4s5.06-1.66 6-4c-.94-2.34-3.27-4-6-4m0 6.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5"}),"Preview"),vm=Ot(h.jsx("path",{d:"M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3m-3 11H8v-5h8zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1m-1-9H6v4h12z"}),"Print"),rd=Ot(h.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"}),"RadioButtonUnchecked"),Rl=Ot(h.jsx("path",{d:"M5 13.18v4L12 21l7-3.82v-4L12 17zM12 3 1 9l11 6 9-4.91V17h2V9z"}),"School"),bm=Ot(h.jsx("path",{d:"m20.38 8.57-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44zm-9.79 6.84a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83"}),"Speed"),jl=Ot(h.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"}),"Star"),ym=Ot(h.jsx("path",{d:"m22 9.24-7.19-.62L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21 12 17.27 18.18 21l-1.63-7.03zM12 15.4l-3.76 2.27 1-4.28-3.32-2.88 4.38-.38L12 6.1l1.71 4.04 4.38.38-3.32 2.88 1 4.28z"}),"StarBorder"),Lf=Ot(h.jsx("path",{d:"M23 8c0 1.1-.9 2-2 2-.18 0-.35-.02-.51-.07l-3.56 3.55c.05.16.07.34.07.52 0 1.1-.9 2-2 2s-2-.9-2-2c0-.18.02-.36.07-.52l-2.55-2.55c-.16.05-.34.07-.52.07s-.36-.02-.52-.07l-4.55 4.56c.05.16.07.33.07.51 0 1.1-.9 2-2 2s-2-.9-2-2 .9-2 2-2c.18 0 .35.02.51.07l4.56-4.55C8.02 9.36 8 9.18 8 9c0-1.1.9-2 2-2s2 .9 2 2c0 .18-.02.36-.07.52l2.55 2.55c.16-.05.34-.07.52-.07s.36.02.52.07l3.55-3.56C19.02 8.35 19 8.18 19 8c0-1.1.9-2 2-2s2 .9 2 2"}),"Timeline"),xa=Ot(h.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}),"TrendingUp"),xm=Ot(h.jsx("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5M12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5m0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"}),"Visibility"),wm=Ot(h.jsx("path",{d:"M1 21h22L12 2zm12-3h-2v-2h2zm0-4h-2v-4h2z"}),"Warning");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="firebasestorage.googleapis.com",_m="storageBucket",Sm=2*60*1e3,jm=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oi=class Nf extends R1{constructor(e,t,r=0){super(Fc(e),`Firebase Storage: ${t} (${Fc(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Nf.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Fc(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}};var ms;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ms||(ms={}));function Fc(n){return"storage/"+n}function Am(){const n="An unknown error occurred, please check the error payload for server response.";return new oi(ms.UNKNOWN,n)}function km(){return new oi(ms.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Lm(){return new oi(ms.CANCELED,"User canceled the upload/download.")}function Pm(n){return new oi(ms.INVALID_URL,"Invalid URL '"+n+"'.")}function Nm(n){return new oi(ms.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function nd(n){return new oi(ms.INVALID_ARGUMENT,n)}function Cf(){return new oi(ms.APP_DELETED,"The Firebase app was deleted.")}function Cm(n){return new oi(ms.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=ns.makeFromUrl(e,t)}catch{return new ns(e,"")}if(r.path==="")return r;throw Nm(e)}static makeFromUrl(e,t){let r=null;const s="([A-Za-z0-9.\\-_]+)";function i(N){N.path.charAt(N.path.length-1)==="/"&&(N.path_=N.path_.slice(0,-1))}const a="(/(.*))?$",l=new RegExp("^gs://"+s+a,"i"),c={bucket:1,path:3};function d(N){N.path_=decodeURIComponent(N.path)}const g="v[A-Za-z0-9_]+",v=t.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",f=new RegExp(`^https?://${v}/${g}/b/${s}/o${m}`,"i"),y={bucket:1,path:3},_=t===Pf?"(?:storage.googleapis.com|storage.cloud.google.com)":t,j="([^?#]*)",x=new RegExp(`^https?://${_}/${s}/${j}`,"i"),S=[{regex:l,indices:c,postModify:i},{regex:f,indices:y,postModify:d},{regex:x,indices:{bucket:1,path:2},postModify:d}];for(let N=0;N<S.length;N++){const D=S[N],M=D.regex.exec(e);if(M){const R=M[D.indices.bucket];let E=M[D.indices.path];E||(E=""),r=new ns(R,E),D.postModify(r);break}}if(r==null)throw Pm(e);return r}}class Tm{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rm(n,e,t){let r=1,s=null,i=null,a=!1,l=0;function c(){return l===2}let d=!1;function g(...j){d||(d=!0,e.apply(null,j))}function v(j){s=setTimeout(()=>{s=null,n(f,c())},j)}function m(){i&&clearTimeout(i)}function f(j,...x){if(d){m();return}if(j){m(),g.call(null,j,...x);return}if(c()||a){m(),g.call(null,j,...x);return}r<64&&(r*=2);let S;l===1?(l=2,S=0):S=(r+Math.random())*1e3,v(S)}let y=!1;function _(j){y||(y=!0,m(),!d&&(s!==null?(j||(l=2),clearTimeout(s),v(0)):j||(l=1)))}return v(0),i=setTimeout(()=>{a=!0,_(!0)},t),_}function Em(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Im(n){return n!==void 0}function sd(n,e,t,r){if(r<e)throw nd(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw nd(`Invalid value for '${n}'. Expected ${t} or less.`)}function Om(n){const e=encodeURIComponent;let t="?";for(const r in n)if(n.hasOwnProperty(r)){const s=e(r)+"="+e(n[r]);t=t+s+"&"}return t=t.slice(0,-1),t}var El;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(El||(El={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fm(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,i=e.indexOf(n)!==-1;return t||s||i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dm{constructor(e,t,r,s,i,a,l,c,d,g,v,m=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=s,this.successCodes_=i,this.additionalRetryCodes_=a,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=g,this.connectionFactory_=v,this.retry=m,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,y)=>{this.resolve_=f,this.reject_=y,this.start_()})}start_(){const e=(r,s)=>{if(s){r(!1,new pl(!1,null,!0));return}const i=this.connectionFactory_();this.pendingConnection_=i;const a=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&i.addUploadProgressListener(a),i.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&i.removeUploadProgressListener(a),this.pendingConnection_=null;const l=i.getErrorCode()===El.NO_ERROR,c=i.getStatus();if(!l||Fm(c,this.additionalRetryCodes_)&&this.retry){const g=i.getErrorCode()===El.ABORT;r(!1,new pl(!1,null,g));return}const d=this.successCodes_.indexOf(c)!==-1;r(!0,new pl(d,i))})},t=(r,s)=>{const i=this.resolve_,a=this.reject_,l=s.connection;if(s.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());Im(c)?i(c):i()}catch(c){a(c)}else if(l!==null){const c=Am();c.serverResponse=l.getErrorText(),this.errorCallback_?a(this.errorCallback_(l,c)):a(c)}else if(s.canceled){const c=this.appDelete_?Cf():Lm();a(c)}else{const c=km();a(c)}};this.canceled_?t(!1,new pl(!1,null,!0)):this.backoffId_=Rm(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Em(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class pl{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function Mm(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function Bm(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function qm(n,e){e&&(n["X-Firebase-GMPID"]=e)}function $m(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function zm(n,e,t,r,s,i,a=!0){const l=Om(n.urlParams),c=n.url+l,d=Object.assign({},n.headers);return qm(d,e),Mm(d,t),Bm(d,i),$m(d,r),new Dm(c,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function Wm(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Il{constructor(e,t){this._service=e,t instanceof ns?this._location=t:this._location=ns.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Il(e,t)}get root(){const e=new ns(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return Wm(this._location.path)}get storage(){return this._service}get parent(){const e=Um(this._location.path);if(e===null)return null;const t=new ns(this._location.bucket,e);return new Il(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw Cm(e)}}function id(n,e){const t=e?.[_m];return t==null?null:ns.makeFromBucketSpec(t,n)}function Hm(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:s}=r;s&&(n._overrideAuthToken=typeof s=="string"?s:D1(s,n.app.options.projectId))}class Vm{constructor(e,t,r,s,i){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=s,this._firebaseVersion=i,this._bucket=null,this._host=Pf,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Sm,this._maxUploadRetryTime=jm,this._requests=new Set,s!=null?this._bucket=ns.makeFromBucketSpec(s,this._host):this._bucket=id(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=ns.makeFromBucketSpec(this._url,e):this._bucket=id(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){sd("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){sd("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Il(this,e)}_makeRequest(e,t,r,s,i=!0){if(this._deleted)return new Tm(Cf());{const a=zm(e,this._appId,r,s,t,this._firebaseVersion,i);return this._requests.add(a),a.getPromise().then(()=>this._requests.delete(a),()=>this._requests.delete(a)),a}}async makeRequestWithTokens(e,t){const[r,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,r,s).getPromise()}}const ad="@firebase/storage",od="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tf="storage";function Gm(n=E1(),e){n=I1(n);const r=O1(n,Tf).getImmediate({identifier:e}),s=F1("storage");return s&&Km(r,...s),r}function Km(n,e,t,r={}){Hm(n,e,t,r)}function Jm(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new Vm(t,r,s,e,T1)}function Ym(){N1(new C1(Tf,Jm,"PUBLIC").setMultipleInstances(!0)),qh(ad,od,""),qh(ad,od,"esm2017")}Ym();const Xm={apiKey:"AIzaSyBbYAFiKF0yAX5WbscREJMI19kWP_dSLJ0",authDomain:"brainboard-wep.firebaseapp.com",projectId:"brainboard-wep",storageBucket:"brainboard-wep.appspot.com",messagingSenderId:"188638634680",appId:"1:188638634680:web:3258a521097badb0dc0a4d",measurementId:"G-RYZDW1XBD9"},Ul=M1(Xm),wa=B1(Ul),tr=q1(Ul);$1(Ul);Gm(Ul);const Rf=xe.createContext({currentUser:null,loading:!0,logout:async()=>{}});function Ku(){return xe.useContext(Rf)}function Zm({children:n}){const[e,t]=xe.useState(null),[r,s]=xe.useState(!0);xe.useEffect(()=>z1(wa,c=>{t(c),s(!1)}),[]);const a={currentUser:e,loading:r,logout:()=>(s(!0),U1(wa).finally(()=>s(!1)))};return h.jsx(Rf.Provider,{value:a,children:n})}const Qm=({firstTermAverage:n,secondTermAverage:e,thirdTermAverage:t,annualAverage:r,annualPassPercentage:s})=>{const{t:i}=fn(),a=d=>d?d>=15?"success":d>=10?"warning":"error":"primary",l=d=>d?d.toFixed(2):"0.00",c=[{label:i("first_term"),value:n,max:20},{label:i("second_term"),value:e,max:20},{label:i("third_term"),value:t,max:20},{label:i("annual_summary"),value:r,max:20}];return h.jsx(Le,{children:h.jsxs(De,{container:!0,spacing:2,children:[h.jsxs(De,{item:!0,xs:12,md:8,children:[h.jsx(_e,{variant:"h6",gutterBottom:!0,children:i("class_average",{value:""})}),c.map((d,g)=>h.jsxs(Le,{sx:{mb:2},children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[h.jsx(_e,{variant:"body2",children:d.label}),h.jsxs(_e,{variant:"body2",fontWeight:"bold",children:[l(d.value),"/",d.max]})]}),h.jsx(Pl,{variant:"determinate",value:(d.value||0)/d.max*100,color:a(d.value),sx:{height:8,borderRadius:4}})]},g))]}),h.jsx(De,{item:!0,xs:12,md:4,children:h.jsx(cr,{sx:{height:"100%",display:"flex",alignItems:"center"},children:h.jsxs(Ir,{sx:{textAlign:"center",width:"100%"},children:[h.jsxs(_e,{variant:"h4",color:"primary",fontWeight:"bold",children:[l(s),"%"]}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:i("pass_percentage",{value:""})}),h.jsx(Le,{sx:{mt:2},children:h.jsx(Pl,{variant:"determinate",value:s||0,color:a(s),sx:{height:6,borderRadius:3}})})]})})})]})})},ld=[{date:"15 May",title:"BEPC (Lower-Secondary)",description:"Official start of BEPC exams for all students in Forms 4",type:"exam",priority:"high"},{date:"26 May",title:"BAC (Upper-Secondary)",description:"Baccalauréat exams for Series A, C, D, E, F students",type:"exam",priority:"high"},{date:"7 Jun",title:"National Day",description:"Public holiday – no classes. Celebrate Cameroon!",type:"holiday",priority:"medium"},{date:"28 Jul",title:"Vacances",description:"Second-term break starts. Time to rest and recharge!",type:"break",priority:"medium"},{date:"2 Sep",title:"Rentrée",description:"Back to school 2025-2026. New academic year begins!",type:"academic",priority:"high"}],no=[{name:"Mme. Evelyne",role:"Mathematics Teacher",message:"Brain-Board cut my grading time in half! Now I can focus more on teaching.",rating:5},{name:"Mr. Ngwa",role:"Physics Teacher",message:"Students love seeing their progress live. It motivates them to work harder.",rating:5},{name:"Dr. Mbah",role:"School Principal",message:"The analytics help us make better decisions for our students.",rating:5},{name:"Mme. Fon",role:"Chemistry Teacher",message:"PDF reports are professional and save me hours of manual work.",rating:5}],e2=({firstTermAverage:n,secondTermAverage:e,thirdTermAverage:t,annualAverage:r,annualPassPercentage:s,totalStudents:i,totalSubjects:a,passRateLabel:l})=>{const c=Sa(),{currentUser:d}=Ku(),{t:g}=fn(),[v,m]=xe.useState(""),[f,y]=xe.useState(""),[_,j]=xe.useState(!1),[x,k]=xe.useState(!1),[S,N]=xe.useState(!1),[D,M]=xe.useState(null),[R,E]=xe.useState(0),[V,K]=xe.useState("");xe.useEffect(()=>{const $=new Date().getHours();$<12?K(g("good_morning")||"Good morning"):$<17?K(g("good_afternoon")||"Good afternoon"):K(g("good_evening")||"Good evening")},[g]),xe.useEffect(()=>{const $=setInterval(()=>{E(W=>(W+1)%no.length)},5e3);return()=>clearInterval($)},[]);const L=$=>{M($),N(!0)},A=()=>N(!1),U=$=>{$.preventDefault(),j(!0),setTimeout(()=>{k(!0),m(""),y(""),setTimeout(()=>k(!1),5e3),j(!1)},2e3)},z=$=>{switch($){case"exam":return"error";case"holiday":return"success";case"break":return"info";case"academic":return"primary";default:return"secondary"}},te=d?.displayName||d?.email?.split("@")[0]||"User";return h.jsxs(ja,{sx:{pb:"120px",pt:2},children:[h.jsxs(Un,{elevation:2,sx:{p:3,mb:3,borderRadius:3,background:`linear-gradient(135deg, ${c.palette.primary.main}20, ${c.palette.secondary.main}20)`},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",width:56,height:56},children:te.charAt(0).toUpperCase()}),h.jsxs(Le,{children:[h.jsxs(_e,{variant:"h5",fontWeight:"bold",children:[V,", ",te,"! 👋"]}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:g("welcome_back")||"Welcome back to Brain-Board"})]})]}),h.jsxs(De,{container:!0,spacing:2,children:[h.jsx(De,{item:!0,xs:4,children:h.jsxs(Le,{textAlign:"center",children:[h.jsx(_e,{variant:"h4",color:"primary",fontWeight:"bold",children:i}),h.jsx(_e,{variant:"caption",color:"text.secondary",children:g("students")})]})}),h.jsx(De,{item:!0,xs:4,children:h.jsxs(Le,{textAlign:"center",children:[h.jsx(_e,{variant:"h4",color:"secondary",fontWeight:"bold",children:a}),h.jsx(_e,{variant:"caption",color:"text.secondary",children:g("subjects")})]})}),h.jsx(De,{item:!0,xs:4,children:h.jsxs(Le,{textAlign:"center",children:[h.jsxs(_e,{variant:"h4",fontWeight:"bold",sx:{color:"success.main"},children:[s?.toFixed(0)||"0","%"]}),h.jsx(_e,{variant:"caption",color:"text.secondary",children:l||g("pass_rate")||"Pass Rate"})]})})]})]}),h.jsxs(Le,{sx:{mb:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[h.jsx(xa,{color:"primary"}),h.jsx(_e,{variant:"h5",component:"h2",fontWeight:"bold",children:g("student_performance")||"Student Performance"})]}),h.jsx(cr,{sx:{p:2,borderRadius:3,boxShadow:3},children:h.jsx(Qm,{firstTermAverage:n,secondTermAverage:e,thirdTermAverage:t,annualAverage:r,annualPassPercentage:s})})]}),h.jsxs(Le,{sx:{mb:3,overflow:"hidden"},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[h.jsx(cm,{color:"primary"}),h.jsx(_e,{variant:"h5",component:"h2",fontWeight:"bold",children:g("school_events")||"School Year Activities"})]}),h.jsx(Le,{sx:{display:"flex",animation:"marquee 30s linear infinite","@keyframes marquee":{"0%":{transform:"translateX(0%)"},"100%":{transform:"translateX(-100%)"}},"&:hover":{animationPlayState:"paused"}},children:[...ld,...ld].map(($,W)=>h.jsx(Le,{sx:{flexShrink:0,width:"200px",pr:2},children:h.jsx(cr,{sx:{borderRadius:3,cursor:"pointer",height:"140px",transition:"transform 0.2s, box-shadow 0.2s","&:hover":{transform:"translateY(-4px)",boxShadow:6}},onClick:()=>L($),children:h.jsxs(Ir,{children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:1},children:[h.jsx(_e,{variant:"body2",component:"strong",sx:{color:"primary.main",fontWeight:"bold"},children:$.date}),h.jsx(Sr,{size:"small",label:$.type,color:z($.type),sx:{fontSize:"0.7rem"}})]}),h.jsx(_e,{variant:"body2",fontWeight:"medium",sx:{mb:1},children:$.title}),h.jsx(_e,{variant:"caption",color:"text.secondary",sx:{display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",overflow:"hidden"},children:$.description})]})})},W))})]}),h.jsxs(Le,{sx:{mb:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:1,mb:2},children:[h.jsx(dm,{color:"primary"}),h.jsx(_e,{variant:"h5",component:"h2",fontWeight:"bold",children:g("testimonials")||"What teachers say"})]}),h.jsx(Nl,{in:!0,children:h.jsx(cr,{sx:{borderRadius:3,boxShadow:3},children:h.jsxs(Ir,{sx:{p:3},children:[h.jsxs(_e,{variant:"body1",sx:{mb:2,fontStyle:"italic"},children:['"',no[R].message,'"']}),h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsxs(Le,{children:[h.jsx(_e,{variant:"subtitle2",color:"primary",fontWeight:"bold",children:no[R].name}),h.jsx(_e,{variant:"caption",color:"text.secondary",children:no[R].role})]}),h.jsx(Le,{children:"⭐".repeat(no[R].rating)})]})]})})},R)]}),h.jsxs(cr,{sx:{p:3,borderRadius:3,boxShadow:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[h.jsx(fm,{color:"primary"}),h.jsx(_e,{variant:"h6",component:"h3",fontWeight:"bold",children:g("share_experience")||"Share your experience"})]}),h.jsx(_e,{variant:"body2",color:"text.secondary",sx:{mb:3},children:g("feedback_description")||"Tell us how Brain-Board helped you improve your teaching and student management."}),h.jsx("form",{onSubmit:U,children:h.jsxs(De,{container:!0,spacing:2,children:[h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:g("your_name")||"Your Name",value:v,onChange:$=>m($.target.value),fullWidth:!0,required:!0,variant:"outlined"})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:g("your_role")||"Your Role",placeholder:"e.g., Mathematics Teacher",fullWidth:!0,variant:"outlined"})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(wt,{label:g("your_feedback")||"Your Feedback",value:f,onChange:$=>y($.target.value),fullWidth:!0,required:!0,multiline:!0,rows:4,variant:"outlined",placeholder:g("feedback_placeholder")||"Share your experience with Brain-Board..."})}),h.jsxs(De,{item:!0,xs:12,children:[h.jsx(Gt,{type:"submit",variant:"contained",size:"large",disabled:_||!v||!f,sx:{borderRadius:2},children:_?g("sending")||"Sending...":g("send_feedback")||"Send Feedback"}),x&&h.jsxs(_e,{color:"success.main",sx:{mt:1,fontWeight:"medium"},children:["✅ ",g("feedback_sent")||"Thanks! Your feedback has been sent."]})]})]})})]}),h.jsx(Ao,{open:S,onClose:A,children:h.jsxs(Le,{sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",bgcolor:"background.paper",borderRadius:3,p:4,width:"min(400px, 90%)",boxShadow:24},children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:2},children:[h.jsxs(Le,{children:[h.jsxs(_e,{variant:"h6",component:"h2",sx:{color:"primary.main",fontWeight:"bold"},children:[D?.date," – ",D?.title]}),h.jsx(Sr,{size:"small",label:D?.type,color:z(D?.type||""),sx:{mt:1}})]}),h.jsx(ur,{onClick:A,size:"small",children:h.jsx(kf,{})})]}),h.jsx(_e,{sx:{mb:3,lineHeight:1.6},children:D?.description}),h.jsx(Gt,{onClick:A,variant:"contained",fullWidth:!0,sx:{borderRadius:2},children:g("close")||"Close"})]})})]})},t2=({students:n,subjects:e,onOpenStudentModal:t,onOpenSubjectModal:r})=>{const{t:s}=fn(),i=Sa(),[a,l]=xe.useState("students"),c=n.length,d=e.length,g=e.length>0?(e.reduce((f,y)=>f+y.total,0)/e.length).toFixed(1):"0",v=f=>f.split(" ").map(y=>y.charAt(0)).join("").toUpperCase().slice(0,2),m=f=>{const y=["primary","secondary","success","warning","info","error"];return y[f%y.length]};return h.jsxs(ja,{sx:{pb:"120px",pt:2},children:[h.jsxs(Un,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:`linear-gradient(135deg, ${i.palette.primary.main}15, ${i.palette.secondary.main}15)`,border:`1px solid ${i.palette.divider}`},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",width:56,height:56},children:h.jsx(Rl,{fontSize:"large"})}),h.jsxs(Le,{children:[h.jsx(_e,{variant:"h4",fontWeight:"bold",color:"primary",children:s("grades_management")||"Grades Management"}),h.jsx(_e,{variant:"body1",color:"text.secondary",children:s("manage_students_subjects")||"Manage your students and subjects efficiently"})]})]}),h.jsxs(De,{container:!0,spacing:3,children:[h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:3},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",mx:"auto",mb:2,width:48,height:48},children:h.jsx(Oc,{})}),h.jsx(_e,{variant:"h3",fontWeight:"bold",color:"primary",children:c}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:s("total_students")||"Total Students"})]})})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:3},children:[h.jsx(qt,{sx:{bgcolor:"secondary.main",mx:"auto",mb:2,width:48,height:48},children:h.jsx(fl,{})}),h.jsx(_e,{variant:"h3",fontWeight:"bold",color:"secondary",children:d}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:s("total_subjects")||"Total Subjects"})]})})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:3},children:[h.jsx(qt,{sx:{bgcolor:"success.main",mx:"auto",mb:2,width:48,height:48},children:h.jsx(xa,{})}),h.jsx(_e,{variant:"h3",fontWeight:"bold",sx:{color:"success.main"},children:g}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:s("avg_subject_total")||"Avg Subject Total"})]})})})]})]}),h.jsxs(Le,{sx:{display:"flex",gap:1,mb:3},children:[h.jsx(Sr,{label:`${s("students")} (${c})`,onClick:()=>l("students"),color:a==="students"?"primary":"default",variant:a==="students"?"filled":"outlined",icon:h.jsx(Oc,{}),sx:{px:2,py:1,fontSize:"1rem","&:hover":{boxShadow:2}}}),h.jsx(Sr,{label:`${s("subjects")} (${d})`,onClick:()=>l("subjects"),color:a==="subjects"?"secondary":"default",variant:a==="subjects"?"filled":"outlined",icon:h.jsx(fl,{}),sx:{px:2,py:1,fontSize:"1rem","&:hover":{boxShadow:2}}})]}),a==="students"&&h.jsx(Nl,{in:a==="students",children:h.jsxs(Le,{children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[h.jsx(_e,{variant:"h5",fontWeight:"bold",children:s("students_list")||"Students List"}),h.jsx(Ih,{badgeContent:c,color:"primary",children:h.jsx(Oc,{color:"primary"})})]}),n.length===0?h.jsxs(cr,{sx:{p:6,textAlign:"center",borderRadius:3},children:[h.jsx(Rl,{sx:{fontSize:64,color:"text.secondary",mb:2}}),h.jsx(_e,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:s("no_students_yet")||"No students added yet"}),h.jsx(_e,{variant:"body2",color:"text.secondary",sx:{mb:3},children:s("add_first_student")||"Add your first student to get started"})]}):h.jsx(De,{container:!0,spacing:2,children:n.map((f,y)=>h.jsx(De,{item:!0,xs:12,sm:6,md:4,children:h.jsx(ri,{in:!0,style:{transitionDelay:`${y*100}ms`},children:h.jsx(cr,{sx:{borderRadius:3,boxShadow:2,transition:"all 0.3s ease","&:hover":{boxShadow:6,transform:"translateY(-4px)"}},children:h.jsxs(Ir,{sx:{p:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[h.jsx(qt,{src:f.imageUrl,sx:{bgcolor:`${m(y)}.main`,width:48,height:48,fontSize:"1.2rem",fontWeight:"bold"},children:v(f.name)}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h6",fontWeight:"bold",noWrap:!0,children:f.name}),h.jsxs(_e,{variant:"body2",color:"text.secondary",children:[s("student_id"),": ",f.id.slice(-6)]})]})]}),h.jsx(En,{sx:{my:2}}),h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(Sr,{size:"small",label:s("active")||"Active",color:"success",variant:"outlined"}),h.jsx(Le,{children:h.jsx(ki,{title:s("view_details")||"View Details",children:h.jsx(ur,{size:"small",color:"primary",children:h.jsx(jl,{})})})})]})]})})})},f.id))})]})}),a==="subjects"&&h.jsx(Nl,{in:a==="subjects",children:h.jsxs(Le,{children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:3},children:[h.jsx(_e,{variant:"h5",fontWeight:"bold",children:s("subjects_list")||"Subjects List"}),h.jsx(Ih,{badgeContent:d,color:"secondary",children:h.jsx(fl,{color:"secondary"})})]}),e.length===0?h.jsxs(cr,{sx:{p:6,textAlign:"center",borderRadius:3},children:[h.jsx(om,{sx:{fontSize:64,color:"text.secondary",mb:2}}),h.jsx(_e,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:s("no_subjects_yet")||"No subjects added yet"}),h.jsx(_e,{variant:"body2",color:"text.secondary",sx:{mb:3},children:s("add_first_subject")||"Add your first subject to get started"})]}):h.jsx(De,{container:!0,spacing:2,children:e.map((f,y)=>h.jsx(De,{item:!0,xs:12,sm:6,md:4,children:h.jsx(ri,{in:!0,style:{transitionDelay:`${y*100}ms`},children:h.jsx(cr,{sx:{borderRadius:3,boxShadow:2,transition:"all 0.3s ease","&:hover":{boxShadow:6,transform:"translateY(-4px)"}},children:h.jsxs(Ir,{sx:{p:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:2},children:[h.jsx(qt,{sx:{bgcolor:`${m(y+3)}.main`,width:48,height:48},children:h.jsx(fl,{})}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h6",fontWeight:"bold",noWrap:!0,children:f.name}),h.jsxs(_e,{variant:"body2",color:"text.secondary",children:[s("max_score"),": ",f.total," ",s("points")||"points"]})]})]}),h.jsx(En,{sx:{my:2}}),h.jsxs(Le,{sx:{mb:2},children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[h.jsx(_e,{variant:"body2",color:"text.secondary",children:s("difficulty_level")||"Difficulty Level"}),h.jsx(_e,{variant:"body2",fontWeight:"bold",children:f.total>=20?s("high")||"High":f.total>=15?s("medium")||"Medium":s("low")||"Low"})]}),h.jsx(Pl,{variant:"determinate",value:f.total/20*100,color:f.total>=20?"error":f.total>=15?"warning":"success",sx:{borderRadius:2,height:6}})]}),h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[h.jsx(Sr,{size:"small",label:`${f.total} pts`,color:"secondary",variant:"outlined"}),h.jsx(Le,{children:h.jsx(ki,{title:s("view_analytics")||"View Analytics",children:h.jsx(ur,{size:"small",color:"secondary",children:h.jsx(xa,{})})})})]})]})})})},f.id))})]})}),h.jsx(Le,{sx:{position:"fixed",bottom:140,right:24,zIndex:1e3},children:a==="students"?h.jsx(ki,{title:s("add_student")||"Add Student",children:h.jsx(Oh,{color:"primary",onClick:t,sx:{boxShadow:4,"&:hover":{boxShadow:8}},children:h.jsx(Xh,{})})}):h.jsx(ki,{title:s("add_subject")||"Add Subject",children:h.jsx(Oh,{color:"secondary",onClick:r,sx:{boxShadow:4,"&:hover":{boxShadow:8}},children:h.jsx(Xh,{})})})})]})};var Ju={},r2=dn;Object.defineProperty(Ju,"__esModule",{value:!0});var Ef=Ju.default=void 0,n2=r2(pn()),s2=h;Ef=Ju.default=(0,n2.default)((0,s2.jsx)("path",{d:"M21 10.12h-6.78l2.74-2.82c-2.73-2.7-7.15-2.8-9.88-.1-2.73 2.71-2.73 7.08 0 9.79s7.15 2.71 9.88 0C18.32 15.65 19 14.08 19 12.1h2c0 1.98-.88 4.55-2.64 6.29-3.51 3.48-9.21 3.48-12.72 0-3.5-3.47-3.53-9.11-.02-12.58s9.14-3.47 12.65 0L21 3zM12.5 8v4.25l3.5 2.08-.72 1.21L11 13V8z"}),"Update");const i2=({students:n,subjects:e,marks:t,selectedSequence:r,studentComments:s,onMarkChange:i,onCommentChange:a})=>{const{t:l}=fn();return h.jsx(Le,{sx:{overflowX:"auto"},children:h.jsxs(ko,{sx:{bgcolor:"white",borderCollapse:"separate",borderSpacing:0,minWidth:600,width:"100%","& th, & td":{borderBottom:"1px solid #e0e0e0",padding:{xs:"4px",sm:"8px"},fontSize:{xs:"0.75rem",sm:"0.875rem"},wordBreak:"break-word",maxWidth:{xs:80,sm:160}}},children:[h.jsx(Lo,{children:h.jsxs(Wn,{children:[h.jsx(it,{sx:{fontWeight:"bold",minWidth:{xs:100,sm:150},position:"sticky",left:0,bgcolor:"white",zIndex:1},children:l("student")}),e.map(c=>h.jsxs(it,{sx:{fontWeight:"bold",minWidth:{xs:80,sm:120}},children:[c.name," (/",c.total,")"]},c.name)),h.jsx(it,{sx:{fontWeight:"bold",minWidth:{xs:150,sm:200}},children:l("comment")})]})}),h.jsx(Po,{children:n.map((c,d)=>h.jsxs(Wn,{children:[h.jsx(it,{sx:{verticalAlign:"middle",position:"sticky",left:0,bgcolor:"white",zIndex:1},children:c}),e.map(g=>{const v=t[d]?.[r]?.[g.name]??"",f=(typeof v=="number"?v:0)<g.total/2;return h.jsx(it,{children:h.jsx(wt,{type:"number",size:"small",value:v,onChange:y=>i(d,g.name,y.target.value,g.total),inputProps:{min:0,max:g.total,step:"0.01"},sx:{width:{xs:"50px",sm:"80px"},"& .MuiInputBase-input":{color:f?"red":"inherit",fontSize:{xs:"0.75rem",sm:"0.875rem"}},"& .MuiOutlinedInput-root":{"& fieldset":{borderColor:f?"red":"inherit"},"&:hover fieldset":{borderColor:f?"red":"inherit"},"&.Mui-focused fieldset":{borderColor:f?"red":"primary.main"}}}})},`${d}-${g.name}`)}),h.jsx(it,{children:h.jsx(wt,{size:"small",value:s[d]?.[r]||"",onChange:g=>a(d,r,g.target.value),placeholder:l("enter_comment"),sx:{width:{xs:"120px",sm:"180px"}}})})]},`student-${d}`))})]})})},a2=({students:n,subjects:e,marks:t,selectedSequence:r,studentComments:s,hasMarks:i,onSequenceChange:a,onMarkChange:l,onCommentChange:c,onCalculateSequenceResults:d,onCalculateTermResults:g,onOpenBulkMarksModal:v})=>{const{t:m}=fn(),f=Sa(),[y,_]=xe.useState(!1),[j,x]=xe.useState("idle"),[k,S]=xe.useState({completed:0,total:0}),[N,D]=xe.useState(!1),[M,R]=xe.useState(0);xe.useEffect(()=>{if(n.length>0&&e.length>0){let z=0,te=n.length*e.length;n.forEach(($,W)=>{e.forEach(Y=>{const J=t[W]?.[r]?.[Y.name];J!=null&&J!==""&&z++})}),S({completed:z,total:te})}},[t,r,n,e]);const E=async()=>{_(!0),R(1),setTimeout(()=>{d(),_(!1),D(!0),R(2)},1500)},V=async()=>{_(!0),R(1),setTimeout(()=>{g(),_(!1),D(!0),R(2)},2e3)},K=()=>{x("saving"),setTimeout(()=>{x("saved"),setTimeout(()=>x("idle"),2e3)},1e3)},L=k.total>0?k.completed/k.total*100:0,A=z=>({firstSequence:m("first_sequence")||"First Sequence",secondSequence:m("second_sequence")||"Second Sequence",thirdSequence:m("third_sequence")||"Third Sequence",fourthSequence:m("fourth_sequence")||"Fourth Sequence",fifthSequence:m("fifth_sequence")||"Fifth Sequence",sixthSequence:m("sixth_sequence")||"Sixth Sequence"})[z],U=[{label:m("enter_marks")||"Enter Marks",description:m("input_student_marks")||"Input student marks and comments"},{label:m("calculate")||"Calculate",description:m("process_calculations")||"Process calculations and generate results"},{label:m("view_results")||"View Results",description:m("review_calculated_results")||"Review calculated results in Results page"}];return h.jsxs(ja,{sx:{pb:"120px",pt:2},children:[h.jsxs(Un,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:`linear-gradient(135deg, ${f.palette.primary.main}15, ${f.palette.secondary.main}15)`,border:`1px solid ${f.palette.divider}`},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",width:56,height:56},children:h.jsx(Zh,{fontSize:"large"})}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h4",fontWeight:"bold",color:"primary",children:m("calculate_marks")||"Calculate Marks"}),h.jsx(_e,{variant:"body1",color:"text.secondary",children:m("enter_marks_and_calculate")||"Enter student marks, add comments, and calculate results"})]}),h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:1},children:[j==="saving"&&h.jsx(co,{size:20}),j==="saved"&&h.jsx(ki,{title:m("auto_saved")||"Auto-saved",children:h.jsx(uo,{color:"success"})})]})]}),h.jsxs(De,{container:!0,spacing:3,children:[h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"success.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(uo,{})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"success.main",children:k.completed}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:m("marks_entered")||"Marks Entered"})]})})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"warning.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(bm,{})}),h.jsxs(_e,{variant:"h5",fontWeight:"bold",color:"warning.main",children:[L.toFixed(0),"%"]}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:m("completion_rate")||"Completion Rate"})]})})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"info.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(Lf,{})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"info.main",children:A(r)}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:m("current_sequence")||"Current Sequence"})]})})})]}),h.jsxs(Le,{sx:{mt:3},children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",mb:1},children:[h.jsx(_e,{variant:"body2",color:"text.secondary",children:m("overall_progress")||"Overall Progress"}),h.jsxs(_e,{variant:"body2",fontWeight:"bold",children:[k.completed," / ",k.total]})]}),h.jsx(Pl,{variant:"determinate",value:L,sx:{height:8,borderRadius:4,backgroundColor:f.palette.grey[200],"& .MuiLinearProgress-bar":{borderRadius:4,background:L>=100?`linear-gradient(90deg, ${f.palette.success.main}, ${f.palette.success.light})`:`linear-gradient(90deg, ${f.palette.primary.main}, ${f.palette.secondary.main})`}}})]})]}),h.jsxs(De,{container:!0,spacing:3,children:[n.length>0&&e.length>0&&h.jsx(De,{item:!0,xs:12,children:h.jsx(Nl,{in:!0,children:h.jsxs(Un,{elevation:3,sx:{p:{xs:2,sm:3},borderRadius:3,transition:"all 0.3s ease-in-out","&:hover":{boxShadow:6,transform:"translateY(-2px)"},overflowX:"auto"},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[h.jsx(qt,{sx:{bgcolor:"secondary.main",width:48,height:48},children:h.jsx(Pi,{})}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h6",fontWeight:"bold",children:m("marks_entry_section")||"Marks Entry Section"}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:m("enter_marks_and_comments_desc")||"Enter marks and comments for each student"})]}),h.jsx(Sr,{label:`${L.toFixed(0)}% ${m("complete")||"Complete"}`,color:L>=100?"success":L>=50?"warning":"error",variant:"outlined"})]}),h.jsxs(Al,{fullWidth:!0,sx:{mb:3},children:[h.jsx(kl,{children:m("select_sequence")||"Select Sequence"}),h.jsxs(Ll,{value:r,label:m("select_sequence")||"Select Sequence",onChange:z=>{a(z.target.value),R(0)},sx:{borderRadius:2},children:[h.jsx(xn,{value:"firstSequence",children:m("first_sequence")}),h.jsx(xn,{value:"secondSequence",children:m("second_sequence")}),h.jsx(xn,{value:"thirdSequence",children:m("third_sequence")}),h.jsx(xn,{value:"fourthSequence",children:m("fourth_sequence")}),h.jsx(xn,{value:"fifthSequence",children:m("fifth_sequence")}),h.jsx(xn,{value:"sixthSequence",children:m("sixth_sequence")})]})]}),h.jsx(Le,{sx:{width:"100%",overflowX:"auto",mb:3},children:h.jsx(i2,{students:n.map(z=>z.name),subjects:e.map(z=>({name:z.name,total:z.total})),marks:t,selectedSequence:r,studentComments:s,onMarkChange:(z,te,$,W)=>{l(z,te,$,W),K()},onCommentChange:(z,te,$)=>{c(z,te,$),K()}})}),h.jsxs(Le,{sx:{display:"flex",gap:2,flexWrap:"wrap",flexDirection:{xs:"column",sm:"row"},alignItems:"center"},children:[h.jsx(ri,{in:!y,children:h.jsx(Gt,{variant:"contained",size:"large",onClick:E,disabled:!i||y,startIcon:y?h.jsx(co,{size:20}):h.jsx(Zh,{}),sx:{width:{xs:"100%",sm:"auto"},borderRadius:3,px:4,py:1.5,background:`linear-gradient(45deg, ${f.palette.primary.main}, ${f.palette.primary.dark})`,"&:hover":{background:`linear-gradient(45deg, ${f.palette.primary.dark}, ${f.palette.primary.main})`,transform:"translateY(-2px)",boxShadow:6}},children:y?m("calculating")||"Calculating...":m("calculate_sequence")||"Calculate Sequence"})}),h.jsx(ri,{in:!y,style:{transitionDelay:"100ms"},children:h.jsx(Gt,{variant:"contained",color:"secondary",size:"large",onClick:V,disabled:!i||y,startIcon:y?h.jsx(co,{size:20}):h.jsx(Pi,{}),sx:{width:{xs:"100%",sm:"auto"},borderRadius:3,px:4,py:1.5,"&:hover":{transform:"translateY(-2px)",boxShadow:6}},children:y?m("calculating")||"Calculating...":m("calculate_terms")||"Calculate Terms"})}),h.jsx(ri,{in:!y,style:{transitionDelay:"200ms"},children:h.jsx(Gt,{variant:"contained",color:"warning",size:"large",onClick:v,startIcon:h.jsx(Ef,{}),sx:{width:{xs:"100%",sm:"auto"},borderRadius:3,px:4,py:1.5,"&:hover":{transform:"translateY(-2px)",boxShadow:6}},children:m("bulk_entry")||"Bulk Entry"})})]})]})})}),h.jsx(De,{item:!0,xs:12,children:h.jsxs(Un,{elevation:2,sx:{p:3,borderRadius:2},children:[h.jsxs(_e,{variant:"h6",gutterBottom:!0,sx:{display:"flex",alignItems:"center",gap:1},children:[h.jsx(xa,{color:"primary"}),m("calculation_process")||"Calculation Process"]}),h.jsx(p1,{activeStep:M,orientation:"horizontal",sx:{mt:2},children:U.map(z=>h.jsx(g1,{children:h.jsx(m1,{children:z.label})},z.label))})]})}),(n.length===0||e.length===0)&&h.jsx(De,{item:!0,xs:12,children:h.jsxs(Un,{sx:{p:6,textAlign:"center",borderRadius:3},children:[h.jsx(qt,{sx:{bgcolor:"warning.main",mx:"auto",mb:2,width:64,height:64},children:h.jsx(wm,{fontSize:"large"})}),h.jsx(_e,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:m("setup_required")||"Setup Required"}),h.jsx(_e,{variant:"body2",color:"text.secondary",sx:{mb:3},children:n.length===0&&e.length===0?m("add_students_subjects_first")||"Please add students and subjects first in the Grades section":n.length===0?m("add_students_first")||"Please add students first in the Grades section":m("add_subjects_first")||"Please add subjects first in the Grades section"}),h.jsx(Gt,{variant:"contained",color:"primary",onClick:()=>window.location.hash="#grades",startIcon:h.jsx(lm,{}),children:m("go_to_grades")||"Go to Grades"})]})})]}),h.jsx(v1,{open:N,autoHideDuration:4e3,onClose:()=>D(!1),anchorOrigin:{vertical:"top",horizontal:"center"},children:h.jsx(Tu,{onClose:()=>D(!1),severity:"success",variant:"filled",sx:{borderRadius:2},children:m("calculation_complete")||"Calculation completed successfully! Check the Results page to view detailed results."})})]})},o2=({selectedResultView:n,sequenceResults:e,firstTermResults:t,secondTermResults:r,thirdTermResults:s,annualResults:i,sequenceClassAverage:a,firstTermClassAverage:l,secondTermClassAverage:c,thirdTermClassAverage:d,annualClassAverage:g,sequencePassPercentage:v,firstTermPassPercentage:m,secondTermPassPercentage:f,thirdTermPassPercentage:y,annualPassPercentage:_,passingMark:j,onResultViewChange:x,onDownloadPDF:k})=>{const{t:S}=fn(),N=Sa(),[D,M]=xe.useState("selection"),[R,E]=xe.useState(null),[V,K]=xe.useState(!1),[L,A]=xe.useState(!1),[U,z]=xe.useState(null),te=[{key:"sequence",label:S("sequence_results")||"Sequence Results",results:e,average:a,passRate:v}],$=[{key:"firstTerm",label:S("first_term_results")||"First Term Results",results:t,average:l,passRate:m},{key:"secondTerm",label:S("second_term_results")||"Second Term Results",results:r,average:c,passRate:f},{key:"thirdTerm",label:S("third_term_results")||"Third Term Results",results:s,average:d,passRate:y},{key:"annual",label:S("annual_results")||"Annual Results",results:i,average:g,passRate:_}],W=ge=>{x(ge),z(ge),M("fullpage-results")},Y=()=>{M("selection"),z(null),E(null),K(!1),A(!1)},J=()=>{switch(U){case"sequence":return e;case"firstTerm":return t;case"secondTerm":return r;case"thirdTerm":return s;case"annual":return i;default:return e}},ie=()=>{switch(U){case"sequence":return a;case"firstTerm":return l;case"secondTerm":return c;case"thirdTerm":return d;case"annual":return g;default:return a}},pe=()=>{switch(U){case"sequence":return v;case"firstTerm":return m;case"secondTerm":return f;case"thirdTerm":return y;case"annual":return _;default:return v}},P=ge=>{switch(ge){case"sequence":return S("sequence_results")||"Sequence Results";case"firstTerm":return S("first_term_results")||"First Term Results";case"secondTerm":return S("second_term_results")||"Second Term Results";case"thirdTerm":return S("third_term_results")||"Third Term Results";case"annual":return S("annual_results")||"Annual Results";default:return ge}},B=J(),H=ie(),Z=pe(),Q=B.length>0,le=Q?B[0]:null,ue=B.length,he=B.filter(ge=>"average"in ge?ge.average>=j:"finalAverage"in ge?ge.finalAverage>=j:!1).length;return D==="fullpage-results"?h.jsxs(Le,{sx:{minHeight:"100vh",bgcolor:"background.default",p:2},children:[h.jsxs(Le,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,p:2,bgcolor:"background.paper",borderRadius:2,boxShadow:1},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2},children:[h.jsx(ur,{onClick:Y,sx:{bgcolor:"primary.main",color:"white","&:hover":{bgcolor:"primary.dark"}},children:h.jsx(Af,{})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"primary",children:P(U||"")})]}),h.jsx(Gt,{variant:"contained",onClick:k,startIcon:h.jsx(hm,{}),sx:{bgcolor:"primary.main","&:hover":{bgcolor:"primary.dark"}},children:S("download_pdf")||"Download PDF"})]}),h.jsx(Un,{sx:{width:"100%",overflow:"hidden",borderRadius:2,boxShadow:2},children:h.jsx(b1,{sx:{maxHeight:"calc(100vh - 140px)","&::-webkit-scrollbar":{width:"6px",height:"6px"},"&::-webkit-scrollbar-track":{background:"#f1f1f1"},"&::-webkit-scrollbar-thumb":{background:N.palette.primary.main,borderRadius:"3px"}},children:h.jsxs(ko,{stickyHeader:!0,size:"small",sx:{width:"100%","& .MuiTableHead-root":{"& .MuiTableCell-root":{bgcolor:N.palette.primary.main,color:"white",fontWeight:"bold",fontSize:"0.65rem",padding:"6px 8px",borderBottom:"none",whiteSpace:"nowrap",lineHeight:1.2}},"& .MuiTableBody-root":{"& .MuiTableRow-root":{"&:nth-of-type(even)":{bgcolor:"#f8f9fa"},"&:hover":{bgcolor:N.palette.action.hover}},"& .MuiTableCell-root":{padding:"4px 8px",fontSize:"0.6rem",borderBottom:`1px solid ${N.palette.divider}`,whiteSpace:"nowrap",lineHeight:1.2,"& .MuiChip-root":{fontSize:"0.55rem",height:"18px","& .MuiChip-label":{padding:"0 4px"}}}}},children:[h.jsx(Lo,{children:h.jsxs(Wn,{children:[h.jsx(it,{align:"center",sx:{width:"50px"},children:S("rank")||"Rank"}),h.jsx(it,{sx:{minWidth:120},children:S("student")||"Student"}),U==="sequence"&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",sx:{width:"80px"},children:S("total_marks")||"Total"}),h.jsx(it,{align:"center",sx:{width:"60px"},children:S("average")||"Avg"})]}),(U==="firstTerm"||U==="secondTerm"||U==="thirdTerm")&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",sx:{width:"80px"},children:S("total_marks")||"Total"}),h.jsx(it,{align:"center",sx:{width:"60px"},children:S("average")||"Avg"})]}),U==="annual"&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",sx:{width:"60px"},children:S("first_term")||"1st"}),h.jsx(it,{align:"center",sx:{width:"60px"},children:S("second_term")||"2nd"}),h.jsx(it,{align:"center",sx:{width:"60px"},children:S("third_term")||"3rd"}),h.jsx(it,{align:"center",sx:{width:"70px"},children:S("final_average")||"Final"})]}),h.jsx(it,{align:"center",sx:{width:"60px"},children:S("status")||"Status"})]})}),h.jsx(Po,{children:J().map((ge,Ae)=>h.jsxs(Wn,{children:[h.jsx(it,{align:"center",children:h.jsx(Sr,{label:ge.rank||Ae+1,color:Ae<3?"primary":"default",size:"small"})}),h.jsx(it,{sx:{fontWeight:"medium"},children:ge.student}),U==="sequence"&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",children:ge.totalMarks}),h.jsx(it,{align:"center",children:ge.average?.toFixed(1)})]}),(U==="firstTerm"||U==="secondTerm"||U==="thirdTerm")&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",children:ge.totalMarks}),h.jsx(it,{align:"center",children:ge.average?.toFixed(1)})]}),U==="annual"&&h.jsxs(h.Fragment,{children:[h.jsx(it,{align:"center",children:ge.firstTermAverage?.toFixed(1)}),h.jsx(it,{align:"center",children:ge.secondTermAverage?.toFixed(1)}),h.jsx(it,{align:"center",children:ge.thirdTermAverage?.toFixed(1)}),h.jsx(it,{align:"center",children:ge.finalAverage?.toFixed(1)})]}),h.jsx(it,{align:"center",children:h.jsx(Sr,{label:(U==="annual"?ge.finalAverage>=j:ge.average>=j)?S("pass")||"PASS":S("fail")||"FAIL",color:(U==="annual"?ge.finalAverage>=j:ge.average>=j)?"success":"error",size:"small"})})]},Ae))})]})})}),h.jsxs(Un,{sx:{mt:3,p:3,borderRadius:3,background:`linear-gradient(135deg, ${N.palette.background.paper}, ${N.palette.grey[50]})`,border:`1px solid ${N.palette.divider}`,boxShadow:3},children:[h.jsxs(_e,{variant:"h6",fontWeight:"bold",color:"primary",gutterBottom:!0,sx:{mb:3},children:["📊 ",S("class_statistics")||"Class Statistics"]}),h.jsxs(De,{container:!0,spacing:3,children:[h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsxs(Le,{sx:{textAlign:"center",p:2,borderRadius:2,background:`linear-gradient(135deg, ${N.palette.primary.main}10, ${N.palette.primary.light}15)`,border:`1px solid ${N.palette.primary.main}20`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:`0 4px 12px ${N.palette.primary.main}20`}},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",mx:"auto",mb:1.5,width:48,height:48,boxShadow:2},children:h.jsx(xa,{})}),h.jsx(_e,{variant:"h4",fontWeight:"bold",color:"primary.main",sx:{mb:.5},children:ie()?.toFixed(1)||"0.0"}),h.jsx(_e,{variant:"body2",color:"text.secondary",fontWeight:"medium",children:S("class_average")||"Class Average"}),h.jsx(_e,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:ie()&&ie()>=50?"🎯 Above Passing":"⚠️ Below Passing"})]})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsxs(Le,{sx:{textAlign:"center",p:2,borderRadius:2,background:`linear-gradient(135deg, ${N.palette.success.main}10, ${N.palette.success.light}15)`,border:`1px solid ${N.palette.success.main}20`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:`0 4px 12px ${N.palette.success.main}20`}},children:[h.jsx(qt,{sx:{bgcolor:"success.main",mx:"auto",mb:1.5,width:48,height:48,boxShadow:2},children:h.jsx(uo,{})}),h.jsxs(_e,{variant:"h4",fontWeight:"bold",color:"success.main",sx:{mb:.5},children:[pe()?.toFixed(0)||"0","%"]}),h.jsx(_e,{variant:"body2",color:"text.secondary",fontWeight:"medium",children:S("pass_rate")||"Pass Rate"}),h.jsxs(_e,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:[he," of ",ue," passed"]})]})}),h.jsx(De,{item:!0,xs:12,sm:4,children:h.jsxs(Le,{sx:{textAlign:"center",p:2,borderRadius:2,background:`linear-gradient(135deg, ${N.palette.info.main}10, ${N.palette.info.light}15)`,border:`1px solid ${N.palette.info.main}20`,transition:"all 0.3s ease","&:hover":{transform:"translateY(-2px)",boxShadow:`0 4px 12px ${N.palette.info.main}20`}},children:[h.jsx(qt,{sx:{bgcolor:"info.main",mx:"auto",mb:1.5,width:48,height:48,boxShadow:2},children:h.jsx(Rl,{})}),h.jsx(_e,{variant:"h4",fontWeight:"bold",color:"info.main",sx:{mb:.5},children:ue}),h.jsx(_e,{variant:"body2",color:"text.secondary",fontWeight:"medium",children:S("total_students")||"Total Students"}),h.jsx(_e,{variant:"caption",color:"text.secondary",sx:{mt:.5,display:"block"},children:le?`🏆 Top: ${le.student}`:"📊 Enrolled"})]})})]}),h.jsx(Le,{sx:{mt:3,p:2,borderRadius:2,bgcolor:"grey.50",border:`1px solid ${N.palette.divider}`},children:h.jsxs(_e,{variant:"body2",color:"text.secondary",sx:{display:"flex",alignItems:"center",gap:1},children:["💡 ",h.jsx("strong",{children:"Quick Insight:"}),pe()&&pe()>=80?"Excellent class performance! Most students are excelling.":pe()&&pe()>=60?"Good class performance with room for improvement.":"Class needs additional support to improve overall performance."]})})]})]}):h.jsxs(ja,{sx:{pb:"120px",pt:2},children:[h.jsxs(Un,{elevation:3,sx:{p:3,mb:3,borderRadius:3,background:`linear-gradient(135deg, ${N.palette.info.main}15, ${N.palette.success.main}15)`,border:`1px solid ${N.palette.divider}`},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center",gap:2,mb:3},children:[h.jsx(qt,{sx:{bgcolor:"info.main",width:56,height:56},children:h.jsx(Pi,{fontSize:"large"})}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h4",fontWeight:"bold",color:"info.main",children:S("results_analytics")||"Results & Analytics"}),h.jsx(_e,{variant:"body1",color:"text.secondary",children:S("view_analyze_results")||"View and analyze calculated student results with advanced insights"})]})]}),h.jsx(Le,{sx:{display:"flex",gap:1,mb:3,alignItems:"center"},children:D==="fullpage-results"&&h.jsxs(h.Fragment,{children:[h.jsxs(Gt,{variant:"outlined",size:"small",onClick:Y,sx:{borderRadius:2},children:["← ",S("back_to_selection")||"Back to Selection"]}),h.jsxs(_e,{variant:"body2",color:"text.secondary",sx:{mx:1},children:["/ ",P(n)]})]})}),D==="selection"&&h.jsxs(De,{container:!0,spacing:3,children:[h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"success.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(xa,{})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"success.main",children:H?.toFixed(1)||"0.0"}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:S("class_average")||"Class Average"})]})})}),h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"info.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(td,{})}),h.jsxs(_e,{variant:"h5",fontWeight:"bold",color:"info.main",children:[Z?.toFixed(0)||"0","%"]}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:S("pass_rate")||"Pass Rate"})]})})}),h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"warning.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(xm,{})}),h.jsxs(_e,{variant:"h5",fontWeight:"bold",color:"warning.main",children:[he,"/",ue]}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:S("passed_students")||"Passed Students"})]})})}),h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(cr,{sx:{borderRadius:2,boxShadow:2},children:h.jsxs(Ir,{sx:{textAlign:"center",py:2},children:[h.jsx(qt,{sx:{bgcolor:"error.main",mx:"auto",mb:1,width:40,height:40},children:h.jsx(Pi,{})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"error.main",children:le?.rank||"-"}),h.jsx(_e,{variant:"body2",color:"text.secondary",children:S("top_rank")||"Top Rank"})]})})})]})]}),h.jsxs(De,{container:!0,spacing:3,children:[h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(ri,{in:!0,children:h.jsxs(cr,{elevation:4,sx:{borderRadius:3,transition:"all 0.3s ease-in-out","&:hover":{boxShadow:8,transform:"translateY(-4px)"},background:`linear-gradient(135deg, ${N.palette.primary.main}15, ${N.palette.primary.dark}15)`,border:`1px solid ${N.palette.primary.main}30`},children:[h.jsx(Fh,{onClick:()=>K(!V),children:h.jsxs(Ir,{sx:{p:4,textAlign:"center"},children:[h.jsx(qt,{sx:{bgcolor:"primary.main",mx:"auto",mb:2,width:64,height:64},children:h.jsx(Lf,{fontSize:"large"})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"primary",gutterBottom:!0,children:S("sequence_feature")||"Sequence"}),h.jsx(_e,{variant:"body1",color:"text.secondary",sx:{mb:2},children:S("view_sequence_results")||"View results for individual sequences"}),h.jsx(Sr,{label:te.filter(ge=>ge.results.length>0).length+" "+(S("available")||"Available"),color:"primary",variant:"outlined",size:"small"}),h.jsx(Le,{sx:{mt:2},children:V?h.jsx(Qh,{}):h.jsx(ed,{})})]})}),h.jsxs(Dh,{in:V,timeout:"auto",unmountOnExit:!0,children:[h.jsx(En,{}),h.jsx(Cl,{sx:{px:2,pb:2},children:te.map(ge=>h.jsxs(Mh,{onClick:()=>W(ge.key),disabled:ge.results.length===0,sx:{borderRadius:2,mb:1,"&:hover":{bgcolor:"primary.main",color:"white"}},children:[h.jsx(Tl,{children:ge.results.length>0?h.jsx(uo,{color:"success"}):h.jsx(rd,{color:"disabled"})}),h.jsx(ba,{primary:ge.label,secondary:ge.results.length>0?`${ge.results.length} students • Avg: ${ge.average?.toFixed(1)||"N/A"}`:S("no_data_available")||"No data available"})]},ge.key))})]})]})})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(ri,{in:!0,style:{transitionDelay:"200ms"},children:h.jsxs(cr,{elevation:4,sx:{borderRadius:3,transition:"all 0.3s ease-in-out","&:hover":{boxShadow:8,transform:"translateY(-4px)"},background:`linear-gradient(135deg, ${N.palette.secondary.main}15, ${N.palette.secondary.dark}15)`,border:`1px solid ${N.palette.secondary.main}30`},children:[h.jsx(Fh,{onClick:()=>A(!L),children:h.jsxs(Ir,{sx:{p:4,textAlign:"center"},children:[h.jsx(qt,{sx:{bgcolor:"secondary.main",mx:"auto",mb:2,width:64,height:64},children:h.jsx(um,{fontSize:"large"})}),h.jsx(_e,{variant:"h5",fontWeight:"bold",color:"secondary",gutterBottom:!0,children:S("terms_feature")||"Terms"}),h.jsx(_e,{variant:"body1",color:"text.secondary",sx:{mb:2},children:S("view_term_results")||"View results for terms and annual averages"}),h.jsx(Sr,{label:$.filter(ge=>ge.results.length>0).length+" "+(S("available")||"Available"),color:"secondary",variant:"outlined",size:"small"}),h.jsx(Le,{sx:{mt:2},children:L?h.jsx(Qh,{}):h.jsx(ed,{})})]})}),h.jsxs(Dh,{in:L,timeout:"auto",unmountOnExit:!0,children:[h.jsx(En,{}),h.jsx(Cl,{sx:{px:2,pb:2},children:$.map(ge=>h.jsxs(Mh,{onClick:()=>W(ge.key),disabled:ge.results.length===0,sx:{borderRadius:2,mb:1,"&:hover":{bgcolor:"secondary.main",color:"white"}},children:[h.jsx(Tl,{children:ge.results.length>0?h.jsx(uo,{color:"success"}):h.jsx(rd,{color:"disabled"})}),h.jsx(ba,{primary:ge.label,secondary:ge.results.length>0?`${ge.results.length} students • Avg: ${ge.average?.toFixed(1)||"N/A"}`:S("no_data_available")||"No data available"})]},ge.key))})]})]})})}),!Q&&h.jsx(De,{item:!0,xs:12,children:h.jsxs(Un,{elevation:2,sx:{p:4,textAlign:"center",borderRadius:3,background:`linear-gradient(135deg, ${N.palette.grey[100]}, ${N.palette.grey[200]})`},children:[h.jsx(qt,{sx:{bgcolor:"warning.main",mx:"auto",mb:2,width:64,height:64},children:h.jsx(td,{fontSize:"large"})}),h.jsx(_e,{variant:"h6",color:"text.secondary",gutterBottom:!0,children:S("no_results_available")||"No Results Available"}),h.jsx(_e,{variant:"body1",color:"text.secondary",sx:{mb:3},children:S("calculate_results_first")||"Please calculate results first to view analytics and insights."}),h.jsx(Gt,{variant:"contained",color:"primary",onClick:()=>window.location.hash="#calculate",startIcon:h.jsx(Pi,{}),children:S("go_to_calculate")||"Go to Calculate"})]})})]})]})},cd={termTitleEn:"FIRST TERM REPORT CARD",termTitleFr:"BULLETIN DU PREMIER TRIMESTRE",schoolName:"GOVERNMENT BILINGUAL HIGH SCHOOL YAOUNDE",poBox:"P.O. BOX 1743 YAOUNDE",telephone:"TEL: 222 23 45 67",mention:""},ud=n=>`bb_template_extra_${n}`,l2=({open:n,onClose:e,templateId:t,subjects:r=[],onSave:s,fields:i})=>{const[a,l]=xe.useState({}),c=xe.useMemo(()=>r.map(_=>({name:_.name,teacher:"",coefficient:Math.max(1,Math.round((_.total||20)/5)),performance:"",remark:""})),[r]);xe.useEffect(()=>{if(!n)return;const _=localStorage.getItem(ud(t));if(_)try{const j=JSON.parse(_);l({...c.length?{subjectsMeta:c}:{},...cd,...j});return}catch{}l({...cd,subjectsMeta:c})},[n,t,c]);const d=_=>j=>{l(x=>({...x,[_]:j.target.value}))},g=(_,j)=>x=>{l(k=>{const S=k.subjectsMeta?[...k.subjectsMeta]:[];return S[_]={...S[_],[j]:j==="coefficient"?Number(x.target.value):x.target.value},{...k,subjectsMeta:S}})},v=()=>{localStorage.setItem(ud(t),JSON.stringify(a)),s(a),e()},m=_=>{const j={fullWidth:!0,size:"small",label:_.label+(_.optional?" (optional)":""),placeholder:_.placeholder,value:a[_.key]||"",onChange:x=>l(k=>({...k,[_.key]:x.target.value}))};return _.type==="textarea"?h.jsx(wt,{...j,multiline:!0,minRows:2}):h.jsx(wt,{...j,type:_.type==="number"?"number":_.type==="date"?"date":_.type==="url"?"url":"text"})},f=xe.useMemo(()=>{const _={student:[],school:[],term:[],other:[]};return(i||[]).forEach(j=>{const x=j.section||"other";(_[x]=_[x]||[]).push(j)}),_},[i]),y=!!i&&i.length>0;return h.jsxs(lf,{open:n,onClose:e,fullWidth:!0,maxWidth:"md",children:[h.jsxs(cf,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[h.jsx(_e,{variant:"h6",children:"Template required info"}),h.jsx(ur,{onClick:e,"aria-label":"close",children:h.jsx(Aa,{})})]}),h.jsx(uf,{dividers:!0,children:h.jsxs(De,{container:!0,spacing:2,children:[y?h.jsxs(h.Fragment,{children:[f.student&&f.student.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Student information"})}),f.student.map(_=>h.jsx(De,{item:!0,xs:12,sm:6,children:m(_)},_.key)),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})})]}),f.school&&f.school.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"School header"})}),f.school.map(_=>h.jsx(De,{item:!0,xs:12,sm:6,children:m(_)},_.key)),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})})]}),f.term&&f.term.length>0&&h.jsxs(h.Fragment,{children:[h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Term and remarks"})}),f.term.map(_=>h.jsx(De,{item:!0,xs:12,sm:_.type==="textarea"?12:6,children:m(_)},_.key)),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})})]})]}):h.jsxs(h.Fragment,{children:[h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Student information (missing fields)"})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Matricule",fullWidth:!0,size:"small",value:a.matricule||"",onChange:d("matricule")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Date of Birth",placeholder:"DD/MM/YYYY",fullWidth:!0,size:"small",value:a.dateOfBirth||"",onChange:d("dateOfBirth")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Place of Birth",fullWidth:!0,size:"small",value:a.placeOfBirth||"",onChange:d("placeOfBirth")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Class Name",placeholder:"e.g., Upper Sixth Sci.",fullWidth:!0,size:"small",value:a.className||"",onChange:d("className")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Branch of Study",placeholder:"e.g., General Education",fullWidth:!0,size:"small",value:a.branchOfStudy||"",onChange:d("branchOfStudy")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Option",placeholder:"e.g., Science",fullWidth:!0,size:"small",value:a.option||"",onChange:d("option")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Student Photo URL (optional)",fullWidth:!0,size:"small",value:a.studentPhotoUrl||"",onChange:d("studentPhotoUrl")})}),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"School header"})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"School Name",fullWidth:!0,size:"small",value:a.schoolName||"",onChange:d("schoolName")})}),h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(wt,{label:"P.O. Box",fullWidth:!0,size:"small",value:a.poBox||"",onChange:d("poBox")})}),h.jsx(De,{item:!0,xs:12,sm:3,children:h.jsx(wt,{label:"Telephone",fullWidth:!0,size:"small",value:a.telephone||"",onChange:d("telephone")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Logo URL (optional)",fullWidth:!0,size:"small",value:a.logoUrl||"",onChange:d("logoUrl")})}),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Term and remarks"})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Term Title (EN)",fullWidth:!0,size:"small",value:a.termTitleEn||"",onChange:d("termTitleEn")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:"Term Title (FR)",fullWidth:!0,size:"small",value:a.termTitleFr||"",onChange:d("termTitleFr")})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(wt,{label:"Performance Factors",fullWidth:!0,size:"small",value:a.performanceFactors||"",onChange:d("performanceFactors")})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(wt,{label:"Class Teacher's Comment",fullWidth:!0,size:"small",multiline:!0,minRows:2,value:a.teacherComment||"",onChange:d("teacherComment")})}),h.jsx(De,{item:!0,xs:12,children:h.jsx(wt,{label:"Principal's Comment",fullWidth:!0,size:"small",multiline:!0,minRows:2,value:a.principalComment||"",onChange:d("principalComment")})}),h.jsx(De,{item:!0,xs:12,mt:1,children:h.jsx(En,{})})]}),h.jsx(De,{item:!0,xs:12,children:h.jsxs(Le,{display:"flex",alignItems:"center",justifyContent:"space-between",children:[h.jsx(_e,{variant:"subtitle1",sx:{fontWeight:600},children:"Subjects meta"}),!r.length&&h.jsx(Sr,{label:"No subjects available in this view",size:"small"})]})}),r.length>0&&(a.subjectsMeta||[]).map((_,j)=>h.jsxs(hf.Fragment,{children:[h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:`Teacher for ${_.name}`,fullWidth:!0,size:"small",value:_.teacher||"",onChange:g(j,"teacher")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{type:"number",inputProps:{min:1},label:`Coefficient for ${_.name}`,fullWidth:!0,size:"small",value:_.coefficient??"",onChange:g(j,"coefficient")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:`Performance for ${_.name}`,fullWidth:!0,size:"small",value:_.performance||"",onChange:g(j,"performance")})}),h.jsx(De,{item:!0,xs:12,sm:6,children:h.jsx(wt,{label:`Remark for ${_.name}`,fullWidth:!0,size:"small",value:_.remark||"",onChange:g(j,"remark")})})]},_.name))]})}),h.jsxs(df,{children:[h.jsx(Gt,{onClick:e,color:"inherit",variant:"text",children:"Cancel"}),h.jsx(Gt,{onClick:v,variant:"contained",children:"Save"})]})]})},c2={"classic-a4":{id:"classic-a4",name:"Classic A4 Portrait",requiredFields:[{key:"matricule",label:"Matricule",type:"text",section:"student"},{key:"dateOfBirth",label:"Date of Birth",type:"text",section:"student",placeholder:"DD/MM/YYYY"},{key:"placeOfBirth",label:"Place of Birth",type:"text",section:"student"},{key:"className",label:"Class Name",type:"text",section:"student"},{key:"branchOfStudy",label:"Branch of Study",type:"text",section:"student"},{key:"option",label:"Option",type:"text",section:"student"},{key:"studentPhotoUrl",label:"Student Photo URL",type:"url",section:"student",optional:!0},{key:"schoolName",label:"School Name",type:"text",section:"school"},{key:"poBox",label:"P.O. Box",type:"text",section:"school"},{key:"telephone",label:"Telephone",type:"text",section:"school"},{key:"logoUrl",label:"Logo URL",type:"url",section:"school",optional:!0},{key:"termTitleEn",label:"Term Title (EN)",type:"text",section:"term"},{key:"termTitleFr",label:"Term Title (FR)",type:"text",section:"term"},{key:"performanceFactors",label:"Performance Factors",type:"text",section:"term",optional:!0},{key:"teacherComment",label:"Class Teacher's Comment",type:"textarea",section:"term",optional:!0},{key:"principalComment",label:"Principal's Comment",type:"textarea",section:"term",optional:!0},{key:"mention",label:"Mention",type:"text",section:"term",optional:!0}]}},ra=(n,e,t,r,s)=>{const i=`
    <svg width="${n}" height="${e}" xmlns="http://www.w3.org/2000/svg">
      <rect width="100%" height="100%" fill="${t}"/>
      <text x="50%" y="50%" dominant-baseline="middle" text-anchor="middle" 
            font-family="Arial, sans-serif" font-size="14" font-weight="bold" fill="${r}">
        ${s}
      </text>
    </svg>
  `;return`data:image/svg+xml;base64,${btoa(i)}`},Dc=[{id:"classic-a4",name:"Classic A4 Portrait",thumbnail:ra(300,400,"#E3F2FD","#1976D2","Classic A4"),category:"Traditional",description:"A classic portrait template with student summary and comprehensive three-term breakdown. Perfect for formal academic reports.",features:["Portrait Layout","Three Terms","Grade Summary","Comments Section"],popular:!0,previewUrl:"/templates/classic-a4-template.html"},{id:"modern-landscape",name:"Modern Landscape",thumbnail:ra(400,300,"#F3E5F5","#7B1FA2","Modern Landscape"),category:"Modern",description:"A sleek landscape layout with visual elements, perfect for detailed term-by-term analysis and performance tracking.",features:["Landscape Layout","Visual Charts","Performance Graphs","Color Coded"],popular:!1},{id:"compact-view",name:"Compact Summary",thumbnail:ra(300,400,"#E8F5E8","#388E3C","Compact View"),category:"Efficient",description:"A space-efficient design that fits all essential information on a single page without compromising readability.",features:["Single Page","Condensed Layout","Essential Info","Print Friendly"],popular:!0},{id:"detailed-report",name:"Detailed Analytics",thumbnail:ra(300,400,"#FFF3E0","#F57C00","Detailed Report"),category:"Comprehensive",description:"An extensive report with charts, graphs, and detailed analytics for comprehensive performance tracking.",features:["Charts & Graphs","Analytics","Progress Tracking","Detailed Breakdown"],popular:!1},{id:"minimalist-style",name:"Minimalist Clean",thumbnail:ra(300,400,"#FAFAFA","#424242","Minimalist Style"),category:"Clean",description:"A clean, minimalist template focusing on clarity and readability with elegant typography.",features:["Clean Design","Typography Focus","High Readability","Professional"],popular:!0},{id:"colorful-design",name:"Vibrant Colors",thumbnail:ra(300,400,"#FCE4EC","#C2185B","Colorful Design"),category:"Creative",description:"A vibrant, colorful design to make report cards more engaging and visually appealing for students.",features:["Colorful Theme","Engaging Design","Student Friendly","Visual Appeal"],popular:!1}],u2=({onSelectTemplate:n,onBack:e,subjects:t=[],availableData:r={}})=>{const{t:s}=fn(),i=Sa(),a=y1(i.breakpoints.down("sm")),[l,c]=xe.useState(null),[d,g]=xe.useState(["classic-a4","compact-view"]),[v,m]=xe.useState(!1),[f,y]=xe.useState(null),[_,j]=xe.useState([]),x=M=>{c(M)},k=()=>{c(null)},S=M=>{y(M);const R=c2[M];if(R&&R.requiredFields){const V=R.requiredFields.filter(K=>{const L=r[K.key];return L==null||L===""});j(V)}else j([]);if(!(R&&R.requiredFields&&R.requiredFields.length>0&&R.requiredFields.some(V=>{const K=r[V.key];return K==null||K===""})||t&&t.length>0)){n(M),k();return}m(!0)},N=M=>{g(R=>R.includes(M)?R.filter(E=>E!==M):[...R,M])},D=M=>({Traditional:i.palette.primary.main,Modern:i.palette.secondary.main,Efficient:i.palette.success.main,Comprehensive:i.palette.warning.main,Clean:i.palette.info.main,Creative:i.palette.error.main})[M]||i.palette.grey[500];return h.jsxs(ja,{maxWidth:"xl",sx:{mt:{xs:1,sm:2},mb:{xs:10,sm:4},px:{xs:1,sm:2,md:3}},children:[h.jsxs(Un,{elevation:2,sx:{p:{xs:2,sm:3},mb:{xs:2,sm:4},borderRadius:3},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},gap:{xs:2,sm:0},mb:2},children:[h.jsx(ur,{onClick:e,"aria-label":"back",sx:{mr:{xs:0,sm:2},alignSelf:{xs:"flex-start",sm:"center"},bgcolor:i.palette.primary.main,color:"white","&:hover":{bgcolor:i.palette.primary.dark}},children:h.jsx(Af,{})}),h.jsxs(Le,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:2},width:"100%"},children:[h.jsx(qt,{sx:{bgcolor:i.palette.primary.main,display:{xs:"none",sm:"flex"}},children:h.jsx(gm,{})}),h.jsxs(Le,{sx:{width:"100%"},children:[h.jsx(_e,{component:"h1",variant:"h4",gutterBottom:!0,sx:{fontWeight:"bold",textAlign:"center",mb:4,fontSize:{xs:"1.5rem",sm:"2.125rem"}},children:s("template_gallery")||"Template Gallery"}),h.jsx(_e,{component:"div",variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:{xs:"0.875rem",sm:"1rem"}},children:s("choose_report_template")||"Choose the perfect template for your student reports"})]})]})]}),h.jsxs(Le,{sx:{display:"flex",flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:3},mt:{xs:2,sm:3},"& .MuiChip-root":{fontSize:{xs:"0.7rem",sm:"0.8125rem"}}},children:[h.jsx(Sr,{icon:h.jsx(Pi,{sx:{fontSize:{xs:"16px",sm:"20px"}}}),label:`${Dc.length} Templates Available`,variant:"outlined",color:"primary",size:"small"}),h.jsx(Sr,{icon:h.jsx(jl,{sx:{fontSize:{xs:"16px",sm:"20px"}}}),label:`${Dc.filter(M=>M.popular).length} Popular`,variant:"outlined",color:"secondary",size:"small"}),h.jsx(Sr,{icon:h.jsx(Rl,{sx:{fontSize:{xs:"16px",sm:"20px"}}}),label:"Student Reports",variant:"outlined",color:"success",size:"small"})]})]}),h.jsx(De,{container:!0,spacing:{xs:2,sm:3},children:Dc.map((M,R)=>h.jsx(De,{item:!0,xs:12,sm:6,md:4,lg:3,children:h.jsx(ri,{in:!0,style:{transitionDelay:`${R*100}ms`},children:h.jsxs(cr,{sx:{height:"100%",display:"flex",flexDirection:"column",position:"relative",transition:"all 0.3s ease","&:hover":{transform:{xs:"none",sm:"translateY(-8px)"},boxShadow:{xs:2,sm:6}}},children:[M.popular&&h.jsx(Sr,{icon:h.jsx(jl,{sx:{fontSize:{xs:"14px",sm:"18px"}}}),label:"Popular",size:"small",color:"warning",sx:{position:"absolute",top:{xs:6,sm:8},left:{xs:6,sm:8},zIndex:1,fontWeight:"bold",fontSize:{xs:"0.65rem",sm:"0.75rem"}}}),h.jsx(ur,{onClick:()=>N(M.id),size:"small",sx:{position:"absolute",top:{xs:6,sm:8},right:{xs:6,sm:8},zIndex:1,color:d.includes(M.id)?"red":"grey.400","&:hover":{color:"red"},fontSize:{xs:"1rem",sm:"1.25rem"}},children:d.includes(M.id)?h.jsx(jl,{color:"warning",sx:{fontSize:{xs:"16px",sm:"20px"}}}):h.jsx(ym,{sx:{fontSize:{xs:"16px",sm:"20px"}}})}),h.jsx(Bh,{component:"img",height:200,image:M.thumbnail,alt:M.name,sx:{objectFit:"cover",height:{xs:200,sm:250}}}),h.jsxs(Ir,{sx:{flexGrow:1,pb:1,p:{xs:1.5,sm:2}},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:{xs:"flex-start",sm:"center"},flexDirection:{xs:"column",sm:"row"},gap:{xs:.5,sm:1},mb:1},children:[h.jsx(_e,{gutterBottom:!0,variant:"h6",component:"div",sx:{mb:0,flexGrow:1,fontSize:{xs:"1rem",sm:"1.25rem"},lineHeight:{xs:1.2,sm:1.6}},children:M.name}),h.jsx(Sr,{label:M.category,size:"small",variant:"outlined",sx:{mb:1,mr:1,fontSize:{xs:"0.75rem",sm:"0.8125rem"}}})]}),h.jsx(_e,{variant:"body2",color:"text.secondary",sx:{mb:2,fontSize:{xs:"0.75rem",sm:"0.875rem"},lineHeight:{xs:1.3,sm:1.43},display:"-webkit-box",WebkitLineClamp:{xs:2,sm:3},WebkitBoxOrient:"vertical",overflow:"hidden"},children:M.description}),h.jsxs(Le,{sx:{display:"flex",flexWrap:"wrap",gap:{xs:.3,sm:.5}},children:[M.features.slice(0,2).map(E=>h.jsx(Sr,{label:E,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.6rem",sm:"0.7rem"},height:{xs:18,sm:24}}},E)),M.features.length>2&&h.jsx(Sr,{label:`+${M.features.length-(window.innerWidth<600?1:2)} more`,size:"small",variant:"outlined",sx:{fontSize:{xs:"0.6rem",sm:"0.7rem"},height:{xs:18,sm:24}}})]})]}),h.jsxs(x1,{sx:{justifyContent:"space-between",pt:0,px:{xs:1.5,sm:2},pb:{xs:1.5,sm:2},flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[h.jsx(Gt,{size:"small",startIcon:h.jsx(mm,{sx:{fontSize:{xs:"16px",sm:"18px"}}}),onClick:()=>x(M),sx:{textTransform:"none",fontSize:{xs:"0.75rem",sm:"0.875rem"},width:{xs:"100%",sm:"auto"}},children:s("preview")||"Preview"}),h.jsx(Gt,{size:"small",variant:"contained",startIcon:h.jsx(vm,{sx:{fontSize:{xs:"16px",sm:"18px"}}}),onClick:()=>S(M.id),sx:{textTransform:"none",fontSize:{xs:"0.75rem",sm:"0.875rem"},width:{xs:"100%",sm:"auto"}},children:s("use_template")||"Use Template"})]})]})})},M.id))}),l&&h.jsxs(lf,{open:!!l,onClose:k,fullWidth:!0,maxWidth:"lg",fullScreen:a,PaperProps:{sx:{borderRadius:{xs:0,sm:3},m:{xs:0,sm:2},maxHeight:{xs:"100vh",sm:"90vh"}}},children:[h.jsxs(cf,{sx:{display:"flex",alignItems:"center",gap:{xs:1,sm:2},p:{xs:2,sm:3},flexDirection:{xs:"row",sm:"row"}},children:[h.jsx(qt,{sx:{bgcolor:D(l.category),width:{xs:32,sm:40},height:{xs:32,sm:40}},children:h.jsx(Pi,{sx:{fontSize:{xs:"18px",sm:"24px"}}})}),h.jsxs(Le,{sx:{flexGrow:1},children:[h.jsx(_e,{variant:"h6",sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:l.name}),h.jsxs(_e,{variant:"body2",color:"text.secondary",sx:{fontSize:{xs:"0.75rem",sm:"0.875rem"}},children:[l.category," Template"]})]}),h.jsx(ur,{"aria-label":"close",onClick:k,size:"small",sx:{color:i.palette.grey[500]},children:h.jsx(kf,{sx:{fontSize:{xs:"20px",sm:"24px"}}})})]}),h.jsx(uf,{dividers:!0,sx:{p:{xs:2,sm:3},overflow:"auto"},children:l.previewUrl?h.jsx("iframe",{src:l.previewUrl,title:l.name,style:{width:"100%",height:window.innerWidth<600?"50vh":"70vh",border:"none",borderRadius:"8px"}}):h.jsxs(Le,{sx:{display:"flex",flexDirection:{xs:"column",md:"row"},gap:{xs:2,sm:3}},children:[h.jsx(Le,{sx:{flex:1},children:h.jsx(Bh,{component:"img",image:l.thumbnail,alt:l.name,sx:{objectFit:"contain",maxHeight:{xs:250,sm:400},width:"100%",borderRadius:2,border:`1px solid ${i.palette.divider}`}})}),h.jsxs(Le,{sx:{flex:1},children:[h.jsx(_e,{variant:"h6",gutterBottom:!0,sx:{fontSize:{xs:"1rem",sm:"1.25rem"}},children:"Template Features"}),h.jsx(_e,{variant:"body1",paragraph:!0,sx:{fontSize:{xs:"0.875rem",sm:"1rem"}},children:l.description}),h.jsx(_e,{variant:"subtitle2",gutterBottom:!0,sx:{mt:2,fontSize:{xs:"0.8rem",sm:"0.875rem"}},children:"Included Features:"}),h.jsx(Le,{sx:{display:"flex",flexWrap:"wrap",gap:{xs:.5,sm:1}},children:l.features.map(M=>h.jsx(Sr,{label:M,size:"small",variant:"outlined",color:"primary",sx:{fontSize:{xs:"0.7rem",sm:"0.75rem"},height:{xs:24,sm:28}}},M))})]})]})}),h.jsxs(df,{sx:{p:{xs:2,sm:3},flexDirection:{xs:"column",sm:"row"},gap:{xs:1,sm:0}},children:[h.jsx(Gt,{onClick:k,sx:{textTransform:"none",width:{xs:"100%",sm:"auto"},order:{xs:2,sm:1}},children:s("cancel")||"Cancel"}),h.jsx(Gt,{variant:"contained",startIcon:h.jsx(pm,{sx:{fontSize:{xs:"18px",sm:"20px"}}}),onClick:()=>S(l.id),sx:{textTransform:"none",width:{xs:"100%",sm:"auto"},order:{xs:1,sm:2}},children:s("use_this_template")||"Use This Template"})]})]}),h.jsx(l2,{open:v,onClose:()=>m(!1),templateId:f||"unknown",subjects:t,fields:_,onSave:M=>{f&&n(f,M),m(!1),y(null),k()}})]})},h2="modulepreload",d2=function(n){return"/"+n},hd={},si=function(e,t,r){let s=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=a?.nonce||a?.getAttribute("nonce");s=Promise.allSettled(t.map(c=>{if(c=d2(c),c in hd)return;hd[c]=!0;const d=c.endsWith(".css"),g=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${g}`))return;const v=document.createElement("link");if(v.rel=d?"stylesheet":h2,d||(v.as="script"),v.crossOrigin="",v.href=c,l&&v.setAttribute("nonce",l),document.head.appendChild(v),d)return new Promise((m,f)=>{v.addEventListener("load",m),v.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(a){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=a,window.dispatchEvent(l),!l.defaultPrevented)throw a}return s.then(a=>{for(const l of a||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})};var Xr=Uint8Array,In=Uint16Array,Yu=Int32Array,Wl=new Xr([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),Hl=new Xr([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),au=new Xr([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),If=function(n,e){for(var t=new In(31),r=0;r<31;++r)t[r]=e+=1<<n[r-1];for(var s=new Yu(t[30]),r=1;r<30;++r)for(var i=t[r];i<t[r+1];++i)s[i]=i-t[r]<<5|r;return{b:t,r:s}},Of=If(Wl,2),Ff=Of.b,ou=Of.r;Ff[28]=258,ou[258]=28;var Df=If(Hl,0),f2=Df.b,dd=Df.r,lu=new In(32768);for(var Qt=0;Qt<32768;++Qt){var Js=(Qt&43690)>>1|(Qt&21845)<<1;Js=(Js&52428)>>2|(Js&13107)<<2,Js=(Js&61680)>>4|(Js&3855)<<4,lu[Qt]=((Js&65280)>>8|(Js&255)<<8)>>1}var gs=function(n,e,t){for(var r=n.length,s=0,i=new In(e);s<r;++s)n[s]&&++i[n[s]-1];var a=new In(e);for(s=1;s<e;++s)a[s]=a[s-1]+i[s-1]<<1;var l;if(t){l=new In(1<<e);var c=15-e;for(s=0;s<r;++s)if(n[s])for(var d=s<<4|n[s],g=e-n[s],v=a[n[s]-1]++<<g,m=v|(1<<g)-1;v<=m;++v)l[lu[v]>>c]=d}else for(l=new In(r),s=0;s<r;++s)n[s]&&(l[s]=lu[a[n[s]-1]++]>>15-n[s]);return l},ii=new Xr(288);for(var Qt=0;Qt<144;++Qt)ii[Qt]=8;for(var Qt=144;Qt<256;++Qt)ii[Qt]=9;for(var Qt=256;Qt<280;++Qt)ii[Qt]=7;for(var Qt=280;Qt<288;++Qt)ii[Qt]=8;var wo=new Xr(32);for(var Qt=0;Qt<32;++Qt)wo[Qt]=5;var p2=gs(ii,9,0),g2=gs(ii,9,1),m2=gs(wo,5,0),v2=gs(wo,5,1),Mc=function(n){for(var e=n[0],t=1;t<n.length;++t)n[t]>e&&(e=n[t]);return e},Zn=function(n,e,t){var r=e/8|0;return(n[r]|n[r+1]<<8)>>(e&7)&t},Bc=function(n,e){var t=e/8|0;return(n[t]|n[t+1]<<8|n[t+2]<<16)>>(e&7)},Xu=function(n){return(n+7)/8|0},Mf=function(n,e,t){return(t==null||t>n.length)&&(t=n.length),new Xr(n.subarray(e,t))},b2=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],ts=function(n,e,t){var r=new Error(e||b2[n]);if(r.code=n,Error.captureStackTrace&&Error.captureStackTrace(r,ts),!t)throw r;return r},y2=function(n,e,t,r){var s=n.length,i=0;if(!s||e.f&&!e.l)return t||new Xr(0);var a=!t,l=a||e.i!=2,c=e.i;a&&(t=new Xr(s*3));var d=function(Ae){var Fe=t.length;if(Ae>Fe){var Ee=new Xr(Math.max(Fe*2,Ae));Ee.set(t),t=Ee}},g=e.f||0,v=e.p||0,m=e.b||0,f=e.l,y=e.d,_=e.m,j=e.n,x=s*8;do{if(!f){g=Zn(n,v,1);var k=Zn(n,v+1,3);if(v+=3,k)if(k==1)f=g2,y=v2,_=9,j=5;else if(k==2){var M=Zn(n,v,31)+257,R=Zn(n,v+10,15)+4,E=M+Zn(n,v+5,31)+1;v+=14;for(var V=new Xr(E),K=new Xr(19),L=0;L<R;++L)K[au[L]]=Zn(n,v+L*3,7);v+=R*3;for(var A=Mc(K),U=(1<<A)-1,z=gs(K,A,1),L=0;L<E;){var te=z[Zn(n,v,U)];v+=te&15;var S=te>>4;if(S<16)V[L++]=S;else{var $=0,W=0;for(S==16?(W=3+Zn(n,v,3),v+=2,$=V[L-1]):S==17?(W=3+Zn(n,v,7),v+=3):S==18&&(W=11+Zn(n,v,127),v+=7);W--;)V[L++]=$}}var Y=V.subarray(0,M),J=V.subarray(M);_=Mc(Y),j=Mc(J),f=gs(Y,_,1),y=gs(J,j,1)}else ts(1);else{var S=Xu(v)+4,N=n[S-4]|n[S-3]<<8,D=S+N;if(D>s){c&&ts(0);break}l&&d(m+N),t.set(n.subarray(S,D),m),e.b=m+=N,e.p=v=D*8,e.f=g;continue}if(v>x){c&&ts(0);break}}l&&d(m+131072);for(var ie=(1<<_)-1,pe=(1<<j)-1,P=v;;P=v){var $=f[Bc(n,v)&ie],B=$>>4;if(v+=$&15,v>x){c&&ts(0);break}if($||ts(2),B<256)t[m++]=B;else if(B==256){P=v,f=null;break}else{var H=B-254;if(B>264){var L=B-257,Z=Wl[L];H=Zn(n,v,(1<<Z)-1)+Ff[L],v+=Z}var Q=y[Bc(n,v)&pe],le=Q>>4;Q||ts(3),v+=Q&15;var J=f2[le];if(le>3){var Z=Hl[le];J+=Bc(n,v)&(1<<Z)-1,v+=Z}if(v>x){c&&ts(0);break}l&&d(m+131072);var ue=m+H;if(m<J){var he=i-J,ge=Math.min(J,ue);for(he+m<0&&ts(3);m<ge;++m)t[m]=r[he+m]}for(;m<ue;++m)t[m]=t[m-J]}}e.l=f,e.p=P,e.b=m,e.f=g,f&&(g=1,e.m=_,e.d=y,e.n=j)}while(!g);return m!=t.length&&a?Mf(t,0,m):t.subarray(0,m)},Ns=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8},so=function(n,e,t){t<<=e&7;var r=e/8|0;n[r]|=t,n[r+1]|=t>>8,n[r+2]|=t>>16},qc=function(n,e){for(var t=[],r=0;r<n.length;++r)n[r]&&t.push({s:r,f:n[r]});var s=t.length,i=t.slice();if(!s)return{t:qf,l:0};if(s==1){var a=new Xr(t[0].s+1);return a[t[0].s]=1,{t:a,l:1}}t.sort(function(D,M){return D.f-M.f}),t.push({s:-1,f:25001});var l=t[0],c=t[1],d=0,g=1,v=2;for(t[0]={s:-1,f:l.f+c.f,l,r:c};g!=s-1;)l=t[t[d].f<t[v].f?d++:v++],c=t[d!=g&&t[d].f<t[v].f?d++:v++],t[g++]={s:-1,f:l.f+c.f,l,r:c};for(var m=i[0].s,r=1;r<s;++r)i[r].s>m&&(m=i[r].s);var f=new In(m+1),y=cu(t[g-1],f,0);if(y>e){var r=0,_=0,j=y-e,x=1<<j;for(i.sort(function(M,R){return f[R.s]-f[M.s]||M.f-R.f});r<s;++r){var k=i[r].s;if(f[k]>e)_+=x-(1<<y-f[k]),f[k]=e;else break}for(_>>=j;_>0;){var S=i[r].s;f[S]<e?_-=1<<e-f[S]++-1:++r}for(;r>=0&&_;--r){var N=i[r].s;f[N]==e&&(--f[N],++_)}y=e}return{t:new Xr(f),l:y}},cu=function(n,e,t){return n.s==-1?Math.max(cu(n.l,e,t+1),cu(n.r,e,t+1)):e[n.s]=t},fd=function(n){for(var e=n.length;e&&!n[--e];);for(var t=new In(++e),r=0,s=n[0],i=1,a=function(c){t[r++]=c},l=1;l<=e;++l)if(n[l]==s&&l!=e)++i;else{if(!s&&i>2){for(;i>138;i-=138)a(32754);i>2&&(a(i>10?i-11<<5|28690:i-3<<5|12305),i=0)}else if(i>3){for(a(s),--i;i>6;i-=6)a(8304);i>2&&(a(i-3<<5|8208),i=0)}for(;i--;)a(s);i=1,s=n[l]}return{c:t.subarray(0,r),n:e}},io=function(n,e){for(var t=0,r=0;r<e.length;++r)t+=n[r]*e[r];return t},Bf=function(n,e,t){var r=t.length,s=Xu(e+2);n[s]=r&255,n[s+1]=r>>8,n[s+2]=n[s]^255,n[s+3]=n[s+1]^255;for(var i=0;i<r;++i)n[s+i+4]=t[i];return(s+4+r)*8},pd=function(n,e,t,r,s,i,a,l,c,d,g){Ns(e,g++,t),++s[256];for(var v=qc(s,15),m=v.t,f=v.l,y=qc(i,15),_=y.t,j=y.l,x=fd(m),k=x.c,S=x.n,N=fd(_),D=N.c,M=N.n,R=new In(19),E=0;E<k.length;++E)++R[k[E]&31];for(var E=0;E<D.length;++E)++R[D[E]&31];for(var V=qc(R,7),K=V.t,L=V.l,A=19;A>4&&!K[au[A-1]];--A);var U=d+5<<3,z=io(s,ii)+io(i,wo)+a,te=io(s,m)+io(i,_)+a+14+3*A+io(R,K)+2*R[16]+3*R[17]+7*R[18];if(c>=0&&U<=z&&U<=te)return Bf(e,g,n.subarray(c,c+d));var $,W,Y,J;if(Ns(e,g,1+(te<z)),g+=2,te<z){$=gs(m,f,0),W=m,Y=gs(_,j,0),J=_;var ie=gs(K,L,0);Ns(e,g,S-257),Ns(e,g+5,M-1),Ns(e,g+10,A-4),g+=14;for(var E=0;E<A;++E)Ns(e,g+3*E,K[au[E]]);g+=3*A;for(var pe=[k,D],P=0;P<2;++P)for(var B=pe[P],E=0;E<B.length;++E){var H=B[E]&31;Ns(e,g,ie[H]),g+=K[H],H>15&&(Ns(e,g,B[E]>>5&127),g+=B[E]>>12)}}else $=p2,W=ii,Y=m2,J=wo;for(var E=0;E<l;++E){var Z=r[E];if(Z>255){var H=Z>>18&31;so(e,g,$[H+257]),g+=W[H+257],H>7&&(Ns(e,g,Z>>23&31),g+=Wl[H]);var Q=Z&31;so(e,g,Y[Q]),g+=J[Q],Q>3&&(so(e,g,Z>>5&8191),g+=Hl[Q])}else so(e,g,$[Z]),g+=W[Z]}return so(e,g,$[256]),g+W[256]},x2=new Yu([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),qf=new Xr(0),w2=function(n,e,t,r,s,i){var a=i.z||n.length,l=new Xr(r+a+5*(1+Math.ceil(a/7e3))+s),c=l.subarray(r,l.length-s),d=i.l,g=(i.r||0)&7;if(e){g&&(c[0]=i.r>>3);for(var v=x2[e-1],m=v>>13,f=v&8191,y=(1<<t)-1,_=i.p||new In(32768),j=i.h||new In(y+1),x=Math.ceil(t/3),k=2*x,S=function(rt){return(n[rt]^n[rt+1]<<x^n[rt+2]<<k)&y},N=new Yu(25e3),D=new In(288),M=new In(32),R=0,E=0,V=i.i||0,K=0,L=i.w||0,A=0;V+2<a;++V){var U=S(V),z=V&32767,te=j[U];if(_[z]=te,j[U]=z,L<=V){var $=a-V;if((R>7e3||K>24576)&&($>423||!d)){g=pd(n,c,0,N,D,M,E,K,A,V-A,g),K=R=E=0,A=V;for(var W=0;W<286;++W)D[W]=0;for(var W=0;W<30;++W)M[W]=0}var Y=2,J=0,ie=f,pe=z-te&32767;if($>2&&U==S(V-pe))for(var P=Math.min(m,$)-1,B=Math.min(32767,V),H=Math.min(258,$);pe<=B&&--ie&&z!=te;){if(n[V+Y]==n[V+Y-pe]){for(var Z=0;Z<H&&n[V+Z]==n[V+Z-pe];++Z);if(Z>Y){if(Y=Z,J=pe,Z>P)break;for(var Q=Math.min(pe,Z-2),le=0,W=0;W<Q;++W){var ue=V-pe+W&32767,he=_[ue],ge=ue-he&32767;ge>le&&(le=ge,te=ue)}}}z=te,te=_[z],pe+=z-te&32767}if(J){N[K++]=268435456|ou[Y]<<18|dd[J];var Ae=ou[Y]&31,Fe=dd[J]&31;E+=Wl[Ae]+Hl[Fe],++D[257+Ae],++M[Fe],L=V+Y,++R}else N[K++]=n[V],++D[n[V]]}}for(V=Math.max(V,L);V<a;++V)N[K++]=n[V],++D[n[V]];g=pd(n,c,d,N,D,M,E,K,A,V-A,g),d||(i.r=g&7|c[g/8|0]<<3,g-=7,i.h=j,i.p=_,i.i=V,i.w=L)}else{for(var V=i.w||0;V<a+d;V+=65535){var Ee=V+65535;Ee>=a&&(c[g/8|0]=d,Ee=a),g=Bf(c,g+1,n.subarray(V,Ee))}i.i=a}return Mf(l,0,r+Xu(g)+s)},$f=function(){var n=1,e=0;return{p:function(t){for(var r=n,s=e,i=t.length|0,a=0;a!=i;){for(var l=Math.min(a+2655,i);a<l;++a)s+=r+=t[a];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}n=r,e=s},d:function(){return n%=65521,e%=65521,(n&255)<<24|(n&65280)<<8|(e&255)<<8|e>>8}}},_2=function(n,e,t,r,s){if(!s&&(s={l:1},e.dictionary)){var i=e.dictionary.subarray(-32768),a=new Xr(i.length+n.length);a.set(i),a.set(n,i.length),n=a,s.w=i.length}return w2(n,e.level==null?6:e.level,e.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+e.mem,t,r,s)},zf=function(n,e,t){for(;t;++e)n[e]=t,t>>>=8},S2=function(n,e){var t=e.level,r=t==0?0:t<6?1:t==9?3:2;if(n[0]=120,n[1]=r<<6|(e.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,e.dictionary){var s=$f();s.p(e.dictionary),zf(n,2,s.d())}},j2=function(n,e){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&ts(6,"invalid zlib data"),(n[1]>>5&1)==1&&ts(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function uu(n,e){e||(e={});var t=$f();t.p(n);var r=_2(n,e,e.dictionary?6:2,4);return S2(r,e),zf(r,r.length-4,t.d()),r}function A2(n,e){return y2(n.subarray(j2(n),-4),{i:2},e,e)}var k2=typeof TextDecoder<"u"&&new TextDecoder,L2=0;try{k2.decode(qf,{stream:!0}),L2=1}catch{}var at=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function $c(){at.console&&typeof at.console.log=="function"&&at.console.log.apply(at.console,arguments)}var Vt={log:$c,warn:function(n){at.console&&(typeof at.console.warn=="function"?at.console.warn.apply(at.console,arguments):$c.call(null,arguments))},error:function(n){at.console&&(typeof at.console.error=="function"?at.console.error.apply(at.console,arguments):$c(n))}};function zc(n,e,t){var r=new XMLHttpRequest;r.open("GET",n),r.responseType="blob",r.onload=function(){Si(r.response,e,t)},r.onerror=function(){Vt.error("could not download file")},r.send()}function gd(n){var e=new XMLHttpRequest;e.open("HEAD",n,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function gl(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(e)}}var ho,hu,Si=at.saveAs||((typeof window>"u"?"undefined":Kt(window))!=="object"||window!==at?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,e,t){var r=at.URL||at.webkitURL,s=document.createElement("a");e=e||n.name||"download",s.download=e,s.rel="noopener",typeof n=="string"?(s.href=n,s.origin!==location.origin?gd(s.href)?zc(n,e,t):gl(s,s.target="_blank"):gl(s)):(s.href=r.createObjectURL(n),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){gl(s)},0))}:"msSaveOrOpenBlob"in navigator?function(n,e,t){if(e=e||n.name||"download",typeof n=="string")if(gd(n))zc(n,e,t);else{var r=document.createElement("a");r.href=n,r.target="_blank",setTimeout(function(){gl(r)})}else navigator.msSaveOrOpenBlob(function(s,i){return i===void 0?i={autoBom:!1}:Kt(i)!=="object"&&(Vt.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(n,t),e)}:function(n,e,t,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof n=="string")return zc(n,e,t);var s=n.type==="application/octet-stream",i=/constructor/i.test(at.HTMLElement)||at.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||s&&i)&&(typeof FileReader>"u"?"undefined":Kt(FileReader))==="object"){var l=new FileReader;l.onloadend=function(){var g=l.result;g=a?g:g.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=g:location=g,r=null},l.readAsDataURL(n)}else{var c=at.URL||at.webkitURL,d=c.createObjectURL(n);r?r.location=d:location.href=d,r=null,setTimeout(function(){c.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Uf(n){var e;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var t=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(l){return[parseInt(l[1]),parseInt(l[2]),parseInt(l[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(l){return[parseInt(l[1],16),parseInt(l[2],16),parseInt(l[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(l){return[parseInt(l[1]+l[1],16),parseInt(l[2]+l[2],16),parseInt(l[3]+l[3],16)]}}],r=0;r<t.length;r++){var s=t[r].re,i=t[r].process,a=s.exec(n);a&&(e=i(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),c=this.g.toString(16),d=this.b.toString(16);return l.length==1&&(l="0"+l),c.length==1&&(c="0"+c),d.length==1&&(d="0"+d),"#"+l+c+d}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function Uc(n,e){var t=n[0],r=n[1],s=n[2],i=n[3];t=Gr(t,r,s,i,e[0],7,-680876936),i=Gr(i,t,r,s,e[1],12,-389564586),s=Gr(s,i,t,r,e[2],17,606105819),r=Gr(r,s,i,t,e[3],22,-1044525330),t=Gr(t,r,s,i,e[4],7,-176418897),i=Gr(i,t,r,s,e[5],12,1200080426),s=Gr(s,i,t,r,e[6],17,-1473231341),r=Gr(r,s,i,t,e[7],22,-45705983),t=Gr(t,r,s,i,e[8],7,1770035416),i=Gr(i,t,r,s,e[9],12,-1958414417),s=Gr(s,i,t,r,e[10],17,-42063),r=Gr(r,s,i,t,e[11],22,-1990404162),t=Gr(t,r,s,i,e[12],7,1804603682),i=Gr(i,t,r,s,e[13],12,-40341101),s=Gr(s,i,t,r,e[14],17,-1502002290),t=Kr(t,r=Gr(r,s,i,t,e[15],22,1236535329),s,i,e[1],5,-165796510),i=Kr(i,t,r,s,e[6],9,-1069501632),s=Kr(s,i,t,r,e[11],14,643717713),r=Kr(r,s,i,t,e[0],20,-373897302),t=Kr(t,r,s,i,e[5],5,-701558691),i=Kr(i,t,r,s,e[10],9,38016083),s=Kr(s,i,t,r,e[15],14,-660478335),r=Kr(r,s,i,t,e[4],20,-405537848),t=Kr(t,r,s,i,e[9],5,568446438),i=Kr(i,t,r,s,e[14],9,-1019803690),s=Kr(s,i,t,r,e[3],14,-187363961),r=Kr(r,s,i,t,e[8],20,1163531501),t=Kr(t,r,s,i,e[13],5,-1444681467),i=Kr(i,t,r,s,e[2],9,-51403784),s=Kr(s,i,t,r,e[7],14,1735328473),t=Jr(t,r=Kr(r,s,i,t,e[12],20,-1926607734),s,i,e[5],4,-378558),i=Jr(i,t,r,s,e[8],11,-2022574463),s=Jr(s,i,t,r,e[11],16,1839030562),r=Jr(r,s,i,t,e[14],23,-35309556),t=Jr(t,r,s,i,e[1],4,-1530992060),i=Jr(i,t,r,s,e[4],11,1272893353),s=Jr(s,i,t,r,e[7],16,-155497632),r=Jr(r,s,i,t,e[10],23,-1094730640),t=Jr(t,r,s,i,e[13],4,681279174),i=Jr(i,t,r,s,e[0],11,-358537222),s=Jr(s,i,t,r,e[3],16,-722521979),r=Jr(r,s,i,t,e[6],23,76029189),t=Jr(t,r,s,i,e[9],4,-640364487),i=Jr(i,t,r,s,e[12],11,-421815835),s=Jr(s,i,t,r,e[15],16,530742520),t=Yr(t,r=Jr(r,s,i,t,e[2],23,-995338651),s,i,e[0],6,-198630844),i=Yr(i,t,r,s,e[7],10,1126891415),s=Yr(s,i,t,r,e[14],15,-1416354905),r=Yr(r,s,i,t,e[5],21,-57434055),t=Yr(t,r,s,i,e[12],6,1700485571),i=Yr(i,t,r,s,e[3],10,-1894986606),s=Yr(s,i,t,r,e[10],15,-1051523),r=Yr(r,s,i,t,e[1],21,-2054922799),t=Yr(t,r,s,i,e[8],6,1873313359),i=Yr(i,t,r,s,e[15],10,-30611744),s=Yr(s,i,t,r,e[6],15,-1560198380),r=Yr(r,s,i,t,e[13],21,1309151649),t=Yr(t,r,s,i,e[4],6,-145523070),i=Yr(i,t,r,s,e[11],10,-1120210379),s=Yr(s,i,t,r,e[2],15,718787259),r=Yr(r,s,i,t,e[9],21,-343485551),n[0]=ti(t,n[0]),n[1]=ti(r,n[1]),n[2]=ti(s,n[2]),n[3]=ti(i,n[3])}function Vl(n,e,t,r,s,i){return e=ti(ti(e,n),ti(r,i)),ti(e<<s|e>>>32-s,t)}function Gr(n,e,t,r,s,i,a){return Vl(e&t|~e&r,n,e,s,i,a)}function Kr(n,e,t,r,s,i,a){return Vl(e&r|t&~r,n,e,s,i,a)}function Jr(n,e,t,r,s,i,a){return Vl(e^t^r,n,e,s,i,a)}function Yr(n,e,t,r,s,i,a){return Vl(t^(e|~r),n,e,s,i,a)}function Wf(n){var e,t=n.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=n.length;e+=64)Uc(r,P2(n.substring(e-64,e)));n=n.substring(e-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<n.length;e++)s[e>>2]|=n.charCodeAt(e)<<(e%4<<3);if(s[e>>2]|=128<<(e%4<<3),e>55)for(Uc(r,s),e=0;e<16;e++)s[e]=0;return s[14]=8*t,Uc(r,s),r}function P2(n){var e,t=[];for(e=0;e<64;e+=4)t[e>>2]=n.charCodeAt(e)+(n.charCodeAt(e+1)<<8)+(n.charCodeAt(e+2)<<16)+(n.charCodeAt(e+3)<<24);return t}ho=at.atob.bind(at),hu=at.btoa.bind(at);var md="0123456789abcdef".split("");function N2(n){for(var e="",t=0;t<4;t++)e+=md[n>>8*t+4&15]+md[n>>8*t&15];return e}function C2(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function du(n){return Wf(n).map(C2).join("")}var T2=function(n){for(var e=0;e<n.length;e++)n[e]=N2(n[e]);return n.join("")}(Wf("hello"))!="5d41402abc4b2a76b9719d911017c592";function ti(n,e){if(T2){var t=(65535&n)+(65535&e);return(n>>16)+(e>>16)+(t>>16)<<16|65535&t}return n+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function fu(n,e){var t,r,s,i;if(n!==t){for(var a=(s=n,i=1+(256/n.length>>0),new Array(i+1).join(s)),l=[],c=0;c<256;c++)l[c]=c;var d=0;for(c=0;c<256;c++){var g=l[c];d=(d+g+a.charCodeAt(c))%256,l[c]=l[d],l[d]=g}t=n,r=l}else l=r;var v=e.length,m=0,f=0,y="";for(c=0;c<v;c++)f=(f+(g=l[m=(m+1)%256]))%256,l[m]=l[f],l[f]=g,a=l[(l[m]+l[f])%256],y+=String.fromCharCode(e.charCodeAt(c)^a);return y}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vd={print:4,modify:8,copy:16,"annot-forms":32};function pa(n,e,t,r){this.v=1,this.r=2;var s=192;n.forEach(function(l){if(vd.perm!==void 0)throw new Error("Invalid permission: "+l);s+=vd[l]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var i=(e+this.padding).substr(0,32),a=(t+this.padding).substr(0,32);this.O=this.processOwnerPassword(i,a),this.P=-(1+(255^s)),this.encryptionKey=du(i+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=fu(this.encryptionKey,this.padding)}function ga(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var e="",t=n.length,r=0;r<t;r++){var s=n.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?e+="#"+("0"+s.toString(16)).slice(-2):e+=n[r]}return e}function bd(n){if(Kt(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(t,r,s){if(s=s||!1,typeof t!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(t)||(e[t]={});var i=Math.random().toString(35);return e[t][i]=[r,!!s],i},this.unsubscribe=function(t){for(var r in e)if(e[r][t])return delete e[r][t],Object.keys(e[r]).length===0&&delete e[r],!0;return!1},this.publish=function(t){if(e.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var i in e[t]){var a=e[t][i];try{a[0].apply(n,r)}catch(l){at.console&&Vt.error("jsPDF PubSub Error",l.message,l)}a[1]&&s.push(i)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function _o(n){if(!(this instanceof _o))return new _o(n);var e="opacity,stroke-opacity".split(",");for(var t in n)n.hasOwnProperty(t)&&e.indexOf(t)>=0&&(this[t]=n[t]);this.id="",this.objectNumber=-1}function Hf(n,e){this.gState=n,this.matrix=e,this.id="",this.objectNumber=-1}function Qs(n,e,t,r,s){if(!(this instanceof Qs))return new Qs(n,e,t,r,s);this.type=n==="axial"?2:3,this.coords=e,this.colors=t,Hf.call(this,r,s)}function Li(n,e,t,r,s){if(!(this instanceof Li))return new Li(n,e,t,r,s);this.boundingBox=n,this.xStep=e,this.yStep=t,this.stream="",this.cloneIndex=0,Hf.call(this,r,s)}function tt(n){var e,t=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],i=arguments[3],a=[],l=1,c=16,d="S",g=null;Kt(n=n||{})==="object"&&(t=n.orientation,r=n.unit||r,s=n.format||s,i=n.compress||n.compressPdf||i,(g=n.encryption||null)!==null&&(g.userPassword=g.userPassword||"",g.ownerPassword=g.ownerPassword||"",g.userPermissions=g.userPermissions||[]),l=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(e=n.precision),n.floatPrecision!==void 0&&(c=n.floatPrecision),d=n.defaultPathOperation||"S"),a=n.filters||(i===!0?["FlateEncode"]:a),r=r||"mm",t=(""+(t||"P")).toLowerCase();var v=n.putOnlyUsedFonts||!1,m={},f={internal:{},__private__:{}};f.__private__.PubSub=bd;var y="1.3",_=f.__private__.getPdfVersion=function(){return y};f.__private__.setPdfVersion=function(p){y=p};var j={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};f.__private__.getPageFormats=function(){return j};var x=f.__private__.getPageFormat=function(p){return j[p]};s=s||"a4";var k={COMPAT:"compat",ADVANCED:"advanced"},S=k.COMPAT;function N(){this.saveGraphicsState(),ee(new et(qe,0,0,-qe,0,Ds()*qe).toString()+" cm"),this.setFontSize(this.getFontSize()/qe),d="n",S=k.ADVANCED}function D(){this.restoreGraphicsState(),d="S",S=k.COMPAT}var M=f.__private__.combineFontStyleAndFontWeight=function(p,T){if(p=="bold"&&T=="normal"||p=="bold"&&T==400||p=="normal"&&T=="italic"||p=="bold"&&T=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return T&&(p=T==400||T==="normal"?p==="italic"?"italic":"normal":T!=700&&T!=="bold"||p!=="normal"?(T==700?"bold":T)+""+p:"bold"),p};f.advancedAPI=function(p){var T=S===k.COMPAT;return T&&N.call(this),typeof p!="function"||(p(this),T&&D.call(this)),this},f.compatAPI=function(p){var T=S===k.ADVANCED;return T&&D.call(this),typeof p!="function"||(p(this),T&&N.call(this)),this},f.isAdvancedAPI=function(){return S===k.ADVANCED};var R,E=function(p){if(S!==k.ADVANCED)throw new Error(p+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},V=f.roundToPrecision=f.__private__.roundToPrecision=function(p,T){var X=e||T;if(isNaN(p)||isNaN(X))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return p.toFixed(X).replace(/0+$/,"")};R=f.hpf=f.__private__.hpf=typeof c=="number"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return V(p,c)}:c==="smart"?function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return V(p,p>-1&&p<1?16:5)}:function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.hpf");return V(p,16)};var K=f.f2=f.__private__.f2=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f2");return V(p,2)},L=f.__private__.f3=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.f3");return V(p,3)},A=f.scale=f.__private__.scale=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.scale");return S===k.COMPAT?p*qe:S===k.ADVANCED?p:void 0},U=function(p){return S===k.COMPAT?Ds()-p:S===k.ADVANCED?p:void 0},z=function(p){return A(U(p))};f.__private__.setPrecision=f.setPrecision=function(p){typeof parseInt(p,10)=="number"&&(e=parseInt(p,10))};var te,$="00000000000000000000000000000000",W=f.__private__.getFileId=function(){return $},Y=f.__private__.setFileId=function(p){return $=p!==void 0&&/^[a-fA-F0-9]{32}$/.test(p)?p.toUpperCase():$.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),g!==null&&(Hr=new pa(g.userPermissions,g.userPassword,g.ownerPassword,$)),$};f.setFileId=function(p){return Y(p),this},f.getFileId=function(){return W()};var J=f.__private__.convertDateToPDFDate=function(p){var T=p.getTimezoneOffset(),X=T<0?"+":"-",re=Math.floor(Math.abs(T/60)),ce=Math.abs(T%60),ye=[X,H(re),"'",H(ce),"'"].join("");return["D:",p.getFullYear(),H(p.getMonth()+1),H(p.getDate()),H(p.getHours()),H(p.getMinutes()),H(p.getSeconds()),ye].join("")},ie=f.__private__.convertPDFDateToDate=function(p){var T=parseInt(p.substr(2,4),10),X=parseInt(p.substr(6,2),10)-1,re=parseInt(p.substr(8,2),10),ce=parseInt(p.substr(10,2),10),ye=parseInt(p.substr(12,2),10),Pe=parseInt(p.substr(14,2),10);return new Date(T,X,re,ce,ye,Pe,0)},pe=f.__private__.setCreationDate=function(p){var T;if(p===void 0&&(p=new Date),p instanceof Date)T=J(p);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(p))throw new Error("Invalid argument passed to jsPDF.setCreationDate");T=p}return te=T},P=f.__private__.getCreationDate=function(p){var T=te;return p==="jsDate"&&(T=ie(te)),T};f.setCreationDate=function(p){return pe(p),this},f.getCreationDate=function(p){return P(p)};var B,H=f.__private__.padd2=function(p){return("0"+parseInt(p)).slice(-2)},Z=f.__private__.padd2Hex=function(p){return("00"+(p=p.toString())).substr(p.length)},Q=0,le=[],ue=[],he=0,ge=[],Ae=[],Fe=!1,Ee=ue,rt=function(){Q=0,he=0,ue=[],le=[],ge=[],Vn=rr(),en=rr()};f.__private__.setCustomOutputDestination=function(p){Fe=!0,Ee=p};var be=function(p){Fe||(Ee=p)};f.__private__.resetCustomOutputDestination=function(){Fe=!1,Ee=ue};var ee=f.__private__.out=function(p){return p=p.toString(),he+=p.length+1,Ee.push(p),Ee},ut=f.__private__.write=function(p){return ee(arguments.length===1?p.toString():Array.prototype.join.call(arguments," "))},Ge=f.__private__.getArrayBuffer=function(p){for(var T=p.length,X=new ArrayBuffer(T),re=new Uint8Array(X);T--;)re[T]=p.charCodeAt(T);return X},Ne=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];f.__private__.getStandardFonts=function(){return Ne};var Ie=n.fontSize||16;f.__private__.setFontSize=f.setFontSize=function(p){return Ie=S===k.ADVANCED?p/qe:p,this};var $e,Me=f.__private__.getFontSize=f.getFontSize=function(){return S===k.COMPAT?Ie:Ie*qe},Je=n.R2L||!1;f.__private__.setR2L=f.setR2L=function(p){return Je=p,this},f.__private__.getR2L=f.getR2L=function(){return Je};var ot,ht=f.__private__.setZoomMode=function(p){var T=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(p))$e=p;else if(isNaN(p)){if(T.indexOf(p)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+p+'" is not recognized.');$e=p}else $e=parseInt(p,10)};f.__private__.getZoomMode=function(){return $e};var bt,At=f.__private__.setPageMode=function(p){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(p)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+p+'" is not recognized.');ot=p};f.__private__.getPageMode=function(){return ot};var Ft=f.__private__.setLayoutMode=function(p){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(p)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+p+'" is not recognized.');bt=p};f.__private__.getLayoutMode=function(){return bt},f.__private__.setDisplayMode=f.setDisplayMode=function(p,T,X){return ht(p),Ft(T),At(X),this};var Qe={title:"",subject:"",author:"",keywords:"",creator:""};f.__private__.getDocumentProperty=function(p){if(Object.keys(Qe).indexOf(p)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Qe[p]},f.__private__.getDocumentProperties=function(){return Qe},f.__private__.setDocumentProperties=f.setProperties=f.setDocumentProperties=function(p){for(var T in Qe)Qe.hasOwnProperty(T)&&p[T]&&(Qe[T]=p[T]);return this},f.__private__.setDocumentProperty=function(p,T){if(Object.keys(Qe).indexOf(p)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Qe[p]=T};var _t,qe,vr,jt,Zr,Et={},$t={},hr=[],Nt={},Hn={},Ut={},$r={},Qr=null,Wt=0,ct=[],Tt=new bd(f),as=n.hotfixes||[],br={},Sn={},jn=[],et=function p(T,X,re,ce,ye,Pe){if(!(this instanceof p))return new p(T,X,re,ce,ye,Pe);isNaN(T)&&(T=1),isNaN(X)&&(X=0),isNaN(re)&&(re=0),isNaN(ce)&&(ce=1),isNaN(ye)&&(ye=0),isNaN(Pe)&&(Pe=0),this._matrix=[T,X,re,ce,ye,Pe]};Object.defineProperty(et.prototype,"sx",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(et.prototype,"shy",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(et.prototype,"shx",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(et.prototype,"sy",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(et.prototype,"tx",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(et.prototype,"ty",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(et.prototype,"a",{get:function(){return this._matrix[0]},set:function(p){this._matrix[0]=p}}),Object.defineProperty(et.prototype,"b",{get:function(){return this._matrix[1]},set:function(p){this._matrix[1]=p}}),Object.defineProperty(et.prototype,"c",{get:function(){return this._matrix[2]},set:function(p){this._matrix[2]=p}}),Object.defineProperty(et.prototype,"d",{get:function(){return this._matrix[3]},set:function(p){this._matrix[3]=p}}),Object.defineProperty(et.prototype,"e",{get:function(){return this._matrix[4]},set:function(p){this._matrix[4]=p}}),Object.defineProperty(et.prototype,"f",{get:function(){return this._matrix[5]},set:function(p){this._matrix[5]=p}}),Object.defineProperty(et.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(et.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(et.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(et.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),et.prototype.join=function(p){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(R).join(p)},et.prototype.multiply=function(p){var T=p.sx*this.sx+p.shy*this.shx,X=p.sx*this.shy+p.shy*this.sy,re=p.shx*this.sx+p.sy*this.shx,ce=p.shx*this.shy+p.sy*this.sy,ye=p.tx*this.sx+p.ty*this.shx+this.tx,Pe=p.tx*this.shy+p.ty*this.sy+this.ty;return new et(T,X,re,ce,ye,Pe)},et.prototype.decompose=function(){var p=this.sx,T=this.shy,X=this.shx,re=this.sy,ce=this.tx,ye=this.ty,Pe=Math.sqrt(p*p+T*T),We=(p/=Pe)*X+(T/=Pe)*re;X-=p*We,re-=T*We;var Xe=Math.sqrt(X*X+re*re);return We/=Xe,p*(re/=Xe)<T*(X/=Xe)&&(p=-p,T=-T,We=-We,Pe=-Pe),{scale:new et(Pe,0,0,Xe,0,0),translate:new et(1,0,0,1,ce,ye),rotate:new et(p,T,-T,p,0,0),skew:new et(1,0,We,1,0,0)}},et.prototype.toString=function(p){return this.join(" ")},et.prototype.inversed=function(){var p=this.sx,T=this.shy,X=this.shx,re=this.sy,ce=this.tx,ye=this.ty,Pe=1/(p*re-T*X),We=re*Pe,Xe=-T*Pe,vt=-X*Pe,gt=p*Pe;return new et(We,Xe,vt,gt,-We*ce-vt*ye,-Xe*ce-gt*ye)},et.prototype.applyToPoint=function(p){var T=p.x*this.sx+p.y*this.shx+this.tx,X=p.x*this.shy+p.y*this.sy+this.ty;return new qi(T,X)},et.prototype.applyToRectangle=function(p){var T=this.applyToPoint(p),X=this.applyToPoint(new qi(p.x+p.w,p.y+p.h));return new Ia(T.x,T.y,X.x-T.x,X.y-T.y)},et.prototype.clone=function(){var p=this.sx,T=this.shy,X=this.shx,re=this.sy,ce=this.tx,ye=this.ty;return new et(p,T,X,re,ce,ye)},f.Matrix=et;var An=f.matrixMult=function(p,T){return T.multiply(p)},Or=new et(1,0,0,1,0,0);f.unitMatrix=f.identityMatrix=Or;var Fr=function(p,T){if(!Hn[p]){var X=(T instanceof Qs?"Sh":"P")+(Object.keys(Nt).length+1).toString(10);T.id=X,Hn[p]=X,Nt[X]=T,Tt.publish("addPattern",T)}};f.ShadingPattern=Qs,f.TilingPattern=Li,f.addShadingPattern=function(p,T){return E("addShadingPattern()"),Fr(p,T),this},f.beginTilingPattern=function(p){E("beginTilingPattern()"),qo(p.boundingBox[0],p.boundingBox[1],p.boundingBox[2]-p.boundingBox[0],p.boundingBox[3]-p.boundingBox[1],p.matrix)},f.endTilingPattern=function(p,T){E("endTilingPattern()"),T.stream=Ae[B].join(`
`),Fr(p,T),Tt.publish("endTilingPattern",T),jn.pop().restore()};var ir=f.__private__.newObject=function(){var p=rr();return zr(p,!0),p},rr=f.__private__.newObjectDeferred=function(){return Q++,le[Q]=function(){return he},Q},zr=function(p,T){return T=typeof T=="boolean"&&T,le[p]=he,T&&ee(p+" 0 obj"),p},Rs=f.__private__.newAdditionalObject=function(){var p={objId:rr(),content:""};return ge.push(p),p},Vn=rr(),en=rr(),gn=f.__private__.decodeColorString=function(p){var T=p.split(" ");if(T.length!==2||T[1]!=="g"&&T[1]!=="G")T.length===5&&(T[4]==="k"||T[4]==="K")&&(T=[(1-T[0])*(1-T[3]),(1-T[1])*(1-T[3]),(1-T[2])*(1-T[3]),"r"]);else{var X=parseFloat(T[0]);T=[X,X,X,"r"]}for(var re="#",ce=0;ce<3;ce++)re+=("0"+Math.floor(255*parseFloat(T[ce])).toString(16)).slice(-2);return re},kn=f.__private__.encodeColorString=function(p){var T;typeof p=="string"&&(p={ch1:p});var X=p.ch1,re=p.ch2,ce=p.ch3,ye=p.ch4,Pe=p.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof X=="string"&&X.charAt(0)!=="#"){var We=new Uf(X);if(We.ok)X=We.toHex();else if(!/^\d*\.?\d*$/.test(X))throw new Error('Invalid color "'+X+'" passed to jsPDF.encodeColorString.')}if(typeof X=="string"&&/^#[0-9A-Fa-f]{3}$/.test(X)&&(X="#"+X[1]+X[1]+X[2]+X[2]+X[3]+X[3]),typeof X=="string"&&/^#[0-9A-Fa-f]{6}$/.test(X)){var Xe=parseInt(X.substr(1),16);X=Xe>>16&255,re=Xe>>8&255,ce=255&Xe}if(re===void 0||ye===void 0&&X===re&&re===ce)if(typeof X=="string")T=X+" "+Pe[0];else switch(p.precision){case 2:T=K(X/255)+" "+Pe[0];break;case 3:default:T=L(X/255)+" "+Pe[0]}else if(ye===void 0||Kt(ye)==="object"){if(ye&&!isNaN(ye.a)&&ye.a===0)return T=["1.","1.","1.",Pe[1]].join(" ");if(typeof X=="string")T=[X,re,ce,Pe[1]].join(" ");else switch(p.precision){case 2:T=[K(X/255),K(re/255),K(ce/255),Pe[1]].join(" ");break;default:case 3:T=[L(X/255),L(re/255),L(ce/255),Pe[1]].join(" ")}}else if(typeof X=="string")T=[X,re,ce,ye,Pe[2]].join(" ");else switch(p.precision){case 2:T=[K(X),K(re),K(ce),K(ye),Pe[2]].join(" ");break;case 3:default:T=[L(X),L(re),L(ce),L(ye),Pe[2]].join(" ")}return T},Ur=f.__private__.getFilters=function(){return a},tn=f.__private__.putStream=function(p){var T=(p=p||{}).data||"",X=p.filters||Ur(),re=p.alreadyAppliedFilters||[],ce=p.addLength1||!1,ye=T.length,Pe=p.objectId,We=function(Vr){return Vr};if(g!==null&&Pe===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");g!==null&&(We=Hr.encryptor(Pe,0));var Xe={};X===!0&&(X=["FlateEncode"]);var vt=p.additionalKeyValues||[],gt=(Xe=tt.API.processDataByFilters!==void 0?tt.API.processDataByFilters(T,X):{data:T,reverseChain:[]}).reverseChain+(Array.isArray(re)?re.join(" "):re.toString());if(Xe.data.length!==0&&(vt.push({key:"Length",value:Xe.data.length}),ce===!0&&vt.push({key:"Length1",value:ye})),gt.length!=0)if(gt.split("/").length-1==1)vt.push({key:"Filter",value:gt});else{vt.push({key:"Filter",value:"["+gt+"]"});for(var Ct=0;Ct<vt.length;Ct+=1)if(vt[Ct].key==="DecodeParms"){for(var sr=[],ar=0;ar<Xe.reverseChain.split("/").length-1;ar+=1)sr.push("null");sr.push(vt[Ct].value),vt[Ct].value="["+sr.join(" ")+"]"}}ee("<<");for(var xr=0;xr<vt.length;xr++)ee("/"+vt[xr].key+" "+vt[xr].value);ee(">>"),Xe.data.length!==0&&(ee("stream"),ee(We(Xe.data)),ee("endstream"))},Ln=f.__private__.putPage=function(p){var T=p.number,X=p.data,re=p.objId,ce=p.contentsObjId;zr(re,!0),ee("<</Type /Page"),ee("/Parent "+p.rootDictionaryObjId+" 0 R"),ee("/Resources "+p.resourceDictionaryObjId+" 0 R"),ee("/MediaBox ["+parseFloat(R(p.mediaBox.bottomLeftX))+" "+parseFloat(R(p.mediaBox.bottomLeftY))+" "+R(p.mediaBox.topRightX)+" "+R(p.mediaBox.topRightY)+"]"),p.cropBox!==null&&ee("/CropBox ["+R(p.cropBox.bottomLeftX)+" "+R(p.cropBox.bottomLeftY)+" "+R(p.cropBox.topRightX)+" "+R(p.cropBox.topRightY)+"]"),p.bleedBox!==null&&ee("/BleedBox ["+R(p.bleedBox.bottomLeftX)+" "+R(p.bleedBox.bottomLeftY)+" "+R(p.bleedBox.topRightX)+" "+R(p.bleedBox.topRightY)+"]"),p.trimBox!==null&&ee("/TrimBox ["+R(p.trimBox.bottomLeftX)+" "+R(p.trimBox.bottomLeftY)+" "+R(p.trimBox.topRightX)+" "+R(p.trimBox.topRightY)+"]"),p.artBox!==null&&ee("/ArtBox ["+R(p.artBox.bottomLeftX)+" "+R(p.artBox.bottomLeftY)+" "+R(p.artBox.topRightX)+" "+R(p.artBox.topRightY)+"]"),typeof p.userUnit=="number"&&p.userUnit!==1&&ee("/UserUnit "+p.userUnit),Tt.publish("putPage",{objId:re,pageContext:ct[T],pageNumber:T,page:X}),ee("/Contents "+ce+" 0 R"),ee(">>"),ee("endobj");var ye=X.join(`
`);return S===k.ADVANCED&&(ye+=`
Q`),zr(ce,!0),tn({data:ye,filters:Ur(),objectId:ce}),ee("endobj"),re},bs=f.__private__.putPages=function(){var p,T,X=[];for(p=1;p<=Wt;p++)ct[p].objId=rr(),ct[p].contentsObjId=rr();for(p=1;p<=Wt;p++)X.push(Ln({number:p,data:Ae[p],objId:ct[p].objId,contentsObjId:ct[p].contentsObjId,mediaBox:ct[p].mediaBox,cropBox:ct[p].cropBox,bleedBox:ct[p].bleedBox,trimBox:ct[p].trimBox,artBox:ct[p].artBox,userUnit:ct[p].userUnit,rootDictionaryObjId:Vn,resourceDictionaryObjId:en}));zr(Vn,!0),ee("<</Type /Pages");var re="/Kids [";for(T=0;T<Wt;T++)re+=X[T]+" 0 R ";ee(re+"]"),ee("/Count "+Wt),ee(">>"),ee("endobj"),Tt.publish("postPutPages")},Es=function(p){Tt.publish("putFont",{font:p,out:ee,newObject:ir,putStream:tn}),p.isAlreadyPutted!==!0&&(p.objectNumber=ir(),ee("<<"),ee("/Type /Font"),ee("/BaseFont /"+ga(p.postScriptName)),ee("/Subtype /Type1"),typeof p.encoding=="string"&&ee("/Encoding /"+p.encoding),ee("/FirstChar 32"),ee("/LastChar 255"),ee(">>"),ee("endobj"))},Is=function(){for(var p in Et)Et.hasOwnProperty(p)&&(v===!1||v===!0&&m.hasOwnProperty(p))&&Es(Et[p])},me=function(p){p.objectNumber=ir();var T=[];T.push({key:"Type",value:"/XObject"}),T.push({key:"Subtype",value:"/Form"}),T.push({key:"BBox",value:"["+[R(p.x),R(p.y),R(p.x+p.width),R(p.y+p.height)].join(" ")+"]"}),T.push({key:"Matrix",value:"["+p.matrix.toString()+"]"});var X=p.pages[1].join(`
`);tn({data:X,additionalKeyValues:T,objectId:p.objectNumber}),ee("endobj")},Te=function(){for(var p in br)br.hasOwnProperty(p)&&me(br[p])},Re=function(p,T){var X,re=[],ce=1/(T-1);for(X=0;X<1;X+=ce)re.push(X);if(re.push(1),p[0].offset!=0){var ye={offset:0,color:p[0].color};p.unshift(ye)}if(p[p.length-1].offset!=1){var Pe={offset:1,color:p[p.length-1].color};p.push(Pe)}for(var We="",Xe=0,vt=0;vt<re.length;vt++){for(X=re[vt];X>p[Xe+1].offset;)Xe++;var gt=p[Xe].offset,Ct=(X-gt)/(p[Xe+1].offset-gt),sr=p[Xe].color,ar=p[Xe+1].color;We+=Z(Math.round((1-Ct)*sr[0]+Ct*ar[0]).toString(16))+Z(Math.round((1-Ct)*sr[1]+Ct*ar[1]).toString(16))+Z(Math.round((1-Ct)*sr[2]+Ct*ar[2]).toString(16))}return We.trim()},ze=function(p,T){T||(T=21);var X=ir(),re=Re(p.colors,T),ce=[];ce.push({key:"FunctionType",value:"0"}),ce.push({key:"Domain",value:"[0.0 1.0]"}),ce.push({key:"Size",value:"["+T+"]"}),ce.push({key:"BitsPerSample",value:"8"}),ce.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),ce.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),tn({data:re,additionalKeyValues:ce,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:X}),ee("endobj"),p.objectNumber=ir(),ee("<< /ShadingType "+p.type),ee("/ColorSpace /DeviceRGB");var ye="/Coords ["+R(parseFloat(p.coords[0]))+" "+R(parseFloat(p.coords[1]))+" ";p.type===2?ye+=R(parseFloat(p.coords[2]))+" "+R(parseFloat(p.coords[3])):ye+=R(parseFloat(p.coords[2]))+" "+R(parseFloat(p.coords[3]))+" "+R(parseFloat(p.coords[4]))+" "+R(parseFloat(p.coords[5])),ee(ye+="]"),p.matrix&&ee("/Matrix ["+p.matrix.toString()+"]"),ee("/Function "+X+" 0 R"),ee("/Extend [true true]"),ee(">>"),ee("endobj")},Ye=function(p,T){var X=rr(),re=ir();T.push({resourcesOid:X,objectOid:re}),p.objectNumber=re;var ce=[];ce.push({key:"Type",value:"/Pattern"}),ce.push({key:"PatternType",value:"1"}),ce.push({key:"PaintType",value:"1"}),ce.push({key:"TilingType",value:"1"}),ce.push({key:"BBox",value:"["+p.boundingBox.map(R).join(" ")+"]"}),ce.push({key:"XStep",value:R(p.xStep)}),ce.push({key:"YStep",value:R(p.yStep)}),ce.push({key:"Resources",value:X+" 0 R"}),p.matrix&&ce.push({key:"Matrix",value:"["+p.matrix.toString()+"]"}),tn({data:p.stream,additionalKeyValues:ce,objectId:p.objectNumber}),ee("endobj")},Ke=function(p){var T;for(T in Nt)Nt.hasOwnProperty(T)&&(Nt[T]instanceof Qs?ze(Nt[T]):Nt[T]instanceof Li&&Ye(Nt[T],p))},Ce=function(p){for(var T in p.objectNumber=ir(),ee("<<"),p)switch(T){case"opacity":ee("/ca "+K(p[T]));break;case"stroke-opacity":ee("/CA "+K(p[T]))}ee(">>"),ee("endobj")},Oe=function(){var p;for(p in Ut)Ut.hasOwnProperty(p)&&Ce(Ut[p])},Ze=function(){for(var p in ee("/XObject <<"),br)br.hasOwnProperty(p)&&br[p].objectNumber>=0&&ee("/"+p+" "+br[p].objectNumber+" 0 R");Tt.publish("putXobjectDict"),ee(">>")},st=function(){Hr.oid=ir(),ee("<<"),ee("/Filter /Standard"),ee("/V "+Hr.v),ee("/R "+Hr.r),ee("/U <"+Hr.toHexString(Hr.U)+">"),ee("/O <"+Hr.toHexString(Hr.O)+">"),ee("/P "+Hr.P),ee(">>"),ee("endobj")},Pt=function(){for(var p in ee("/Font <<"),Et)Et.hasOwnProperty(p)&&(v===!1||v===!0&&m.hasOwnProperty(p))&&ee("/"+p+" "+Et[p].objectNumber+" 0 R");ee(">>")},Dt=function(){if(Object.keys(Nt).length>0){for(var p in ee("/Shading <<"),Nt)Nt.hasOwnProperty(p)&&Nt[p]instanceof Qs&&Nt[p].objectNumber>=0&&ee("/"+p+" "+Nt[p].objectNumber+" 0 R");Tt.publish("putShadingPatternDict"),ee(">>")}},Nr=function(p){if(Object.keys(Nt).length>0){for(var T in ee("/Pattern <<"),Nt)Nt.hasOwnProperty(T)&&Nt[T]instanceof f.TilingPattern&&Nt[T].objectNumber>=0&&Nt[T].objectNumber<p&&ee("/"+T+" "+Nt[T].objectNumber+" 0 R");Tt.publish("putTilingPatternDict"),ee(">>")}},On=function(){if(Object.keys(Ut).length>0){var p;for(p in ee("/ExtGState <<"),Ut)Ut.hasOwnProperty(p)&&Ut[p].objectNumber>=0&&ee("/"+p+" "+Ut[p].objectNumber+" 0 R");Tt.publish("putGStateDict"),ee(">>")}},lt=function(p){zr(p.resourcesOid,!0),ee("<<"),ee("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Pt(),Dt(),Nr(p.objectOid),On(),Ze(),ee(">>"),ee("endobj")},er=function(){var p=[];Is(),Oe(),Te(),Ke(p),Tt.publish("putResources"),p.forEach(lt),lt({resourcesOid:en,objectOid:Number.MAX_SAFE_INTEGER}),Tt.publish("postPutResources")},Zt=function(){Tt.publish("putAdditionalObjects");for(var p=0;p<ge.length;p++){var T=ge[p];zr(T.objId,!0),ee(T.content),ee("endobj")}Tt.publish("postPutAdditionalObjects")},Cr=function(p){$t[p.fontName]=$t[p.fontName]||{},$t[p.fontName][p.fontStyle]=p.id},rn=function(p,T,X,re,ce){var ye={id:"F"+(Object.keys(Et).length+1).toString(10),postScriptName:p,fontName:T,fontStyle:X,encoding:re,isStandardFont:ce||!1,metadata:{}};return Tt.publish("addFont",{font:ye,instance:this}),Et[ye.id]=ye,Cr(ye),ye.id},ci=function(p){for(var T=0,X=Ne.length;T<X;T++){var re=rn.call(this,p[T][0],p[T][1],p[T][2],Ne[T][3],!0);v===!1&&(m[re]=!0);var ce=p[T][0].split("-");Cr({id:re,fontName:ce[0],fontStyle:ce[1]||""})}Tt.publish("addFonts",{fonts:Et,dictionary:$t})},yr=function(p){return p.foo=function(){try{return p.apply(this,arguments)}catch(re){var T=re.stack||"";~T.indexOf(" at ")&&(T=T.split(" at ")[1]);var X="Error in function "+T.split(`
`)[0].split("<")[0]+": "+re.message;if(!at.console)throw new Error(X);at.console.error(X,re),at.alert&&alert(X)}},p.foo.bar=p,p.foo},Wr=function(p,T){var X,re,ce,ye,Pe,We,Xe,vt,gt;if(ce=(T=T||{}).sourceEncoding||"Unicode",Pe=T.outputEncoding,(T.autoencode||Pe)&&Et[_t].metadata&&Et[_t].metadata[ce]&&Et[_t].metadata[ce].encoding&&(ye=Et[_t].metadata[ce].encoding,!Pe&&Et[_t].encoding&&(Pe=Et[_t].encoding),!Pe&&ye.codePages&&(Pe=ye.codePages[0]),typeof Pe=="string"&&(Pe=ye[Pe]),Pe)){for(Xe=!1,We=[],X=0,re=p.length;X<re;X++)(vt=Pe[p.charCodeAt(X)])?We.push(String.fromCharCode(vt)):We.push(p[X]),We[X].charCodeAt(0)>>8&&(Xe=!0);p=We.join("")}for(X=p.length;Xe===void 0&&X!==0;)p.charCodeAt(X-1)>>8&&(Xe=!0),X--;if(!Xe)return p;for(We=T.noBOM?[]:[254,255],X=0,re=p.length;X<re;X++){if((gt=(vt=p.charCodeAt(X))>>8)>>8)throw new Error("Character at position "+X+" of string '"+p+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");We.push(gt),We.push(vt-(gt<<8))}return String.fromCharCode.apply(void 0,We)},nr=f.__private__.pdfEscape=f.pdfEscape=function(p,T){return Wr(p,T).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},nn=f.__private__.beginPage=function(p){Ae[++Wt]=[],ct[Wt]={objId:0,contentsObjId:0,userUnit:Number(l),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(p[0]),topRightY:Number(p[1])}},jr(Wt),be(Ae[B])},pt=function(p,T){var X,re,ce;switch(t=T||t,typeof p=="string"&&(X=x(p.toLowerCase()),Array.isArray(X)&&(re=X[0],ce=X[1])),Array.isArray(p)&&(re=p[0]*qe,ce=p[1]*qe),isNaN(re)&&(re=s[0],ce=s[1]),(re>14400||ce>14400)&&(Vt.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),re=Math.min(14400,re),ce=Math.min(14400,ce)),s=[re,ce],t.substr(0,1)){case"l":ce>re&&(s=[ce,re]);break;case"p":re>ce&&(s=[ce,re])}nn(s),Oo(Ca),ee(Kn),Ra!==0&&ee(Ra+" J"),Ea!==0&&ee(Ea+" j"),Tt.publish("addPage",{pageNumber:Wt})},St=function(p){p>0&&p<=Wt&&(Ae.splice(p,1),ct.splice(p,1),Wt--,B>Wt&&(B=Wt),this.setPage(B))},jr=function(p){p>0&&p<=Wt&&(B=p)},sn=f.__private__.getNumberOfPages=f.getNumberOfPages=function(){return Ae.length-1},Pn=function(p,T,X){var re,ce=void 0;return X=X||{},p=p!==void 0?p:Et[_t].fontName,T=T!==void 0?T:Et[_t].fontStyle,re=p.toLowerCase(),$t[re]!==void 0&&$t[re][T]!==void 0?ce=$t[re][T]:$t[p]!==void 0&&$t[p][T]!==void 0?ce=$t[p][T]:X.disableWarning===!1&&Vt.warn("Unable to look up font label for font '"+p+"', '"+T+"'. Refer to getFontList() for available fonts."),ce||X.noFallback||(ce=$t.times[T])==null&&(ce=$t.times.normal),ce},Dr=f.__private__.putInfo=function(){var p=ir(),T=function(re){return re};for(var X in g!==null&&(T=Hr.encryptor(p,0)),ee("<<"),ee("/Producer ("+nr(T("jsPDF "+tt.version))+")"),Qe)Qe.hasOwnProperty(X)&&Qe[X]&&ee("/"+X.substr(0,1).toUpperCase()+X.substr(1)+" ("+nr(T(Qe[X]))+")");ee("/CreationDate ("+nr(T(te))+")"),ee(">>"),ee("endobj")},Gn=f.__private__.putCatalog=function(p){var T=(p=p||{}).rootDictionaryObjId||Vn;switch(ir(),ee("<<"),ee("/Type /Catalog"),ee("/Pages "+T+" 0 R"),$e||($e="fullwidth"),$e){case"fullwidth":ee("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ee("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ee("/OpenAction [3 0 R /Fit]");break;case"original":ee("/OpenAction [3 0 R /XYZ null null 1]");break;default:var X=""+$e;X.substr(X.length-1)==="%"&&($e=parseInt($e)/100),typeof $e=="number"&&ee("/OpenAction [3 0 R /XYZ null null "+K($e)+"]")}switch(bt||(bt="continuous"),bt){case"continuous":ee("/PageLayout /OneColumn");break;case"single":ee("/PageLayout /SinglePage");break;case"two":case"twoleft":ee("/PageLayout /TwoColumnLeft");break;case"tworight":ee("/PageLayout /TwoColumnRight")}ot&&ee("/PageMode /"+ot),Tt.publish("putCatalog"),ee(">>"),ee("endobj")},ys=f.__private__.putTrailer=function(){ee("trailer"),ee("<<"),ee("/Size "+(Q+1)),ee("/Root "+Q+" 0 R"),ee("/Info "+(Q-1)+" 0 R"),g!==null&&ee("/Encrypt "+Hr.oid+" 0 R"),ee("/ID [ <"+$+"> <"+$+"> ]"),ee(">>")},tc=f.__private__.putHeader=function(){ee("%PDF-"+y),ee("%ºß¬à")},rc=f.__private__.putXRef=function(){var p="0000000000";ee("xref"),ee("0 "+(Q+1)),ee("0000000000 65535 f ");for(var T=1;T<=Q;T++)typeof le[T]=="function"?ee((p+le[T]()).slice(-10)+" 00000 n "):le[T]!==void 0?ee((p+le[T]).slice(-10)+" 00000 n "):ee("0000000000 00000 n ")},xs=f.__private__.buildDocument=function(){rt(),be(ue),Tt.publish("buildDocument"),tc(),bs(),Zt(),er(),g!==null&&st(),Dr(),Gn();var p=he;return rc(),ys(),ee("startxref"),ee(""+p),ee("%%EOF"),be(Ae[B]),ue.join(`
`)},Oi=f.__private__.getBlob=function(p){return new Blob([Ge(p)],{type:"application/pdf"})},Fi=f.output=f.__private__.output=yr(function(p,T){switch(typeof(T=T||{})=="string"?T={filename:T}:T.filename=T.filename||"generated.pdf",p){case void 0:return xs();case"save":f.save(T.filename);break;case"arraybuffer":return Ge(xs());case"blob":return Oi(xs());case"bloburi":case"bloburl":if(at.URL!==void 0&&typeof at.URL.createObjectURL=="function")return at.URL&&at.URL.createObjectURL(Oi(xs()))||void 0;Vt.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var X="",re=xs();try{X=hu(re)}catch{X=hu(unescape(encodeURIComponent(re)))}return"data:application/pdf;filename="+T.filename+";base64,"+X;case"pdfobjectnewwindow":if(Object.prototype.toString.call(at)==="[object Window]"){var ce="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",ye=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';T.pdfObjectUrl&&(ce=T.pdfObjectUrl,ye="");var Pe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+ce+'"'+ye+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(T)+");<\/script></body></html>",We=at.open();return We!==null&&We.document.write(Pe),We}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(at)==="[object Window]"){var Xe='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(T.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+T.filename+'" width="500px" height="400px" /></body></html>',vt=at.open();if(vt!==null){vt.document.write(Xe);var gt=this;vt.document.documentElement.querySelector("#pdfViewer").onload=function(){vt.document.title=T.filename,vt.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(gt.output("bloburl"))}}return vt}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(at)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Ct='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",T)+'"></iframe></body></html>',sr=at.open();if(sr!==null&&(sr.document.write(Ct),sr.document.title=T.filename),sr||typeof safari>"u")return sr;break;case"datauri":case"dataurl":return at.document.location.href=this.output("datauristring",T);default:return null}}),To=function(p){return Array.isArray(as)===!0&&as.indexOf(p)>-1};switch(r){case"pt":qe=1;break;case"mm":qe=72/25.4;break;case"cm":qe=72/2.54;break;case"in":qe=72;break;case"px":qe=To("px_scaling")==1?.75:96/72;break;case"pc":case"em":qe=12;break;case"ex":qe=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);qe=r}var Hr=null;pe(),Y();var nc=function(p){return g!==null?Hr.encryptor(p,0):function(T){return T}},Ro=f.__private__.getPageInfo=f.getPageInfo=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ct[p].objId,pageNumber:p,pageContext:ct[p]}},dt=f.__private__.getPageInfoByObjId=function(p){if(isNaN(p)||p%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var T in ct)if(ct[T].objId===p)break;return Ro(T)},sc=f.__private__.getCurrentPageInfo=f.getCurrentPageInfo=function(){return{objId:ct[B].objId,pageNumber:B,pageContext:ct[B]}};f.addPage=function(){return pt.apply(this,arguments),this},f.setPage=function(){return jr.apply(this,arguments),be.call(this,Ae[B]),this},f.insertPage=function(p){return this.addPage(),this.movePage(B,p),this},f.movePage=function(p,T){var X,re;if(p>T){X=Ae[p],re=ct[p];for(var ce=p;ce>T;ce--)Ae[ce]=Ae[ce-1],ct[ce]=ct[ce-1];Ae[T]=X,ct[T]=re,this.setPage(T)}else if(p<T){X=Ae[p],re=ct[p];for(var ye=p;ye<T;ye++)Ae[ye]=Ae[ye+1],ct[ye]=ct[ye+1];Ae[T]=X,ct[T]=re,this.setPage(T)}return this},f.deletePage=function(){return St.apply(this,arguments),this},f.__private__.text=f.text=function(p,T,X,re,ce){var ye,Pe,We,Xe,vt,gt,Ct,sr,ar,xr=(re=re||{}).scope||this;if(typeof p=="number"&&typeof T=="number"&&(typeof X=="string"||Array.isArray(X))){var Vr=X;X=T,T=p,p=Vr}if(arguments[3]instanceof et?(E("The transform parameter of text() with a Matrix value"),ar=ce):(We=arguments[4],Xe=arguments[5],Kt(Ct=arguments[3])==="object"&&Ct!==null||(typeof We=="string"&&(Xe=We,We=null),typeof Ct=="string"&&(Xe=Ct,Ct=null),typeof Ct=="number"&&(We=Ct,Ct=null),re={flags:Ct,angle:We,align:Xe})),isNaN(T)||isNaN(X)||p==null)throw new Error("Invalid arguments passed to jsPDF.text");if(p.length===0)return xr;var Tr="",Jn=!1,Nn=typeof re.lineHeightFactor=="number"?re.lineHeightFactor:hi,cs=xr.internal.scaleFactor;function $o(Jt){return Jt=Jt.split("	").join(Array(re.TabLen||9).join(" ")),nr(Jt,Ct)}function Ma(Jt){for(var Yt,fr=Jt.concat(),Ar=[],As=fr.length;As--;)typeof(Yt=fr.shift())=="string"?Ar.push(Yt):Array.isArray(Jt)&&(Yt.length===1||Yt[1]===void 0&&Yt[2]===void 0)?Ar.push(Yt[0]):Ar.push([Yt[0],Yt[1],Yt[2]]);return Ar}function Ba(Jt,Yt){var fr;if(typeof Jt=="string")fr=Yt(Jt)[0];else if(Array.isArray(Jt)){for(var Ar,As,Ga=Jt.concat(),Xi=[],Vo=Ga.length;Vo--;)typeof(Ar=Ga.shift())=="string"?Xi.push(Yt(Ar)[0]):Array.isArray(Ar)&&typeof Ar[0]=="string"&&(As=Yt(Ar[0],Ar[1],Ar[2]),Xi.push([As[0],As[1],As[2]]));fr=Xi}return fr}var zi=!1,qa=!0;if(typeof p=="string")zi=!0;else if(Array.isArray(p)){var $a=p.concat();Pe=[];for(var Ui,Mr=$a.length;Mr--;)(typeof(Ui=$a.shift())!="string"||Array.isArray(Ui)&&typeof Ui[0]!="string")&&(qa=!1);zi=qa}if(zi===!1)throw new Error('Type of text must be string or Array. "'+p+'" is not recognized.');typeof p=="string"&&(p=p.match(/[\r?\n]/)?p.split(/\r\n|\r|\n/g):[p]);var Wi=Ie/xr.internal.scaleFactor,Hi=Wi*(Nn-1);switch(re.baseline){case"bottom":X-=Hi;break;case"top":X+=Wi-Hi;break;case"hanging":X+=Wi-2*Hi;break;case"middle":X+=Wi/2-Hi}if((gt=re.maxWidth||0)>0&&(typeof p=="string"?p=xr.splitTextToSize(p,gt):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(Jt,Yt){return Jt.concat(xr.splitTextToSize(Yt,gt))},[]))),ye={text:p,x:T,y:X,options:re,mutex:{pdfEscape:nr,activeFontKey:_t,fonts:Et,activeFontSize:Ie}},Tt.publish("preProcessText",ye),p=ye.text,We=(re=ye.options).angle,!(ar instanceof et)&&We&&typeof We=="number"){We*=Math.PI/180,re.rotationDirection===0&&(We=-We),S===k.ADVANCED&&(We=-We);var Vi=Math.cos(We),za=Math.sin(We);ar=new et(Vi,za,-za,Vi,0,0)}else We&&We instanceof et&&(ar=We);S!==k.ADVANCED||ar||(ar=Or),(vt=re.charSpace||Bi)!==void 0&&(Tr+=R(A(vt))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(sr=re.horizontalScale)!==void 0&&(Tr+=R(100*sr)+` Tz
`),re.lang;var mn=-1,pc=re.renderingMode!==void 0?re.renderingMode:re.stroke,Ua=xr.internal.getCurrentPageInfo().pageContext;switch(pc){case 0:case!1:case"fill":mn=0;break;case 1:case!0:case"stroke":mn=1;break;case 2:case"fillThenStroke":mn=2;break;case 3:case"invisible":mn=3;break;case 4:case"fillAndAddForClipping":mn=4;break;case 5:case"strokeAndAddPathForClipping":mn=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":mn=6;break;case 7:case"addToPathForClipping":mn=7}var zo=Ua.usedRenderingMode!==void 0?Ua.usedRenderingMode:-1;mn!==-1?Tr+=mn+` Tr
`:zo!==-1&&(Tr+=`0 Tr
`),mn!==-1&&(Ua.usedRenderingMode=mn),Xe=re.align||"left";var Fn,Gi=Ie*Nn,Uo=xr.internal.pageSize.getWidth(),Wo=Et[_t];vt=re.charSpace||Bi,gt=re.maxWidth||0,Ct=Object.assign({autoencode:!0,noBOM:!0},re.flags);var Ms=[],pi=function(Jt){return xr.getStringUnitWidth(Jt,{font:Wo,charSpace:vt,fontSize:Ie,doKerning:!1})*Ie/cs};if(Object.prototype.toString.call(p)==="[object Array]"){var vn;Pe=Ma(p),Xe!=="left"&&(Fn=Pe.map(pi));var an,Bs=0;if(Xe==="right"){T-=Fn[0],p=[],Mr=Pe.length;for(var _s=0;_s<Mr;_s++)_s===0?(an=ls(T),vn=ws(X)):(an=A(Bs-Fn[_s]),vn=-Gi),p.push([Pe[_s],an,vn]),Bs=Fn[_s]}else if(Xe==="center"){T-=Fn[0]/2,p=[],Mr=Pe.length;for(var Ss=0;Ss<Mr;Ss++)Ss===0?(an=ls(T),vn=ws(X)):(an=A((Bs-Fn[Ss])/2),vn=-Gi),p.push([Pe[Ss],an,vn]),Bs=Fn[Ss]}else if(Xe==="left"){p=[],Mr=Pe.length;for(var Ki=0;Ki<Mr;Ki++)p.push(Pe[Ki])}else if(Xe==="justify"&&Wo.encoding==="Identity-H"){p=[],Mr=Pe.length,gt=gt!==0?gt:Uo;for(var js=0,dr=0;dr<Mr;dr++)if(vn=dr===0?ws(X):-Gi,an=dr===0?ls(T):js,dr<Mr-1){var Wa=A((gt-Fn[dr])/(Pe[dr].split(" ").length-1)),on=Pe[dr].split(" ");p.push([on[0]+" ",an,vn]),js=0;for(var Dn=1;Dn<on.length;Dn++){var Ji=(pi(on[Dn-1]+" "+on[Dn])-pi(on[Dn]))*cs+Wa;Dn==on.length-1?p.push([on[Dn],Ji,0]):p.push([on[Dn]+" ",Ji,0]),js-=Ji}}else p.push([Pe[dr],an,vn]);p.push(["",js,0])}else{if(Xe!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(p=[],Mr=Pe.length,gt=gt!==0?gt:Uo,dr=0;dr<Mr;dr++)vn=dr===0?ws(X):-Gi,an=dr===0?ls(T):0,dr<Mr-1?Ms.push(R(A((gt-Fn[dr])/(Pe[dr].split(" ").length-1)))):Ms.push(0),p.push([Pe[dr],an,vn])}}var Ho=typeof re.R2L=="boolean"?re.R2L:Je;Ho===!0&&(p=Ba(p,function(Jt,Yt,fr){return[Jt.split("").reverse().join(""),Yt,fr]})),ye={text:p,x:T,y:X,options:re,mutex:{pdfEscape:nr,activeFontKey:_t,fonts:Et,activeFontSize:Ie}},Tt.publish("postProcessText",ye),p=ye.text,Jn=ye.mutex.isHex||!1;var Ha=Et[_t].encoding;Ha!=="WinAnsiEncoding"&&Ha!=="StandardEncoding"||(p=Ba(p,function(Jt,Yt,fr){return[$o(Jt),Yt,fr]})),Pe=Ma(p),p=[];for(var gi,mi,qs,vi=0,Yi=1,bi=Array.isArray(Pe[0])?Yi:vi,$s="",Va=function(Jt,Yt,fr){var Ar="";return fr instanceof et?(fr=typeof re.angle=="number"?An(fr,new et(1,0,0,1,Jt,Yt)):An(new et(1,0,0,1,Jt,Yt),fr),S===k.ADVANCED&&(fr=An(new et(1,0,0,-1,0,0),fr)),Ar=fr.join(" ")+` Tm
`):Ar=R(Jt)+" "+R(Yt)+` Td
`,Ar},Mn=0;Mn<Pe.length;Mn++){switch($s="",bi){case Yi:qs=(Jn?"<":"(")+Pe[Mn][0]+(Jn?">":")"),gi=parseFloat(Pe[Mn][1]),mi=parseFloat(Pe[Mn][2]);break;case vi:qs=(Jn?"<":"(")+Pe[Mn]+(Jn?">":")"),gi=ls(T),mi=ws(X)}Ms!==void 0&&Ms[Mn]!==void 0&&($s=Ms[Mn]+` Tw
`),Mn===0?p.push($s+Va(gi,mi,ar)+qs):bi===vi?p.push($s+qs):bi===Yi&&p.push($s+Va(gi,mi,ar)+qs)}p=bi===vi?p.join(` Tj
T* `):p.join(` Tj
`),p+=` Tj
`;var Bn=`BT
/`;return Bn+=_t+" "+Ie+` Tf
`,Bn+=R(Ie*Nn)+` TL
`,Bn+=di+`
`,Bn+=Tr,Bn+=p,ee(Bn+="ET"),m[_t]=!0,xr};var ic=f.__private__.clip=f.clip=function(p){return ee(p==="evenodd"?"W*":"W"),this};f.clipEvenOdd=function(){return ic("evenodd")},f.__private__.discardPath=f.discardPath=function(){return ee("n"),this};var os=f.__private__.isValidStyle=function(p){var T=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(p)!==-1&&(T=!0),T};f.__private__.setDefaultPathOperation=f.setDefaultPathOperation=function(p){return os(p)&&(d=p),this};var Eo=f.__private__.getStyle=f.getStyle=function(p){var T=d;switch(p){case"D":case"S":T="S";break;case"F":T="f";break;case"FD":case"DF":T="B";break;case"f":case"f*":case"B":case"B*":T=p}return T},Io=f.close=function(){return ee("h"),this};f.stroke=function(){return ee("S"),this},f.fill=function(p){return Di("f",p),this},f.fillEvenOdd=function(p){return Di("f*",p),this},f.fillStroke=function(p){return Di("B",p),this},f.fillStrokeEvenOdd=function(p){return Di("B*",p),this};var Di=function(p,T){Kt(T)==="object"?oc(T,p):ee(p)},Pa=function(p){p===null||S===k.ADVANCED&&p===void 0||(p=Eo(p),ee(p))};function ac(p,T,X,re,ce){var ye=new Li(T||this.boundingBox,X||this.xStep,re||this.yStep,this.gState,ce||this.matrix);ye.stream=this.stream;var Pe=p+"$$"+this.cloneIndex+++"$$";return Fr(Pe,ye),ye}var oc=function(p,T){var X=Hn[p.key],re=Nt[X];if(re instanceof Qs)ee("q"),ee(lc(T)),re.gState&&f.setGState(re.gState),ee(p.matrix.toString()+" cm"),ee("/"+X+" sh"),ee("Q");else if(re instanceof Li){var ce=new et(1,0,0,-1,0,Ds());p.matrix&&(ce=ce.multiply(p.matrix||Or),X=ac.call(re,p.key,p.boundingBox,p.xStep,p.yStep,ce).id),ee("q"),ee("/Pattern cs"),ee("/"+X+" scn"),re.gState&&f.setGState(re.gState),ee(T),ee("Q")}},lc=function(p){switch(p){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},Na=f.moveTo=function(p,T){return ee(R(A(p))+" "+R(z(T))+" m"),this},ui=f.lineTo=function(p,T){return ee(R(A(p))+" "+R(z(T))+" l"),this},Os=f.curveTo=function(p,T,X,re,ce,ye){return ee([R(A(p)),R(z(T)),R(A(X)),R(z(re)),R(A(ce)),R(z(ye)),"c"].join(" ")),this};f.__private__.line=f.line=function(p,T,X,re,ce){if(isNaN(p)||isNaN(T)||isNaN(X)||isNaN(re)||!os(ce))throw new Error("Invalid arguments passed to jsPDF.line");return S===k.COMPAT?this.lines([[X-p,re-T]],p,T,[1,1],ce||"S"):this.lines([[X-p,re-T]],p,T,[1,1]).stroke()},f.__private__.lines=f.lines=function(p,T,X,re,ce,ye){var Pe,We,Xe,vt,gt,Ct,sr,ar,xr,Vr,Tr,Jn;if(typeof p=="number"&&(Jn=X,X=T,T=p,p=Jn),re=re||[1,1],ye=ye||!1,isNaN(T)||isNaN(X)||!Array.isArray(p)||!Array.isArray(re)||!os(ce)||typeof ye!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(Na(T,X),Pe=re[0],We=re[1],vt=p.length,Vr=T,Tr=X,Xe=0;Xe<vt;Xe++)(gt=p[Xe]).length===2?(Vr=gt[0]*Pe+Vr,Tr=gt[1]*We+Tr,ui(Vr,Tr)):(Ct=gt[0]*Pe+Vr,sr=gt[1]*We+Tr,ar=gt[2]*Pe+Vr,xr=gt[3]*We+Tr,Vr=gt[4]*Pe+Vr,Tr=gt[5]*We+Tr,Os(Ct,sr,ar,xr,Vr,Tr));return ye&&Io(),Pa(ce),this},f.path=function(p){for(var T=0;T<p.length;T++){var X=p[T],re=X.c;switch(X.op){case"m":Na(re[0],re[1]);break;case"l":ui(re[0],re[1]);break;case"c":Os.apply(this,re);break;case"h":Io()}}return this},f.__private__.rect=f.rect=function(p,T,X,re,ce){if(isNaN(p)||isNaN(T)||isNaN(X)||isNaN(re)||!os(ce))throw new Error("Invalid arguments passed to jsPDF.rect");return S===k.COMPAT&&(re=-re),ee([R(A(p)),R(z(T)),R(A(X)),R(A(re)),"re"].join(" ")),Pa(ce),this},f.__private__.triangle=f.triangle=function(p,T,X,re,ce,ye,Pe){if(isNaN(p)||isNaN(T)||isNaN(X)||isNaN(re)||isNaN(ce)||isNaN(ye)||!os(Pe))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[X-p,re-T],[ce-X,ye-re],[p-ce,T-ye]],p,T,[1,1],Pe,!0),this},f.__private__.roundedRect=f.roundedRect=function(p,T,X,re,ce,ye,Pe){if(isNaN(p)||isNaN(T)||isNaN(X)||isNaN(re)||isNaN(ce)||isNaN(ye)||!os(Pe))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var We=4/3*(Math.SQRT2-1);return ce=Math.min(ce,.5*X),ye=Math.min(ye,.5*re),this.lines([[X-2*ce,0],[ce*We,0,ce,ye-ye*We,ce,ye],[0,re-2*ye],[0,ye*We,-ce*We,ye,-ce,ye],[2*ce-X,0],[-ce*We,0,-ce,-ye*We,-ce,-ye],[0,2*ye-re],[0,-ye*We,ce*We,-ye,ce,-ye]],p+ce,T,[1,1],Pe,!0),this},f.__private__.ellipse=f.ellipse=function(p,T,X,re,ce){if(isNaN(p)||isNaN(T)||isNaN(X)||isNaN(re)||!os(ce))throw new Error("Invalid arguments passed to jsPDF.ellipse");var ye=4/3*(Math.SQRT2-1)*X,Pe=4/3*(Math.SQRT2-1)*re;return Na(p+X,T),Os(p+X,T-Pe,p+ye,T-re,p,T-re),Os(p-ye,T-re,p-X,T-Pe,p-X,T),Os(p-X,T+Pe,p-ye,T+re,p,T+re),Os(p+ye,T+re,p+X,T+Pe,p+X,T),Pa(ce),this},f.__private__.circle=f.circle=function(p,T,X,re){if(isNaN(p)||isNaN(T)||isNaN(X)||!os(re))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(p,T,X,X,re)},f.setFont=function(p,T,X){return X&&(T=M(T,X)),_t=Pn(p,T,{disableWarning:!1}),this};var cc=f.__private__.getFont=f.getFont=function(){return Et[Pn.apply(f,arguments)]};f.__private__.getFontList=f.getFontList=function(){var p,T,X={};for(p in $t)if($t.hasOwnProperty(p))for(T in X[p]=[],$t[p])$t[p].hasOwnProperty(T)&&X[p].push(T);return X},f.addFont=function(p,T,X,re,ce){var ye=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&ye.indexOf(arguments[3])!==-1?ce=arguments[3]:arguments[3]&&ye.indexOf(arguments[3])==-1&&(X=M(X,re)),ce=ce||"Identity-H",rn.call(this,p,T,X,ce)};var hi,Ca=n.lineWidth||.200025,Mi=f.__private__.getLineWidth=f.getLineWidth=function(){return Ca},Oo=f.__private__.setLineWidth=f.setLineWidth=function(p){return Ca=p,ee(R(A(p))+" w"),this};f.__private__.setLineDash=tt.API.setLineDash=tt.API.setLineDashPattern=function(p,T){if(p=p||[],T=T||0,isNaN(T)||!Array.isArray(p))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return p=p.map(function(X){return R(A(X))}).join(" "),T=R(A(T)),ee("["+p+"] "+T+" d"),this};var Fo=f.__private__.getLineHeight=f.getLineHeight=function(){return Ie*hi};f.__private__.getLineHeight=f.getLineHeight=function(){return Ie*hi};var Do=f.__private__.setLineHeightFactor=f.setLineHeightFactor=function(p){return typeof(p=p||1.15)=="number"&&(hi=p),this},Mo=f.__private__.getLineHeightFactor=f.getLineHeightFactor=function(){return hi};Do(n.lineHeight);var ls=f.__private__.getHorizontalCoordinate=function(p){return A(p)},ws=f.__private__.getVerticalCoordinate=function(p){return S===k.ADVANCED?p:ct[B].mediaBox.topRightY-ct[B].mediaBox.bottomLeftY-A(p)},uc=f.__private__.getHorizontalCoordinateString=f.getHorizontalCoordinateString=function(p){return R(ls(p))},Fs=f.__private__.getVerticalCoordinateString=f.getVerticalCoordinateString=function(p){return R(ws(p))},Kn=n.strokeColor||"0 G";f.__private__.getStrokeColor=f.getDrawColor=function(){return gn(Kn)},f.__private__.setStrokeColor=f.setDrawColor=function(p,T,X,re){return Kn=kn({ch1:p,ch2:T,ch3:X,ch4:re,pdfColorType:"draw",precision:2}),ee(Kn),this};var Ta=n.fillColor||"0 g";f.__private__.getFillColor=f.getFillColor=function(){return gn(Ta)},f.__private__.setFillColor=f.setFillColor=function(p,T,X,re){return Ta=kn({ch1:p,ch2:T,ch3:X,ch4:re,pdfColorType:"fill",precision:2}),ee(Ta),this};var di=n.textColor||"0 g",hc=f.__private__.getTextColor=f.getTextColor=function(){return gn(di)};f.__private__.setTextColor=f.setTextColor=function(p,T,X,re){return di=kn({ch1:p,ch2:T,ch3:X,ch4:re,pdfColorType:"text",precision:3}),this};var Bi=n.charSpace,dc=f.__private__.getCharSpace=f.getCharSpace=function(){return parseFloat(Bi||0)};f.__private__.setCharSpace=f.setCharSpace=function(p){if(isNaN(p))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Bi=p,this};var Ra=0;f.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},f.__private__.setLineCap=f.setLineCap=function(p){var T=f.CapJoinStyles[p];if(T===void 0)throw new Error("Line cap style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ra=T,ee(T+" J"),this};var Ea=0;f.__private__.setLineJoin=f.setLineJoin=function(p){var T=f.CapJoinStyles[p];if(T===void 0)throw new Error("Line join style of '"+p+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Ea=T,ee(T+" j"),this},f.__private__.setLineMiterLimit=f.__private__.setMiterLimit=f.setLineMiterLimit=f.setMiterLimit=function(p){if(p=p||0,isNaN(p))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ee(R(A(p))+" M"),this},f.GState=_o,f.setGState=function(p){(p=typeof p=="string"?Ut[$r[p]]:Bo(null,p)).equals(Qr)||(ee("/"+p.id+" gs"),Qr=p)};var Bo=function(p,T){if(!p||!$r[p]){var X=!1;for(var re in Ut)if(Ut.hasOwnProperty(re)&&Ut[re].equals(T)){X=!0;break}if(X)T=Ut[re];else{var ce="GS"+(Object.keys(Ut).length+1).toString(10);Ut[ce]=T,T.id=ce}return p&&($r[p]=T.id),Tt.publish("addGState",T),T}};f.addGState=function(p,T){return Bo(p,T),this},f.saveGraphicsState=function(){return ee("q"),hr.push({key:_t,size:Ie,color:di}),this},f.restoreGraphicsState=function(){ee("Q");var p=hr.pop();return _t=p.key,Ie=p.size,di=p.color,Qr=null,this},f.setCurrentTransformationMatrix=function(p){return ee(p.toString()+" cm"),this},f.comment=function(p){return ee("#"+p),this};var qi=function(p,T){var X=p||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return X},set:function(ye){isNaN(ye)||(X=parseFloat(ye))}});var re=T||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return re},set:function(ye){isNaN(ye)||(re=parseFloat(ye))}});var ce="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return ce},set:function(ye){ce=ye.toString()}}),this},Ia=function(p,T,X,re){qi.call(this,p,T),this.type="rect";var ce=X||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return ce},set:function(Pe){isNaN(Pe)||(ce=parseFloat(Pe))}});var ye=re||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return ye},set:function(Pe){isNaN(Pe)||(ye=parseFloat(Pe))}}),this},Oa=function(){this.page=Wt,this.currentPage=B,this.pages=Ae.slice(0),this.pagesContext=ct.slice(0),this.x=vr,this.y=jt,this.matrix=Zr,this.width=fi(B),this.height=Ds(B),this.outputDestination=Ee,this.id="",this.objectNumber=-1};Oa.prototype.restore=function(){Wt=this.page,B=this.currentPage,ct=this.pagesContext,Ae=this.pages,vr=this.x,jt=this.y,Zr=this.matrix,Fa(B,this.width),Da(B,this.height),Ee=this.outputDestination};var qo=function(p,T,X,re,ce){jn.push(new Oa),Wt=B=0,Ae=[],vr=p,jt=T,Zr=ce,nn([X,re])},fc=function(p){if(Sn[p])jn.pop().restore();else{var T=new Oa,X="Xo"+(Object.keys(br).length+1).toString(10);T.id=X,Sn[p]=X,br[X]=T,Tt.publish("addFormObject",T),jn.pop().restore()}};for(var $i in f.beginFormObject=function(p,T,X,re,ce){return qo(p,T,X,re,ce),this},f.endFormObject=function(p){return fc(p),this},f.doFormObject=function(p,T){var X=br[Sn[p]];return ee("q"),ee(T.toString()+" cm"),ee("/"+X.id+" Do"),ee("Q"),this},f.getFormObject=function(p){var T=br[Sn[p]];return{x:T.x,y:T.y,width:T.width,height:T.height,matrix:T.matrix}},f.save=function(p,T){return p=p||"generated.pdf",(T=T||{}).returnPromise=T.returnPromise||!1,T.returnPromise===!1?(Si(Oi(xs()),p),typeof Si.unload=="function"&&at.setTimeout&&setTimeout(Si.unload,911),this):new Promise(function(X,re){try{var ce=Si(Oi(xs()),p);typeof Si.unload=="function"&&at.setTimeout&&setTimeout(Si.unload,911),X(ce)}catch(ye){re(ye.message)}})},tt.API)tt.API.hasOwnProperty($i)&&($i==="events"&&tt.API.events.length?function(p,T){var X,re,ce;for(ce=T.length-1;ce!==-1;ce--)X=T[ce][0],re=T[ce][1],p.subscribe.apply(p,[X].concat(typeof re=="function"?[re]:re))}(Tt,tt.API.events):f[$i]=tt.API[$i]);var fi=f.getPageWidth=function(p){return(ct[p=p||B].mediaBox.topRightX-ct[p].mediaBox.bottomLeftX)/qe},Fa=f.setPageWidth=function(p,T){ct[p].mediaBox.topRightX=T*qe+ct[p].mediaBox.bottomLeftX},Ds=f.getPageHeight=function(p){return(ct[p=p||B].mediaBox.topRightY-ct[p].mediaBox.bottomLeftY)/qe},Da=f.setPageHeight=function(p,T){ct[p].mediaBox.topRightY=T*qe+ct[p].mediaBox.bottomLeftY};return f.internal={pdfEscape:nr,getStyle:Eo,getFont:cc,getFontSize:Me,getCharSpace:dc,getTextColor:hc,getLineHeight:Fo,getLineHeightFactor:Mo,getLineWidth:Mi,write:ut,getHorizontalCoordinate:ls,getVerticalCoordinate:ws,getCoordinateString:uc,getVerticalCoordinateString:Fs,collections:{},newObject:ir,newAdditionalObject:Rs,newObjectDeferred:rr,newObjectDeferredBegin:zr,getFilters:Ur,putStream:tn,events:Tt,scaleFactor:qe,pageSize:{getWidth:function(){return fi(B)},setWidth:function(p){Fa(B,p)},getHeight:function(){return Ds(B)},setHeight:function(p){Da(B,p)}},encryptionOptions:g,encryption:Hr,getEncryptor:nc,output:Fi,getNumberOfPages:sn,pages:Ae,out:ee,f2:K,f3:L,getPageInfo:Ro,getPageInfoByObjId:dt,getCurrentPageInfo:sc,getPDFVersion:_,Point:qi,Rectangle:Ia,Matrix:et,hasHotfix:To},Object.defineProperty(f.internal.pageSize,"width",{get:function(){return fi(B)},set:function(p){Fa(B,p)},enumerable:!0,configurable:!0}),Object.defineProperty(f.internal.pageSize,"height",{get:function(){return Ds(B)},set:function(p){Da(B,p)},enumerable:!0,configurable:!0}),ci.call(f,Ne),_t="F1",pt(s,t),Tt.publish("initialized"),f}pa.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},pa.prototype.toHexString=function(n){return n.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},pa.prototype.hexToBytes=function(n){for(var e=[],t=0;t<n.length;t+=2)e.push(String.fromCharCode(parseInt(n.substr(t,2),16)));return e.join("")},pa.prototype.processOwnerPassword=function(n,e){return fu(du(e).substr(0,5),n)},pa.prototype.encryptor=function(n,e){var t=du(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&e,e>>8&255)).substr(0,10);return function(r){return fu(t,r)}},_o.prototype.equals=function(n){var e,t="id,objectNumber,equals";if(!n||Kt(n)!==Kt(this))return!1;var r=0;for(e in this)if(!(t.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!n.hasOwnProperty(e)||this[e]!==n[e])return!1;r++}for(e in n)n.hasOwnProperty(e)&&t.indexOf(e)<0&&r--;return r===0},tt.API={events:[]},tt.version="2.5.2";var lr=tt.API,Zu=1,Ei=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},na=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},mt=function(n){return n.toFixed(2)},Ys=function(n){return n.toFixed(5)};lr.__acroform__={};var _n=function(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n},yd=function(n){return n*Zu},hs=function(n){var e=new Gf,t=Ve.internal.getHeight(n)||0,r=Ve.internal.getWidth(n)||0;return e.BBox=[0,0,Number(mt(r)),Number(mt(t))],e},R2=lr.__acroform__.setBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<e},E2=lr.__acroform__.clearBit=function(n,e){if(n=n||0,e=e||0,isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<e)},I2=lr.__acroform__.getBit=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return n&1<<e?1:0},pr=lr.__acroform__.getBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return I2(n,e-1)},gr=lr.__acroform__.setBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return R2(n,e-1)},mr=lr.__acroform__.clearBitForPdf=function(n,e){if(isNaN(n)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return E2(n,e-1)},O2=lr.__acroform__.calculateCoordinates=function(n,e){var t=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,s=n[0],i=n[1],a=n[2],l=n[3],c={};return c.lowerLeft_X=t(s)||0,c.lowerLeft_Y=r(i+l)||0,c.upperRight_X=t(s+a)||0,c.upperRight_Y=r(i)||0,[Number(mt(c.lowerLeft_X)),Number(mt(c.lowerLeft_Y)),Number(mt(c.upperRight_X)),Number(mt(c.upperRight_Y))]},F2=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var e=[],t=n._V||n.DV,r=pu(n,t),s=n.scope.internal.getFont(n.fontName,n.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(n.scope.__private__.encodeColorString(n.color)),e.push("/"+s+" "+mt(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var i=hs(n);return i.scope=n.scope,i.stream=e.join(`
`),i}},pu=function(n,e){var t=n.fontSize===0?n.maxFontSize:n.fontSize,r={text:"",fontSize:""},s=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");s=n.multiline?s.map(function(L){return L.split(`
`)}):s.map(function(L){return[L]});var i=t,a=Ve.internal.getHeight(n)||0;a=a<0?-a:a;var l=Ve.internal.getWidth(n)||0;l=l<0?-l:l;var c=function(L,A,U){if(L+1<s.length){var z=A+" "+s[L+1][0];return ml(z,n,U).width<=l-4}return!1};i++;e:for(;i>0;){e="",i--;var d,g,v=ml("3",n,i).height,m=n.multiline?a-i:(a-v)/2,f=m+=2,y=0,_=0,j=0;if(i<=0){e=`(...) Tj
`,e+="% Width of Text: "+ml(e,n,i=12).width+", FieldWidth:"+l+`
`;break}for(var x="",k=0,S=0;S<s.length;S++)if(s.hasOwnProperty(S)){var N=!1;if(s[S].length!==1&&j!==s[S].length-1){if((v+2)*(k+2)+2>a)continue e;x+=s[S][j],N=!0,_=S,S--}else{x=(x+=s[S][j]+" ").substr(x.length-1)==" "?x.substr(0,x.length-1):x;var D=parseInt(S),M=c(D,x,i),R=S>=s.length-1;if(M&&!R){x+=" ",j=0;continue}if(M||R){if(R)_=D;else if(n.multiline&&(v+2)*(k+2)+2>a)continue e}else{if(!n.multiline||(v+2)*(k+2)+2>a)continue e;_=D}}for(var E="",V=y;V<=_;V++){var K=s[V];if(n.multiline){if(V===_){E+=K[j]+" ",j=(j+1)%K.length;continue}if(V===y){E+=K[K.length-1]+" ";continue}}E+=K[0]+" "}switch(E=E.substr(E.length-1)==" "?E.substr(0,E.length-1):E,g=ml(E,n,i).width,n.textAlign){case"right":d=l-g-2;break;case"center":d=(l-g)/2;break;case"left":default:d=2}e+=mt(d)+" "+mt(f)+` Td
`,e+="("+Ei(E)+`) Tj
`,e+=-mt(d)+` 0 Td
`,f=-(i+2),g=0,y=N?_:_+1,k++,x=""}break}return r.text=e,r.fontSize=i,r},ml=function(n,e,t){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),s=e.scope.getStringUnitWidth(n,{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(t),charSpace:0})*parseFloat(t)*1.5,width:s}},D2={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},M2=function(n,e){var t={type:"reference",object:n};e.internal.getPageInfo(n.page).pageContext.annotations.find(function(r){return r.type===t.type&&r.object===t.object})===void 0&&e.internal.getPageInfo(n.page).pageContext.annotations.push(t)},B2=function(n,e){for(var t in n)if(n.hasOwnProperty(t)){var r=t,s=n[t];e.internal.newObjectDeferredBegin(s.objId,!0),Kt(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete n[r]}},q2=function(n,e){if(e.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(ss.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(D2)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");Zu=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new Kf,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",function(){(function(t){t.internal.events.unsubscribe(t.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete t.internal.acroformPlugin.acroFormDictionaryRoot._eventID,t.internal.acroformPlugin.printedOut=!0})(n)}),n.internal.events.subscribe("buildDocument",function(){(function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var i=r[s];i.objId=void 0,i.hasAnnotation&&M2(i,t)}})(n)}),n.internal.events.subscribe("putCatalog",function(){(function(t){if(t.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)}),n.internal.events.subscribe("postPutPages",function(t){(function(r,s){var i=!r;for(var a in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(a)){var l=r[a],c=[],d=l.Rect;if(l.Rect&&(l.Rect=O2(l.Rect,s)),s.internal.newObjectDeferredBegin(l.objId,!0),l.DA=Ve.createDefaultAppearanceStream(l),Kt(l)==="object"&&typeof l.getKeyValueListForStream=="function"&&(c=l.getKeyValueListForStream()),l.Rect=d,l.hasAppearanceStream&&!l.appearanceStreamContent){var g=F2(l);c.push({key:"AP",value:"<</N "+g+">>"}),s.internal.acroformPlugin.xForms.push(g)}if(l.appearanceStreamContent){var v="";for(var m in l.appearanceStreamContent)if(l.appearanceStreamContent.hasOwnProperty(m)){var f=l.appearanceStreamContent[m];if(v+="/"+m+" ",v+="<<",Object.keys(f).length>=1||Array.isArray(f)){for(var a in f)if(f.hasOwnProperty(a)){var y=f[a];typeof y=="function"&&(y=y.call(s,l)),v+="/"+a+" "+y+" ",s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y)}}else typeof(y=f)=="function"&&(y=y.call(s,l)),v+="/"+a+" "+y,s.internal.acroformPlugin.xForms.indexOf(y)>=0||s.internal.acroformPlugin.xForms.push(y);v+=">>"}c.push({key:"AP",value:`<<
`+v+">>"})}s.internal.putStream({additionalKeyValues:c,objectId:l.objId}),s.internal.out("endobj")}i&&B2(s.internal.acroformPlugin.xForms,s)})(t,n)}),n.internal.acroformPlugin.isInitialized=!0}},Vf=lr.__acroform__.arrayToPdfArray=function(n,e,t){var r=function(a){return a};if(Array.isArray(n)){for(var s="[",i=0;i<n.length;i++)switch(i!==0&&(s+=" "),Kt(n[i])){case"boolean":case"number":case"object":s+=n[i].toString();break;case"string":n[i].substr(0,1)!=="/"?(e!==void 0&&t&&(r=t.internal.getEncryptor(e)),s+="("+Ei(r(n[i].toString()))+")"):s+=n[i].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Wc=function(n,e,t){var r=function(s){return s};return e!==void 0&&t&&(r=t.internal.getEncryptor(e)),(n=n||"").toString(),n="("+Ei(r(n))+")"},fs=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};fs.prototype.toString=function(){return this.objId+" 0 R"},fs.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},fs.prototype.getKeyValueListForStream=function(){var n=[],e=Object.getOwnPropertyNames(this).filter(function(i){return i!="content"&&i!="appearanceStreamContent"&&i!="scope"&&i!="objId"&&i.substring(0,1)!="_"});for(var t in e)if(Object.getOwnPropertyDescriptor(this,e[t]).configurable===!1){var r=e[t],s=this[r];s&&(Array.isArray(s)?n.push({key:r,value:Vf(s,this.objId,this.scope)}):s instanceof fs?(s.scope=this.scope,n.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&n.push({key:r,value:s}))}return n};var Gf=function(){fs.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(t){n=t.trim()},get:function(){return n||null}})};_n(Gf,fs);var Kf=function(){fs.call(this);var n,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var t=function(r){return r};return this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),"("+Ei(t(n))+")"}},set:function(t){n=t}})};_n(Kf,fs);var ss=function n(){fs.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute F supplied.');e=x}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!pr(e,3)},set:function(x){x?this.F=gr(e,3):this.F=mr(e,3)}});var t=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return t},set:function(x){if(isNaN(x))throw new Error('Invalid value "'+x+'" for attribute Ff supplied.');t=x}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(x){r=x!==void 0?x:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(x){r[0]=x}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(x){r[1]=x}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(x){r[2]=x}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(x){r[3]=x}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(x){switch(x){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=x;break;default:throw new Error('Invalid value "'+x+'" for attribute FT supplied.')}}});var i=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!i||i.length<1){if(this instanceof Ol)return;i="FieldObject"+n.FieldNum++}var x=function(k){return k};return this.scope&&(x=this.scope.internal.getEncryptor(this.objId)),"("+Ei(x(i))+")"},set:function(x){i=x.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return i},set:function(x){i=x}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(x){a=x}});var l="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return l},set:function(x){l=x}});var c=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return c},set:function(x){c=x}});var d=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return d===void 0?50/Zu:d},set:function(x){d=x}});var g="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return g},set:function(x){g=x}});var v="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!v||this instanceof Ol||this instanceof ni))return Wc(v,this.objId,this.scope)},set:function(x){x=x.toString(),v=x}});var m=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(m)return this instanceof Pr?m:Wc(m,this.objId,this.scope)},set:function(x){x=x.toString(),m=this instanceof Pr?x:x.substr(0,1)==="("?na(x.substr(1,x.length-2)):na(x)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pr?na(m.substr(1,m.length-1)):m},set:function(x){x=x.toString(),m=this instanceof Pr?"/"+x:x}});var f=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(f)return f},set:function(x){this.V=x}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof Pr?f:Wc(f,this.objId,this.scope)},set:function(x){x=x.toString(),f=this instanceof Pr?x:x.substr(0,1)==="("?na(x.substr(1,x.length-2)):na(x)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Pr?na(f.substr(1,f.length-1)):f},set:function(x){x=x.toString(),f=this instanceof Pr?"/"+x:x}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var y,_=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return _},set:function(x){x=!!x,_=x}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(y)return y},set:function(x){y=x}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,1)},set:function(x){x?this.Ff=gr(this.Ff,1):this.Ff=mr(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,2)},set:function(x){x?this.Ff=gr(this.Ff,2):this.Ff=mr(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,3)},set:function(x){x?this.Ff=gr(this.Ff,3):this.Ff=mr(this.Ff,3)}});var j=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(j!==null)return j},set:function(x){if([0,1,2].indexOf(x)===-1)throw new Error('Invalid value "'+x+'" for attribute Q supplied.');j=x}}),Object.defineProperty(this,"textAlign",{get:function(){var x;switch(j){case 0:default:x="left";break;case 1:x="center";break;case 2:x="right"}return x},configurable:!0,enumerable:!0,set:function(x){switch(x){case"right":case 2:j=2;break;case"center":case 1:j=1;break;case"left":case 0:default:j=0}}})};_n(ss,fs);var Ni=function(){ss.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){n=t}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Vf(e,this.objId,this.scope)},set:function(t){var r,s;s=[],typeof(r=t)=="string"&&(s=function(i,a,l){l||(l=1);for(var c,d=[];c=a.exec(i);)d.push(c[l]);return d}(r,/\((.*?)\)/g)),e=s}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,r){for(r=r||!1,t=(t=t||"").toString();e.indexOf(t)!==-1&&(e.splice(e.indexOf(t),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,18)},set:function(t){t?this.Ff=gr(this.Ff,18):this.Ff=mr(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,19)},set:function(t){this.combo===!0&&(t?this.Ff=gr(this.Ff,19):this.Ff=mr(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,20)},set:function(t){t?(this.Ff=gr(this.Ff,20),e.sort()):this.Ff=mr(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,22)},set:function(t){t?this.Ff=gr(this.Ff,22):this.Ff=mr(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,23)},set:function(t){t?this.Ff=gr(this.Ff,23):this.Ff=mr(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,27)},set:function(t){t?this.Ff=gr(this.Ff,27):this.Ff=mr(this.Ff,27)}}),this.hasAppearanceStream=!1};_n(Ni,ss);var Ci=function(){Ni.call(this),this.fontName="helvetica",this.combo=!1};_n(Ci,Ni);var Ti=function(){Ci.call(this),this.combo=!0};_n(Ti,Ci);var fo=function(){Ti.call(this),this.edit=!0};_n(fo,Ti);var Pr=function(){ss.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,15)},set:function(t){t?this.Ff=gr(this.Ff,15):this.Ff=mr(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,16)},set:function(t){t?this.Ff=gr(this.Ff,16):this.Ff=mr(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,17)},set:function(t){t?this.Ff=gr(this.Ff,17):this.Ff=mr(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,26)},set:function(t){t?this.Ff=gr(this.Ff,26):this.Ff=mr(this.Ff,26)}});var n,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(i){return i};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var r,s=[];for(r in s.push("<<"),e)s.push("/"+r+" ("+Ei(t(e[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(t){Kt(t)==="object"&&(e=t)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(t){typeof t=="string"&&(e.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(t){n="/"+t}})};_n(Pr,ss);var po=function(){Pr.call(this),this.pushButton=!0};_n(po,Pr);var Ri=function(){Pr.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e!==void 0?e:[]}})};_n(Ri,Pr);var Ol=function(){var n,e;ss.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(s){e=s}});var t,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(l){return l};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var i,a=[];for(i in a.push("<<"),r)a.push("/"+i+" ("+Ei(s(r[i]))+")");return a.push(">>"),a.join(`
`)},set:function(s){Kt(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(s){t=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(s){t="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=Ve.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};_n(Ol,ss),Ri.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var t=this.Kids[e];t.appearanceStreamContent=n.createAppearanceStream(t.optionName),t.caption=n.getCA()}},Ri.prototype.createOption=function(n){var e=new Ol;return e.Parent=this,e.optionName=n,this.Kids.push(e),$2.call(this.scope,e),e};var go=function(){Pr.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=Ve.CheckBox.createAppearanceStream()};_n(go,Pr);var ni=function(){ss.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,13)},set:function(e){e?this.Ff=gr(this.Ff,13):this.Ff=mr(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,21)},set:function(e){e?this.Ff=gr(this.Ff,21):this.Ff=mr(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,23)},set:function(e){e?this.Ff=gr(this.Ff,23):this.Ff=mr(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,24)},set:function(e){e?this.Ff=gr(this.Ff,24):this.Ff=mr(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,25)},set:function(e){e?this.Ff=gr(this.Ff,25):this.Ff=mr(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,26)},set:function(e){e?this.Ff=gr(this.Ff,26):this.Ff=mr(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(e){n=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(e){Number.isInteger(e)&&(n=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};_n(ni,ss);var mo=function(){ni.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!pr(this.Ff,14)},set:function(n){n?this.Ff=gr(this.Ff,14):this.Ff=mr(this.Ff,14)}}),this.password=!0};_n(mo,ni);var Ve={CheckBox:{createAppearanceStream:function(){return{N:{On:Ve.CheckBox.YesNormal},D:{On:Ve.CheckBox.YesPushDown,Off:Ve.CheckBox.OffPushDown}}},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,s=n.scope.__private__.encodeColorString(n.color),i=pu(n,n.caption);return t.push("0.749023 g"),t.push("0 0 "+mt(Ve.internal.getWidth(n))+" "+mt(Ve.internal.getHeight(n))+" re"),t.push("f"),t.push("BMC"),t.push("q"),t.push("0 0 1 rg"),t.push("/"+r+" "+mt(i.fontSize)+" Tf "+s),t.push("BT"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC"),e.stream=t.join(`
`),e},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color),s=[],i=Ve.internal.getHeight(n),a=Ve.internal.getWidth(n),l=pu(n,n.caption);return s.push("1 g"),s.push("0 0 "+mt(a)+" "+mt(i)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+mt(a-1)+" "+mt(i-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+t+" "+mt(l.fontSize)+" Tf "+r),s.push(l.text),s.push("ET"),s.push("Q"),e.stream=s.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mt(Ve.internal.getWidth(n))+" "+mt(Ve.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(n){var e={D:{Off:Ve.RadioButton.Circle.OffPushDown},N:{}};return e.N[n]=Ve.RadioButton.Circle.YesNormal,e.D[n]=Ve.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Ve.internal.Bezier_C,i=Number((r*s).toFixed(5));return t.push("q"),t.push("1 0 0 1 "+Ys(Ve.internal.getWidth(n)/2)+" "+Ys(Ve.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+i+" "+i+" "+r+" 0 "+r+" c"),t.push("-"+i+" "+r+" -"+r+" "+i+" -"+r+" 0 c"),t.push("-"+r+" -"+i+" -"+i+" -"+r+" 0 -"+r+" c"),t.push(i+" -"+r+" "+r+" -"+i+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Ve.internal.Bezier_C).toFixed(5)),a=Number((r*Ve.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ys(Ve.internal.getWidth(n)/2)+" "+Ys(Ve.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),t.push("0 g"),t.push("q"),t.push("1 0 0 1 "+Ys(Ve.internal.getWidth(n)/2)+" "+Ys(Ve.internal.getHeight(n)/2)+" cm"),t.push(r+" 0 m"),t.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),t.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),t.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),t.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=Ve.internal.getWidth(n)<=Ve.internal.getHeight(n)?Ve.internal.getWidth(n)/4:Ve.internal.getHeight(n)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),i=Number((s*Ve.internal.Bezier_C).toFixed(5));return t.push("0.749023 g"),t.push("q"),t.push("1 0 0 1 "+Ys(Ve.internal.getWidth(n)/2)+" "+Ys(Ve.internal.getHeight(n)/2)+" cm"),t.push(s+" 0 m"),t.push(s+" "+i+" "+i+" "+s+" 0 "+s+" c"),t.push("-"+i+" "+s+" -"+s+" "+i+" -"+s+" 0 c"),t.push("-"+s+" -"+i+" -"+i+" -"+s+" 0 -"+s+" c"),t.push(i+" -"+s+" "+s+" -"+i+" "+s+" 0 c"),t.push("f"),t.push("Q"),e.stream=t.join(`
`),e}},Cross:{createAppearanceStream:function(n){var e={D:{Off:Ve.RadioButton.Cross.OffPushDown},N:{}};return e.N[n]=Ve.RadioButton.Cross.YesNormal,e.D[n]=Ve.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(n){var e=hs(n);e.scope=n.scope;var t=[],r=Ve.internal.calculateCross(n);return t.push("q"),t.push("1 1 "+mt(Ve.internal.getWidth(n)-2)+" "+mt(Ve.internal.getHeight(n)-2)+" re"),t.push("W"),t.push("n"),t.push(mt(r.x1.x)+" "+mt(r.x1.y)+" m"),t.push(mt(r.x2.x)+" "+mt(r.x2.y)+" l"),t.push(mt(r.x4.x)+" "+mt(r.x4.y)+" m"),t.push(mt(r.x3.x)+" "+mt(r.x3.y)+" l"),t.push("s"),t.push("Q"),e.stream=t.join(`
`),e},YesPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=Ve.internal.calculateCross(n),r=[];return r.push("0.749023 g"),r.push("0 0 "+mt(Ve.internal.getWidth(n))+" "+mt(Ve.internal.getHeight(n))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+mt(Ve.internal.getWidth(n)-2)+" "+mt(Ve.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(mt(t.x1.x)+" "+mt(t.x1.y)+" m"),r.push(mt(t.x2.x)+" "+mt(t.x2.y)+" l"),r.push(mt(t.x4.x)+" "+mt(t.x4.y)+" m"),r.push(mt(t.x3.x)+" "+mt(t.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(n){var e=hs(n);e.scope=n.scope;var t=[];return t.push("0.749023 g"),t.push("0 0 "+mt(Ve.internal.getWidth(n))+" "+mt(Ve.internal.getHeight(n))+" re"),t.push("f"),e.stream=t.join(`
`),e}}},createDefaultAppearanceStream:function(n){var e=n.scope.internal.getFont(n.fontName,n.fontStyle).id,t=n.scope.__private__.encodeColorString(n.color);return"/"+e+" "+n.fontSize+" Tf "+t}};Ve.internal={Bezier_C:.551915024494,calculateCross:function(n){var e=Ve.internal.getWidth(n),t=Ve.internal.getHeight(n),r=Math.min(e,t);return{x1:{x:(e-r)/2,y:(t-r)/2+r},x2:{x:(e-r)/2+r,y:(t-r)/2},x3:{x:(e-r)/2,y:(t-r)/2},x4:{x:(e-r)/2+r,y:(t-r)/2+r}}}},Ve.internal.getWidth=function(n){var e=0;return Kt(n)==="object"&&(e=yd(n.Rect[2])),e},Ve.internal.getHeight=function(n){var e=0;return Kt(n)==="object"&&(e=yd(n.Rect[3])),e};var $2=lr.addField=function(n){if(q2(this,n),!(n instanceof ss))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=n).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};lr.AcroFormChoiceField=Ni,lr.AcroFormListBox=Ci,lr.AcroFormComboBox=Ti,lr.AcroFormEditBox=fo,lr.AcroFormButton=Pr,lr.AcroFormPushButton=po,lr.AcroFormRadioButton=Ri,lr.AcroFormCheckBox=go,lr.AcroFormTextField=ni,lr.AcroFormPasswordField=mo,lr.AcroFormAppearance=Ve,lr.AcroForm={ChoiceField:Ni,ListBox:Ci,ComboBox:Ti,EditBox:fo,Button:Pr,PushButton:po,RadioButton:Ri,CheckBox:go,TextField:ni,PasswordField:mo,Appearance:Ve},tt.AcroForm={ChoiceField:Ni,ListBox:Ci,ComboBox:Ti,EditBox:fo,Button:Pr,PushButton:po,RadioButton:Ri,CheckBox:go,TextField:ni,PasswordField:mo,Appearance:Ve};var z2=tt.AcroForm;function Jf(n){return n.reduce(function(e,t,r){return e[t]=r,e},{})}(function(n){n.__addimage__={};var e="UNKNOWN",t={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=n.__addimage__.getImageFileTypeByImageData=function(L,A){var U,z,te,$,W,Y=e;if((A=A||e)==="RGBA"||L.data!==void 0&&L.data instanceof Uint8ClampedArray&&"height"in L&&"width"in L)return"RGBA";if(M(L))for(W in t)for(te=t[W],U=0;U<te.length;U+=1){for($=!0,z=0;z<te[U].length;z+=1)if(te[U][z]!==void 0&&te[U][z]!==L[z]){$=!1;break}if($===!0){Y=W;break}}else for(W in t)for(te=t[W],U=0;U<te.length;U+=1){for($=!0,z=0;z<te[U].length;z+=1)if(te[U][z]!==void 0&&te[U][z]!==L.charCodeAt(z)){$=!1;break}if($===!0){Y=W;break}}return Y===e&&A!==e&&(Y=A),Y},s=function L(A){for(var U=this.internal.write,z=this.internal.putStream,te=(0,this.internal.getFilters)();te.indexOf("FlateEncode")!==-1;)te.splice(te.indexOf("FlateEncode"),1);A.objectId=this.internal.newObject();var $=[];if($.push({key:"Type",value:"/XObject"}),$.push({key:"Subtype",value:"/Image"}),$.push({key:"Width",value:A.width}),$.push({key:"Height",value:A.height}),A.colorSpace===j.INDEXED?$.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(A.palette.length/3-1)+" "+("sMask"in A&&A.sMask!==void 0?A.objectId+2:A.objectId+1)+" 0 R]"}):($.push({key:"ColorSpace",value:"/"+A.colorSpace}),A.colorSpace===j.DEVICE_CMYK&&$.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),$.push({key:"BitsPerComponent",value:A.bitsPerComponent}),"decodeParameters"in A&&A.decodeParameters!==void 0&&$.push({key:"DecodeParms",value:"<<"+A.decodeParameters+">>"}),"transparency"in A&&Array.isArray(A.transparency)){for(var W="",Y=0,J=A.transparency.length;Y<J;Y++)W+=A.transparency[Y]+" "+A.transparency[Y]+" ";$.push({key:"Mask",value:"["+W+"]"})}A.sMask!==void 0&&$.push({key:"SMask",value:A.objectId+1+" 0 R"});var ie=A.filter!==void 0?["/"+A.filter]:void 0;if(z({data:A.data,additionalKeyValues:$,alreadyAppliedFilters:ie,objectId:A.objectId}),U("endobj"),"sMask"in A&&A.sMask!==void 0){var pe="/Predictor "+A.predictor+" /Colors 1 /BitsPerComponent "+A.bitsPerComponent+" /Columns "+A.width,P={width:A.width,height:A.height,colorSpace:"DeviceGray",bitsPerComponent:A.bitsPerComponent,decodeParameters:pe,data:A.sMask};"filter"in A&&(P.filter=A.filter),L.call(this,P)}if(A.colorSpace===j.INDEXED){var B=this.internal.newObject();z({data:E(new Uint8Array(A.palette)),objectId:B}),U("endobj")}},i=function(){var L=this.internal.collections.addImage_images;for(var A in L)s.call(this,L[A])},a=function(){var L,A=this.internal.collections.addImage_images,U=this.internal.write;for(var z in A)U("/I"+(L=A[z]).index,L.objectId,"0","R")},l=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",i),this.internal.events.subscribe("putXobjectDict",a))},c=function(){var L=this.internal.collections.addImage_images;return l.call(this),L},d=function(){return Object.keys(this.internal.collections.addImage_images).length},g=function(L){return typeof n["process"+L.toUpperCase()]=="function"},v=function(L){return Kt(L)==="object"&&L.nodeType===1},m=function(L,A){if(L.nodeName==="IMG"&&L.hasAttribute("src")){var U=""+L.getAttribute("src");if(U.indexOf("data:image/")===0)return ho(unescape(U).split("base64,").pop());var z=n.loadFile(U,!0);if(z!==void 0)return z}if(L.nodeName==="CANVAS"){if(L.width===0||L.height===0)throw new Error("Given canvas must have data. Canvas width: "+L.width+", height: "+L.height);var te;switch(A){case"PNG":te="image/png";break;case"WEBP":te="image/webp";break;case"JPEG":case"JPG":default:te="image/jpeg"}return ho(L.toDataURL(te,1).split("base64,").pop())}},f=function(L){var A=this.internal.collections.addImage_images;if(A){for(var U in A)if(L===A[U].alias)return A[U]}},y=function(L,A,U){return L||A||(L=-96,A=-96),L<0&&(L=-1*U.width*72/L/this.internal.scaleFactor),A<0&&(A=-1*U.height*72/A/this.internal.scaleFactor),L===0&&(L=A*U.width/U.height),A===0&&(A=L*U.height/U.width),[L,A]},_=function(L,A,U,z,te,$){var W=y.call(this,U,z,te),Y=this.internal.getCoordinateString,J=this.internal.getVerticalCoordinateString,ie=c.call(this);if(U=W[0],z=W[1],ie[te.index]=te,$){$*=Math.PI/180;var pe=Math.cos($),P=Math.sin($),B=function(Z){return Z.toFixed(4)},H=[B(pe),B(P),B(-1*P),B(pe),0,0,"cm"]}this.internal.write("q"),$?(this.internal.write([1,"0","0",1,Y(L),J(A+z),"cm"].join(" ")),this.internal.write(H.join(" ")),this.internal.write([Y(U),"0","0",Y(z),"0","0","cm"].join(" "))):this.internal.write([Y(U),"0","0",Y(z),Y(L),J(A+z),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+te.index+" Do"),this.internal.write("Q")},j=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var x=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},k=n.__addimage__.sHashCode=function(L){var A,U,z=0;if(typeof L=="string")for(U=L.length,A=0;A<U;A++)z=(z<<5)-z+L.charCodeAt(A),z|=0;else if(M(L))for(U=L.byteLength/2,A=0;A<U;A++)z=(z<<5)-z+L[A],z|=0;return z},S=n.__addimage__.validateStringAsBase64=function(L){(L=L||"").toString().trim();var A=!0;return L.length===0&&(A=!1),L.length%4!=0&&(A=!1),/^[A-Za-z0-9+/]+$/.test(L.substr(0,L.length-2))===!1&&(A=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(L.substr(-2))===!1&&(A=!1),A},N=n.__addimage__.extractImageFromDataUrl=function(L){var A=(L=L||"").split("base64,"),U=null;if(A.length===2){var z=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(A[0]);Array.isArray(z)&&(U={mimeType:z[1],charset:z[2],data:A[1]})}return U},D=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(L){return D()&&L instanceof ArrayBuffer};var M=n.__addimage__.isArrayBufferView=function(L){return D()&&typeof Uint32Array<"u"&&(L instanceof Int8Array||L instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&L instanceof Uint8ClampedArray||L instanceof Int16Array||L instanceof Uint16Array||L instanceof Int32Array||L instanceof Uint32Array||L instanceof Float32Array||L instanceof Float64Array)},R=n.__addimage__.binaryStringToUint8Array=function(L){for(var A=L.length,U=new Uint8Array(A),z=0;z<A;z++)U[z]=L.charCodeAt(z);return U},E=n.__addimage__.arrayBufferToBinaryString=function(L){for(var A="",U=M(L)?L:new Uint8Array(L),z=0;z<U.length;z+=8192)A+=String.fromCharCode.apply(null,U.subarray(z,z+8192));return A};n.addImage=function(){var L,A,U,z,te,$,W,Y,J;if(typeof arguments[1]=="number"?(A=e,U=arguments[1],z=arguments[2],te=arguments[3],$=arguments[4],W=arguments[5],Y=arguments[6],J=arguments[7]):(A=arguments[1],U=arguments[2],z=arguments[3],te=arguments[4],$=arguments[5],W=arguments[6],Y=arguments[7],J=arguments[8]),Kt(L=arguments[0])==="object"&&!v(L)&&"imageData"in L){var ie=L;L=ie.imageData,A=ie.format||A||e,U=ie.x||U||0,z=ie.y||z||0,te=ie.w||ie.width||te,$=ie.h||ie.height||$,W=ie.alias||W,Y=ie.compression||Y,J=ie.rotation||ie.angle||J}var pe=this.internal.getFilters();if(Y===void 0&&pe.indexOf("FlateEncode")!==-1&&(Y="SLOW"),isNaN(U)||isNaN(z))throw new Error("Invalid coordinates passed to jsPDF.addImage");l.call(this);var P=V.call(this,L,A,W,Y);return _.call(this,U,z,te,$,P,J),this};var V=function(L,A,U,z){var te,$,W;if(typeof L=="string"&&r(L)===e){L=unescape(L);var Y=K(L,!1);(Y!==""||(Y=n.loadFile(L,!0))!==void 0)&&(L=Y)}if(v(L)&&(L=m(L,A)),A=r(L,A),!g(A))throw new Error("addImage does not support files of type '"+A+"', please ensure that a plugin for '"+A+"' support is added.");if(((W=U)==null||W.length===0)&&(U=function(J){return typeof J=="string"||M(J)?k(J):M(J.data)?k(J.data):null}(L)),(te=f.call(this,U))||(D()&&(L instanceof Uint8Array||A==="RGBA"||($=L,L=R(L))),te=this["process"+A.toUpperCase()](L,d.call(this),U,function(J){return J&&typeof J=="string"&&(J=J.toUpperCase()),J in n.image_compression?J:x.NONE}(z),$)),!te)throw new Error("An unknown error occurred whilst processing the image.");return te},K=n.__addimage__.convertBase64ToBinaryString=function(L,A){var U;A=typeof A!="boolean"||A;var z,te="";if(typeof L=="string"){z=(U=N(L))!==null?U.data:L;try{te=ho(z)}catch($){if(A)throw S(z)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+$.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return te};n.getImageProperties=function(L){var A,U,z="";if(v(L)&&(L=m(L)),typeof L=="string"&&r(L)===e&&((z=K(L,!1))===""&&(z=n.loadFile(L)||""),L=z),U=r(L),!g(U))throw new Error("addImage does not support files of type '"+U+"', please ensure that a plugin for '"+U+"' support is added.");if(!D()||L instanceof Uint8Array||(L=R(L)),!(A=this["process"+U.toUpperCase()](L)))throw new Error("An unknown error occurred whilst processing the image");return A.fileType=U,A}})(tt.API),function(n){var e=function(t){if(t!==void 0&&t!="")return!0};tt.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(t){for(var r,s,i,a=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,c=this.internal.getPageInfoByObjId(t.objId),d=t.pageContext.annotations,g=!1,v=0;v<d.length&&!g;v++)switch((r=d[v]).type){case"link":(e(r.options.url)||e(r.options.pageNumber))&&(g=!0);break;case"reference":case"text":case"freetext":g=!0}if(g!=0){this.internal.write("/Annots [");for(var m=0;m<d.length;m++){r=d[m];var f=this.internal.pdfEscape,y=this.internal.getEncryptor(t.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var _=this.internal.newAdditionalObject(),j=this.internal.newAdditionalObject(),x=this.internal.getEncryptor(_.objId),k=r.title||"Note";i="<</Type /Annot /Subtype /Text "+(s="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y)+"] ")+"/Contents ("+f(x(r.contents))+")",i+=" /Popup "+j.objId+" 0 R",i+=" /P "+c.objId+" 0 R",i+=" /T ("+f(x(k))+") >>",_.content=i;var S=_.objId+" 0 R";i="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+a(r.bounds.x+30)+" "+l(r.bounds.y+r.bounds.h)+" "+a(r.bounds.x+r.bounds.w+30)+" "+l(r.bounds.y)+"] ")+" /Parent "+S,r.open&&(i+=" /Open true"),i+=" >>",j.content=i,this.internal.write(_.objId,"0 R",j.objId,"0 R");break;case"freetext":s="/Rect ["+a(r.bounds.x)+" "+l(r.bounds.y)+" "+a(r.bounds.x+r.bounds.w)+" "+l(r.bounds.y+r.bounds.h)+"] ";var N=r.color||"#000000";i="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+f(y(r.contents))+")",i+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+N+")",i+=" /Border [0 0 0]",i+=" >>",this.internal.write(i);break;case"link":if(r.options.name){var D=this.annotations._nameMap[r.options.name];r.options.pageNumber=D.page,r.options.top=D.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",i="",r.options.url)i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+f(y(r.options.url))+") >>";else if(r.options.pageNumber)switch(i="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":i+=" /Fit]";break;case"FitH":i+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,i+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var M=l(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),i+=" /XYZ "+r.options.left+" "+M+" "+r.options.zoom+"]"}i!=""&&(i+=" >>",this.internal.write(i))}}this.internal.write("]")}}]),n.createAnnotation=function(t){var r=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":r.pageContext.annotations.push(t)}},n.link=function(t,r,s,i,a){var l=this.internal.getCurrentPageInfo(),c=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString;l.pageContext.annotations.push({finalBounds:{x:c(t),y:d(r),w:c(t+s),h:d(r+i)},options:a,type:"link"})},n.textWithLink=function(t,r,s,i){var a,l,c=this.getTextWidth(t),d=this.internal.getLineHeight()/this.internal.scaleFactor;if(i.maxWidth!==void 0){l=i.maxWidth;var g=this.splitTextToSize(t,l).length;a=Math.ceil(d*g)}else l=c,a=d;return this.text(t,r,s,i),s+=.2*d,i.align==="center"&&(r-=c/2),i.align==="right"&&(r-=c),this.link(r,s-d,l,a,i),c},n.getTextWidth=function(t){var r=this.internal.getFontSize();return this.getStringUnitWidth(t)*r/this.internal.scaleFactor}}(tt.API),function(n){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},t={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];n.__arabicParser__={};var i=n.__arabicParser__.isInArabicSubstitutionA=function(_){return e[_.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(_){return typeof _=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(_)},l=n.__arabicParser__.isArabicEndLetter=function(_){return a(_)&&i(_)&&e[_.charCodeAt(0)].length<=2},c=n.__arabicParser__.isArabicAlfLetter=function(_){return a(_)&&s.indexOf(_.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(_){return a(_)&&i(_)&&e[_.charCodeAt(0)].length>=1};var d=n.__arabicParser__.arabicLetterHasFinalForm=function(_){return a(_)&&i(_)&&e[_.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(_){return a(_)&&i(_)&&e[_.charCodeAt(0)].length>=3};var g=n.__arabicParser__.arabicLetterHasMedialForm=function(_){return a(_)&&i(_)&&e[_.charCodeAt(0)].length==4},v=n.__arabicParser__.resolveLigatures=function(_){var j=0,x=t,k="",S=0;for(j=0;j<_.length;j+=1)x[_.charCodeAt(j)]!==void 0?(S++,typeof(x=x[_.charCodeAt(j)])=="number"&&(k+=String.fromCharCode(x),x=t,S=0),j===_.length-1&&(x=t,k+=_.charAt(j-(S-1)),j-=S-1,S=0)):(x=t,k+=_.charAt(j-S),j-=S,S=0);return k};n.__arabicParser__.isArabicDiacritic=function(_){return _!==void 0&&r[_.charCodeAt(0)]!==void 0};var m=n.__arabicParser__.getCorrectForm=function(_,j,x){return a(_)?i(_)===!1?-1:!d(_)||!a(j)&&!a(x)||!a(x)&&l(j)||l(_)&&!a(j)||l(_)&&c(j)||l(_)&&l(j)?0:g(_)&&a(j)&&!l(j)&&a(x)&&d(x)?3:l(_)||!a(x)?1:2:-1},f=function(_){var j=0,x=0,k=0,S="",N="",D="",M=(_=_||"").split("\\s+"),R=[];for(j=0;j<M.length;j+=1){for(R.push(""),x=0;x<M[j].length;x+=1)S=M[j][x],N=M[j][x-1],D=M[j][x+1],a(S)?(k=m(S,N,D),R[j]+=k!==-1?String.fromCharCode(e[S.charCodeAt(0)][k]):S):R[j]+=S;R[j]=v(R[j])}return R.join(" ")},y=n.__arabicParser__.processArabic=n.processArabic=function(){var _,j=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,x=[];if(Array.isArray(j)){var k=0;for(x=[],k=0;k<j.length;k+=1)Array.isArray(j[k])?x.push([f(j[k][0]),j[k][1],j[k][2]]):x.push([f(j[k])]);_=x}else _=f(j);return typeof arguments[0]=="string"?_:(arguments[0].text=_,arguments[0])};n.events.push(["preProcessText",y])}(tt.API),tt.API.autoPrint=function(n){var e;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})}return this},function(n){var e=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(l){t=l}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(l){r=isNaN(l)||Number.isInteger(l)===!1||l<0?150:l,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(l){s=isNaN(l)||Number.isInteger(l)===!1||l<0?300:l,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var i=[];Object.defineProperty(this,"childNodes",{get:function(){return i},set:function(l){i=l}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(l){a=l}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(t,r){var s;if((t=t||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])}(tt.API),function(n){var e={left:0,top:0,bottom:0,right:0},t=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new i,this.internal.__cell__.pages=1},i=function(){var c=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return c},set:function(_){c=_}});var d=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return d},set:function(_){d=_}});var g=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return g},set:function(_){g=_}});var v=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return v},set:function(_){v=_}});var m=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return m},set:function(_){m=_}});var f=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return f},set:function(_){f=_}});var y=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return y},set:function(_){y=_}}),this};i.prototype.clone=function(){return new i(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},i.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(c){return r.call(this),this.internal.__cell__.headerFunction=typeof c=="function"?c:void 0,this},n.getTextDimensions=function(c,d){r.call(this);var g=(d=d||{}).fontSize||this.getFontSize(),v=d.font||this.getFont(),m=d.scaleFactor||this.internal.scaleFactor,f=0,y=0,_=0,j=this;if(!Array.isArray(c)&&typeof c!="string"){if(typeof c!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");c=String(c)}var x=d.maxWidth;x>0?typeof c=="string"?c=this.splitTextToSize(c,x):Object.prototype.toString.call(c)==="[object Array]"&&(c=c.reduce(function(S,N){return S.concat(j.splitTextToSize(N,x))},[])):c=Array.isArray(c)?c:[c];for(var k=0;k<c.length;k++)f<(_=this.getStringUnitWidth(c[k],{font:v})*g)&&(f=_);return f!==0&&(y=c.length),{w:f/=m,h:Math.max((y*g*this.getLineHeightFactor()-g*(this.getLineHeightFactor()-1))/m,0)}},n.cellAddPage=function(){r.call(this),this.addPage();var c=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new i(c.left,c.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var c;c=arguments[0]instanceof i?arguments[0]:new i(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var d=this.internal.__cell__.lastCell,g=this.internal.__cell__.padding,v=this.internal.__cell__.margins||e,m=this.internal.__cell__.tableHeaderRow,f=this.internal.__cell__.printHeaders;return d.lineNumber!==void 0&&(d.lineNumber===c.lineNumber?(c.x=(d.x||0)+(d.width||0),c.y=d.y||0):d.y+d.height+c.height+v.bottom>this.getPageHeight()?(this.cellAddPage(),c.y=v.top,f&&m&&(this.printHeaderRow(c.lineNumber,!0),c.y+=m[0].height)):c.y=d.y+d.height||c.y),c.text[0]!==void 0&&(this.rect(c.x,c.y,c.width,c.height,t===!0?"FD":void 0),c.align==="right"?this.text(c.text,c.x+c.width-g,c.y+g,{align:"right",baseline:"top"}):c.align==="center"?this.text(c.text,c.x+c.width/2,c.y+g,{align:"center",baseline:"top",maxWidth:c.width-g-g}):this.text(c.text,c.x+g,c.y+g,{align:"left",baseline:"top",maxWidth:c.width-g-g})),this.internal.__cell__.lastCell=c,this};n.table=function(c,d,g,v,m){if(r.call(this),!g)throw new Error("No data for PDF table.");var f,y,_,j,x=[],k=[],S=[],N={},D={},M=[],R=[],E=(m=m||{}).autoSize||!1,V=m.printHeaders!==!1,K=m.css&&m.css["font-size"]!==void 0?16*m.css["font-size"]:m.fontSize||12,L=m.margins||Object.assign({width:this.getPageWidth()},e),A=typeof m.padding=="number"?m.padding:3,U=m.headerBackgroundColor||"#c8c8c8",z=m.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=V,this.internal.__cell__.margins=L,this.internal.__cell__.table_font_size=K,this.internal.__cell__.padding=A,this.internal.__cell__.headerBackgroundColor=U,this.internal.__cell__.headerTextColor=z,this.setFontSize(K),v==null)k=x=Object.keys(g[0]),S=x.map(function(){return"left"});else if(Array.isArray(v)&&Kt(v[0])==="object")for(x=v.map(function(ie){return ie.name}),k=v.map(function(ie){return ie.prompt||ie.name||""}),S=v.map(function(ie){return ie.align||"left"}),f=0;f<v.length;f+=1)D[v[f].name]=v[f].width*(19.049976/25.4);else Array.isArray(v)&&typeof v[0]=="string"&&(k=x=v,S=x.map(function(){return"left"}));if(E||Array.isArray(v)&&typeof v[0]=="string")for(f=0;f<x.length;f+=1){for(N[j=x[f]]=g.map(function(ie){return ie[j]}),this.setFont(void 0,"bold"),M.push(this.getTextDimensions(k[f],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),y=N[j],this.setFont(void 0,"normal"),_=0;_<y.length;_+=1)M.push(this.getTextDimensions(y[_],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);D[j]=Math.max.apply(null,M)+A+A,M=[]}if(V){var te={};for(f=0;f<x.length;f+=1)te[x[f]]={},te[x[f]].text=k[f],te[x[f]].align=S[f];var $=l.call(this,te,D);R=x.map(function(ie){return new i(c,d,D[ie],$,te[ie].text,void 0,te[ie].align)}),this.setTableHeaderRow(R),this.printHeaderRow(1,!1)}var W=v.reduce(function(ie,pe){return ie[pe.name]=pe.align,ie},{});for(f=0;f<g.length;f+=1){"rowStart"in m&&m.rowStart instanceof Function&&m.rowStart({row:f,data:g[f]},this);var Y=l.call(this,g[f],D);for(_=0;_<x.length;_+=1){var J=g[f][x[_]];"cellStart"in m&&m.cellStart instanceof Function&&m.cellStart({row:f,col:_,data:J},this),a.call(this,new i(c,d,D[x[_]],Y,J,f+2,W[x[_]]))}}return this.internal.__cell__.table_x=c,this.internal.__cell__.table_y=d,this};var l=function(c,d){var g=this.internal.__cell__.padding,v=this.internal.__cell__.table_font_size,m=this.internal.scaleFactor;return Object.keys(c).map(function(f){var y=c[f];return this.splitTextToSize(y.hasOwnProperty("text")?y.text:y,d[f]-g-g)},this).map(function(f){return this.getLineHeightFactor()*f.length*v/m+g+g},this).reduce(function(f,y){return Math.max(f,y)},0)};n.setTableHeaderRow=function(c){r.call(this),this.internal.__cell__.tableHeaderRow=c},n.printHeaderRow=function(c,d){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var g;if(t=!0,typeof this.internal.__cell__.headerFunction=="function"){var v=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new i(v[0],v[1],v[2],v[3],void 0,-1)}this.setFont(void 0,"bold");for(var m=[],f=0;f<this.internal.__cell__.tableHeaderRow.length;f+=1){g=this.internal.__cell__.tableHeaderRow[f].clone(),d&&(g.y=this.internal.__cell__.margins.top||0,m.push(g)),g.lineNumber=c;var y=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,g),this.setTextColor(y)}m.length>0&&this.setTableHeaderRow(m),this.setFont(void 0,"normal"),t=!1}}(tt.API);var Yf={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},Xf=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],gu=Jf(Xf),Zf=[100,200,300,400,500,600,700,800,900],U2=Jf(Zf);function mu(n){var e=n.family.replace(/"|'/g,"").toLowerCase(),t=function(i){return Yf[i=i||"normal"]?i:"normal"}(n.style),r=function(i){if(!i)return 400;if(typeof i=="number")return i>=100&&i<=900&&i%100==0?i:400;if(/^\d00$/.test(i))return parseInt(i);switch(i){case"bold":return 700;case"normal":default:return 400}}(n.weight),s=function(i){return typeof gu[i=i||"normal"]=="number"?i:"normal"}(n.stretch);return{family:e,style:t,weight:r,stretch:s,src:n.src||[],ref:n.ref||{name:e,style:[s,t,r].join(" ")}}}function xd(n,e,t,r){var s;for(s=t;s>=0&&s<e.length;s+=r)if(n[e[s]])return n[e[s]];for(s=t;s>=0&&s<e.length;s-=r)if(n[e[s]])return n[e[s]]}var W2={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},wd={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function _d(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function H2(n,e,t){for(var r=(t=t||{}).defaultFontFamily||"times",s=Object.assign({},W2,t.genericFontFamilies||{}),i=null,a=null,l=0;l<e.length;++l)if(s[(i=mu(e[l])).family]&&(i.family=s[i.family]),n.hasOwnProperty(i.family)){a=n[i.family];break}if(!(a=a||n[r]))throw new Error("Could not find a font-family for the rule '"+_d(i)+"' and default family '"+r+"'.");if(a=function(c,d){if(d[c])return d[c];var g=gu[c],v=g<=gu.normal?-1:1,m=xd(d,Xf,g,v);if(!m)throw new Error("Could not find a matching font-stretch value for "+c);return m}(i.stretch,a),a=function(c,d){if(d[c])return d[c];for(var g=Yf[c],v=0;v<g.length;++v)if(d[g[v]])return d[g[v]];throw new Error("Could not find a matching font-style for "+c)}(i.style,a),!(a=function(c,d){if(d[c])return d[c];if(c===400&&d[500])return d[500];if(c===500&&d[400])return d[400];var g=U2[c],v=xd(d,Zf,g,c<400?-1:1);if(!v)throw new Error("Could not find a matching font-weight for value "+c);return v}(i.weight,a)))throw new Error("Failed to resolve a font for the rule '"+_d(i)+"'.");return a}function Sd(n){return n.trimLeft()}function V2(n,e){for(var t=0;t<n.length;){if(n.charAt(t)===e)return[n.substring(0,t),n.substring(t+1)];t+=1}return null}function G2(n){var e=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],n.substring(e[0].length)]}var vl,jd,Ad,Hc=["times"];(function(n){var e,t,r,s,i,a,l,c,d,g=function(P){return P=P||{},this.isStrokeTransparent=P.isStrokeTransparent||!1,this.strokeOpacity=P.strokeOpacity||1,this.strokeStyle=P.strokeStyle||"#000000",this.fillStyle=P.fillStyle||"#000000",this.isFillTransparent=P.isFillTransparent||!1,this.fillOpacity=P.fillOpacity||1,this.font=P.font||"10px sans-serif",this.textBaseline=P.textBaseline||"alphabetic",this.textAlign=P.textAlign||"left",this.lineWidth=P.lineWidth||1,this.lineJoin=P.lineJoin||"miter",this.lineCap=P.lineCap||"butt",this.path=P.path||[],this.transform=P.transform!==void 0?P.transform.clone():new c,this.globalCompositeOperation=P.globalCompositeOperation||"normal",this.globalAlpha=P.globalAlpha||1,this.clip_path=P.clip_path||[],this.currentPoint=P.currentPoint||new a,this.miterLimit=P.miterLimit||10,this.lastPoint=P.lastPoint||new a,this.lineDashOffset=P.lineDashOffset||0,this.lineDash=P.lineDash||[],this.margin=P.margin||[0,0,0,0],this.prevPageLastElemOffset=P.prevPageLastElemOffset||0,this.ignoreClearRect=typeof P.ignoreClearRect!="boolean"||P.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new v(this),e=this.internal.f2,t=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,i=this.internal.getVerticalCoordinate,a=this.internal.Point,l=this.internal.Rectangle,c=this.internal.Matrix,d=new g}]);var v=function(P){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var B=P;Object.defineProperty(this,"pdf",{get:function(){return B}});var H=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return H},set:function(be){H=!!be}});var Z=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Z},set:function(be){Z=!!be}});var Q=0;Object.defineProperty(this,"posX",{get:function(){return Q},set:function(be){isNaN(be)||(Q=be)}});var le=0;Object.defineProperty(this,"posY",{get:function(){return le},set:function(be){isNaN(be)||(le=be)}}),Object.defineProperty(this,"margin",{get:function(){return d.margin},set:function(be){var ee;typeof be=="number"?ee=[be,be,be,be]:((ee=new Array(4))[0]=be[0],ee[1]=be.length>=2?be[1]:ee[0],ee[2]=be.length>=3?be[2]:ee[0],ee[3]=be.length>=4?be[3]:ee[1]),d.margin=ee}});var ue=!1;Object.defineProperty(this,"autoPaging",{get:function(){return ue},set:function(be){ue=be}});var he=0;Object.defineProperty(this,"lastBreak",{get:function(){return he},set:function(be){he=be}});var ge=[];Object.defineProperty(this,"pageBreaks",{get:function(){return ge},set:function(be){ge=be}}),Object.defineProperty(this,"ctx",{get:function(){return d},set:function(be){be instanceof g&&(d=be)}}),Object.defineProperty(this,"path",{get:function(){return d.path},set:function(be){d.path=be}});var Ae=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ae},set:function(be){Ae=be}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(be){var ee;ee=m(be),this.ctx.fillStyle=ee.style,this.ctx.isFillTransparent=ee.a===0,this.ctx.fillOpacity=ee.a,this.pdf.setFillColor(ee.r,ee.g,ee.b,{a:ee.a}),this.pdf.setTextColor(ee.r,ee.g,ee.b,{a:ee.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(be){var ee=m(be);this.ctx.strokeStyle=ee.style,this.ctx.isStrokeTransparent=ee.a===0,this.ctx.strokeOpacity=ee.a,ee.a===0?this.pdf.setDrawColor(255,255,255):(ee.a,this.pdf.setDrawColor(ee.r,ee.g,ee.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(be){["butt","round","square"].indexOf(be)!==-1&&(this.ctx.lineCap=be,this.pdf.setLineCap(be))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(be){isNaN(be)||(this.ctx.lineWidth=be,this.pdf.setLineWidth(be))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(be){["bevel","round","miter"].indexOf(be)!==-1&&(this.ctx.lineJoin=be,this.pdf.setLineJoin(be))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(be){isNaN(be)||(this.ctx.miterLimit=be,this.pdf.setMiterLimit(be))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(be){this.ctx.textBaseline=be}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(be){["right","end","center","left","start"].indexOf(be)!==-1&&(this.ctx.textAlign=be)}});var Fe=null;function Ee(be,ee){if(Fe===null){var ut=function(Ge){var Ne=[];return Object.keys(Ge).forEach(function(Ie){Ge[Ie].forEach(function($e){var Me=null;switch($e){case"bold":Me={family:Ie,weight:"bold"};break;case"italic":Me={family:Ie,style:"italic"};break;case"bolditalic":Me={family:Ie,weight:"bold",style:"italic"};break;case"":case"normal":Me={family:Ie}}Me!==null&&(Me.ref={name:Ie,style:$e},Ne.push(Me))})}),Ne}(be.getFontList());Fe=function(Ge){for(var Ne={},Ie=0;Ie<Ge.length;++Ie){var $e=mu(Ge[Ie]),Me=$e.family,Je=$e.stretch,ot=$e.style,ht=$e.weight;Ne[Me]=Ne[Me]||{},Ne[Me][Je]=Ne[Me][Je]||{},Ne[Me][Je][ot]=Ne[Me][Je][ot]||{},Ne[Me][Je][ot][ht]=$e}return Ne}(ut.concat(ee))}return Fe}var rt=null;Object.defineProperty(this,"fontFaces",{get:function(){return rt},set:function(be){Fe=null,rt=be}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(be){var ee;if(this.ctx.font=be,(ee=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(be))!==null){var ut=ee[1],Ge=(ee[2],ee[3]),Ne=ee[4],Ie=(ee[5],ee[6]),$e=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Ne)[2];Ne=Math.floor($e==="px"?parseFloat(Ne)*this.pdf.internal.scaleFactor:$e==="em"?parseFloat(Ne)*this.pdf.getFontSize():parseFloat(Ne)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Ne);var Me=function(Qe){var _t,qe,vr=[],jt=Qe.trim();if(jt==="")return Hc;if(jt in wd)return[wd[jt]];for(;jt!=="";){switch(qe=null,_t=(jt=Sd(jt)).charAt(0)){case'"':case"'":qe=V2(jt.substring(1),_t);break;default:qe=G2(jt)}if(qe===null||(vr.push(qe[0]),(jt=Sd(qe[1]))!==""&&jt.charAt(0)!==","))return Hc;jt=jt.replace(/^,/,"")}return vr}(Ie);if(this.fontFaces){var Je=H2(Ee(this.pdf,this.fontFaces),Me.map(function(Qe){return{family:Qe,stretch:"normal",weight:Ge,style:ut}}));this.pdf.setFont(Je.ref.name,Je.ref.style)}else{var ot="";(Ge==="bold"||parseInt(Ge,10)>=700||ut==="bold")&&(ot="bold"),ut==="italic"&&(ot+="italic"),ot.length===0&&(ot="normal");for(var ht="",bt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},At=0;At<Me.length;At++){if(this.pdf.internal.getFont(Me[At],ot,{noFallback:!0,disableWarning:!0})!==void 0){ht=Me[At];break}if(ot==="bolditalic"&&this.pdf.internal.getFont(Me[At],"bold",{noFallback:!0,disableWarning:!0})!==void 0)ht=Me[At],ot="bold";else if(this.pdf.internal.getFont(Me[At],"normal",{noFallback:!0,disableWarning:!0})!==void 0){ht=Me[At],ot="normal";break}}if(ht===""){for(var Ft=0;Ft<Me.length;Ft++)if(bt[Me[Ft]]){ht=bt[Me[Ft]];break}}ht=ht===""?"Times":ht,this.pdf.setFont(ht,ot)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(be){this.ctx.globalCompositeOperation=be}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(be){this.ctx.globalAlpha=be}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(be){this.ctx.lineDashOffset=be,pe.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(be){this.ctx.lineDash=be,pe.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(be){this.ctx.ignoreClearRect=!!be}})};v.prototype.setLineDash=function(P){this.lineDash=P},v.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},v.prototype.fill=function(){N.call(this,"fill",!1)},v.prototype.stroke=function(){N.call(this,"stroke",!1)},v.prototype.beginPath=function(){this.path=[{type:"begin"}]},v.prototype.moveTo=function(P,B){if(isNaN(P)||isNaN(B))throw Vt.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var H=this.ctx.transform.applyToPoint(new a(P,B));this.path.push({type:"mt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(P,B)},v.prototype.closePath=function(){var P=new a(0,0),B=0;for(B=this.path.length-1;B!==-1;B--)if(this.path[B].type==="begin"&&Kt(this.path[B+1])==="object"&&typeof this.path[B+1].x=="number"){P=new a(this.path[B+1].x,this.path[B+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(P.x,P.y)},v.prototype.lineTo=function(P,B){if(isNaN(P)||isNaN(B))throw Vt.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var H=this.ctx.transform.applyToPoint(new a(P,B));this.path.push({type:"lt",x:H.x,y:H.y}),this.ctx.lastPoint=new a(H.x,H.y)},v.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),N.call(this,null,!0)},v.prototype.quadraticCurveTo=function(P,B,H,Z){if(isNaN(H)||isNaN(Z)||isNaN(P)||isNaN(B))throw Vt.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var Q=this.ctx.transform.applyToPoint(new a(H,Z)),le=this.ctx.transform.applyToPoint(new a(P,B));this.path.push({type:"qct",x1:le.x,y1:le.y,x:Q.x,y:Q.y}),this.ctx.lastPoint=new a(Q.x,Q.y)},v.prototype.bezierCurveTo=function(P,B,H,Z,Q,le){if(isNaN(Q)||isNaN(le)||isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z))throw Vt.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var ue=this.ctx.transform.applyToPoint(new a(Q,le)),he=this.ctx.transform.applyToPoint(new a(P,B)),ge=this.ctx.transform.applyToPoint(new a(H,Z));this.path.push({type:"bct",x1:he.x,y1:he.y,x2:ge.x,y2:ge.y,x:ue.x,y:ue.y}),this.ctx.lastPoint=new a(ue.x,ue.y)},v.prototype.arc=function(P,B,H,Z,Q,le){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z)||isNaN(Q))throw Vt.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(le=!!le,!this.ctx.transform.isIdentity){var ue=this.ctx.transform.applyToPoint(new a(P,B));P=ue.x,B=ue.y;var he=this.ctx.transform.applyToPoint(new a(0,H)),ge=this.ctx.transform.applyToPoint(new a(0,0));H=Math.sqrt(Math.pow(he.x-ge.x,2)+Math.pow(he.y-ge.y,2))}Math.abs(Q-Z)>=2*Math.PI&&(Z=0,Q=2*Math.PI),this.path.push({type:"arc",x:P,y:B,radius:H,startAngle:Z,endAngle:Q,counterclockwise:le})},v.prototype.arcTo=function(P,B,H,Z,Q){throw new Error("arcTo not implemented.")},v.prototype.rect=function(P,B,H,Z){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z))throw Vt.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(P,B),this.lineTo(P+H,B),this.lineTo(P+H,B+Z),this.lineTo(P,B+Z),this.lineTo(P,B),this.lineTo(P+H,B),this.lineTo(P,B)},v.prototype.fillRect=function(P,B,H,Z){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z))throw Vt.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!f.call(this)){var Q={};this.lineCap!=="butt"&&(Q.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(Q.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(P,B,H,Z),this.fill(),Q.hasOwnProperty("lineCap")&&(this.lineCap=Q.lineCap),Q.hasOwnProperty("lineJoin")&&(this.lineJoin=Q.lineJoin)}},v.prototype.strokeRect=function(P,B,H,Z){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z))throw Vt.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");y.call(this)||(this.beginPath(),this.rect(P,B,H,Z),this.stroke())},v.prototype.clearRect=function(P,B,H,Z){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z))throw Vt.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(P,B,H,Z))},v.prototype.save=function(P){P=typeof P!="boolean"||P;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("q");if(this.pdf.setPage(B),P){this.ctx.fontSize=this.pdf.internal.getFontSize();var Z=new g(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Z}},v.prototype.restore=function(P){P=typeof P!="boolean"||P;for(var B=this.pdf.internal.getCurrentPageInfo().pageNumber,H=0;H<this.pdf.internal.getNumberOfPages();H++)this.pdf.setPage(H+1),this.pdf.internal.out("Q");this.pdf.setPage(B),P&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},v.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var m=function(P){var B,H,Z,Q;if(P.isCanvasGradient===!0&&(P=P.getColor()),!P)return{r:0,g:0,b:0,a:0,style:P};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(P))B=0,H=0,Z=0,Q=0;else{var le=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(P);if(le!==null)B=parseInt(le[1]),H=parseInt(le[2]),Z=parseInt(le[3]),Q=1;else if((le=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(P))!==null)B=parseInt(le[1]),H=parseInt(le[2]),Z=parseInt(le[3]),Q=parseFloat(le[4]);else{if(Q=1,typeof P=="string"&&P.charAt(0)!=="#"){var ue=new Uf(P);P=ue.ok?ue.toHex():"#000000"}P.length===4?(B=P.substring(1,2),B+=B,H=P.substring(2,3),H+=H,Z=P.substring(3,4),Z+=Z):(B=P.substring(1,3),H=P.substring(3,5),Z=P.substring(5,7)),B=parseInt(B,16),H=parseInt(H,16),Z=parseInt(Z,16)}}return{r:B,g:H,b:Z,a:Q,style:P}},f=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},y=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};v.prototype.fillText=function(P,B,H,Z){if(isNaN(B)||isNaN(H)||typeof P!="string")throw Vt.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Z=isNaN(Z)?void 0:Z,!f.call(this)){var Q=Y(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;A.call(this,{text:P,x:B,y:H,scale:le,angle:Q,align:this.textAlign,maxWidth:Z})}},v.prototype.strokeText=function(P,B,H,Z){if(isNaN(B)||isNaN(H)||typeof P!="string")throw Vt.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!y.call(this)){Z=isNaN(Z)?void 0:Z;var Q=Y(this.ctx.transform.rotation),le=this.ctx.transform.scaleX;A.call(this,{text:P,x:B,y:H,scale:le,renderingMode:"stroke",angle:Q,align:this.textAlign,maxWidth:Z})}},v.prototype.measureText=function(P){if(typeof P!="string")throw Vt.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var B=this.pdf,H=this.pdf.internal.scaleFactor,Z=B.internal.getFontSize(),Q=B.getStringUnitWidth(P)*Z/B.internal.scaleFactor,le=function(ue){var he=(ue=ue||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return he}}),this};return new le({width:Q*=Math.round(96*H/72*1e4)/1e4})},v.prototype.scale=function(P,B){if(isNaN(P)||isNaN(B))throw Vt.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var H=new c(P,0,0,B,0,0);this.ctx.transform=this.ctx.transform.multiply(H)},v.prototype.rotate=function(P){if(isNaN(P))throw Vt.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var B=new c(Math.cos(P),Math.sin(P),-Math.sin(P),Math.cos(P),0,0);this.ctx.transform=this.ctx.transform.multiply(B)},v.prototype.translate=function(P,B){if(isNaN(P)||isNaN(B))throw Vt.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var H=new c(1,0,0,1,P,B);this.ctx.transform=this.ctx.transform.multiply(H)},v.prototype.transform=function(P,B,H,Z,Q,le){if(isNaN(P)||isNaN(B)||isNaN(H)||isNaN(Z)||isNaN(Q)||isNaN(le))throw Vt.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var ue=new c(P,B,H,Z,Q,le);this.ctx.transform=this.ctx.transform.multiply(ue)},v.prototype.setTransform=function(P,B,H,Z,Q,le){P=isNaN(P)?1:P,B=isNaN(B)?0:B,H=isNaN(H)?0:H,Z=isNaN(Z)?1:Z,Q=isNaN(Q)?0:Q,le=isNaN(le)?0:le,this.ctx.transform=new c(P,B,H,Z,Q,le)};var _=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};v.prototype.drawImage=function(P,B,H,Z,Q,le,ue,he,ge){var Ae=this.pdf.getImageProperties(P),Fe=1,Ee=1,rt=1,be=1;Z!==void 0&&he!==void 0&&(rt=he/Z,be=ge/Q,Fe=Ae.width/Z*he/Z,Ee=Ae.height/Q*ge/Q),le===void 0&&(le=B,ue=H,B=0,H=0),Z!==void 0&&he===void 0&&(he=Z,ge=Q),Z===void 0&&he===void 0&&(he=Ae.width,ge=Ae.height);for(var ee,ut=this.ctx.transform.decompose(),Ge=Y(ut.rotate.shx),Ne=new c,Ie=(Ne=(Ne=(Ne=Ne.multiply(ut.translate)).multiply(ut.skew)).multiply(ut.scale)).applyToRectangle(new l(le-B*rt,ue-H*be,Z*Fe,Q*Ee)),$e=j.call(this,Ie),Me=[],Je=0;Je<$e.length;Je+=1)Me.indexOf($e[Je])===-1&&Me.push($e[Je]);if(S(Me),this.autoPaging)for(var ot=Me[0],ht=Me[Me.length-1],bt=ot;bt<ht+1;bt++){this.pdf.setPage(bt);var At=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Ft=bt===1?this.posY+this.margin[0]:this.margin[0],Qe=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],_t=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],qe=bt===1?0:Qe+(bt-2)*_t;if(this.ctx.clip_path.length!==0){var vr=this.path;ee=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ee,this.posX+this.margin[3],-qe+Ft+this.ctx.prevPageLastElemOffset),D.call(this,"fill",!0),this.path=vr}var jt=JSON.parse(JSON.stringify(Ie));jt=k([jt],this.posX+this.margin[3],-qe+Ft+this.ctx.prevPageLastElemOffset)[0];var Zr=(bt>ot||bt<ht)&&_.call(this);Zr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],At,_t,null).clip().discardPath()),this.pdf.addImage(P,"JPEG",jt.x,jt.y,jt.w,jt.h,null,null,Ge),Zr&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(P,"JPEG",Ie.x,Ie.y,Ie.w,Ie.h,null,null,Ge)};var j=function(P,B,H){var Z=[];B=B||this.pdf.internal.pageSize.width,H=H||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var Q=this.posY+this.ctx.prevPageLastElemOffset;switch(P.type){default:case"mt":case"lt":Z.push(Math.floor((P.y+Q)/H)+1);break;case"arc":Z.push(Math.floor((P.y+Q-P.radius)/H)+1),Z.push(Math.floor((P.y+Q+P.radius)/H)+1);break;case"qct":var le=J(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x,P.y);Z.push(Math.floor((le.y+Q)/H)+1),Z.push(Math.floor((le.y+le.h+Q)/H)+1);break;case"bct":var ue=ie(this.ctx.lastPoint.x,this.ctx.lastPoint.y,P.x1,P.y1,P.x2,P.y2,P.x,P.y);Z.push(Math.floor((ue.y+Q)/H)+1),Z.push(Math.floor((ue.y+ue.h+Q)/H)+1);break;case"rect":Z.push(Math.floor((P.y+Q)/H)+1),Z.push(Math.floor((P.y+P.h+Q)/H)+1)}for(var he=0;he<Z.length;he+=1)for(;this.pdf.internal.getNumberOfPages()<Z[he];)x.call(this);return Z},x=function(){var P=this.fillStyle,B=this.strokeStyle,H=this.font,Z=this.lineCap,Q=this.lineWidth,le=this.lineJoin;this.pdf.addPage(),this.fillStyle=P,this.strokeStyle=B,this.font=H,this.lineCap=Z,this.lineWidth=Q,this.lineJoin=le},k=function(P,B,H){for(var Z=0;Z<P.length;Z++)switch(P[Z].type){case"bct":P[Z].x2+=B,P[Z].y2+=H;case"qct":P[Z].x1+=B,P[Z].y1+=H;case"mt":case"lt":case"arc":default:P[Z].x+=B,P[Z].y+=H}return P},S=function(P){return P.sort(function(B,H){return B-H})},N=function(P,B){for(var H,Z,Q=this.fillStyle,le=this.strokeStyle,ue=this.lineCap,he=this.lineWidth,ge=Math.abs(he*this.ctx.transform.scaleX),Ae=this.lineJoin,Fe=JSON.parse(JSON.stringify(this.path)),Ee=JSON.parse(JSON.stringify(this.path)),rt=[],be=0;be<Ee.length;be++)if(Ee[be].x!==void 0)for(var ee=j.call(this,Ee[be]),ut=0;ut<ee.length;ut+=1)rt.indexOf(ee[ut])===-1&&rt.push(ee[ut]);for(var Ge=0;Ge<rt.length;Ge++)for(;this.pdf.internal.getNumberOfPages()<rt[Ge];)x.call(this);if(S(rt),this.autoPaging)for(var Ne=rt[0],Ie=rt[rt.length-1],$e=Ne;$e<Ie+1;$e++){this.pdf.setPage($e),this.fillStyle=Q,this.strokeStyle=le,this.lineCap=ue,this.lineWidth=ge,this.lineJoin=Ae;var Me=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Je=$e===1?this.posY+this.margin[0]:this.margin[0],ot=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],ht=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],bt=$e===1?0:ot+($e-2)*ht;if(this.ctx.clip_path.length!==0){var At=this.path;H=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(H,this.posX+this.margin[3],-bt+Je+this.ctx.prevPageLastElemOffset),D.call(this,P,!0),this.path=At}if(Z=JSON.parse(JSON.stringify(Fe)),this.path=k(Z,this.posX+this.margin[3],-bt+Je+this.ctx.prevPageLastElemOffset),B===!1||$e===0){var Ft=($e>Ne||$e<Ie)&&_.call(this);Ft&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Me,ht,null).clip().discardPath()),D.call(this,P,B),Ft&&this.pdf.restoreGraphicsState()}this.lineWidth=he}else this.lineWidth=ge,D.call(this,P,B),this.lineWidth=he;this.path=Fe},D=function(P,B){if((P!=="stroke"||B||!y.call(this))&&(P==="stroke"||B||!f.call(this))){for(var H,Z,Q=[],le=this.path,ue=0;ue<le.length;ue++){var he=le[ue];switch(he.type){case"begin":Q.push({begin:!0});break;case"close":Q.push({close:!0});break;case"mt":Q.push({start:he,deltas:[],abs:[]});break;case"lt":var ge=Q.length;if(le[ue-1]&&!isNaN(le[ue-1].x)&&(H=[he.x-le[ue-1].x,he.y-le[ue-1].y],ge>0)){for(;ge>=0;ge--)if(Q[ge-1].close!==!0&&Q[ge-1].begin!==!0){Q[ge-1].deltas.push(H),Q[ge-1].abs.push(he);break}}break;case"bct":H=[he.x1-le[ue-1].x,he.y1-le[ue-1].y,he.x2-le[ue-1].x,he.y2-le[ue-1].y,he.x-le[ue-1].x,he.y-le[ue-1].y],Q[Q.length-1].deltas.push(H);break;case"qct":var Ae=le[ue-1].x+2/3*(he.x1-le[ue-1].x),Fe=le[ue-1].y+2/3*(he.y1-le[ue-1].y),Ee=he.x+2/3*(he.x1-he.x),rt=he.y+2/3*(he.y1-he.y),be=he.x,ee=he.y;H=[Ae-le[ue-1].x,Fe-le[ue-1].y,Ee-le[ue-1].x,rt-le[ue-1].y,be-le[ue-1].x,ee-le[ue-1].y],Q[Q.length-1].deltas.push(H);break;case"arc":Q.push({deltas:[],abs:[],arc:!0}),Array.isArray(Q[Q.length-1].abs)&&Q[Q.length-1].abs.push(he)}}Z=B?null:P==="stroke"?"stroke":"fill";for(var ut=!1,Ge=0;Ge<Q.length;Ge++)if(Q[Ge].arc)for(var Ne=Q[Ge].abs,Ie=0;Ie<Ne.length;Ie++){var $e=Ne[Ie];$e.type==="arc"?E.call(this,$e.x,$e.y,$e.radius,$e.startAngle,$e.endAngle,$e.counterclockwise,void 0,B,!ut):U.call(this,$e.x,$e.y),ut=!0}else if(Q[Ge].close===!0)this.pdf.internal.out("h"),ut=!1;else if(Q[Ge].begin!==!0){var Me=Q[Ge].start.x,Je=Q[Ge].start.y;z.call(this,Q[Ge].deltas,Me,Je),ut=!0}Z&&V.call(this,Z),B&&K.call(this)}},M=function(P){var B=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,H=B*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return P-H;case"top":return P+B-H;case"hanging":return P+B-2*H;case"middle":return P+B/2-H;case"ideographic":return P;case"alphabetic":default:return P}},R=function(P){return P+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};v.prototype.createLinearGradient=function(){var P=function(){};return P.colorStops=[],P.addColorStop=function(B,H){this.colorStops.push([B,H])},P.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},P.isCanvasGradient=!0,P},v.prototype.createPattern=function(){return this.createLinearGradient()},v.prototype.createRadialGradient=function(){return this.createLinearGradient()};var E=function(P,B,H,Z,Q,le,ue,he,ge){for(var Ae=$.call(this,H,Z,Q,le),Fe=0;Fe<Ae.length;Fe++){var Ee=Ae[Fe];Fe===0&&(ge?L.call(this,Ee.x1+P,Ee.y1+B):U.call(this,Ee.x1+P,Ee.y1+B)),te.call(this,P,B,Ee.x2,Ee.y2,Ee.x3,Ee.y3,Ee.x4,Ee.y4)}he?K.call(this):V.call(this,ue)},V=function(P){switch(P){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},K=function(){this.pdf.clip(),this.pdf.discardPath()},L=function(P,B){this.pdf.internal.out(t(P)+" "+r(B)+" m")},A=function(P){var B;switch(P.align){case"right":case"end":B="right";break;case"center":B="center";break;case"left":case"start":default:B="left"}var H=this.pdf.getTextDimensions(P.text),Z=M.call(this,P.y),Q=R.call(this,Z)-H.h,le=this.ctx.transform.applyToPoint(new a(P.x,Z)),ue=this.ctx.transform.decompose(),he=new c;he=(he=(he=he.multiply(ue.translate)).multiply(ue.skew)).multiply(ue.scale);for(var ge,Ae,Fe,Ee=this.ctx.transform.applyToRectangle(new l(P.x,Z,H.w,H.h)),rt=he.applyToRectangle(new l(P.x,Q,H.w,H.h)),be=j.call(this,rt),ee=[],ut=0;ut<be.length;ut+=1)ee.indexOf(be[ut])===-1&&ee.push(be[ut]);if(S(ee),this.autoPaging)for(var Ge=ee[0],Ne=ee[ee.length-1],Ie=Ge;Ie<Ne+1;Ie++){this.pdf.setPage(Ie);var $e=Ie===1?this.posY+this.margin[0]:this.margin[0],Me=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Je=this.pdf.internal.pageSize.height-this.margin[2],ot=Je-this.margin[0],ht=this.pdf.internal.pageSize.width-this.margin[1],bt=ht-this.margin[3],At=Ie===1?0:Me+(Ie-2)*ot;if(this.ctx.clip_path.length!==0){var Ft=this.path;ge=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=k(ge,this.posX+this.margin[3],-1*At+$e),D.call(this,"fill",!0),this.path=Ft}var Qe=k([JSON.parse(JSON.stringify(rt))],this.posX+this.margin[3],-At+$e+this.ctx.prevPageLastElemOffset)[0];P.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*P.scale),Fe=this.lineWidth,this.lineWidth=Fe*P.scale);var _t=this.autoPaging!=="text";if(_t||Qe.y+Qe.h<=Je){if(_t||Qe.y>=$e&&Qe.x<=ht){var qe=_t?P.text:this.pdf.splitTextToSize(P.text,P.maxWidth||ht-Qe.x)[0],vr=k([JSON.parse(JSON.stringify(Ee))],this.posX+this.margin[3],-At+$e+this.ctx.prevPageLastElemOffset)[0],jt=_t&&(Ie>Ge||Ie<Ne)&&_.call(this);jt&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],bt,ot,null).clip().discardPath()),this.pdf.text(qe,vr.x,vr.y,{angle:P.angle,align:B,renderingMode:P.renderingMode}),jt&&this.pdf.restoreGraphicsState()}}else Qe.y<Je&&(this.ctx.prevPageLastElemOffset+=Je-Qe.y);P.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Fe)}else P.scale>=.01&&(Ae=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ae*P.scale),Fe=this.lineWidth,this.lineWidth=Fe*P.scale),this.pdf.text(P.text,le.x+this.posX,le.y+this.posY,{angle:P.angle,align:B,renderingMode:P.renderingMode,maxWidth:P.maxWidth}),P.scale>=.01&&(this.pdf.setFontSize(Ae),this.lineWidth=Fe)},U=function(P,B,H,Z){H=H||0,Z=Z||0,this.pdf.internal.out(t(P+H)+" "+r(B+Z)+" l")},z=function(P,B,H){return this.pdf.lines(P,B,H,null,null)},te=function(P,B,H,Z,Q,le,ue,he){this.pdf.internal.out([e(s(H+P)),e(i(Z+B)),e(s(Q+P)),e(i(le+B)),e(s(ue+P)),e(i(he+B)),"c"].join(" "))},$=function(P,B,H,Z){for(var Q=2*Math.PI,le=Math.PI/2;B>H;)B-=Q;var ue=Math.abs(H-B);ue<Q&&Z&&(ue=Q-ue);for(var he=[],ge=Z?-1:1,Ae=B;ue>1e-5;){var Fe=Ae+ge*Math.min(ue,le);he.push(W.call(this,P,Ae,Fe)),ue-=Math.abs(Fe-Ae),Ae=Fe}return he},W=function(P,B,H){var Z=(H-B)/2,Q=P*Math.cos(Z),le=P*Math.sin(Z),ue=Q,he=-le,ge=ue*ue+he*he,Ae=ge+ue*Q+he*le,Fe=4/3*(Math.sqrt(2*ge*Ae)-Ae)/(ue*le-he*Q),Ee=ue-Fe*he,rt=he+Fe*ue,be=Ee,ee=-rt,ut=Z+B,Ge=Math.cos(ut),Ne=Math.sin(ut);return{x1:P*Math.cos(B),y1:P*Math.sin(B),x2:Ee*Ge-rt*Ne,y2:Ee*Ne+rt*Ge,x3:be*Ge-ee*Ne,y3:be*Ne+ee*Ge,x4:P*Math.cos(H),y4:P*Math.sin(H)}},Y=function(P){return 180*P/Math.PI},J=function(P,B,H,Z,Q,le){var ue=P+.5*(H-P),he=B+.5*(Z-B),ge=Q+.5*(H-Q),Ae=le+.5*(Z-le),Fe=Math.min(P,Q,ue,ge),Ee=Math.max(P,Q,ue,ge),rt=Math.min(B,le,he,Ae),be=Math.max(B,le,he,Ae);return new l(Fe,rt,Ee-Fe,be-rt)},ie=function(P,B,H,Z,Q,le,ue,he){var ge,Ae,Fe,Ee,rt,be,ee,ut,Ge,Ne,Ie,$e,Me,Je,ot=H-P,ht=Z-B,bt=Q-H,At=le-Z,Ft=ue-Q,Qe=he-le;for(Ae=0;Ae<41;Ae++)Ge=(ee=(Fe=P+(ge=Ae/40)*ot)+ge*((rt=H+ge*bt)-Fe))+ge*(rt+ge*(Q+ge*Ft-rt)-ee),Ne=(ut=(Ee=B+ge*ht)+ge*((be=Z+ge*At)-Ee))+ge*(be+ge*(le+ge*Qe-be)-ut),Ae==0?(Ie=Ge,$e=Ne,Me=Ge,Je=Ne):(Ie=Math.min(Ie,Ge),$e=Math.min($e,Ne),Me=Math.max(Me,Ge),Je=Math.max(Je,Ne));return new l(Math.round(Ie),Math.round($e),Math.round(Me-Ie),Math.round(Je-$e))},pe=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var P,B,H=(P=this.ctx.lineDash,B=this.ctx.lineDashOffset,JSON.stringify({lineDash:P,lineDashOffset:B}));this.prevLineDash!==H&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=H)}}})(tt.API),function(n){var e=function(i){var a,l,c,d,g,v,m,f,y,_;for(l=[],c=0,d=(i+=a="\0\0\0\0".slice(i.length%4||4)).length;d>c;c+=4)(g=(i.charCodeAt(c)<<24)+(i.charCodeAt(c+1)<<16)+(i.charCodeAt(c+2)<<8)+i.charCodeAt(c+3))!==0?(v=(g=((g=((g=((g=(g-(_=g%85))/85)-(y=g%85))/85)-(f=g%85))/85)-(m=g%85))/85)%85,l.push(v+33,m+33,f+33,y+33,_+33)):l.push(122);return function(j,x){for(var k=x;k>0;k--)j.pop()}(l,a.length),String.fromCharCode.apply(String,l)+"~>"},t=function(i){var a,l,c,d,g,v=String,m="length",f=255,y="charCodeAt",_="slice",j="replace";for(i[_](-2),i=i[_](0,-2)[j](/\s/g,"")[j]("z","!!!!!"),c=[],d=0,g=(i+=a="uuuuu"[_](i[m]%5||5))[m];g>d;d+=5)l=52200625*(i[y](d)-33)+614125*(i[y](d+1)-33)+7225*(i[y](d+2)-33)+85*(i[y](d+3)-33)+(i[y](d+4)-33),c.push(f&l>>24,f&l>>16,f&l>>8,f&l);return function(x,k){for(var S=k;S>0;S--)x.pop()}(c,a[m]),v.fromCharCode.apply(v,c)},r=function(i){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((i=i.replace(/\s/g,"")).indexOf(">")!==-1&&(i=i.substr(0,i.indexOf(">"))),i.length%2&&(i+="0"),a.test(i)===!1)return"";for(var l="",c=0;c<i.length;c+=2)l+=String.fromCharCode("0x"+(i[c]+i[c+1]));return l},s=function(i){for(var a=new Uint8Array(i.length),l=i.length;l--;)a[l]=i.charCodeAt(l);return i=(a=uu(a)).reduce(function(c,d){return c+String.fromCharCode(d)},"")};n.processDataByFilters=function(i,a){var l=0,c=i||"",d=[];for(typeof(a=a||[])=="string"&&(a=[a]),l=0;l<a.length;l+=1)switch(a[l]){case"ASCII85Decode":case"/ASCII85Decode":c=t(c),d.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":c=e(c),d.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":c=r(c),d.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":c=c.split("").map(function(g){return("0"+g.charCodeAt().toString(16)).slice(-2)}).join("")+">",d.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":c=s(c),d.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[l]+'" is not implemented')}return{data:c,reverseChain:d.reverse().join(" ")}}}(tt.API),function(n){n.loadFile=function(e,t,r){return function(s,i,a){i=i!==!1,a=typeof a=="function"?a:function(){};var l=void 0;try{l=function(c,d,g){var v=new XMLHttpRequest,m=0,f=function(y){var _=y.length,j=[],x=String.fromCharCode;for(m=0;m<_;m+=1)j.push(x(255&y.charCodeAt(m)));return j.join("")};if(v.open("GET",c,!d),v.overrideMimeType("text/plain; charset=x-user-defined"),d===!1&&(v.onload=function(){v.status===200?g(f(this.responseText)):g(void 0)}),v.send(null),d&&v.status===200)return f(v.responseText)}(s,i,a)}catch{}return l}(e,t,r)},n.loadImageFile=n.loadFile}(tt.API),function(n){function e(){return(at.html2canvas?Promise.resolve(at.html2canvas):si(()=>import("./html2canvas.esm-BfxBtG_O.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))}).then(function(a){return a.default?a.default:a})}function t(){return(at.DOMPurify?Promise.resolve(at.DOMPurify):si(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(a){return Promise.reject(new Error("Could not load dompurify: "+a))}).then(function(a){return a.default?a.default:a})}var r=function(a){var l=Kt(a);return l==="undefined"?"undefined":l==="string"||a instanceof String?"string":l==="number"||a instanceof Number?"number":l==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":l==="object"?"object":"unknown"},s=function(a,l){var c=document.createElement(a);for(var d in l.className&&(c.className=l.className),l.innerHTML&&l.dompurify&&(c.innerHTML=l.dompurify.sanitize(l.innerHTML)),l.style)c.style[d]=l.style[d];return c},i=function a(l){var c=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),d=a.convert(Promise.resolve(),c);return d=(d=d.setProgress(1,a,1,[a])).set(l)};(i.prototype=Object.create(Promise.prototype)).constructor=i,i.convert=function(a,l){return a.__proto__=l||i.prototype,a},i.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},i.prototype.from=function(a,l){return this.then(function(){switch(l=l||function(c){switch(r(c)){case"string":return"string";case"element":return c.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(a)){case"string":return this.then(t).then(function(c){return this.set({src:s("div",{innerHTML:a,dompurify:c})})});case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}})},i.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},i.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},l=function c(d,g){for(var v=d.nodeType===3?document.createTextNode(d.nodeValue):d.cloneNode(!1),m=d.firstChild;m;m=m.nextSibling)g!==!0&&m.nodeType===1&&m.nodeName==="SCRIPT"||v.appendChild(c(m,g));return d.nodeType===1&&(d.nodeName==="CANVAS"?(v.width=d.width,v.height=d.height,v.getContext("2d").drawImage(d,0,0)):d.nodeName!=="TEXTAREA"&&d.nodeName!=="SELECT"||(v.value=d.value),v.addEventListener("load",function(){v.scrollTop=d.scrollTop,v.scrollLeft=d.scrollLeft},!0)),v}(this.prop.src,this.opt.html2canvas.javascriptEnabled);l.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(l),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},i.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=Object.assign({},this.opt.html2canvas);return delete c.onrendered,l(this.prop.container,c)}).then(function(l){(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(e).then(function(l){var c=this.opt.jsPDF,d=this.opt.fontFaces,g=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,v=Object.assign({async:!0,allowTaint:!0,scale:g,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete v.onrendered,c.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,c.context2d.posX=this.opt.x,c.context2d.posY=this.opt.y,c.context2d.margin=this.opt.margin,c.context2d.fontFaces=d,d)for(var m=0;m<d.length;++m){var f=d[m],y=f.src.find(function(_){return _.format==="truetype"});y&&c.addFont(y.url,f.ref.name,f.ref.style)}return v.windowHeight=v.windowHeight||0,v.windowHeight=v.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):v.windowHeight,c.context2d.save(!0),l(this.prop.container,v)}).then(function(l){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(l),this.prop.canvas=l,document.body.removeChild(this.prop.overlay)})},i.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a})},i.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},i.prototype.output=function(a,l,c){return(c=c||"pdf").toLowerCase()==="img"||c.toLowerCase()==="image"?this.outputImg(a,l):this.outputPdf(a,l)},i.prototype.outputPdf=function(a,l){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(a,l)})},i.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}})},i.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},i.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},i.prototype.set=function(a){if(r(a)!=="object")return this;var l=Object.keys(a||{}).map(function(c){if(c in i.template.prop)return function(){this.prop[c]=a[c]};switch(c){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[c]=a[c]}}},this);return this.then(function(){return this.thenList(l)})},i.prototype.get=function(a,l){return this.then(function(){var c=a in i.template.prop?this.prop[a]:this.opt[a];return l?l(c):c})},i.prototype.setMargin=function(a){return this.then(function(){switch(r(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a}).then(this.setPageSize)},i.prototype.setPageSize=function(a){function l(c,d){return Math.floor(c*d/72*96)}return this.then(function(){(a=a||tt.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:l(a.inner.width,a.k),height:l(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a})},i.prototype.setProgress=function(a,l,c,d){return a!=null&&(this.progress.val=a),l!=null&&(this.progress.state=l),c!=null&&(this.progress.n=c),d!=null&&(this.progress.stack=d),this.progress.ratio=this.progress.val/this.progress.state,this},i.prototype.updateProgress=function(a,l,c,d){return this.setProgress(a?this.progress.val+a:null,l||null,c?this.progress.n+c:null,d?this.progress.stack.concat(d):null)},i.prototype.then=function(a,l){var c=this;return this.thenCore(a,l,function(d,g){return c.updateProgress(null,null,1,[d]),Promise.prototype.then.call(this,function(v){return c.updateProgress(null,d),v}).then(d,g).then(function(v){return c.updateProgress(1),v})})},i.prototype.thenCore=function(a,l,c){c=c||Promise.prototype.then,a&&(a=a.bind(this)),l&&(l=l.bind(this));var d=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:i.convert(Object.assign({},this),Promise.prototype),g=c.call(d,a,l);return i.convert(g,this.__proto__)},i.prototype.thenExternal=function(a,l){return Promise.prototype.then.call(this,a,l)},i.prototype.thenList=function(a){var l=this;return a.forEach(function(c){l=l.thenCore(c)}),l},i.prototype.catch=function(a){a&&(a=a.bind(this));var l=Promise.prototype.catch.call(this,a);return i.convert(l,this)},i.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},i.prototype.error=function(a){return this.then(function(){throw new Error(a)})},i.prototype.using=i.prototype.set,i.prototype.saveAs=i.prototype.save,i.prototype.export=i.prototype.output,i.prototype.run=i.prototype.then,tt.getPageSize=function(a,l,c){if(Kt(a)==="object"){var d=a;a=d.orientation,l=d.unit||l,c=d.format||c}l=l||"mm",c=c||"a4",a=(""+(a||"P")).toLowerCase();var g,v=(""+c).toLowerCase(),m={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(l){case"pt":g=1;break;case"mm":g=72/25.4;break;case"cm":g=72/2.54;break;case"in":g=72;break;case"px":g=.75;break;case"pc":case"em":g=12;break;case"ex":g=6;break;default:throw"Invalid unit: "+l}var f,y=0,_=0;if(m.hasOwnProperty(v))y=m[v][1]/g,_=m[v][0]/g;else try{y=c[1],_=c[0]}catch{throw new Error("Invalid format: "+c)}if(a==="p"||a==="portrait")a="p",_>y&&(f=_,_=y,y=f);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",y>_&&(f=_,_=y,y=f)}return{width:_,height:y,unit:l,k:g,orientation:a}},n.html=function(a,l){(l=l||{}).callback=l.callback||function(){},l.html2canvas=l.html2canvas||{},l.html2canvas.canvas=l.html2canvas.canvas||this.canvas,l.jsPDF=l.jsPDF||this,l.fontFaces=l.fontFaces?l.fontFaces.map(mu):null;var c=new i(l);return l.worker?c:c.from(a).doCallback()}}(tt.API),tt.API.addJS=function(n){return Ad=n,this.internal.events.subscribe("postPutResources",function(){vl=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(vl+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),jd=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+Ad+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){vl!==void 0&&jd!==void 0&&this.internal.out("/Names <</JavaScript "+vl+" 0 R>>")}),this},function(n){var e;n.events.push(["postPutResources",function(){var t=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=t.outline.render().split(/\r\n/),i=0;i<s.length;i++){var a=s[i],l=r.exec(a);if(l!=null){var c=l[1];t.internal.newObjectDeferredBegin(c,!1)}t.internal.write(a)}if(this.outline.createNamedDestinations){var d=this.internal.pages.length,g=[];for(i=0;i<d;i++){var v=t.internal.newObject();g.push(v);var m=t.internal.getPageInfo(i+1);t.internal.write("<< /D["+m.objId+" 0 R /XYZ null null null]>> endobj")}var f=t.internal.newObject();for(t.internal.write("<< /Names [ "),i=0;i<g.length;i++)t.internal.write("(page_"+(i+1)+")"+g[i]+" 0 R");t.internal.write(" ] >>","endobj"),e=t.internal.newObject(),t.internal.write("<< /Dests "+f+" 0 R"),t.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+e+" 0 R"))}]),n.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(r,s,i){var a={title:s,options:i,children:[]};return r==null&&(r=this.root),r.children.push(a),a},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(r){r.id=t.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},t.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},t.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,i=0;i<r.children.length;i++){var a=r.children[i];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(r)),i>0&&this.line("/Prev "+this.makeRef(r.children[i-1])),i<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[i+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var l=this.count=this.count_r({count:0},a);if(l>0&&this.line("/Count "+l),a.options&&a.options.pageNumber){var c=t.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+c.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var d=0;d<r.children.length;d++)this.renderItems(r.children[d])},t.outline.line=function(r){this.ctx.val+=r+`\r
`},t.outline.makeRef=function(r){return r.id+" 0 R"},t.outline.makeString=function(r){return"("+t.internal.pdfEscape(r)+")"},t.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},t.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},t.outline.count_r=function(r,s){for(var i=0;i<s.children.length;i++)r.count++,this.count_r(r,s.children[i]);return r.count}}])}(tt.API),function(n){var e=[192,193,194,195,196,197,198,199];n.processJPEG=function(t,r,s,i,a,l){var c,d=this.decode.DCT_DECODE,g=null;if(typeof t=="string"||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=a||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(c=function(v){for(var m,f=256*v.charCodeAt(4)+v.charCodeAt(5),y=v.length,_={width:0,height:0,numcomponents:1},j=4;j<y;j+=2){if(j+=f,e.indexOf(v.charCodeAt(j+1))!==-1){m=256*v.charCodeAt(j+5)+v.charCodeAt(j+6),_={width:256*v.charCodeAt(j+7)+v.charCodeAt(j+8),height:m,numcomponents:v.charCodeAt(j+9)};break}f=256*v.charCodeAt(j+2)+v.charCodeAt(j+3)}return _}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:l=this.color_spaces.DEVICE_GRAY;break;case 4:l=this.color_spaces.DEVICE_CMYK;break;case 3:l=this.color_spaces.DEVICE_RGB}g={data:t,width:c.width,height:c.height,colorSpace:l,bitsPerComponent:8,filter:d,index:r,alias:s}}return g}}(tt.API);var sa,bl,kd,Ld,Pd,K2=function(){var n,e,t;function r(i){var a,l,c,d,g,v,m,f,y,_,j,x,k,S;for(this.data=i,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},v=null;;){switch(a=this.readUInt32(),y=function(){var N,D;for(D=[],N=0;N<4;++N)D.push(String.fromCharCode(this.data[this.pos++]));return D}.call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":v&&this.animation.frames.push(v),this.pos+=4,v={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},g=this.readUInt16(),d=this.readUInt16()||100,v.delay=1e3*g/d,v.disposeOp=this.data[this.pos++],v.blendOp=this.data[this.pos++],v.data=[];break;case"IDAT":case"fdAT":for(y==="fdAT"&&(this.pos+=4,a-=4),i=v?.data||this.imgData,x=0;0<=a?x<a:x>a;0<=a?++x:--x)i.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(c=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>c)throw new Error("More transparent colors than palette size");if((_=c-this.transparency.indexed.length)>0)for(k=0;0<=_?k<_:k>_;0<=_?++k:--k)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":m=(j=this.read(a)).indexOf(0),f=String.fromCharCode.apply(String,j.slice(0,m)),this.text[f]=String.fromCharCode.apply(String,j.slice(m+1));break;case"IEND":return v&&this.animation.frames.push(v),this.colors=function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}.call(this),this.hasAlphaChannel=(S=this.colorType)===4||S===6,l=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*l,this.colorSpace=function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}.call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(i){var a,l;for(l=[],a=0;0<=i?a<i:a>i;0<=i?++a:--a)l.push(this.data[this.pos++]);return l},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(i){var a=this.pixelBitlength/8,l=new Uint8Array(this.width*this.height*a),c=0,d=this;if(i==null&&(i=this.imgData),i.length===0)return new Uint8Array(0);function g(v,m,f,y){var _,j,x,k,S,N,D,M,R,E,V,K,L,A,U,z,te,$,W,Y,J,ie=Math.ceil((d.width-v)/f),pe=Math.ceil((d.height-m)/y),P=d.width==ie&&d.height==pe;for(A=a*ie,K=P?l:new Uint8Array(A*pe),N=i.length,L=0,j=0;L<pe&&c<N;){switch(i[c++]){case 0:for(k=te=0;te<A;k=te+=1)K[j++]=i[c++];break;case 1:for(k=$=0;$<A;k=$+=1)_=i[c++],S=k<a?0:K[j-a],K[j++]=(_+S)%256;break;case 2:for(k=W=0;W<A;k=W+=1)_=i[c++],x=(k-k%a)/a,U=L&&K[(L-1)*A+x*a+k%a],K[j++]=(U+_)%256;break;case 3:for(k=Y=0;Y<A;k=Y+=1)_=i[c++],x=(k-k%a)/a,S=k<a?0:K[j-a],U=L&&K[(L-1)*A+x*a+k%a],K[j++]=(_+Math.floor((S+U)/2))%256;break;case 4:for(k=J=0;J<A;k=J+=1)_=i[c++],x=(k-k%a)/a,S=k<a?0:K[j-a],L===0?U=z=0:(U=K[(L-1)*A+x*a+k%a],z=x&&K[(L-1)*A+(x-1)*a+k%a]),D=S+U-z,M=Math.abs(D-S),E=Math.abs(D-U),V=Math.abs(D-z),R=M<=E&&M<=V?S:E<=V?U:z,K[j++]=(_+R)%256;break;default:throw new Error("Invalid filter algorithm: "+i[c-1])}if(!P){var B=((m+L*y)*d.width+v)*a,H=L*A;for(k=0;k<ie;k+=1){for(var Z=0;Z<a;Z+=1)l[B++]=K[H++];B+=(f-1)*a}}L++}}return i=A2(i),d.interlaceMethod==1?(g(0,0,8,8),g(4,0,8,8),g(0,4,4,8),g(2,0,4,4),g(0,2,2,4),g(1,0,2,2),g(0,1,1,2)):g(0,0,1,1),l},r.prototype.decodePalette=function(){var i,a,l,c,d,g,v,m,f;for(l=this.palette,g=this.transparency.indexed||[],d=new Uint8Array((g.length||0)+l.length),c=0,i=0,a=v=0,m=l.length;v<m;a=v+=3)d[c++]=l[a],d[c++]=l[a+1],d[c++]=l[a+2],d[c++]=(f=g[i++])!=null?f:255;return d},r.prototype.copyToImageData=function(i,a){var l,c,d,g,v,m,f,y,_,j,x;if(c=this.colors,_=null,l=this.hasAlphaChannel,this.palette.length&&(_=(x=this._decodedPalette)!=null?x:this._decodedPalette=this.decodePalette(),c=4,l=!0),y=(d=i.data||i).length,v=_||a,g=m=0,c===1)for(;g<y;)f=_?4*a[g/4]:m,j=v[f++],d[g++]=j,d[g++]=j,d[g++]=j,d[g++]=l?v[f++]:255,m=f;else for(;g<y;)f=_?4*a[g/4]:m,d[g++]=v[f++],d[g++]=v[f++],d[g++]=v[f++],d[g++]=l?v[f++]:255,m=f},r.prototype.decode=function(){var i;return i=new Uint8Array(this.width*this.height*4),this.copyToImageData(i,this.decodePixels()),i};var s=function(){if(Object.prototype.toString.call(at)==="[object Window]"){try{e=at.document.createElement("canvas"),t=e.getContext("2d")}catch{return!1}return!0}return!1};return s(),n=function(i){var a;if(s()===!0)return t.width=i.width,t.height=i.height,t.clearRect(0,0,i.width,i.height),t.putImageData(i,0,0),(a=new Image).src=e.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(i){var a,l,c,d,g,v,m,f;if(this.animation){for(f=[],l=g=0,v=(m=this.animation.frames).length;g<v;l=++g)a=m[l],c=i.createImageData(a.width,a.height),d=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(c,d),a.imageData=c,f.push(a.image=n(c));return f}},r.prototype.renderFrame=function(i,a){var l,c,d;return l=(c=this.animation.frames)[a],d=c[a-1],a===0&&i.clearRect(0,0,this.width,this.height),d?.disposeOp===1?i.clearRect(d.xOffset,d.yOffset,d.width,d.height):d?.disposeOp===2&&i.putImageData(d.imageData,d.xOffset,d.yOffset),l.blendOp===0&&i.clearRect(l.xOffset,l.yOffset,l.width,l.height),i.drawImage(l.image,l.xOffset,l.yOffset)},r.prototype.animate=function(i){var a,l,c,d,g,v,m=this;return l=0,v=this.animation,d=v.numFrames,c=v.frames,g=v.numPlays,(a=function(){var f,y;if(f=l++%d,y=c[f],m.renderFrame(i,f),d>1&&l/d<g)return m.animation._timeout=setTimeout(a,y.delay)})()},r.prototype.stopAnimation=function(){var i;return clearTimeout((i=this.animation)!=null?i._timeout:void 0)},r.prototype.render=function(i){var a,l;return i._png&&i._png.stopAnimation(),i._png=this,i.width=this.width,i.height=this.height,a=i.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(l=a.createImageData(this.width,this.height),this.copyToImageData(l,this.decodePixels()),a.putImageData(l,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function J2(n){var e=0;if(n[e++]!==71||n[e++]!==73||n[e++]!==70||n[e++]!==56||(n[e++]+1&253)!=56||n[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var t=n[e++]|n[e++]<<8,r=n[e++]|n[e++]<<8,s=n[e++],i=s>>7,a=1<<(7&s)+1;n[e++],n[e++];var l=null,c=null;i&&(l=e,c=a,e+=3*a);var d=!0,g=[],v=0,m=null,f=0,y=null;for(this.width=t,this.height=r;d&&e<n.length;)switch(n[e++]){case 33:switch(n[e++]){case 255:if(n[e]!==11||n[e+1]==78&&n[e+2]==69&&n[e+3]==84&&n[e+4]==83&&n[e+5]==67&&n[e+6]==65&&n[e+7]==80&&n[e+8]==69&&n[e+9]==50&&n[e+10]==46&&n[e+11]==48&&n[e+12]==3&&n[e+13]==1&&n[e+16]==0)e+=14,y=n[e++]|n[e++]<<8,e++;else for(e+=12;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;case 249:if(n[e++]!==4||n[e+4]!==0)throw new Error("Invalid graphics extension block.");var _=n[e++];v=n[e++]|n[e++]<<8,m=n[e++],!(1&_)&&(m=null),f=_>>2&7,e++;break;case 254:for(;;){if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}break;default:throw new Error("Unknown graphic control label: 0x"+n[e-1].toString(16))}break;case 44:var j=n[e++]|n[e++]<<8,x=n[e++]|n[e++]<<8,k=n[e++]|n[e++]<<8,S=n[e++]|n[e++]<<8,N=n[e++],D=N>>6&1,M=1<<(7&N)+1,R=l,E=c,V=!1;N>>7&&(V=!0,R=e,E=M,e+=3*M);var K=e;for(e++;;){var L;if(!((L=n[e++])>=0))throw Error("Invalid block size");if(L===0)break;e+=L}g.push({x:j,y:x,width:k,height:S,has_local_palette:V,palette_offset:R,palette_size:E,data_offset:K,data_length:e-K,transparent_index:m,interlaced:!!D,delay:v,disposal:f});break;case 59:d=!1;break;default:throw new Error("Unknown gif block: 0x"+n[e-1].toString(16))}this.numFrames=function(){return g.length},this.loopCount=function(){return y},this.frameInfo=function(A){if(A<0||A>=g.length)throw new Error("Frame index out of range.");return g[A]},this.decodeAndBlitFrameBGRA=function(A,U){var z=this.frameInfo(A),te=z.width*z.height,$=new Uint8Array(te);Nd(n,z.data_offset,$,te);var W=z.palette_offset,Y=z.transparent_index;Y===null&&(Y=256);var J=z.width,ie=t-J,pe=J,P=4*(z.y*t+z.x),B=4*((z.y+z.height)*t+z.x),H=P,Z=4*ie;z.interlaced===!0&&(Z+=4*t*7);for(var Q=8,le=0,ue=$.length;le<ue;++le){var he=$[le];if(pe===0&&(pe=J,(H+=Z)>=B&&(Z=4*ie+4*t*(Q-1),H=P+(J+ie)*(Q<<1),Q>>=1)),he===Y)H+=4;else{var ge=n[W+3*he],Ae=n[W+3*he+1],Fe=n[W+3*he+2];U[H++]=Fe,U[H++]=Ae,U[H++]=ge,U[H++]=255}--pe}},this.decodeAndBlitFrameRGBA=function(A,U){var z=this.frameInfo(A),te=z.width*z.height,$=new Uint8Array(te);Nd(n,z.data_offset,$,te);var W=z.palette_offset,Y=z.transparent_index;Y===null&&(Y=256);var J=z.width,ie=t-J,pe=J,P=4*(z.y*t+z.x),B=4*((z.y+z.height)*t+z.x),H=P,Z=4*ie;z.interlaced===!0&&(Z+=4*t*7);for(var Q=8,le=0,ue=$.length;le<ue;++le){var he=$[le];if(pe===0&&(pe=J,(H+=Z)>=B&&(Z=4*ie+4*t*(Q-1),H=P+(J+ie)*(Q<<1),Q>>=1)),he===Y)H+=4;else{var ge=n[W+3*he],Ae=n[W+3*he+1],Fe=n[W+3*he+2];U[H++]=ge,U[H++]=Ae,U[H++]=Fe,U[H++]=255}--pe}}}function Nd(n,e,t,r){for(var s=n[e++],i=1<<s,a=i+1,l=a+1,c=s+1,d=(1<<c)-1,g=0,v=0,m=0,f=n[e++],y=new Int32Array(4096),_=null;;){for(;g<16&&f!==0;)v|=n[e++]<<g,g+=8,f===1?f=n[e++]:--f;if(g<c)break;var j=v&d;if(v>>=c,g-=c,j!==i){if(j===a)break;for(var x=j<l?j:_,k=0,S=x;S>i;)S=y[S]>>8,++k;var N=S;if(m+k+(x!==j?1:0)>r)return void Vt.log("Warning, gif stream longer than expected.");t[m++]=N;var D=m+=k;for(x!==j&&(t[m++]=N),S=x;k--;)S=y[S],t[--D]=255&S,S>>=8;_!==null&&l<4096&&(y[l++]=_<<8|N,l>=d+1&&c<12&&(++c,d=d<<1|1)),_=j}else l=a+1,d=(1<<(c=s+1))-1,_=null}return m!==r&&Vt.log("Warning, gif stream shorter than expected."),t}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Vc(n){var e,t,r,s,i,a=Math.floor,l=new Array(64),c=new Array(64),d=new Array(64),g=new Array(64),v=new Array(65535),m=new Array(65535),f=new Array(64),y=new Array(64),_=[],j=0,x=7,k=new Array(64),S=new Array(64),N=new Array(64),D=new Array(256),M=new Array(2048),R=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],V=[0,1,2,3,4,5,6,7,8,9,10,11],K=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],L=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],A=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],U=[0,1,2,3,4,5,6,7,8,9,10,11],z=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],te=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function $(P,B){for(var H=0,Z=0,Q=new Array,le=1;le<=16;le++){for(var ue=1;ue<=P[le];ue++)Q[B[Z]]=[],Q[B[Z]][0]=H,Q[B[Z]][1]=le,Z++,H++;H*=2}return Q}function W(P){for(var B=P[0],H=P[1]-1;H>=0;)B&1<<H&&(j|=1<<x),H--,--x<0&&(j==255?(Y(255),Y(0)):Y(j),x=7,j=0)}function Y(P){_.push(P)}function J(P){Y(P>>8&255),Y(255&P)}function ie(P,B,H,Z,Q){for(var le,ue=Q[0],he=Q[240],ge=function(Ne,Ie){var $e,Me,Je,ot,ht,bt,At,Ft,Qe,_t,qe=0;for(Qe=0;Qe<8;++Qe){$e=Ne[qe],Me=Ne[qe+1],Je=Ne[qe+2],ot=Ne[qe+3],ht=Ne[qe+4],bt=Ne[qe+5],At=Ne[qe+6];var vr=$e+(Ft=Ne[qe+7]),jt=$e-Ft,Zr=Me+At,Et=Me-At,$t=Je+bt,hr=Je-bt,Nt=ot+ht,Hn=ot-ht,Ut=vr+Nt,$r=vr-Nt,Qr=Zr+$t,Wt=Zr-$t;Ne[qe]=Ut+Qr,Ne[qe+4]=Ut-Qr;var ct=.707106781*(Wt+$r);Ne[qe+2]=$r+ct,Ne[qe+6]=$r-ct;var Tt=.382683433*((Ut=Hn+hr)-(Wt=Et+jt)),as=.5411961*Ut+Tt,br=1.306562965*Wt+Tt,Sn=.707106781*(Qr=hr+Et),jn=jt+Sn,et=jt-Sn;Ne[qe+5]=et+as,Ne[qe+3]=et-as,Ne[qe+1]=jn+br,Ne[qe+7]=jn-br,qe+=8}for(qe=0,Qe=0;Qe<8;++Qe){$e=Ne[qe],Me=Ne[qe+8],Je=Ne[qe+16],ot=Ne[qe+24],ht=Ne[qe+32],bt=Ne[qe+40],At=Ne[qe+48];var An=$e+(Ft=Ne[qe+56]),Or=$e-Ft,Fr=Me+At,ir=Me-At,rr=Je+bt,zr=Je-bt,Rs=ot+ht,Vn=ot-ht,en=An+Rs,gn=An-Rs,kn=Fr+rr,Ur=Fr-rr;Ne[qe]=en+kn,Ne[qe+32]=en-kn;var tn=.707106781*(Ur+gn);Ne[qe+16]=gn+tn,Ne[qe+48]=gn-tn;var Ln=.382683433*((en=Vn+zr)-(Ur=ir+Or)),bs=.5411961*en+Ln,Es=1.306562965*Ur+Ln,Is=.707106781*(kn=zr+ir),me=Or+Is,Te=Or-Is;Ne[qe+40]=Te+bs,Ne[qe+24]=Te-bs,Ne[qe+8]=me+Es,Ne[qe+56]=me-Es,qe++}for(Qe=0;Qe<64;++Qe)_t=Ne[Qe]*Ie[Qe],f[Qe]=_t>0?_t+.5|0:_t-.5|0;return f}(P,B),Ae=0;Ae<64;++Ae)y[R[Ae]]=ge[Ae];var Fe=y[0]-H;H=y[0],Fe==0?W(Z[0]):(W(Z[m[le=32767+Fe]]),W(v[le]));for(var Ee=63;Ee>0&&y[Ee]==0;)Ee--;if(Ee==0)return W(ue),H;for(var rt,be=1;be<=Ee;){for(var ee=be;y[be]==0&&be<=Ee;)++be;var ut=be-ee;if(ut>=16){rt=ut>>4;for(var Ge=1;Ge<=rt;++Ge)W(he);ut&=15}le=32767+y[be],W(Q[(ut<<4)+m[le]]),W(v[le]),be++}return Ee!=63&&W(ue),H}function pe(P){P=Math.min(Math.max(P,1),100),i!=P&&(function(B){for(var H=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Z=0;Z<64;Z++){var Q=a((H[Z]*B+50)/100);Q=Math.min(Math.max(Q,1),255),l[R[Z]]=Q}for(var le=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],ue=0;ue<64;ue++){var he=a((le[ue]*B+50)/100);he=Math.min(Math.max(he,1),255),c[R[ue]]=he}for(var ge=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ae=0,Fe=0;Fe<8;Fe++)for(var Ee=0;Ee<8;Ee++)d[Ae]=1/(l[R[Ae]]*ge[Fe]*ge[Ee]*8),g[Ae]=1/(c[R[Ae]]*ge[Fe]*ge[Ee]*8),Ae++}(P<50?Math.floor(5e3/P):Math.floor(200-2*P)),i=P)}this.encode=function(P,B){B&&pe(B),_=new Array,j=0,x=7,J(65496),J(65504),J(16),Y(74),Y(70),Y(73),Y(70),Y(0),Y(1),Y(1),Y(0),J(1),J(1),Y(0),Y(0),function(){J(65499),J(132),Y(0);for(var Me=0;Me<64;Me++)Y(l[Me]);Y(1);for(var Je=0;Je<64;Je++)Y(c[Je])}(),function(Me,Je){J(65472),J(17),Y(8),J(Je),J(Me),Y(3),Y(1),Y(17),Y(0),Y(2),Y(17),Y(1),Y(3),Y(17),Y(1)}(P.width,P.height),function(){J(65476),J(418),Y(0);for(var Me=0;Me<16;Me++)Y(E[Me+1]);for(var Je=0;Je<=11;Je++)Y(V[Je]);Y(16);for(var ot=0;ot<16;ot++)Y(K[ot+1]);for(var ht=0;ht<=161;ht++)Y(L[ht]);Y(1);for(var bt=0;bt<16;bt++)Y(A[bt+1]);for(var At=0;At<=11;At++)Y(U[At]);Y(17);for(var Ft=0;Ft<16;Ft++)Y(z[Ft+1]);for(var Qe=0;Qe<=161;Qe++)Y(te[Qe])}(),J(65498),J(12),Y(3),Y(1),Y(0),Y(2),Y(17),Y(3),Y(17),Y(0),Y(63),Y(0);var H=0,Z=0,Q=0;j=0,x=7,this.encode.displayName="_encode_";for(var le,ue,he,ge,Ae,Fe,Ee,rt,be,ee=P.data,ut=P.width,Ge=P.height,Ne=4*ut,Ie=0;Ie<Ge;){for(le=0;le<Ne;){for(Ae=Ne*Ie+le,Ee=-1,rt=0,be=0;be<64;be++)Fe=Ae+(rt=be>>3)*Ne+(Ee=4*(7&be)),Ie+rt>=Ge&&(Fe-=Ne*(Ie+1+rt-Ge)),le+Ee>=Ne&&(Fe-=le+Ee-Ne+4),ue=ee[Fe++],he=ee[Fe++],ge=ee[Fe++],k[be]=(M[ue]+M[he+256>>0]+M[ge+512>>0]>>16)-128,S[be]=(M[ue+768>>0]+M[he+1024>>0]+M[ge+1280>>0]>>16)-128,N[be]=(M[ue+1280>>0]+M[he+1536>>0]+M[ge+1792>>0]>>16)-128;H=ie(k,d,H,e,r),Z=ie(S,g,Z,t,s),Q=ie(N,g,Q,t,s),le+=32}Ie+=8}if(x>=0){var $e=[];$e[1]=x+1,$e[0]=(1<<x+1)-1,W($e)}return J(65497),new Uint8Array(_)},n=n||50,function(){for(var P=String.fromCharCode,B=0;B<256;B++)D[B]=P(B)}(),e=$(E,V),t=$(A,U),r=$(K,L),s=$(z,te),function(){for(var P=1,B=2,H=1;H<=15;H++){for(var Z=P;Z<B;Z++)m[32767+Z]=H,v[32767+Z]=[],v[32767+Z][1]=H,v[32767+Z][0]=Z;for(var Q=-(B-1);Q<=-P;Q++)m[32767+Q]=H,v[32767+Q]=[],v[32767+Q][1]=H,v[32767+Q][0]=B-1+Q;P<<=1,B<<=1}}(),function(){for(var P=0;P<256;P++)M[P]=19595*P,M[P+256>>0]=38470*P,M[P+512>>0]=7471*P+32768,M[P+768>>0]=-11059*P,M[P+1024>>0]=-21709*P,M[P+1280>>0]=32768*P+8421375,M[P+1536>>0]=-27439*P,M[P+1792>>0]=-5329*P}(),pe(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Qn(n,e){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function Cd(n){function e(E){if(!E)throw Error("assert :P")}function t(E,V,K){for(var L=0;4>L;L++)if(E[V+L]!=K.charCodeAt(L))return!0;return!1}function r(E,V,K,L,A){for(var U=0;U<A;U++)E[V+U]=K[L+U]}function s(E,V,K,L){for(var A=0;A<L;A++)E[V+A]=K}function i(E){return new Int32Array(E)}function a(E,V){for(var K=[],L=0;L<E;L++)K.push(new V);return K}function l(E,V){var K=[];return function L(A,U,z){for(var te=z[U],$=0;$<te&&(A.push(z.length>U+1?[]:new V),!(z.length<U+1));$++)L(A[$],U+1,z)}(K,0,E),K}var c=function(){var E=this;function V(o,u){for(var b=1<<u-1>>>0;o&b;)b>>>=1;return b?(o&b-1)+b:o}function K(o,u,b,w,C){e(!(w%b));do o[u+(w-=b)]=C;while(0<w)}function L(o,u,b,w,C){if(e(2328>=C),512>=C)var I=i(512);else if((I=i(C))==null)return 0;return function(O,F,q,G,ne,de){var fe,oe,je=F,ve=1<<q,se=i(16),ae=i(16);for(e(ne!=0),e(G!=null),e(O!=null),e(0<q),oe=0;oe<ne;++oe){if(15<G[oe])return 0;++se[G[oe]]}if(se[0]==ne)return 0;for(ae[1]=0,fe=1;15>fe;++fe){if(se[fe]>1<<fe)return 0;ae[fe+1]=ae[fe]+se[fe]}for(oe=0;oe<ne;++oe)fe=G[oe],0<G[oe]&&(de[ae[fe]++]=oe);if(ae[15]==1)return(G=new A).g=0,G.value=de[0],K(O,je,1,ve,G),ve;var we,ke=-1,Se=ve-1,He=0,Be=1,nt=1,Ue=1<<q;for(oe=0,fe=1,ne=2;fe<=q;++fe,ne<<=1){if(Be+=nt<<=1,0>(nt-=se[fe]))return 0;for(;0<se[fe];--se[fe])(G=new A).g=fe,G.value=de[oe++],K(O,je+He,ne,Ue,G),He=V(He,fe)}for(fe=q+1,ne=2;15>=fe;++fe,ne<<=1){if(Be+=nt<<=1,0>(nt-=se[fe]))return 0;for(;0<se[fe];--se[fe]){if(G=new A,(He&Se)!=ke){for(je+=Ue,we=1<<(ke=fe)-q;15>ke&&!(0>=(we-=se[ke]));)++ke,we<<=1;ve+=Ue=1<<(we=ke-q),O[F+(ke=He&Se)].g=we+q,O[F+ke].value=je-F-ke}G.g=fe-q,G.value=de[oe++],K(O,je+(He>>q),ne,Ue,G),He=V(He,fe)}}return Be!=2*ae[15]-1?0:ve}(o,u,b,w,C,I)}function A(){this.value=this.g=0}function U(){this.value=this.g=0}function z(){this.G=a(5,A),this.H=i(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Mr,U)}function te(o,u,b,w){e(o!=null),e(u!=null),e(2147483648>w),o.Ca=254,o.I=0,o.b=-8,o.Ka=0,o.oa=u,o.pa=b,o.Jd=u,o.Yc=b+w,o.Zc=4<=w?b+w-4+1:b,le(o)}function $(o,u){for(var b=0;0<u--;)b|=he(o,128)<<u;return b}function W(o,u){var b=$(o,u);return ue(o)?-b:b}function Y(o,u,b,w){var C,I=0;for(e(o!=null),e(u!=null),e(4294967288>w),o.Sb=w,o.Ra=0,o.u=0,o.h=0,4<w&&(w=4),C=0;C<w;++C)I+=u[b+C]<<8*C;o.Ra=I,o.bb=w,o.oa=u,o.pa=b}function J(o){for(;8<=o.u&&o.bb<o.Sb;)o.Ra>>>=8,o.Ra+=o.oa[o.pa+o.bb]<<Vi-8>>>0,++o.bb,o.u-=8;H(o)&&(o.h=1,o.u=0)}function ie(o,u){if(e(0<=u),!o.h&&u<=Hi){var b=B(o)&Wi[u];return o.u+=u,J(o),b}return o.h=1,o.u=0}function pe(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function P(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function B(o){return o.Ra>>>(o.u&Vi-1)>>>0}function H(o){return e(o.bb<=o.Sb),o.h||o.bb==o.Sb&&o.u>Vi}function Z(o,u){o.u=u,o.h=H(o)}function Q(o){o.u>=za&&(e(o.u>=za),J(o))}function le(o){e(o!=null&&o.oa!=null),o.pa<o.Zc?(o.I=(o.oa[o.pa++]|o.I<<8)>>>0,o.b+=8):(e(o!=null&&o.oa!=null),o.pa<o.Yc?(o.b+=8,o.I=o.oa[o.pa++]|o.I<<8):o.Ka?o.b=0:(o.I<<=8,o.b+=8,o.Ka=1))}function ue(o){return $(o,1)}function he(o,u){var b=o.Ca;0>o.b&&le(o);var w=o.b,C=b*u>>>8,I=(o.I>>>w>C)+0;for(I?(b-=C,o.I-=C+1<<w>>>0):b=C+1,w=b,C=0;256<=w;)C+=8,w>>=8;return w=7^C+mn[w],o.b-=w,o.Ca=(b<<w)-1,I}function ge(o,u,b){o[u+0]=b>>24&255,o[u+1]=b>>16&255,o[u+2]=b>>8&255,o[u+3]=b>>0&255}function Ae(o,u){return o[u+0]<<0|o[u+1]<<8}function Fe(o,u){return Ae(o,u)|o[u+2]<<16}function Ee(o,u){return Ae(o,u)|Ae(o,u+2)<<16}function rt(o,u){var b=1<<u;return e(o!=null),e(0<u),o.X=i(b),o.X==null?0:(o.Mb=32-u,o.Xa=u,1)}function be(o,u){e(o!=null),e(u!=null),e(o.Xa==u.Xa),r(u.X,0,o.X,0,1<<u.Xa)}function ee(){this.X=[],this.Xa=this.Mb=0}function ut(o,u,b,w){e(b!=null),e(w!=null);var C=b[0],I=w[0];return C==0&&(C=(o*I+u/2)/u),I==0&&(I=(u*C+o/2)/o),0>=C||0>=I?0:(b[0]=C,w[0]=I,1)}function Ge(o,u){return o+(1<<u)-1>>>u}function Ne(o,u){return((4278255360&o)+(4278255360&u)>>>0&4278255360)+((16711935&o)+(16711935&u)>>>0&16711935)>>>0}function Ie(o,u){E[u]=function(b,w,C,I,O,F,q){var G;for(G=0;G<O;++G){var ne=E[o](F[q+G-1],C,I+G);F[q+G]=Ne(b[w+G],ne)}}}function $e(){this.ud=this.hd=this.jd=0}function Me(o,u){return((4278124286&(o^u))>>>1)+(o&u)>>>0}function Je(o){return 0<=o&&256>o?o:0>o?0:255<o?255:void 0}function ot(o,u){return Je(o+(o-u+.5>>1))}function ht(o,u,b){return Math.abs(u-b)-Math.abs(o-b)}function bt(o,u,b,w,C,I,O){for(w=I[O-1],b=0;b<C;++b)I[O+b]=w=Ne(o[u+b],w)}function At(o,u,b,w,C){var I;for(I=0;I<b;++I){var O=o[u+I],F=O>>8&255,q=16711935&(q=(q=16711935&O)+((F<<16)+F));w[C+I]=(4278255360&O)+q>>>0}}function Ft(o,u){u.jd=o>>0&255,u.hd=o>>8&255,u.ud=o>>16&255}function Qe(o,u,b,w,C,I){var O;for(O=0;O<w;++O){var F=u[b+O],q=F>>>8,G=F,ne=255&(ne=(ne=F>>>16)+((o.jd<<24>>24)*(q<<24>>24)>>>5));G=255&(G=(G=G+((o.hd<<24>>24)*(q<<24>>24)>>>5))+((o.ud<<24>>24)*(ne<<24>>24)>>>5)),C[I+O]=(4278255360&F)+(ne<<16)+G}}function _t(o,u,b,w,C){E[u]=function(I,O,F,q,G,ne,de,fe,oe){for(q=de;q<fe;++q)for(de=0;de<oe;++de)G[ne++]=C(F[w(I[O++])])},E[o]=function(I,O,F,q,G,ne,de){var fe=8>>I.b,oe=I.Ea,je=I.K[0],ve=I.w;if(8>fe)for(I=(1<<I.b)-1,ve=(1<<fe)-1;O<F;++O){var se,ae=0;for(se=0;se<oe;++se)se&I||(ae=w(q[G++])),ne[de++]=C(je[ae&ve]),ae>>=fe}else E["VP8LMapColor"+b](q,G,je,ve,ne,de,O,F,oe)}}function qe(o,u,b,w,C){for(b=u+b;u<b;){var I=o[u++];w[C++]=I>>16&255,w[C++]=I>>8&255,w[C++]=I>>0&255}}function vr(o,u,b,w,C){for(b=u+b;u<b;){var I=o[u++];w[C++]=I>>16&255,w[C++]=I>>8&255,w[C++]=I>>0&255,w[C++]=I>>24&255}}function jt(o,u,b,w,C){for(b=u+b;u<b;){var I=(O=o[u++])>>16&240|O>>12&15,O=O>>0&240|O>>28&15;w[C++]=I,w[C++]=O}}function Zr(o,u,b,w,C){for(b=u+b;u<b;){var I=(O=o[u++])>>16&248|O>>13&7,O=O>>5&224|O>>3&31;w[C++]=I,w[C++]=O}}function Et(o,u,b,w,C){for(b=u+b;u<b;){var I=o[u++];w[C++]=I>>0&255,w[C++]=I>>8&255,w[C++]=I>>16&255}}function $t(o,u,b,w,C,I){if(I==0)for(b=u+b;u<b;)ge(w,((I=o[u++])[0]>>24|I[1]>>8&65280|I[2]<<8&16711680|I[3]<<24)>>>0),C+=32;else r(w,C,o,u,b)}function hr(o,u){E[u][0]=E[o+"0"],E[u][1]=E[o+"1"],E[u][2]=E[o+"2"],E[u][3]=E[o+"3"],E[u][4]=E[o+"4"],E[u][5]=E[o+"5"],E[u][6]=E[o+"6"],E[u][7]=E[o+"7"],E[u][8]=E[o+"8"],E[u][9]=E[o+"9"],E[u][10]=E[o+"10"],E[u][11]=E[o+"11"],E[u][12]=E[o+"12"],E[u][13]=E[o+"13"],E[u][14]=E[o+"0"],E[u][15]=E[o+"0"]}function Nt(o){return o==vc||o==bc||o==Zo||o==yc}function Hn(){this.eb=[],this.size=this.A=this.fb=0}function Ut(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function $r(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Hn,this.f.kb=new Ut,this.sd=null}function Qr(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function Wt(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function ct(o){return alert("todo:WebPSamplerProcessPlane"),o.T}function Tt(o,u){var b=o.T,w=u.ba.f.RGBA,C=w.eb,I=w.fb+o.ka*w.A,O=$n[u.ba.S],F=o.y,q=o.O,G=o.f,ne=o.N,de=o.ea,fe=o.W,oe=u.cc,je=u.dc,ve=u.Mc,se=u.Nc,ae=o.ka,we=o.ka+o.T,ke=o.U,Se=ke+1>>1;for(ae==0?O(F,q,null,null,G,ne,de,fe,G,ne,de,fe,C,I,null,null,ke):(O(u.ec,u.fc,F,q,oe,je,ve,se,G,ne,de,fe,C,I-w.A,C,I,ke),++b);ae+2<we;ae+=2)oe=G,je=ne,ve=de,se=fe,ne+=o.Rc,fe+=o.Rc,I+=2*w.A,O(F,(q+=2*o.fa)-o.fa,F,q,oe,je,ve,se,G,ne,de,fe,C,I-w.A,C,I,ke);return q+=o.fa,o.j+we<o.o?(r(u.ec,u.fc,F,q,ke),r(u.cc,u.dc,G,ne,Se),r(u.Mc,u.Nc,de,fe,Se),b--):1&we||O(F,q,null,null,G,ne,de,fe,G,ne,de,fe,C,I+w.A,null,null,ke),b}function as(o,u,b){var w=o.F,C=[o.J];if(w!=null){var I=o.U,O=u.ba.S,F=O==Xo||O==Zo;u=u.ba.f.RGBA;var q=[0],G=o.ka;q[0]=o.T,o.Kb&&(G==0?--q[0]:(--G,C[0]-=o.width),o.j+o.ka+o.T==o.o&&(q[0]=o.o-o.j-G));var ne=u.eb;G=u.fb+G*u.A,o=Yt(w,C[0],o.width,I,q,ne,G+(F?0:3),u.A),e(b==q),o&&Nt(O)&&Bn(ne,G,F,I,q,u.A)}return 0}function br(o){var u=o.ma,b=u.ba.S,w=11>b,C=b==Jo||b==Yo||b==Xo||b==mc||b==12||Nt(b);if(u.memory=null,u.Ib=null,u.Jb=null,u.Nd=null,!qa(u.Oa,o,C?11:12))return 0;if(C&&Nt(b)&&Pe(),o.da)alert("todo:use_scaling");else{if(w){if(u.Ib=ct,o.Kb){if(b=o.U+1>>1,u.memory=i(o.U+2*b),u.memory==null)return 0;u.ec=u.memory,u.fc=0,u.cc=u.ec,u.dc=u.fc+o.U,u.Mc=u.cc,u.Nc=u.dc+b,u.Ib=Tt,Pe()}}else alert("todo:EmitYUV");C&&(u.Jb=as,w&&ce())}if(w&&!gh){for(o=0;256>o;++o)Vp[o]=89858*(o-128)+el>>Qo,Jp[o]=-22014*(o-128)+el,Kp[o]=-45773*(o-128),Gp[o]=113618*(o-128)+el>>Qo;for(o=Ja;o<_c;++o)u=76283*(o-16)+el>>Qo,Yp[o-Ja]=Nn(u,255),Xp[o-Ja]=Nn(u+8>>4,15);gh=1}return 1}function Sn(o){var u=o.ma,b=o.U,w=o.T;return e(!(1&o.ka)),0>=b||0>=w?0:(b=u.Ib(o,u),u.Jb!=null&&u.Jb(o,u,b),u.Dc+=b,1)}function jn(o){o.ma.memory=null}function et(o,u,b,w){return ie(o,8)!=47?0:(u[0]=ie(o,14)+1,b[0]=ie(o,14)+1,w[0]=ie(o,1),ie(o,3)!=0?0:!o.h)}function An(o,u){if(4>o)return o+1;var b=o-2>>1;return(2+(1&o)<<b)+ie(u,b)+1}function Or(o,u){return 120<u?u-120:1<=(b=((b=Rp[u-1])>>4)*o+(8-(15&b)))?b:1;var b}function Fr(o,u,b){var w=B(b),C=o[u+=255&w].g-8;return 0<C&&(Z(b,b.u+8),w=B(b),u+=o[u].value,u+=w&(1<<C)-1),Z(b,b.u+o[u].g),o[u].value}function ir(o,u,b){return b.g+=o.g,b.value+=o.value<<u>>>0,e(8>=b.g),o.g}function rr(o,u,b){var w=o.xc;return e((u=w==0?0:o.vc[o.md*(b>>w)+(u>>w)])<o.Wb),o.Ya[u]}function zr(o,u,b,w){var C=o.ab,I=o.c*u,O=o.C;u=O+u;var F=b,q=w;for(w=o.Ta,b=o.Ua;0<C--;){var G=o.gc[C],ne=O,de=u,fe=F,oe=q,je=(q=w,F=b,G.Ea);switch(e(ne<de),e(de<=G.nc),G.hc){case 2:zo(fe,oe,(de-ne)*je,q,F);break;case 0:var ve=ne,se=de,ae=q,we=F,ke=(Ue=G).Ea;ve==0&&(pc(fe,oe,null,null,1,ae,we),bt(fe,oe+1,0,0,ke-1,ae,we+1),oe+=ke,we+=ke,++ve);for(var Se=1<<Ue.b,He=Se-1,Be=Ge(ke,Ue.b),nt=Ue.K,Ue=Ue.w+(ve>>Ue.b)*Be;ve<se;){var It=nt,Mt=Ue,Rt=1;for(Ua(fe,oe,ae,we-ke,1,ae,we);Rt<ke;){var Lt=(Rt&~He)+Se;Lt>ke&&(Lt=ke),(0,Ms[It[Mt++]>>8&15])(fe,oe+ +Rt,ae,we+Rt-ke,Lt-Rt,ae,we+Rt),Rt=Lt}oe+=ke,we+=ke,++ve&He||(Ue+=Be)}de!=G.nc&&r(q,F-je,q,F+(de-ne-1)*je,je);break;case 1:for(je=fe,se=oe,ke=(fe=G.Ea)-(we=fe&~(ae=(oe=1<<G.b)-1)),ve=Ge(fe,G.b),Se=G.K,G=G.w+(ne>>G.b)*ve;ne<de;){for(He=Se,Be=G,nt=new $e,Ue=se+we,It=se+fe;se<Ue;)Ft(He[Be++],nt),pi(nt,je,se,oe,q,F),se+=oe,F+=oe;se<It&&(Ft(He[Be++],nt),pi(nt,je,se,ke,q,F),se+=ke,F+=ke),++ne&ae||(G+=ve)}break;case 3:if(fe==q&&oe==F&&0<G.b){for(se=q,fe=je=F+(de-ne)*je-(we=(de-ne)*Ge(G.Ea,G.b)),oe=q,ae=F,ve=[],we=(ke=we)-1;0<=we;--we)ve[we]=oe[ae+we];for(we=ke-1;0<=we;--we)se[fe+we]=ve[we];Fn(G,ne,de,q,je,q,F)}else Fn(G,ne,de,fe,oe,q,F)}F=w,q=b}q!=b&&r(w,b,F,q,I)}function Rs(o,u){var b=o.V,w=o.Ba+o.c*o.C,C=u-o.C;if(e(u<=o.l.o),e(16>=C),0<C){var I=o.l,O=o.Ta,F=o.Ua,q=I.width;if(zr(o,C,b,w),C=F=[F],e((b=o.C)<(w=u)),e(I.v<I.va),w>I.o&&(w=I.o),b<I.j){var G=I.j-b;b=I.j,C[0]+=G*q}if(b>=w?b=0:(C[0]+=4*I.v,I.ka=b-I.j,I.U=I.va-I.v,I.T=w-b,b=1),b){if(F=F[0],11>(b=o.ca).S){var ne=b.f.RGBA,de=(w=b.S,C=I.U,I=I.T,G=ne.eb,ne.A),fe=I;for(ne=ne.fb+o.Ma*ne.A;0<fe--;){var oe=O,je=F,ve=C,se=G,ae=ne;switch(w){case Ko:vn(oe,je,ve,se,ae);break;case Jo:an(oe,je,ve,se,ae);break;case vc:an(oe,je,ve,se,ae),Bn(se,ae,0,ve,1,0);break;case ah:Ss(oe,je,ve,se,ae);break;case Yo:$t(oe,je,ve,se,ae,1);break;case bc:$t(oe,je,ve,se,ae,1),Bn(se,ae,0,ve,1,0);break;case Xo:$t(oe,je,ve,se,ae,0);break;case Zo:$t(oe,je,ve,se,ae,0),Bn(se,ae,1,ve,1,0);break;case mc:Bs(oe,je,ve,se,ae);break;case yc:Bs(oe,je,ve,se,ae),Jt(se,ae,ve,1,0);break;case oh:_s(oe,je,ve,se,ae);break;default:e(0)}F+=q,ne+=de}o.Ma+=I}else alert("todo:EmitRescaledRowsYUVA");e(o.Ma<=b.height)}}o.C=u,e(o.C<=o.i)}function Vn(o){var u;if(0<o.ua)return 0;for(u=0;u<o.Wb;++u){var b=o.Ya[u].G,w=o.Ya[u].H;if(0<b[1][w[1]+0].g||0<b[2][w[2]+0].g||0<b[3][w[3]+0].g)return 0}return 1}function en(o,u,b,w,C,I){if(o.Z!=0){var O=o.qd,F=o.rd;for(e(Us[o.Z]!=null);u<b;++u)Us[o.Z](O,F,w,C,w,C,I),O=w,F=C,C+=I;o.qd=O,o.rd=F}}function gn(o,u){var b=o.l.ma,w=b.Z==0||b.Z==1?o.l.j:o.C;if(w=o.C<w?w:o.C,e(u<=o.l.o),u>w){var C=o.l.width,I=b.ca,O=b.tb+C*w,F=o.V,q=o.Ba+o.c*w,G=o.gc;e(o.ab==1),e(G[0].hc==3),Uo(G[0],w,u,F,q,I,O),en(b,w,u,I,O,C)}o.C=o.Ma=u}function kn(o,u,b,w,C,I,O){var F=o.$/w,q=o.$%w,G=o.m,ne=o.s,de=b+o.$,fe=de;C=b+w*C;var oe=b+w*I,je=280+ne.ua,ve=o.Pb?F:16777216,se=0<ne.ua?ne.Wa:null,ae=ne.wc,we=de<oe?rr(ne,q,F):null;e(o.C<I),e(oe<=C);var ke=!1;e:for(;;){for(;ke||de<oe;){var Se=0;if(F>=ve){var He=de-b;e((ve=o).Pb),ve.wd=ve.m,ve.xd=He,0<ve.s.ua&&be(ve.s.Wa,ve.s.vb),ve=F+Ip}if(q&ae||(we=rr(ne,q,F)),e(we!=null),we.Qb&&(u[de]=we.qb,ke=!0),!ke)if(Q(G),we.jc){Se=G,He=u;var Be=de,nt=we.pd[B(Se)&Mr-1];e(we.jc),256>nt.g?(Z(Se,Se.u+nt.g),He[Be]=nt.value,Se=0):(Z(Se,Se.u+nt.g-256),e(256<=nt.value),Se=nt.value),Se==0&&(ke=!0)}else Se=Fr(we.G[0],we.H[0],G);if(G.h)break;if(ke||256>Se){if(!ke)if(we.nd)u[de]=(we.qb|Se<<8)>>>0;else{if(Q(G),ke=Fr(we.G[1],we.H[1],G),Q(G),He=Fr(we.G[2],we.H[2],G),Be=Fr(we.G[3],we.H[3],G),G.h)break;u[de]=(Be<<24|ke<<16|Se<<8|He)>>>0}if(ke=!1,++de,++q>=w&&(q=0,++F,O!=null&&F<=I&&!(F%16)&&O(o,F),se!=null))for(;fe<de;)Se=u[fe++],se.X[(506832829*Se&4294967295)>>>se.Mb]=Se}else if(280>Se){if(Se=An(Se-256,G),He=Fr(we.G[4],we.H[4],G),Q(G),He=Or(w,He=An(He,G)),G.h)break;if(de-b<He||C-de<Se)break e;for(Be=0;Be<Se;++Be)u[de+Be]=u[de+Be-He];for(de+=Se,q+=Se;q>=w;)q-=w,++F,O!=null&&F<=I&&!(F%16)&&O(o,F);if(e(de<=C),q&ae&&(we=rr(ne,q,F)),se!=null)for(;fe<de;)Se=u[fe++],se.X[(506832829*Se&4294967295)>>>se.Mb]=Se}else{if(!(Se<je))break e;for(ke=Se-280,e(se!=null);fe<de;)Se=u[fe++],se.X[(506832829*Se&4294967295)>>>se.Mb]=Se;Se=de,e(!(ke>>>(He=se).Xa)),u[Se]=He.X[ke],ke=!0}ke||e(G.h==H(G))}if(o.Pb&&G.h&&de<C)e(o.m.h),o.a=5,o.m=o.wd,o.$=o.xd,0<o.s.ua&&be(o.s.vb,o.s.Wa);else{if(G.h)break e;O?.(o,F>I?I:F),o.a=0,o.$=de-b}return 1}return o.a=3,0}function Ur(o){e(o!=null),o.vc=null,o.yc=null,o.Ya=null;var u=o.Wa;u!=null&&(u.X=null),o.vb=null,e(o!=null)}function tn(){var o=new fc;return o==null?null:(o.a=0,o.xb=uh,hr("Predictor","VP8LPredictors"),hr("Predictor","VP8LPredictors_C"),hr("PredictorAdd","VP8LPredictorsAdd"),hr("PredictorAdd","VP8LPredictorsAdd_C"),zo=At,pi=Qe,vn=qe,an=vr,Bs=jt,_s=Zr,Ss=Et,E.VP8LMapColor32b=Gi,E.VP8LMapColor8b=Wo,o)}function Ln(o,u,b,w,C){var I=1,O=[o],F=[u],q=w.m,G=w.s,ne=null,de=0;e:for(;;){if(b)for(;I&&ie(q,1);){var fe=O,oe=F,je=w,ve=1,se=je.m,ae=je.gc[je.ab],we=ie(se,2);if(je.Oc&1<<we)I=0;else{switch(je.Oc|=1<<we,ae.hc=we,ae.Ea=fe[0],ae.nc=oe[0],ae.K=[null],++je.ab,e(4>=je.ab),we){case 0:case 1:ae.b=ie(se,3)+2,ve=Ln(Ge(ae.Ea,ae.b),Ge(ae.nc,ae.b),0,je,ae.K),ae.K=ae.K[0];break;case 3:var ke,Se=ie(se,8)+1,He=16<Se?0:4<Se?1:2<Se?2:3;if(fe[0]=Ge(ae.Ea,He),ae.b=He,ke=ve=Ln(Se,1,0,je,ae.K)){var Be,nt=Se,Ue=ae,It=1<<(8>>Ue.b),Mt=i(It);if(Mt==null)ke=0;else{var Rt=Ue.K[0],Lt=Ue.w;for(Mt[0]=Ue.K[0][0],Be=1;Be<1*nt;++Be)Mt[Be]=Ne(Rt[Lt+Be],Mt[Be-1]);for(;Be<4*It;++Be)Mt[Be]=0;Ue.K[0]=null,Ue.K[0]=Mt,ke=1}}ve=ke;break;case 2:break;default:e(0)}I=ve}}if(O=O[0],F=F[0],I&&ie(q,1)&&!(I=1<=(de=ie(q,4))&&11>=de)){w.a=3;break e}var Ht;if(Ht=I)t:{var zt,yt,wr,bn=w,_r=O,yn=F,Bt=de,Tn=b,Rn=bn.m,Rr=bn.s,Br=[null],ln=1,zn=0,us=Ep[Bt];r:for(;;){if(Tn&&ie(Rn,1)){var Er=ie(Rn,3)+2,Ls=Ge(_r,Er),yi=Ge(yn,Er),Zi=Ls*yi;if(!Ln(Ls,yi,0,bn,Br))break r;for(Br=Br[0],Rr.xc=Er,zt=0;zt<Zi;++zt){var Ws=Br[zt]>>8&65535;Br[zt]=Ws,Ws>=ln&&(ln=Ws+1)}}if(Rn.h)break r;for(yt=0;5>yt;++yt){var or=lh[yt];!yt&&0<Bt&&(or+=1<<Bt),zn<or&&(zn=or)}var Sc=a(ln*us,A),bh=ln,yh=a(bh,z);if(yh==null)var rl=null;else e(65536>=bh),rl=yh;var Ya=i(zn);if(rl==null||Ya==null||Sc==null){bn.a=1;break r}var nl=Sc;for(zt=wr=0;zt<ln;++zt){var Xn=rl[zt],Qi=Xn.G,ea=Xn.H,xh=0,sl=1,wh=0;for(yt=0;5>yt;++yt){or=lh[yt],Qi[yt]=nl,ea[yt]=wr,!yt&&0<Bt&&(or+=1<<Bt);s:{var il,jc=or,al=bn,Xa=Ya,e1=nl,t1=wr,Ac=0,Hs=al.m,r1=ie(Hs,1);if(s(Xa,0,0,jc),r1){var n1=ie(Hs,1)+1,s1=ie(Hs,1),_h=ie(Hs,s1==0?1:8);Xa[_h]=1,n1==2&&(Xa[_h=ie(Hs,8)]=1);var ol=1}else{var Sh=i(19),jh=ie(Hs,4)+4;if(19<jh){al.a=3;var ll=0;break s}for(il=0;il<jh;++il)Sh[Tp[il]]=ie(Hs,3);var kc=void 0,Za=void 0,Ah=al,i1=Sh,cl=jc,kh=Xa,Lc=0,Vs=Ah.m,Lh=8,Ph=a(128,A);n:for(;L(Ph,0,7,i1,19);){if(ie(Vs,1)){var a1=2+2*ie(Vs,3);if((kc=2+ie(Vs,a1))>cl)break n}else kc=cl;for(Za=0;Za<cl&&kc--;){Q(Vs);var Nh=Ph[0+(127&B(Vs))];Z(Vs,Vs.u+Nh.g);var ta=Nh.value;if(16>ta)kh[Za++]=ta,ta!=0&&(Lh=ta);else{var o1=ta==16,Ch=ta-16,l1=Np[Ch],Th=ie(Vs,Pp[Ch])+l1;if(Za+Th>cl)break n;for(var c1=o1?Lh:0;0<Th--;)kh[Za++]=c1}}Lc=1;break n}Lc||(Ah.a=3),ol=Lc}(ol=ol&&!Hs.h)&&(Ac=L(e1,t1,8,Xa,jc)),ol&&Ac!=0?ll=Ac:(al.a=3,ll=0)}if(ll==0)break r;if(sl&&Cp[yt]==1&&(sl=nl[wr].g==0),xh+=nl[wr].g,wr+=ll,3>=yt){var Qa,Pc=Ya[0];for(Qa=1;Qa<or;++Qa)Ya[Qa]>Pc&&(Pc=Ya[Qa]);wh+=Pc}}if(Xn.nd=sl,Xn.Qb=0,sl&&(Xn.qb=(Qi[3][ea[3]+0].value<<24|Qi[1][ea[1]+0].value<<16|Qi[2][ea[2]+0].value)>>>0,xh==0&&256>Qi[0][ea[0]+0].value&&(Xn.Qb=1,Xn.qb+=Qi[0][ea[0]+0].value<<8)),Xn.jc=!Xn.Qb&&6>wh,Xn.jc){var ul,Ps=Xn;for(ul=0;ul<Mr;++ul){var Gs=ul,Ks=Ps.pd[Gs],hl=Ps.G[0][Ps.H[0]+Gs];256<=hl.value?(Ks.g=hl.g+256,Ks.value=hl.value):(Ks.g=0,Ks.value=0,Gs>>=ir(hl,8,Ks),Gs>>=ir(Ps.G[1][Ps.H[1]+Gs],16,Ks),Gs>>=ir(Ps.G[2][Ps.H[2]+Gs],0,Ks),ir(Ps.G[3][Ps.H[3]+Gs],24,Ks))}}}Rr.vc=Br,Rr.Wb=ln,Rr.Ya=rl,Rr.yc=Sc,Ht=1;break t}Ht=0}if(!(I=Ht)){w.a=3;break e}if(0<de){if(G.ua=1<<de,!rt(G.Wa,de)){w.a=1,I=0;break e}}else G.ua=0;var Nc=w,Rh=O,u1=F,Cc=Nc.s,Tc=Cc.xc;if(Nc.c=Rh,Nc.i=u1,Cc.md=Ge(Rh,Tc),Cc.wc=Tc==0?-1:(1<<Tc)-1,b){w.xb=$p;break e}if((ne=i(O*F))==null){w.a=1,I=0;break e}I=(I=kn(w,ne,0,O,F,F,null))&&!q.h;break e}return I?(C!=null?C[0]=ne:(e(ne==null),e(b)),w.$=0,b||Ur(G)):Ur(G),I}function bs(o,u){var b=o.c*o.i,w=b+u+16*u;return e(o.c<=u),o.V=i(w),o.V==null?(o.Ta=null,o.Ua=0,o.a=1,0):(o.Ta=o.V,o.Ua=o.Ba+b+u,1)}function Es(o,u){var b=o.C,w=u-b,C=o.V,I=o.Ba+o.c*b;for(e(u<=o.l.o);0<w;){var O=16<w?16:w,F=o.l.ma,q=o.l.width,G=q*O,ne=F.ca,de=F.tb+q*b,fe=o.Ta,oe=o.Ua;zr(o,O,C,I),fr(fe,oe,ne,de,G),en(F,b,b+O,ne,de,q),w-=O,C+=O*o.c,b+=O}e(b==u),o.C=o.Ma=u}function Is(){this.ub=this.yd=this.td=this.Rb=0}function me(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Te(){this.Fb=this.Bb=this.Cb=0,this.Zb=i(4),this.Lb=i(4)}function Re(){this.Yb=function(){var o=[];return function u(b,w,C){for(var I=C[w],O=0;O<I&&(b.push(C.length>w+1?[]:0),!(C.length<w+1));O++)u(b[O],w+1,C)}(o,0,[3,11]),o}()}function ze(){this.jb=i(3),this.Wc=l([4,8],Re),this.Xc=l([4,17],Re)}function Ye(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new i(4),this.od=new i(4)}function Ke(){this.ld=this.La=this.dd=this.tc=0}function Ce(){this.Na=this.la=0}function Oe(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Ze(){this.ad=i(384),this.Za=0,this.Ob=i(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function st(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ke),this.Y=0,this.ya=Array(new Ze),this.aa=0,this.l=new Nr}function Pt(){this.y=i(16),this.f=i(8),this.ea=i(8)}function Dt(){this.cb=this.a=0,this.sc="",this.m=new pe,this.Od=new Is,this.Kc=new me,this.ed=new Ye,this.Qa=new Te,this.Ic=this.$c=this.Aa=0,this.D=new st,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,pe),this.ia=0,this.pb=a(4,Oe),this.Pa=new ze,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Pt),this.Hd=0,this.rb=Array(new Ce),this.sb=0,this.wa=Array(new Ke),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Ze),this.L=this.aa=0,this.gd=l([4,2],Ke),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Nr(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function On(){var o=new Dt;return o!=null&&(o.a=0,o.sc="OK",o.cb=0,o.Xb=0,Ka||(Ka=Cr)),o}function lt(o,u,b){return o.a==0&&(o.a=u,o.sc=b,o.cb=0),0}function er(o,u,b){return 3<=b&&o[u+0]==157&&o[u+1]==1&&o[u+2]==42}function Zt(o,u){if(o==null)return 0;if(o.a=0,o.sc="OK",u==null)return lt(o,2,"null VP8Io passed to VP8GetHeaders()");var b=u.data,w=u.w,C=u.ha;if(4>C)return lt(o,7,"Truncated header.");var I=b[w+0]|b[w+1]<<8|b[w+2]<<16,O=o.Od;if(O.Rb=!(1&I),O.td=I>>1&7,O.yd=I>>4&1,O.ub=I>>5,3<O.td)return lt(o,3,"Incorrect keyframe parameters.");if(!O.yd)return lt(o,4,"Frame not displayable.");w+=3,C-=3;var F=o.Kc;if(O.Rb){if(7>C)return lt(o,7,"cannot parse picture header");if(!er(b,w,C))return lt(o,3,"Bad code word");F.c=16383&(b[w+4]<<8|b[w+3]),F.Td=b[w+4]>>6,F.i=16383&(b[w+6]<<8|b[w+5]),F.Ud=b[w+6]>>6,w+=7,C-=7,o.za=F.c+15>>4,o.Ub=F.i+15>>4,u.width=F.c,u.height=F.i,u.Da=0,u.j=0,u.v=0,u.va=u.width,u.o=u.height,u.da=0,u.ib=u.width,u.hb=u.height,u.U=u.width,u.T=u.height,s((I=o.Pa).jb,0,255,I.jb.length),e((I=o.Qa)!=null),I.Cb=0,I.Bb=0,I.Fb=1,s(I.Zb,0,0,I.Zb.length),s(I.Lb,0,0,I.Lb)}if(O.ub>C)return lt(o,7,"bad partition length");te(I=o.m,b,w,O.ub),w+=O.ub,C-=O.ub,O.Rb&&(F.Ld=ue(I),F.Kd=ue(I)),F=o.Qa;var q,G=o.Pa;if(e(I!=null),e(F!=null),F.Cb=ue(I),F.Cb){if(F.Bb=ue(I),ue(I)){for(F.Fb=ue(I),q=0;4>q;++q)F.Zb[q]=ue(I)?W(I,7):0;for(q=0;4>q;++q)F.Lb[q]=ue(I)?W(I,6):0}if(F.Bb)for(q=0;3>q;++q)G.jb[q]=ue(I)?$(I,8):255}else F.Bb=0;if(I.Ka)return lt(o,3,"cannot parse segment header");if((F=o.ed).zd=ue(I),F.Tb=$(I,6),F.wb=$(I,3),F.Pc=ue(I),F.Pc&&ue(I)){for(G=0;4>G;++G)ue(I)&&(F.vd[G]=W(I,6));for(G=0;4>G;++G)ue(I)&&(F.od[G]=W(I,6))}if(o.L=F.Tb==0?0:F.zd?1:2,I.Ka)return lt(o,3,"cannot parse filter header");var ne=C;if(C=q=w,w=q+ne,F=ne,o.Xb=(1<<$(o.m,2))-1,ne<3*(G=o.Xb))b=7;else{for(q+=3*G,F-=3*G,ne=0;ne<G;++ne){var de=b[C+0]|b[C+1]<<8|b[C+2]<<16;de>F&&(de=F),te(o.Jc[+ne],b,q,de),q+=de,F-=de,C+=3}te(o.Jc[+G],b,q,F),b=q<w?0:5}if(b!=0)return lt(o,b,"cannot parse partitions");for(b=$(q=o.m,7),C=ue(q)?W(q,4):0,w=ue(q)?W(q,4):0,F=ue(q)?W(q,4):0,G=ue(q)?W(q,4):0,q=ue(q)?W(q,4):0,ne=o.Qa,de=0;4>de;++de){if(ne.Cb){var fe=ne.Zb[de];ne.Fb||(fe+=b)}else{if(0<de){o.pb[de]=o.pb[0];continue}fe=b}var oe=o.pb[de];oe.Sc[0]=xc[Nn(fe+C,127)],oe.Sc[1]=wc[Nn(fe+0,127)],oe.Eb[0]=2*xc[Nn(fe+w,127)],oe.Eb[1]=101581*wc[Nn(fe+F,127)]>>16,8>oe.Eb[1]&&(oe.Eb[1]=8),oe.Qc[0]=xc[Nn(fe+G,117)],oe.Qc[1]=wc[Nn(fe+q,127)],oe.lc=fe+q}if(!O.Rb)return lt(o,4,"Not a key frame.");for(ue(I),O=o.Pa,b=0;4>b;++b){for(C=0;8>C;++C)for(w=0;3>w;++w)for(F=0;11>F;++F)G=he(I,Bp[b][C][w][F])?$(I,8):Dp[b][C][w][F],O.Wc[b][C].Yb[w][F]=G;for(C=0;17>C;++C)O.Xc[b][C]=O.Wc[b][qp[C]]}return o.kc=ue(I),o.kc&&(o.Bd=$(I,8)),o.cb=1}function Cr(o,u,b,w,C,I,O){var F=u[C].Yb[b];for(b=0;16>C;++C){if(!he(o,F[b+0]))return C;for(;!he(o,F[b+1]);)if(F=u[++C].Yb[0],b=0,C==16)return 16;var q=u[C+1].Yb;if(he(o,F[b+2])){var G=o,ne=0;if(he(G,(fe=F)[(de=b)+3]))if(he(G,fe[de+6])){for(F=0,de=2*(ne=he(G,fe[de+8]))+(fe=he(G,fe[de+9+ne])),ne=0,fe=Op[de];fe[F];++F)ne+=ne+he(G,fe[F]);ne+=3+(8<<de)}else he(G,fe[de+7])?(ne=7+2*he(G,165),ne+=he(G,145)):ne=5+he(G,159);else ne=he(G,fe[de+4])?3+he(G,fe[de+5]):2;F=q[2]}else ne=1,F=q[1];q=O+Fp[C],0>(G=o).b&&le(G);var de,fe=G.b,oe=(de=G.Ca>>1)-(G.I>>fe)>>31;--G.b,G.Ca+=oe,G.Ca|=1,G.I-=(de+1&oe)<<fe,I[q]=((ne^oe)-oe)*w[(0<C)+0]}return 16}function rn(o){var u=o.rb[o.sb-1];u.la=0,u.Na=0,s(o.zc,0,0,o.zc.length),o.ja=0}function ci(o,u){if(o==null)return 0;if(u==null)return lt(o,2,"NULL VP8Io parameter in VP8Decode().");if(!o.cb&&!Zt(o,u))return 0;if(e(o.cb),u.ac==null||u.ac(u)){u.ob&&(o.L=0);var b=tl[o.L];if(o.L==2?(o.yb=0,o.zb=0):(o.yb=u.v-b>>4,o.zb=u.j-b>>4,0>o.yb&&(o.yb=0),0>o.zb&&(o.zb=0)),o.Va=u.o+15+b>>4,o.Hb=u.va+15+b>>4,o.Hb>o.za&&(o.Hb=o.za),o.Va>o.Ub&&(o.Va=o.Ub),0<o.L){var w=o.ed;for(b=0;4>b;++b){var C;if(o.Qa.Cb){var I=o.Qa.Lb[b];o.Qa.Fb||(I+=w.Tb)}else I=w.Tb;for(C=0;1>=C;++C){var O=o.gd[b][C],F=I;if(w.Pc&&(F+=w.vd[0],C&&(F+=w.od[0])),0<(F=0>F?0:63<F?63:F)){var q=F;0<w.wb&&(q=4<w.wb?q>>2:q>>1)>9-w.wb&&(q=9-w.wb),1>q&&(q=1),O.dd=q,O.tc=2*F+q,O.ld=40<=F?2:15<=F?1:0}else O.tc=0;O.La=C}}}b=0}else lt(o,6,"Frame setup failed"),b=o.a;if(b=b==0){if(b){o.$c=0,0<o.Aa||(o.Ic=Qp);e:{b=o.Ic,w=4*(q=o.za);var G=32*q,ne=q+1,de=0<o.L?q*(0<o.Aa?2:1):0,fe=(o.Aa==2?2:1)*q;if((O=w+832+(C=3*(16*b+tl[o.L])/2*G)+(I=o.Fa!=null&&0<o.Fa.length?o.Kc.c*o.Kc.i:0))!=O)b=0;else{if(O>o.Vb){if(o.Vb=0,o.Ec=i(O),o.Fc=0,o.Ec==null){b=lt(o,1,"no memory during frame initialization.");break e}o.Vb=O}O=o.Ec,F=o.Fc,o.Ac=O,o.Bc=F,F+=w,o.Gd=a(G,Pt),o.Hd=0,o.rb=a(ne+1,Ce),o.sb=1,o.wa=de?a(de,Ke):null,o.Y=0,o.D.Nb=0,o.D.wa=o.wa,o.D.Y=o.Y,0<o.Aa&&(o.D.Y+=q),e(!0),o.oc=O,o.pc=F,F+=832,o.ya=a(fe,Ze),o.aa=0,o.D.ya=o.ya,o.D.aa=o.aa,o.Aa==2&&(o.D.aa+=q),o.R=16*q,o.B=8*q,q=(G=tl[o.L])*o.R,G=G/2*o.B,o.sa=O,o.ta=F+q,o.qa=o.sa,o.ra=o.ta+16*b*o.R+G,o.Ha=o.qa,o.Ia=o.ra+8*b*o.B+G,o.$c=0,F+=C,o.mb=I?O:null,o.nb=I?F:null,e(F+I<=o.Fc+o.Vb),rn(o),s(o.Ac,o.Bc,0,w),b=1}}if(b){if(u.ka=0,u.y=o.sa,u.O=o.ta,u.f=o.qa,u.N=o.ra,u.ea=o.Ha,u.Vd=o.Ia,u.fa=o.R,u.Rc=o.B,u.F=null,u.J=0,!Vo){for(b=-255;255>=b;++b)Ar[255+b]=0>b?-b:b;for(b=-1020;1020>=b;++b)As[1020+b]=-128>b?-128:127<b?127:b;for(b=-112;112>=b;++b)Ga[112+b]=-16>b?-16:15<b?15:b;for(b=-255;510>=b;++b)Xi[255+b]=0>b?0:255<b?255:b;Vo=1}Ki=Dr,js=St,Wa=jr,on=sn,Dn=Pn,dr=pt,Ji=Ta,Ho=di,Ha=dc,gi=Ra,mi=hc,qs=Bi,vi=Ea,Yi=Bo,bi=Mo,$s=ls,Va=ws,Mn=uc,Yn[0]=os,Yn[1]=ys,Yn[2]=sc,Yn[3]=ic,Yn[4]=Eo,Yn[5]=Di,Yn[6]=Io,Yn[7]=Pa,Yn[8]=oc,Yn[9]=ac,zs[0]=To,zs[1]=rc,zs[2]=xs,zs[3]=Oi,zs[4]=Hr,zs[5]=nc,zs[6]=Ro,ks[0]=Os,ks[1]=tc,ks[2]=lc,ks[3]=Na,ks[4]=hi,ks[5]=cc,ks[6]=Ca,b=1}else b=0}b&&(b=function(oe,je){for(oe.M=0;oe.M<oe.Va;++oe.M){var ve,se=oe.Jc[oe.M&oe.Xb],ae=oe.m,we=oe;for(ve=0;ve<we.za;++ve){var ke=ae,Se=we,He=Se.Ac,Be=Se.Bc+4*ve,nt=Se.zc,Ue=Se.ya[Se.aa+ve];if(Se.Qa.Bb?Ue.$b=he(ke,Se.Pa.jb[0])?2+he(ke,Se.Pa.jb[2]):he(ke,Se.Pa.jb[1]):Ue.$b=0,Se.kc&&(Ue.Ad=he(ke,Se.Bd)),Ue.Za=!he(ke,145)+0,Ue.Za){var It=Ue.Ob,Mt=0;for(Se=0;4>Se;++Se){var Rt,Lt=nt[0+Se];for(Rt=0;4>Rt;++Rt){Lt=Mp[He[Be+Rt]][Lt];for(var Ht=ch[he(ke,Lt[0])];0<Ht;)Ht=ch[2*Ht+he(ke,Lt[Ht])];Lt=-Ht,He[Be+Rt]=Lt}r(It,Mt,He,Be,4),Mt+=4,nt[0+Se]=Lt}}else Lt=he(ke,156)?he(ke,128)?1:3:he(ke,163)?2:0,Ue.Ob[0]=Lt,s(He,Be,Lt,4),s(nt,0,Lt,4);Ue.Dd=he(ke,142)?he(ke,114)?he(ke,183)?1:3:2:0}if(we.m.Ka)return lt(oe,7,"Premature end-of-partition0 encountered.");for(;oe.ja<oe.za;++oe.ja){if(we=se,ke=(ae=oe).rb[ae.sb-1],He=ae.rb[ae.sb+ae.ja],ve=ae.ya[ae.aa+ae.ja],Be=ae.kc?ve.Ad:0)ke.la=He.la=0,ve.Za||(ke.Na=He.Na=0),ve.Hc=0,ve.Gc=0,ve.ia=0;else{var zt,yt;if(ke=He,He=we,Be=ae.Pa.Xc,nt=ae.ya[ae.aa+ae.ja],Ue=ae.pb[nt.$b],Se=nt.ad,It=0,Mt=ae.rb[ae.sb-1],Lt=Rt=0,s(Se,It,0,384),nt.Za)var wr=0,bn=Be[3];else{Ht=i(16);var _r=ke.Na+Mt.Na;if(_r=Ka(He,Be[1],_r,Ue.Eb,0,Ht,0),ke.Na=Mt.Na=(0<_r)+0,1<_r)Ki(Ht,0,Se,It);else{var yn=Ht[0]+3>>3;for(Ht=0;256>Ht;Ht+=16)Se[It+Ht]=yn}wr=1,bn=Be[0]}var Bt=15&ke.la,Tn=15&Mt.la;for(Ht=0;4>Ht;++Ht){var Rn=1&Tn;for(yn=yt=0;4>yn;++yn)Bt=Bt>>1|(Rn=(_r=Ka(He,bn,_r=Rn+(1&Bt),Ue.Sc,wr,Se,It))>wr)<<7,yt=yt<<2|(3<_r?3:1<_r?2:Se[It+0]!=0),It+=16;Bt>>=4,Tn=Tn>>1|Rn<<7,Rt=(Rt<<8|yt)>>>0}for(bn=Bt,wr=Tn>>4,zt=0;4>zt;zt+=2){for(yt=0,Bt=ke.la>>4+zt,Tn=Mt.la>>4+zt,Ht=0;2>Ht;++Ht){for(Rn=1&Tn,yn=0;2>yn;++yn)_r=Rn+(1&Bt),Bt=Bt>>1|(Rn=0<(_r=Ka(He,Be[2],_r,Ue.Qc,0,Se,It)))<<3,yt=yt<<2|(3<_r?3:1<_r?2:Se[It+0]!=0),It+=16;Bt>>=2,Tn=Tn>>1|Rn<<5}Lt|=yt<<4*zt,bn|=Bt<<4<<zt,wr|=(240&Tn)<<zt}ke.la=bn,Mt.la=wr,nt.Hc=Rt,nt.Gc=Lt,nt.ia=43690&Lt?0:Ue.ia,Be=!(Rt|Lt)}if(0<ae.L&&(ae.wa[ae.Y+ae.ja]=ae.gd[ve.$b][ve.Za],ae.wa[ae.Y+ae.ja].La|=!Be),we.Ka)return lt(oe,7,"Premature end-of-file encountered.")}if(rn(oe),ae=je,we=1,ve=(se=oe).D,ke=0<se.L&&se.M>=se.zb&&se.M<=se.Va,se.Aa==0)e:{if(ve.M=se.M,ve.uc=ke,Ba(se,ve),we=1,ve=(yt=se.D).Nb,ke=(Lt=tl[se.L])*se.R,He=Lt/2*se.B,Ht=16*ve*se.R,yn=8*ve*se.B,Be=se.sa,nt=se.ta-ke+Ht,Ue=se.qa,Se=se.ra-He+yn,It=se.Ha,Mt=se.Ia-He+yn,Tn=(Bt=yt.M)==0,Rt=Bt>=se.Va-1,se.Aa==2&&Ba(se,yt),yt.uc)for(Rn=(_r=se).D.M,e(_r.D.uc),yt=_r.yb;yt<_r.Hb;++yt){wr=yt,bn=Rn;var Rr=(Br=(or=_r).D).Nb;zt=or.R;var Br=Br.wa[Br.Y+wr],ln=or.sa,zn=or.ta+16*Rr*zt+16*wr,us=Br.dd,Er=Br.tc;if(Er!=0)if(e(3<=Er),or.L==1)0<wr&&$s(ln,zn,zt,Er+4),Br.La&&Mn(ln,zn,zt,Er),0<bn&&bi(ln,zn,zt,Er+4),Br.La&&Va(ln,zn,zt,Er);else{var Ls=or.B,yi=or.qa,Zi=or.ra+8*Rr*Ls+8*wr,Ws=or.Ha,or=or.Ia+8*Rr*Ls+8*wr;Rr=Br.ld,0<wr&&(Ho(ln,zn,zt,Er+4,us,Rr),gi(yi,Zi,Ws,or,Ls,Er+4,us,Rr)),Br.La&&(qs(ln,zn,zt,Er,us,Rr),Yi(yi,Zi,Ws,or,Ls,Er,us,Rr)),0<bn&&(Ji(ln,zn,zt,Er+4,us,Rr),Ha(yi,Zi,Ws,or,Ls,Er+4,us,Rr)),Br.La&&(mi(ln,zn,zt,Er,us,Rr),vi(yi,Zi,Ws,or,Ls,Er,us,Rr))}}if(se.ia&&alert("todo:DitherRow"),ae.put!=null){if(yt=16*Bt,Bt=16*(Bt+1),Tn?(ae.y=se.sa,ae.O=se.ta+Ht,ae.f=se.qa,ae.N=se.ra+yn,ae.ea=se.Ha,ae.W=se.Ia+yn):(yt-=Lt,ae.y=Be,ae.O=nt,ae.f=Ue,ae.N=Se,ae.ea=It,ae.W=Mt),Rt||(Bt-=Lt),Bt>ae.o&&(Bt=ae.o),ae.F=null,ae.J=null,se.Fa!=null&&0<se.Fa.length&&yt<Bt&&(ae.J=Da(se,ae,yt,Bt-yt),ae.F=se.mb,ae.F==null&&ae.F.length==0)){we=lt(se,3,"Could not decode alpha data.");break e}yt<ae.j&&(Lt=ae.j-yt,yt=ae.j,e(!(1&Lt)),ae.O+=se.R*Lt,ae.N+=se.B*(Lt>>1),ae.W+=se.B*(Lt>>1),ae.F!=null&&(ae.J+=ae.width*Lt)),yt<Bt&&(ae.O+=ae.v,ae.N+=ae.v>>1,ae.W+=ae.v>>1,ae.F!=null&&(ae.J+=ae.v),ae.ka=yt-ae.j,ae.U=ae.va-ae.v,ae.T=Bt-yt,we=ae.put(ae))}ve+1!=se.Ic||Rt||(r(se.sa,se.ta-ke,Be,nt+16*se.R,ke),r(se.qa,se.ra-He,Ue,Se+8*se.B,He),r(se.Ha,se.Ia-He,It,Mt+8*se.B,He))}if(!we)return lt(oe,6,"Output aborted.")}return 1}(o,u)),u.bc!=null&&u.bc(u),b&=1}return b?(o.cb=0,b):0}function yr(o,u,b,w,C){C=o[u+b+32*w]+(C>>3),o[u+b+32*w]=-256&C?0>C?0:255:C}function Wr(o,u,b,w,C,I){yr(o,u,0,b,w+C),yr(o,u,1,b,w+I),yr(o,u,2,b,w-I),yr(o,u,3,b,w-C)}function nr(o){return(20091*o>>16)+o}function nn(o,u,b,w){var C,I=0,O=i(16);for(C=0;4>C;++C){var F=o[u+0]+o[u+8],q=o[u+0]-o[u+8],G=(35468*o[u+4]>>16)-nr(o[u+12]),ne=nr(o[u+4])+(35468*o[u+12]>>16);O[I+0]=F+ne,O[I+1]=q+G,O[I+2]=q-G,O[I+3]=F-ne,I+=4,u++}for(C=I=0;4>C;++C)F=(o=O[I+0]+4)+O[I+8],q=o-O[I+8],G=(35468*O[I+4]>>16)-nr(O[I+12]),yr(b,w,0,0,F+(ne=nr(O[I+4])+(35468*O[I+12]>>16))),yr(b,w,1,0,q+G),yr(b,w,2,0,q-G),yr(b,w,3,0,F-ne),I++,w+=32}function pt(o,u,b,w){var C=o[u+0]+4,I=35468*o[u+4]>>16,O=nr(o[u+4]),F=35468*o[u+1]>>16;Wr(b,w,0,C+O,o=nr(o[u+1]),F),Wr(b,w,1,C+I,o,F),Wr(b,w,2,C-I,o,F),Wr(b,w,3,C-O,o,F)}function St(o,u,b,w,C){nn(o,u,b,w),C&&nn(o,u+16,b,w+4)}function jr(o,u,b,w){js(o,u+0,b,w,1),js(o,u+32,b,w+128,1)}function sn(o,u,b,w){var C;for(o=o[u+0]+4,C=0;4>C;++C)for(u=0;4>u;++u)yr(b,w,u,C,o)}function Pn(o,u,b,w){o[u+0]&&on(o,u+0,b,w),o[u+16]&&on(o,u+16,b,w+4),o[u+32]&&on(o,u+32,b,w+128),o[u+48]&&on(o,u+48,b,w+128+4)}function Dr(o,u,b,w){var C,I=i(16);for(C=0;4>C;++C){var O=o[u+0+C]+o[u+12+C],F=o[u+4+C]+o[u+8+C],q=o[u+4+C]-o[u+8+C],G=o[u+0+C]-o[u+12+C];I[0+C]=O+F,I[8+C]=O-F,I[4+C]=G+q,I[12+C]=G-q}for(C=0;4>C;++C)O=(o=I[0+4*C]+3)+I[3+4*C],F=I[1+4*C]+I[2+4*C],q=I[1+4*C]-I[2+4*C],G=o-I[3+4*C],b[w+0]=O+F>>3,b[w+16]=G+q>>3,b[w+32]=O-F>>3,b[w+48]=G-q>>3,w+=64}function Gn(o,u,b){var w,C=u-32,I=Cn,O=255-o[C-1];for(w=0;w<b;++w){var F,q=I,G=O+o[u-1];for(F=0;F<b;++F)o[u+F]=q[G+o[C+F]];u+=32}}function ys(o,u){Gn(o,u,4)}function tc(o,u){Gn(o,u,8)}function rc(o,u){Gn(o,u,16)}function xs(o,u){var b;for(b=0;16>b;++b)r(o,u+32*b,o,u-32,16)}function Oi(o,u){var b;for(b=16;0<b;--b)s(o,u,o[u-1],16),u+=32}function Fi(o,u,b){var w;for(w=0;16>w;++w)s(u,b+32*w,o,16)}function To(o,u){var b,w=16;for(b=0;16>b;++b)w+=o[u-1+32*b]+o[u+b-32];Fi(w>>5,o,u)}function Hr(o,u){var b,w=8;for(b=0;16>b;++b)w+=o[u-1+32*b];Fi(w>>4,o,u)}function nc(o,u){var b,w=8;for(b=0;16>b;++b)w+=o[u+b-32];Fi(w>>4,o,u)}function Ro(o,u){Fi(128,o,u)}function dt(o,u,b){return o+2*u+b+2>>2}function sc(o,u){var b,w=u-32;for(w=new Uint8Array([dt(o[w-1],o[w+0],o[w+1]),dt(o[w+0],o[w+1],o[w+2]),dt(o[w+1],o[w+2],o[w+3]),dt(o[w+2],o[w+3],o[w+4])]),b=0;4>b;++b)r(o,u+32*b,w,0,w.length)}function ic(o,u){var b=o[u-1],w=o[u-1+32],C=o[u-1+64],I=o[u-1+96];ge(o,u+0,16843009*dt(o[u-1-32],b,w)),ge(o,u+32,16843009*dt(b,w,C)),ge(o,u+64,16843009*dt(w,C,I)),ge(o,u+96,16843009*dt(C,I,I))}function os(o,u){var b,w=4;for(b=0;4>b;++b)w+=o[u+b-32]+o[u-1+32*b];for(w>>=3,b=0;4>b;++b)s(o,u+32*b,w,4)}function Eo(o,u){var b=o[u-1+0],w=o[u-1+32],C=o[u-1+64],I=o[u-1-32],O=o[u+0-32],F=o[u+1-32],q=o[u+2-32],G=o[u+3-32];o[u+0+96]=dt(w,C,o[u-1+96]),o[u+1+96]=o[u+0+64]=dt(b,w,C),o[u+2+96]=o[u+1+64]=o[u+0+32]=dt(I,b,w),o[u+3+96]=o[u+2+64]=o[u+1+32]=o[u+0+0]=dt(O,I,b),o[u+3+64]=o[u+2+32]=o[u+1+0]=dt(F,O,I),o[u+3+32]=o[u+2+0]=dt(q,F,O),o[u+3+0]=dt(G,q,F)}function Io(o,u){var b=o[u+1-32],w=o[u+2-32],C=o[u+3-32],I=o[u+4-32],O=o[u+5-32],F=o[u+6-32],q=o[u+7-32];o[u+0+0]=dt(o[u+0-32],b,w),o[u+1+0]=o[u+0+32]=dt(b,w,C),o[u+2+0]=o[u+1+32]=o[u+0+64]=dt(w,C,I),o[u+3+0]=o[u+2+32]=o[u+1+64]=o[u+0+96]=dt(C,I,O),o[u+3+32]=o[u+2+64]=o[u+1+96]=dt(I,O,F),o[u+3+64]=o[u+2+96]=dt(O,F,q),o[u+3+96]=dt(F,q,q)}function Di(o,u){var b=o[u-1+0],w=o[u-1+32],C=o[u-1+64],I=o[u-1-32],O=o[u+0-32],F=o[u+1-32],q=o[u+2-32],G=o[u+3-32];o[u+0+0]=o[u+1+64]=I+O+1>>1,o[u+1+0]=o[u+2+64]=O+F+1>>1,o[u+2+0]=o[u+3+64]=F+q+1>>1,o[u+3+0]=q+G+1>>1,o[u+0+96]=dt(C,w,b),o[u+0+64]=dt(w,b,I),o[u+0+32]=o[u+1+96]=dt(b,I,O),o[u+1+32]=o[u+2+96]=dt(I,O,F),o[u+2+32]=o[u+3+96]=dt(O,F,q),o[u+3+32]=dt(F,q,G)}function Pa(o,u){var b=o[u+0-32],w=o[u+1-32],C=o[u+2-32],I=o[u+3-32],O=o[u+4-32],F=o[u+5-32],q=o[u+6-32],G=o[u+7-32];o[u+0+0]=b+w+1>>1,o[u+1+0]=o[u+0+64]=w+C+1>>1,o[u+2+0]=o[u+1+64]=C+I+1>>1,o[u+3+0]=o[u+2+64]=I+O+1>>1,o[u+0+32]=dt(b,w,C),o[u+1+32]=o[u+0+96]=dt(w,C,I),o[u+2+32]=o[u+1+96]=dt(C,I,O),o[u+3+32]=o[u+2+96]=dt(I,O,F),o[u+3+64]=dt(O,F,q),o[u+3+96]=dt(F,q,G)}function ac(o,u){var b=o[u-1+0],w=o[u-1+32],C=o[u-1+64],I=o[u-1+96];o[u+0+0]=b+w+1>>1,o[u+2+0]=o[u+0+32]=w+C+1>>1,o[u+2+32]=o[u+0+64]=C+I+1>>1,o[u+1+0]=dt(b,w,C),o[u+3+0]=o[u+1+32]=dt(w,C,I),o[u+3+32]=o[u+1+64]=dt(C,I,I),o[u+3+64]=o[u+2+64]=o[u+0+96]=o[u+1+96]=o[u+2+96]=o[u+3+96]=I}function oc(o,u){var b=o[u-1+0],w=o[u-1+32],C=o[u-1+64],I=o[u-1+96],O=o[u-1-32],F=o[u+0-32],q=o[u+1-32],G=o[u+2-32];o[u+0+0]=o[u+2+32]=b+O+1>>1,o[u+0+32]=o[u+2+64]=w+b+1>>1,o[u+0+64]=o[u+2+96]=C+w+1>>1,o[u+0+96]=I+C+1>>1,o[u+3+0]=dt(F,q,G),o[u+2+0]=dt(O,F,q),o[u+1+0]=o[u+3+32]=dt(b,O,F),o[u+1+32]=o[u+3+64]=dt(w,b,O),o[u+1+64]=o[u+3+96]=dt(C,w,b),o[u+1+96]=dt(I,C,w)}function lc(o,u){var b;for(b=0;8>b;++b)r(o,u+32*b,o,u-32,8)}function Na(o,u){var b;for(b=0;8>b;++b)s(o,u,o[u-1],8),u+=32}function ui(o,u,b){var w;for(w=0;8>w;++w)s(u,b+32*w,o,8)}function Os(o,u){var b,w=8;for(b=0;8>b;++b)w+=o[u+b-32]+o[u-1+32*b];ui(w>>4,o,u)}function cc(o,u){var b,w=4;for(b=0;8>b;++b)w+=o[u+b-32];ui(w>>3,o,u)}function hi(o,u){var b,w=4;for(b=0;8>b;++b)w+=o[u-1+32*b];ui(w>>3,o,u)}function Ca(o,u){ui(128,o,u)}function Mi(o,u,b){var w=o[u-b],C=o[u+0],I=3*(C-w)+gc[1020+o[u-2*b]-o[u+b]],O=Go[112+(I+4>>3)];o[u-b]=Cn[255+w+Go[112+(I+3>>3)]],o[u+0]=Cn[255+C-O]}function Oo(o,u,b,w){var C=o[u+0],I=o[u+b];return qn[255+o[u-2*b]-o[u-b]]>w||qn[255+I-C]>w}function Fo(o,u,b,w){return 4*qn[255+o[u-b]-o[u+0]]+qn[255+o[u-2*b]-o[u+b]]<=w}function Do(o,u,b,w,C){var I=o[u-3*b],O=o[u-2*b],F=o[u-b],q=o[u+0],G=o[u+b],ne=o[u+2*b],de=o[u+3*b];return 4*qn[255+F-q]+qn[255+O-G]>w?0:qn[255+o[u-4*b]-I]<=C&&qn[255+I-O]<=C&&qn[255+O-F]<=C&&qn[255+de-ne]<=C&&qn[255+ne-G]<=C&&qn[255+G-q]<=C}function Mo(o,u,b,w){var C=2*w+1;for(w=0;16>w;++w)Fo(o,u+w,b,C)&&Mi(o,u+w,b)}function ls(o,u,b,w){var C=2*w+1;for(w=0;16>w;++w)Fo(o,u+w*b,1,C)&&Mi(o,u+w*b,1)}function ws(o,u,b,w){var C;for(C=3;0<C;--C)Mo(o,u+=4*b,b,w)}function uc(o,u,b,w){var C;for(C=3;0<C;--C)ls(o,u+=4,b,w)}function Fs(o,u,b,w,C,I,O,F){for(I=2*I+1;0<C--;){if(Do(o,u,b,I,O))if(Oo(o,u,b,F))Mi(o,u,b);else{var q=o,G=u,ne=b,de=q[G-2*ne],fe=q[G-ne],oe=q[G+0],je=q[G+ne],ve=q[G+2*ne],se=27*(we=gc[1020+3*(oe-fe)+gc[1020+de-je]])+63>>7,ae=18*we+63>>7,we=9*we+63>>7;q[G-3*ne]=Cn[255+q[G-3*ne]+we],q[G-2*ne]=Cn[255+de+ae],q[G-ne]=Cn[255+fe+se],q[G+0]=Cn[255+oe-se],q[G+ne]=Cn[255+je-ae],q[G+2*ne]=Cn[255+ve-we]}u+=w}}function Kn(o,u,b,w,C,I,O,F){for(I=2*I+1;0<C--;){if(Do(o,u,b,I,O))if(Oo(o,u,b,F))Mi(o,u,b);else{var q=o,G=u,ne=b,de=q[G-ne],fe=q[G+0],oe=q[G+ne],je=Go[112+((ve=3*(fe-de))+4>>3)],ve=Go[112+(ve+3>>3)],se=je+1>>1;q[G-2*ne]=Cn[255+q[G-2*ne]+se],q[G-ne]=Cn[255+de+ve],q[G+0]=Cn[255+fe-je],q[G+ne]=Cn[255+oe-se]}u+=w}}function Ta(o,u,b,w,C,I){Fs(o,u,b,1,16,w,C,I)}function di(o,u,b,w,C,I){Fs(o,u,1,b,16,w,C,I)}function hc(o,u,b,w,C,I){var O;for(O=3;0<O;--O)Kn(o,u+=4*b,b,1,16,w,C,I)}function Bi(o,u,b,w,C,I){var O;for(O=3;0<O;--O)Kn(o,u+=4,1,b,16,w,C,I)}function dc(o,u,b,w,C,I,O,F){Fs(o,u,C,1,8,I,O,F),Fs(b,w,C,1,8,I,O,F)}function Ra(o,u,b,w,C,I,O,F){Fs(o,u,1,C,8,I,O,F),Fs(b,w,1,C,8,I,O,F)}function Ea(o,u,b,w,C,I,O,F){Kn(o,u+4*C,C,1,8,I,O,F),Kn(b,w+4*C,C,1,8,I,O,F)}function Bo(o,u,b,w,C,I,O,F){Kn(o,u+4,1,C,8,I,O,F),Kn(b,w+4,1,C,8,I,O,F)}function qi(){this.ba=new $r,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new Wt,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Ia(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Oa(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function qo(){this.ua=0,this.Wa=new ee,this.vb=new ee,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new z,this.yc=new A}function fc(){this.xb=this.a=0,this.l=new Nr,this.ca=new $r,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new P,this.Pb=0,this.wd=new P,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new qo,this.ab=0,this.gc=a(4,Oa),this.Oc=0}function $i(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Nr,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function fi(o,u,b,w,C,I,O){for(o=o==null?0:o[u+0],u=0;u<O;++u)C[I+u]=o+b[w+u]&255,o=C[I+u]}function Fa(o,u,b,w,C,I,O){var F;if(o==null)fi(null,null,b,w,C,I,O);else for(F=0;F<O;++F)C[I+F]=o[u+F]+b[w+F]&255}function Ds(o,u,b,w,C,I,O){if(o==null)fi(null,null,b,w,C,I,O);else{var F,q=o[u+0],G=q,ne=q;for(F=0;F<O;++F)G=ne+(q=o[u+F])-G,ne=b[w+F]+(-256&G?0>G?0:255:G)&255,G=q,C[I+F]=ne}}function Da(o,u,b,w){var C=u.width,I=u.o;if(e(o!=null&&u!=null),0>b||0>=w||b+w>I)return null;if(!o.Cc){if(o.ga==null){var O;if(o.ga=new $i,(O=o.ga==null)||(O=u.width*u.o,e(o.Gb.length==0),o.Gb=i(O),o.Uc=0,o.Gb==null?O=0:(o.mb=o.Gb,o.nb=o.Uc,o.rc=null,O=1),O=!O),!O){O=o.ga;var F=o.Fa,q=o.P,G=o.qc,ne=o.mb,de=o.nb,fe=q+1,oe=G-1,je=O.l;if(e(F!=null&&ne!=null&&u!=null),Us[0]=null,Us[1]=fi,Us[2]=Fa,Us[3]=Ds,O.ca=ne,O.tb=de,O.c=u.width,O.i=u.height,e(0<O.c&&0<O.i),1>=G)u=0;else if(O.$a=F[q+0]>>0&3,O.Z=F[q+0]>>2&3,O.Lc=F[q+0]>>4&3,q=F[q+0]>>6&3,0>O.$a||1<O.$a||4<=O.Z||1<O.Lc||q)u=0;else if(je.put=Sn,je.ac=br,je.bc=jn,je.ma=O,je.width=u.width,je.height=u.height,je.Da=u.Da,je.v=u.v,je.va=u.va,je.j=u.j,je.o=u.o,O.$a)e:{e(O.$a==1),u=tn();t:for(;;){if(u==null){u=0;break e}if(e(O!=null),O.mc=u,u.c=O.c,u.i=O.i,u.l=O.l,u.l.ma=O,u.l.width=O.c,u.l.height=O.i,u.a=0,Y(u.m,F,fe,oe),!Ln(O.c,O.i,1,u,null)||(u.ab==1&&u.gc[0].hc==3&&Vn(u.s)?(O.ic=1,F=u.c*u.i,u.Ta=null,u.Ua=0,u.V=i(F),u.Ba=0,u.V==null?(u.a=1,u=0):u=1):(O.ic=0,u=bs(u,O.c)),!u))break t;u=1;break e}O.mc=null,u=0}else u=oe>=O.c*O.i;O=!u}if(O)return null;o.ga.Lc!=1?o.Ga=0:w=I-b}e(o.ga!=null),e(b+w<=I);e:{if(u=(F=o.ga).c,I=F.l.o,F.$a==0){if(fe=o.rc,oe=o.Vc,je=o.Fa,q=o.P+1+b*u,G=o.mb,ne=o.nb+b*u,e(q<=o.P+o.qc),F.Z!=0)for(e(Us[F.Z]!=null),O=0;O<w;++O)Us[F.Z](fe,oe,je,q,G,ne,u),fe=G,oe=ne,ne+=u,q+=u;else for(O=0;O<w;++O)r(G,ne,je,q,u),fe=G,oe=ne,ne+=u,q+=u;o.rc=fe,o.Vc=oe}else{if(e(F.mc!=null),u=b+w,e((O=F.mc)!=null),e(u<=O.i),O.C>=u)u=1;else if(F.ic||ce(),F.ic){F=O.V,fe=O.Ba,oe=O.c;var ve=O.i,se=(je=1,q=O.$/oe,G=O.$%oe,ne=O.m,de=O.s,O.$),ae=oe*ve,we=oe*u,ke=de.wc,Se=se<we?rr(de,G,q):null;e(se<=ae),e(u<=ve),e(Vn(de));t:for(;;){for(;!ne.h&&se<we;){if(G&ke||(Se=rr(de,G,q)),e(Se!=null),Q(ne),256>(ve=Fr(Se.G[0],Se.H[0],ne)))F[fe+se]=ve,++se,++G>=oe&&(G=0,++q<=u&&!(q%16)&&gn(O,q));else{if(!(280>ve)){je=0;break t}ve=An(ve-256,ne);var He,Be=Fr(Se.G[4],Se.H[4],ne);if(Q(ne),!(se>=(Be=Or(oe,Be=An(Be,ne)))&&ae-se>=ve)){je=0;break t}for(He=0;He<ve;++He)F[fe+se+He]=F[fe+se+He-Be];for(se+=ve,G+=ve;G>=oe;)G-=oe,++q<=u&&!(q%16)&&gn(O,q);se<we&&G&ke&&(Se=rr(de,G,q))}e(ne.h==H(ne))}gn(O,q>u?u:q);break t}!je||ne.h&&se<ae?(je=0,O.a=ne.h?5:3):O.$=se,u=je}else u=kn(O,O.V,O.Ba,O.c,O.i,u,Es);if(!u){w=0;break e}}b+w>=I&&(o.Cc=1),w=1}if(!w)return null;if(o.Cc&&((w=o.ga)!=null&&(w.mc=null),o.ga=null,0<o.Ga))return alert("todo:WebPDequantizeLevels"),null}return o.nb+b*C}function p(o,u,b,w,C,I){for(;0<C--;){var O,F=o,q=u+(b?1:0),G=o,ne=u+(b?0:3);for(O=0;O<w;++O){var de=G[ne+4*O];de!=255&&(de*=32897,F[q+4*O+0]=F[q+4*O+0]*de>>23,F[q+4*O+1]=F[q+4*O+1]*de>>23,F[q+4*O+2]=F[q+4*O+2]*de>>23)}u+=I}}function T(o,u,b,w,C){for(;0<w--;){var I;for(I=0;I<b;++I){var O=o[u+2*I+0],F=15&(G=o[u+2*I+1]),q=4369*F,G=(240&G|G>>4)*q>>16;o[u+2*I+0]=(240&O|O>>4)*q>>16&240|(15&O|O<<4)*q>>16>>4&15,o[u+2*I+1]=240&G|F}u+=C}}function X(o,u,b,w,C,I,O,F){var q,G,ne=255;for(G=0;G<C;++G){for(q=0;q<w;++q){var de=o[u+q];I[O+4*q]=de,ne&=de}u+=b,O+=F}return ne!=255}function re(o,u,b,w,C){var I;for(I=0;I<C;++I)b[w+I]=o[u+I]>>8}function ce(){Bn=p,Jt=T,Yt=X,fr=re}function ye(o,u,b){E[o]=function(w,C,I,O,F,q,G,ne,de,fe,oe,je,ve,se,ae,we,ke){var Se,He=ke-1>>1,Be=F[q+0]|G[ne+0]<<16,nt=de[fe+0]|oe[je+0]<<16;e(w!=null);var Ue=3*Be+nt+131074>>2;for(u(w[C+0],255&Ue,Ue>>16,ve,se),I!=null&&(Ue=3*nt+Be+131074>>2,u(I[O+0],255&Ue,Ue>>16,ae,we)),Se=1;Se<=He;++Se){var It=F[q+Se]|G[ne+Se]<<16,Mt=de[fe+Se]|oe[je+Se]<<16,Rt=Be+It+nt+Mt+524296,Lt=Rt+2*(It+nt)>>3;Ue=Lt+Be>>1,Be=(Rt=Rt+2*(Be+Mt)>>3)+It>>1,u(w[C+2*Se-1],255&Ue,Ue>>16,ve,se+(2*Se-1)*b),u(w[C+2*Se-0],255&Be,Be>>16,ve,se+(2*Se-0)*b),I!=null&&(Ue=Rt+nt>>1,Be=Lt+Mt>>1,u(I[O+2*Se-1],255&Ue,Ue>>16,ae,we+(2*Se-1)*b),u(I[O+2*Se+0],255&Be,Be>>16,ae,we+(2*Se+0)*b)),Be=It,nt=Mt}1&ke||(Ue=3*Be+nt+131074>>2,u(w[C+ke-1],255&Ue,Ue>>16,ve,se+(ke-1)*b),I!=null&&(Ue=3*nt+Be+131074>>2,u(I[O+ke-1],255&Ue,Ue>>16,ae,we+(ke-1)*b)))}}function Pe(){$n[Ko]=zp,$n[Jo]=hh,$n[ah]=Up,$n[Yo]=dh,$n[Xo]=fh,$n[mc]=ph,$n[oh]=Wp,$n[vc]=hh,$n[bc]=dh,$n[Zo]=fh,$n[yc]=ph}function We(o){return o&-16384?0>o?0:255:o>>Hp}function Xe(o,u){return We((19077*o>>8)+(26149*u>>8)-14234)}function vt(o,u,b){return We((19077*o>>8)-(6419*u>>8)-(13320*b>>8)+8708)}function gt(o,u){return We((19077*o>>8)+(33050*u>>8)-17685)}function Ct(o,u,b,w,C){w[C+0]=Xe(o,b),w[C+1]=vt(o,u,b),w[C+2]=gt(o,u)}function sr(o,u,b,w,C){w[C+0]=gt(o,u),w[C+1]=vt(o,u,b),w[C+2]=Xe(o,b)}function ar(o,u,b,w,C){var I=vt(o,u,b);u=I<<3&224|gt(o,u)>>3,w[C+0]=248&Xe(o,b)|I>>5,w[C+1]=u}function xr(o,u,b,w,C){var I=240&gt(o,u)|15;w[C+0]=240&Xe(o,b)|vt(o,u,b)>>4,w[C+1]=I}function Vr(o,u,b,w,C){w[C+0]=255,Ct(o,u,b,w,C+1)}function Tr(o,u,b,w,C){sr(o,u,b,w,C),w[C+3]=255}function Jn(o,u,b,w,C){Ct(o,u,b,w,C),w[C+3]=255}function Nn(o,u){return 0>o?0:o>u?u:o}function cs(o,u,b){E[o]=function(w,C,I,O,F,q,G,ne,de){for(var fe=ne+(-2&de)*b;ne!=fe;)u(w[C+0],I[O+0],F[q+0],G,ne),u(w[C+1],I[O+0],F[q+0],G,ne+b),C+=2,++O,++q,ne+=2*b;1&de&&u(w[C+0],I[O+0],F[q+0],G,ne)}}function $o(o,u,b){return b==0?o==0?u==0?6:5:u==0?4:0:b}function Ma(o,u,b,w,C){switch(o>>>30){case 3:js(u,b,w,C,0);break;case 2:dr(u,b,w,C);break;case 1:on(u,b,w,C)}}function Ba(o,u){var b,w,C=u.M,I=u.Nb,O=o.oc,F=o.pc+40,q=o.oc,G=o.pc+584,ne=o.oc,de=o.pc+600;for(b=0;16>b;++b)O[F+32*b-1]=129;for(b=0;8>b;++b)q[G+32*b-1]=129,ne[de+32*b-1]=129;for(0<C?O[F-1-32]=q[G-1-32]=ne[de-1-32]=129:(s(O,F-32-1,127,21),s(q,G-32-1,127,9),s(ne,de-32-1,127,9)),w=0;w<o.za;++w){var fe=u.ya[u.aa+w];if(0<w){for(b=-1;16>b;++b)r(O,F+32*b-4,O,F+32*b+12,4);for(b=-1;8>b;++b)r(q,G+32*b-4,q,G+32*b+4,4),r(ne,de+32*b-4,ne,de+32*b+4,4)}var oe=o.Gd,je=o.Hd+w,ve=fe.ad,se=fe.Hc;if(0<C&&(r(O,F-32,oe[je].y,0,16),r(q,G-32,oe[je].f,0,8),r(ne,de-32,oe[je].ea,0,8)),fe.Za){var ae=O,we=F-32+16;for(0<C&&(w>=o.za-1?s(ae,we,oe[je].y[15],4):r(ae,we,oe[je+1].y,0,4)),b=0;4>b;b++)ae[we+128+b]=ae[we+256+b]=ae[we+384+b]=ae[we+0+b];for(b=0;16>b;++b,se<<=2)ae=O,we=F+mh[b],Yn[fe.Ob[b]](ae,we),Ma(se,ve,16*+b,ae,we)}else if(ae=$o(w,C,fe.Ob[0]),zs[ae](O,F),se!=0)for(b=0;16>b;++b,se<<=2)Ma(se,ve,16*+b,O,F+mh[b]);for(b=fe.Gc,ae=$o(w,C,fe.Dd),ks[ae](q,G),ks[ae](ne,de),se=ve,ae=q,we=G,255&(fe=b>>0)&&(170&fe?Wa(se,256,ae,we):Dn(se,256,ae,we)),fe=ne,se=de,255&(b>>=8)&&(170&b?Wa(ve,320,fe,se):Dn(ve,320,fe,se)),C<o.Ub-1&&(r(oe[je].y,0,O,F+480,16),r(oe[je].f,0,q,G+224,8),r(oe[je].ea,0,ne,de+224,8)),b=8*I*o.B,oe=o.sa,je=o.ta+16*w+16*I*o.R,ve=o.qa,fe=o.ra+8*w+b,se=o.Ha,ae=o.Ia+8*w+b,b=0;16>b;++b)r(oe,je+b*o.R,O,F+32*b,16);for(b=0;8>b;++b)r(ve,fe+b*o.B,q,G+32*b,8),r(se,ae+b*o.B,ne,de+32*b,8)}}function zi(o,u,b,w,C,I,O,F,q){var G=[0],ne=[0],de=0,fe=q!=null?q.kd:0,oe=q??new Ia;if(o==null||12>b)return 7;oe.data=o,oe.w=u,oe.ha=b,u=[u],b=[b],oe.gb=[oe.gb];e:{var je=u,ve=b,se=oe.gb;if(e(o!=null),e(ve!=null),e(se!=null),se[0]=0,12<=ve[0]&&!t(o,je[0],"RIFF")){if(t(o,je[0]+8,"WEBP")){se=3;break e}var ae=Ee(o,je[0]+4);if(12>ae||4294967286<ae){se=3;break e}if(fe&&ae>ve[0]-8){se=7;break e}se[0]=ae,je[0]+=12,ve[0]-=12}se=0}if(se!=0)return se;for(ae=0<oe.gb[0],b=b[0];;){e:{var we=o;ve=u,se=b;var ke=G,Se=ne,He=je=[0];if((Ue=de=[de])[0]=0,8>se[0])se=7;else{if(!t(we,ve[0],"VP8X")){if(Ee(we,ve[0]+4)!=10){se=3;break e}if(18>se[0]){se=7;break e}var Be=Ee(we,ve[0]+8),nt=1+Fe(we,ve[0]+12);if(2147483648<=nt*(we=1+Fe(we,ve[0]+15))){se=3;break e}He!=null&&(He[0]=Be),ke!=null&&(ke[0]=nt),Se!=null&&(Se[0]=we),ve[0]+=18,se[0]-=18,Ue[0]=1}se=0}}if(de=de[0],je=je[0],se!=0)return se;if(ve=!!(2&je),!ae&&de)return 3;if(I!=null&&(I[0]=!!(16&je)),O!=null&&(O[0]=ve),F!=null&&(F[0]=0),O=G[0],je=ne[0],de&&ve&&q==null){se=0;break}if(4>b){se=7;break}if(ae&&de||!ae&&!de&&!t(o,u[0],"ALPH")){b=[b],oe.na=[oe.na],oe.P=[oe.P],oe.Sa=[oe.Sa];e:{Be=o,se=u,ae=b;var Ue=oe.gb;ke=oe.na,Se=oe.P,He=oe.Sa,nt=22,e(Be!=null),e(ae!=null),we=se[0];var It=ae[0];for(e(ke!=null),e(He!=null),ke[0]=null,Se[0]=null,He[0]=0;;){if(se[0]=we,ae[0]=It,8>It){se=7;break e}var Mt=Ee(Be,we+4);if(4294967286<Mt){se=3;break e}var Rt=8+Mt+1&-2;if(nt+=Rt,0<Ue&&nt>Ue){se=3;break e}if(!t(Be,we,"VP8 ")||!t(Be,we,"VP8L")){se=0;break e}if(It[0]<Rt){se=7;break e}t(Be,we,"ALPH")||(ke[0]=Be,Se[0]=we+8,He[0]=Mt),we+=Rt,It-=Rt}}if(b=b[0],oe.na=oe.na[0],oe.P=oe.P[0],oe.Sa=oe.Sa[0],se!=0)break}b=[b],oe.Ja=[oe.Ja],oe.xa=[oe.xa];e:if(Ue=o,se=u,ae=b,ke=oe.gb[0],Se=oe.Ja,He=oe.xa,Be=se[0],we=!t(Ue,Be,"VP8 "),nt=!t(Ue,Be,"VP8L"),e(Ue!=null),e(ae!=null),e(Se!=null),e(He!=null),8>ae[0])se=7;else{if(we||nt){if(Ue=Ee(Ue,Be+4),12<=ke&&Ue>ke-12){se=3;break e}if(fe&&Ue>ae[0]-8){se=7;break e}Se[0]=Ue,se[0]+=8,ae[0]-=8,He[0]=nt}else He[0]=5<=ae[0]&&Ue[Be+0]==47&&!(Ue[Be+4]>>5),Se[0]=ae[0];se=0}if(b=b[0],oe.Ja=oe.Ja[0],oe.xa=oe.xa[0],u=u[0],se!=0)break;if(4294967286<oe.Ja)return 3;if(F==null||ve||(F[0]=oe.xa?2:1),O=[O],je=[je],oe.xa){if(5>b){se=7;break}F=O,fe=je,ve=I,o==null||5>b?o=0:5<=b&&o[u+0]==47&&!(o[u+4]>>5)?(ae=[0],Ue=[0],ke=[0],Y(Se=new P,o,u,b),et(Se,ae,Ue,ke)?(F!=null&&(F[0]=ae[0]),fe!=null&&(fe[0]=Ue[0]),ve!=null&&(ve[0]=ke[0]),o=1):o=0):o=0}else{if(10>b){se=7;break}F=je,o==null||10>b||!er(o,u+3,b-3)?o=0:(fe=o[u+0]|o[u+1]<<8|o[u+2]<<16,ve=16383&(o[u+7]<<8|o[u+6]),o=16383&(o[u+9]<<8|o[u+8]),1&fe||3<(fe>>1&7)||!(fe>>4&1)||fe>>5>=oe.Ja||!ve||!o?o=0:(O&&(O[0]=ve),F&&(F[0]=o),o=1))}if(!o||(O=O[0],je=je[0],de&&(G[0]!=O||ne[0]!=je)))return 3;q!=null&&(q[0]=oe,q.offset=u-q.w,e(4294967286>u-q.w),e(q.offset==q.ha-b));break}return se==0||se==7&&de&&q==null?(I!=null&&(I[0]|=oe.na!=null&&0<oe.na.length),w!=null&&(w[0]=O),C!=null&&(C[0]=je),0):se}function qa(o,u,b){var w=u.width,C=u.height,I=0,O=0,F=w,q=C;if(u.Da=o!=null&&0<o.Da,u.Da&&(F=o.cd,q=o.bd,I=o.v,O=o.j,11>b||(I&=-2,O&=-2),0>I||0>O||0>=F||0>=q||I+F>w||O+q>C))return 0;if(u.v=I,u.j=O,u.va=I+F,u.o=O+q,u.U=F,u.T=q,u.da=o!=null&&0<o.da,u.da){if(!ut(F,q,b=[o.ib],I=[o.hb]))return 0;u.ib=b[0],u.hb=I[0]}return u.ob=o!=null&&o.ob,u.Kb=o==null||!o.Sd,u.da&&(u.ob=u.ib<3*w/4&&u.hb<3*C/4,u.Kb=0),1}function $a(o){if(o==null)return 2;if(11>o.S){var u=o.f.RGBA;u.fb+=(o.height-1)*u.A,u.A=-u.A}else u=o.f.kb,o=o.height,u.O+=(o-1)*u.fa,u.fa=-u.fa,u.N+=(o-1>>1)*u.Ab,u.Ab=-u.Ab,u.W+=(o-1>>1)*u.Db,u.Db=-u.Db,u.F!=null&&(u.J+=(o-1)*u.lb,u.lb=-u.lb);return 0}function Ui(o,u,b,w){if(w==null||0>=o||0>=u)return 2;if(b!=null){if(b.Da){var C=b.cd,I=b.bd,O=-2&b.v,F=-2&b.j;if(0>O||0>F||0>=C||0>=I||O+C>o||F+I>u)return 2;o=C,u=I}if(b.da){if(!ut(o,u,C=[b.ib],I=[b.hb]))return 2;o=C[0],u=I[0]}}w.width=o,w.height=u;e:{var q=w.width,G=w.height;if(o=w.S,0>=q||0>=G||!(o>=Ko&&13>o))o=2;else{if(0>=w.Rd&&w.sd==null){O=I=C=u=0;var ne=(F=q*vh[o])*G;if(11>o||(I=(G+1)/2*(u=(q+1)/2),o==12&&(O=(C=q)*G)),(G=i(ne+2*I+O))==null){o=1;break e}w.sd=G,11>o?((q=w.f.RGBA).eb=G,q.fb=0,q.A=F,q.size=ne):((q=w.f.kb).y=G,q.O=0,q.fa=F,q.Fd=ne,q.f=G,q.N=0+ne,q.Ab=u,q.Cd=I,q.ea=G,q.W=0+ne+I,q.Db=u,q.Ed=I,o==12&&(q.F=G,q.J=0+ne+2*I),q.Tc=O,q.lb=C)}if(u=1,C=w.S,I=w.width,O=w.height,C>=Ko&&13>C)if(11>C)o=w.f.RGBA,u&=(F=Math.abs(o.A))*(O-1)+I<=o.size,u&=F>=I*vh[C],u&=o.eb!=null;else{o=w.f.kb,F=(I+1)/2,ne=(O+1)/2,q=Math.abs(o.fa),G=Math.abs(o.Ab);var de=Math.abs(o.Db),fe=Math.abs(o.lb),oe=fe*(O-1)+I;u&=q*(O-1)+I<=o.Fd,u&=G*(ne-1)+F<=o.Cd,u=(u&=de*(ne-1)+F<=o.Ed)&q>=I&G>=F&de>=F,u&=o.y!=null,u&=o.f!=null,u&=o.ea!=null,C==12&&(u&=fe>=I,u&=oe<=o.Tc,u&=o.F!=null)}else u=0;o=u?0:2}}return o!=0||b!=null&&b.fd&&(o=$a(w)),o}var Mr=64,Wi=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Hi=24,Vi=32,za=8,mn=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Ie("Predictor0","PredictorAdd0"),E.Predictor0=function(){return 4278190080},E.Predictor1=function(o){return o},E.Predictor2=function(o,u,b){return u[b+0]},E.Predictor3=function(o,u,b){return u[b+1]},E.Predictor4=function(o,u,b){return u[b-1]},E.Predictor5=function(o,u,b){return Me(Me(o,u[b+1]),u[b+0])},E.Predictor6=function(o,u,b){return Me(o,u[b-1])},E.Predictor7=function(o,u,b){return Me(o,u[b+0])},E.Predictor8=function(o,u,b){return Me(u[b-1],u[b+0])},E.Predictor9=function(o,u,b){return Me(u[b+0],u[b+1])},E.Predictor10=function(o,u,b){return Me(Me(o,u[b-1]),Me(u[b+0],u[b+1]))},E.Predictor11=function(o,u,b){var w=u[b+0];return 0>=ht(w>>24&255,o>>24&255,(u=u[b-1])>>24&255)+ht(w>>16&255,o>>16&255,u>>16&255)+ht(w>>8&255,o>>8&255,u>>8&255)+ht(255&w,255&o,255&u)?w:o},E.Predictor12=function(o,u,b){var w=u[b+0];return(Je((o>>24&255)+(w>>24&255)-((u=u[b-1])>>24&255))<<24|Je((o>>16&255)+(w>>16&255)-(u>>16&255))<<16|Je((o>>8&255)+(w>>8&255)-(u>>8&255))<<8|Je((255&o)+(255&w)-(255&u)))>>>0},E.Predictor13=function(o,u,b){var w=u[b-1];return(ot((o=Me(o,u[b+0]))>>24&255,w>>24&255)<<24|ot(o>>16&255,w>>16&255)<<16|ot(o>>8&255,w>>8&255)<<8|ot(o>>0&255,w>>0&255))>>>0};var pc=E.PredictorAdd0;E.PredictorAdd1=bt,Ie("Predictor2","PredictorAdd2"),Ie("Predictor3","PredictorAdd3"),Ie("Predictor4","PredictorAdd4"),Ie("Predictor5","PredictorAdd5"),Ie("Predictor6","PredictorAdd6"),Ie("Predictor7","PredictorAdd7"),Ie("Predictor8","PredictorAdd8"),Ie("Predictor9","PredictorAdd9"),Ie("Predictor10","PredictorAdd10"),Ie("Predictor11","PredictorAdd11"),Ie("Predictor12","PredictorAdd12"),Ie("Predictor13","PredictorAdd13");var Ua=E.PredictorAdd2;_t("ColorIndexInverseTransform","MapARGB","32b",function(o){return o>>8&255},function(o){return o}),_t("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(o){return o},function(o){return o>>8&255});var zo,Fn=E.ColorIndexInverseTransform,Gi=E.MapARGB,Uo=E.VP8LColorIndexInverseTransformAlpha,Wo=E.MapAlpha,Ms=E.VP8LPredictorsAdd=[];Ms.length=16,(E.VP8LPredictors=[]).length=16,(E.VP8LPredictorsAdd_C=[]).length=16,(E.VP8LPredictors_C=[]).length=16;var pi,vn,an,Bs,_s,Ss,Ki,js,dr,Wa,on,Dn,Ji,Ho,Ha,gi,mi,qs,vi,Yi,bi,$s,Va,Mn,Bn,Jt,Yt,fr,Ar=i(511),As=i(2041),Ga=i(225),Xi=i(767),Vo=0,gc=As,Go=Ga,Cn=Xi,qn=Ar,Ko=0,Jo=1,ah=2,Yo=3,Xo=4,mc=5,oh=6,vc=7,bc=8,Zo=9,yc=10,Pp=[2,3,7],Np=[3,3,11],lh=[280,256,256,256,40],Cp=[0,1,1,1,0],Tp=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Rp=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],Ep=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],Ip=8,xc=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],wc=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Ka=null,Op=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Fp=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],ch=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Dp=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Mp=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Bp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],qp=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],zs=[],Yn=[],ks=[],$p=1,uh=2,Us=[],$n=[];ye("UpsampleRgbLinePair",Ct,3),ye("UpsampleBgrLinePair",sr,3),ye("UpsampleRgbaLinePair",Jn,4),ye("UpsampleBgraLinePair",Tr,4),ye("UpsampleArgbLinePair",Vr,4),ye("UpsampleRgba4444LinePair",xr,2),ye("UpsampleRgb565LinePair",ar,2);var zp=E.UpsampleRgbLinePair,Up=E.UpsampleBgrLinePair,hh=E.UpsampleRgbaLinePair,dh=E.UpsampleBgraLinePair,fh=E.UpsampleArgbLinePair,ph=E.UpsampleRgba4444LinePair,Wp=E.UpsampleRgb565LinePair,Qo=16,el=1<<Qo-1,Ja=-227,_c=482,Hp=6,gh=0,Vp=i(256),Gp=i(256),Kp=i(256),Jp=i(256),Yp=i(_c-Ja),Xp=i(_c-Ja);cs("YuvToRgbRow",Ct,3),cs("YuvToBgrRow",sr,3),cs("YuvToRgbaRow",Jn,4),cs("YuvToBgraRow",Tr,4),cs("YuvToArgbRow",Vr,4),cs("YuvToRgba4444Row",xr,2),cs("YuvToRgb565Row",ar,2);var mh=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],tl=[0,2,8],Zp=[8,7,6,4,4,2,2,2,1,1,1,1],Qp=1;this.WebPDecodeRGBA=function(o,u,b,w,C){var I=Jo,O=new qi,F=new $r;O.ba=F,F.S=I,F.width=[F.width],F.height=[F.height];var q=F.width,G=F.height,ne=new Qr;if(ne==null||o==null)var de=2;else e(ne!=null),de=zi(o,u,b,ne.width,ne.height,ne.Pd,ne.Qd,ne.format,null);if(de!=0?q=0:(q!=null&&(q[0]=ne.width[0]),G!=null&&(G[0]=ne.height[0]),q=1),q){F.width=F.width[0],F.height=F.height[0],w!=null&&(w[0]=F.width),C!=null&&(C[0]=F.height);e:{if(w=new Nr,(C=new Ia).data=o,C.w=u,C.ha=b,C.kd=1,u=[0],e(C!=null),((o=zi(C.data,C.w,C.ha,null,null,null,u,null,C))==0||o==7)&&u[0]&&(o=4),(u=o)==0){if(e(O!=null),w.data=C.data,w.w=C.w+C.offset,w.ha=C.ha-C.offset,w.put=Sn,w.ac=br,w.bc=jn,w.ma=O,C.xa){if((o=tn())==null){O=1;break e}if(function(fe,oe){var je=[0],ve=[0],se=[0];t:for(;;){if(fe==null)return 0;if(oe==null)return fe.a=2,0;if(fe.l=oe,fe.a=0,Y(fe.m,oe.data,oe.w,oe.ha),!et(fe.m,je,ve,se)){fe.a=3;break t}if(fe.xb=uh,oe.width=je[0],oe.height=ve[0],!Ln(je[0],ve[0],1,fe,null))break t;return 1}return e(fe.a!=0),0}(o,w)){if(w=(u=Ui(w.width,w.height,O.Oa,O.ba))==0){t:{w=o;r:for(;;){if(w==null){w=0;break t}if(e(w.s.yc!=null),e(w.s.Ya!=null),e(0<w.s.Wb),e((b=w.l)!=null),e((C=b.ma)!=null),w.xb!=0){if(w.ca=C.ba,w.tb=C.tb,e(w.ca!=null),!qa(C.Oa,b,Yo)){w.a=2;break r}if(!bs(w,b.width)||b.da)break r;if((b.da||Nt(w.ca.S))&&ce(),11>w.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),w.ca.f.kb.F!=null&&ce()),w.Pb&&0<w.s.ua&&w.s.vb.X==null&&!rt(w.s.vb,w.s.Wa.Xa)){w.a=1;break r}w.xb=0}if(!kn(w,w.V,w.Ba,w.c,w.i,b.o,Rs))break r;C.Dc=w.Ma,w=1;break t}e(w.a!=0),w=0}w=!w}w&&(u=o.a)}else u=o.a}else{if((o=new On)==null){O=1;break e}if(o.Fa=C.na,o.P=C.P,o.qc=C.Sa,Zt(o,w)){if((u=Ui(w.width,w.height,O.Oa,O.ba))==0){if(o.Aa=0,b=O.Oa,e((C=o)!=null),b!=null){if(0<(q=0>(q=b.Md)?0:100<q?255:255*q/100)){for(G=ne=0;4>G;++G)12>(de=C.pb[G]).lc&&(de.ia=q*Zp[0>de.lc?0:de.lc]>>3),ne|=de.ia;ne&&(alert("todo:VP8InitRandom"),C.ia=1)}C.Ga=b.Id,100<C.Ga?C.Ga=100:0>C.Ga&&(C.Ga=0)}ci(o,w)||(u=o.a)}}else u=o.a}u==0&&O.Oa!=null&&O.Oa.fd&&(u=$a(O.ba))}O=u}I=O!=0?null:11>I?F.f.RGBA.eb:F.f.kb.y}else I=null;return I};var vh=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function d(E,V){for(var K="",L=0;L<4;L++)K+=String.fromCharCode(E[V++]);return K}function g(E,V){return(E[V+0]<<0|E[V+1]<<8|E[V+2]<<16)>>>0}function v(E,V){return(E[V+0]<<0|E[V+1]<<8|E[V+2]<<16|E[V+3]<<24)>>>0}new c;var m=[0],f=[0],y=[],_=new c,j=n,x=function(E,V){var K={},L=0,A=!1,U=0,z=0;if(K.frames=[],!function(B,H,Z,Q){for(var le=0;le<Q;le++)if(B[H+le]!=Z.charCodeAt(le))return!0;return!1}(E,V,"RIFF",4)){var te,$;for(v(E,V+=4),V+=8;V<E.length;){var W=d(E,V),Y=v(E,V+=4);V+=4;var J=Y+(1&Y);switch(W){case"VP8 ":case"VP8L":K.frames[L]===void 0&&(K.frames[L]={}),(P=K.frames[L]).src_off=A?z:V-8,P.src_size=U+Y+8,L++,A&&(A=!1,U=0,z=0);break;case"VP8X":(P=K.header={}).feature_flags=E[V];var ie=V+4;P.canvas_width=1+g(E,ie),ie+=3,P.canvas_height=1+g(E,ie),ie+=3;break;case"ALPH":A=!0,U=J+8,z=V-8;break;case"ANIM":(P=K.header).bgcolor=v(E,V),ie=V+4,P.loop_count=(te=E)[($=ie)+0]<<0|te[$+1]<<8,ie+=2;break;case"ANMF":var pe,P;(P=K.frames[L]={}).offset_x=2*g(E,V),V+=3,P.offset_y=2*g(E,V),V+=3,P.width=1+g(E,V),V+=3,P.height=1+g(E,V),V+=3,P.duration=g(E,V),V+=3,pe=E[V++],P.dispose=1&pe,P.blend=pe>>1&1}W!="ANMF"&&(V+=J)}return K}}(j,0);x.response=j,x.rgbaoutput=!0,x.dataurl=!1;var k=x.header?x.header:null,S=x.frames?x.frames:null;if(k){k.loop_counter=k.loop_count,m=[k.canvas_height],f=[k.canvas_width];for(var N=0;N<S.length&&S[N].blend!=0;N++);}var D=S[0],M=_.WebPDecodeRGBA(j,D.src_off,D.src_size,f,m);D.rgba=M,D.imgwidth=f[0],D.imgheight=m[0];for(var R=0;R<f[0]*m[0]*4;R++)y[R]=M[R];return this.width=f,this.height=m,this.data=y,this}(function(n){var e=function(){return typeof uu=="function"},t=function(m,f,y,_){var j=4,x=a;switch(_){case n.image_compression.FAST:j=1,x=i;break;case n.image_compression.MEDIUM:j=6,x=l;break;case n.image_compression.SLOW:j=9,x=c}m=r(m,f,y,x);var k=uu(m,{level:j});return n.__addimage__.arrayBufferToBinaryString(k)},r=function(m,f,y,_){for(var j,x,k,S=m.length/f,N=new Uint8Array(m.length+S),D=g(),M=0;M<S;M+=1){if(k=M*f,j=m.subarray(k,k+f),_)N.set(_(j,y,x),k+M);else{for(var R,E=D.length,V=[];R<E;R+=1)V[R]=D[R](j,y,x);var K=v(V.concat());N.set(V[K],k+M)}x=j}return N},s=function(m){var f=Array.apply([],m);return f.unshift(0),f},i=function(m,f){var y,_=[],j=m.length;_[0]=1;for(var x=0;x<j;x+=1)y=m[x-f]||0,_[x+1]=m[x]-y+256&255;return _},a=function(m,f,y){var _,j=[],x=m.length;j[0]=2;for(var k=0;k<x;k+=1)_=y&&y[k]||0,j[k+1]=m[k]-_+256&255;return j},l=function(m,f,y){var _,j,x=[],k=m.length;x[0]=3;for(var S=0;S<k;S+=1)_=m[S-f]||0,j=y&&y[S]||0,x[S+1]=m[S]+256-(_+j>>>1)&255;return x},c=function(m,f,y){var _,j,x,k,S=[],N=m.length;S[0]=4;for(var D=0;D<N;D+=1)_=m[D-f]||0,j=y&&y[D]||0,x=y&&y[D-f]||0,k=d(_,j,x),S[D+1]=m[D]-k+256&255;return S},d=function(m,f,y){if(m===f&&f===y)return m;var _=Math.abs(f-y),j=Math.abs(m-y),x=Math.abs(m+f-y-y);return _<=j&&_<=x?m:j<=x?f:y},g=function(){return[s,i,a,l,c]},v=function(m){var f=m.map(function(y){return y.reduce(function(_,j){return _+Math.abs(j)},0)});return f.indexOf(Math.min.apply(null,f))};n.processPNG=function(m,f,y,_){var j,x,k,S,N,D,M,R,E,V,K,L,A,U,z,te=this.decode.FLATE_DECODE,$="";if(this.__addimage__.isArrayBuffer(m)&&(m=new Uint8Array(m)),this.__addimage__.isArrayBufferView(m)){if(m=(k=new K2(m)).imgData,x=k.bits,j=k.colorSpace,N=k.colors,[4,6].indexOf(k.colorType)!==-1){if(k.bits===8){E=(R=k.pixelBitlength==32?new Uint32Array(k.decodePixels().buffer):k.pixelBitlength==16?new Uint16Array(k.decodePixels().buffer):new Uint8Array(k.decodePixels().buffer)).length,K=new Uint8Array(E*k.colors),V=new Uint8Array(E);var W,Y=k.pixelBitlength-k.bits;for(U=0,z=0;U<E;U++){for(A=R[U],W=0;W<Y;)K[z++]=A>>>W&255,W+=k.bits;V[U]=A>>>W&255}}if(k.bits===16){E=(R=new Uint32Array(k.decodePixels().buffer)).length,K=new Uint8Array(E*(32/k.pixelBitlength)*k.colors),V=new Uint8Array(E*(32/k.pixelBitlength)),L=k.colors>1,U=0,z=0;for(var J=0;U<E;)A=R[U++],K[z++]=A>>>0&255,L&&(K[z++]=A>>>16&255,A=R[U++],K[z++]=A>>>0&255),V[J++]=A>>>16&255;x=8}_!==n.image_compression.NONE&&e()?(m=t(K,k.width*k.colors,k.colors,_),M=t(V,k.width,1,_)):(m=K,M=V,te=void 0)}if(k.colorType===3&&(j=this.color_spaces.INDEXED,D=k.palette,k.transparency.indexed)){var ie=k.transparency.indexed,pe=0;for(U=0,E=ie.length;U<E;++U)pe+=ie[U];if((pe/=255)===E-1&&ie.indexOf(0)!==-1)S=[ie.indexOf(0)];else if(pe!==E){for(R=k.decodePixels(),V=new Uint8Array(R.length),U=0,E=R.length;U<E;U++)V[U]=ie[R[U]];M=t(V,k.width,1)}}var P=function(B){var H;switch(B){case n.image_compression.FAST:H=11;break;case n.image_compression.MEDIUM:H=13;break;case n.image_compression.SLOW:H=14;break;default:H=12}return H}(_);return te===this.decode.FLATE_DECODE&&($="/Predictor "+P+" "),$+="/Colors "+N+" /BitsPerComponent "+x+" /Columns "+k.width,(this.__addimage__.isArrayBuffer(m)||this.__addimage__.isArrayBufferView(m))&&(m=this.__addimage__.arrayBufferToBinaryString(m)),(M&&this.__addimage__.isArrayBuffer(M)||this.__addimage__.isArrayBufferView(M))&&(M=this.__addimage__.arrayBufferToBinaryString(M)),{alias:y,data:m,index:f,filter:te,decodeParameters:$,transparency:S,palette:D,sMask:M,predictor:P,width:k.width,height:k.height,bitsPerComponent:x,colorSpace:j}}}})(tt.API),function(n){n.processGIF89A=function(e,t,r,s){var i=new J2(e),a=i.width,l=i.height,c=[];i.decodeAndBlitFrameRGBA(0,c);var d={data:c,width:a,height:l},g=new Vc(100).encode(d,100);return n.processJPEG.call(this,g,t,r,s)},n.processGIF87A=n.processGIF89A}(tt.API),Qn.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var e=0;e<n;e++){var t=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:s,green:r,blue:t,quad:i}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Qn.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[n]()}catch(t){Vt.log("bit decode error:"+t)}},Qn.prototype.bit1=function(){var n,e=Math.ceil(this.width/8),t=e%4;for(n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++)for(var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*s*4,l=0;l<8&&8*s+l<this.width;l++){var c=this.palette[i>>7-l&1];this.data[a+4*l]=c.blue,this.data[a+4*l+1]=c.green,this.data[a+4*l+2]=c.red,this.data[a+4*l+3]=255}t!==0&&(this.pos+=4-t)}},Qn.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),e=n%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<n;s++){var i=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*s*4,l=i>>4,c=15&i,d=this.palette[l];if(this.data[a]=d.blue,this.data[a+1]=d.green,this.data[a+2]=d.red,this.data[a+3]=255,2*s+1>=this.width)break;d=this.palette[c],this.data[a+4]=d.blue,this.data[a+4+1]=d.green,this.data[a+4+2]=d.red,this.data[a+4+3]=255}e!==0&&(this.pos+=4-e)}},Qn.prototype.bit8=function(){for(var n=this.width%4,e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*r;if(s<this.palette.length){var a=this.palette[s];this.data[i]=a.red,this.data[i+1]=a.green,this.data[i+2]=a.blue,this.data[i+3]=255}else this.data[i]=255,this.data[i+1]=255,this.data[i+2]=255,this.data[i+3]=255}n!==0&&(this.pos+=4-n)}},Qn.prototype.bit15=function(){for(var n=this.width%3,e=parseInt("11111",2),t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,s=0;s<this.width;s++){var i=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(i&e)/e*255|0,l=(i>>5&e)/e*255|0,c=(i>>10&e)/e*255|0,d=i>>15?255:0,g=r*this.width*4+4*s;this.data[g]=c,this.data[g+1]=l,this.data[g+2]=a,this.data[g+3]=d}this.pos+=n}},Qn.prototype.bit16=function(){for(var n=this.width%3,e=parseInt("11111",2),t=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,i=0;i<this.width;i++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,c=(a>>5&t)/t*255|0,d=(a>>11)/e*255|0,g=s*this.width*4+4*i;this.data[g]=d,this.data[g+1]=c,this.data[g+2]=l,this.data[g+3]=255}this.pos+=n}},Qn.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*t;this.data[a]=i,this.data[a+1]=s,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},Qn.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var e=this.bottom_up?n:this.height-1-n,t=0;t<this.width;t++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*t;this.data[l]=i,this.data[l+1]=s,this.data[l+2]=r,this.data[l+3]=a}},Qn.prototype.getData=function(){return this.data},function(n){n.processBMP=function(e,t,r,s){var i=new Qn(e,!1),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},d=new Vc(100).encode(c,100);return n.processJPEG.call(this,d,t,r,s)}}(tt.API),Cd.prototype.getData=function(){return this.data},function(n){n.processWEBP=function(e,t,r,s){var i=new Cd(e),a=i.width,l=i.height,c={data:i.getData(),width:a,height:l},d=new Vc(100).encode(c,100);return n.processJPEG.call(this,d,t,r,s)}}(tt.API),tt.API.processRGBA=function(n,e,t){for(var r=n.data,s=r.length,i=new Uint8Array(s/4*3),a=new Uint8Array(s/4),l=0,c=0,d=0;d<s;d+=4){var g=r[d],v=r[d+1],m=r[d+2],f=r[d+3];i[l++]=g,i[l++]=v,i[l++]=m,a[c++]=f}var y=this.__addimage__.arrayBufferToBinaryString(i);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:y,index:e,alias:t,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},tt.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},sa=tt.API,bl=sa.getCharWidthsArray=function(n,e){var t,r,s=(e=e||{}).font||this.internal.getFont(),i=e.fontSize||this.internal.getFontSize(),a=e.charSpace||this.internal.getCharSpace(),l=e.widths?e.widths:s.metadata.Unicode.widths,c=l.fof?l.fof:1,d=e.kerning?e.kerning:s.metadata.Unicode.kerning,g=d.fof?d.fof:1,v=e.doKerning!==!1,m=0,f=n.length,y=0,_=l[0]||c,j=[];for(t=0;t<f;t++)r=n.charCodeAt(t),typeof s.metadata.widthOfString=="function"?j.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+a*(1e3/i)||0)/1e3):(m=v&&Kt(d[r])==="object"&&!isNaN(parseInt(d[r][y],10))?d[r][y]/g:0,j.push((l[r]||_)/c+m)),y=r;return j},kd=sa.getStringUnitWidth=function(n,e){var t=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),s=e.charSpace||this.internal.getCharSpace();return sa.processArabic&&(n=sa.processArabic(n)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(n,t,s)/t:bl.apply(this,arguments).reduce(function(i,a){return i+a},0)},Ld=function(n,e,t,r){for(var s=[],i=0,a=n.length,l=0;i!==a&&l+e[i]<t;)l+=e[i],i++;s.push(n.slice(0,i));var c=i;for(l=0;i!==a;)l+e[i]>r&&(s.push(n.slice(c,i)),l=0,c=i),l+=e[i],i++;return c!==i&&s.push(n.slice(c,i)),s},Pd=function(n,e,t){t||(t={});var r,s,i,a,l,c,d,g=[],v=[g],m=t.textIndent||0,f=0,y=0,_=n.split(" "),j=bl.apply(this,[" ",t])[0];if(c=t.lineIndent===-1?_[0].length+2:t.lineIndent||0){var x=Array(c).join(" "),k=[];_.map(function(N){(N=N.split(/\s*\n/)).length>1?k=k.concat(N.map(function(D,M){return(M&&D.length?`
`:"")+D})):k.push(N[0])}),_=k,c=kd.apply(this,[x,t])}for(i=0,a=_.length;i<a;i++){var S=0;if(r=_[i],c&&r[0]==`
`&&(r=r.substr(1),S=1),m+f+(y=(s=bl.apply(this,[r,t])).reduce(function(N,D){return N+D},0))>e||S){if(y>e){for(l=Ld.apply(this,[r,s,e-(m+f),e]),g.push(l.shift()),g=[l.pop()];l.length;)v.push([l.shift()]);y=s.slice(r.length-(g[0]?g[0].length:0)).reduce(function(N,D){return N+D},0)}else g=[r];v.push(g),m=y+c,f=j}else g.push(r),m+=f+y,f=j}return d=c?function(N,D){return(D?x:"")+N.join(" ")}:function(N){return N.join(" ")},v.map(d)},sa.splitTextToSize=function(n,e,t){var r,s=(t=t||{}).fontSize||this.internal.getFontSize(),i=function(g){if(g.widths&&g.kerning)return{widths:g.widths,kerning:g.kerning};var v=this.internal.getFont(g.fontName,g.fontStyle);return v.metadata.Unicode?{widths:v.metadata.Unicode.widths||{0:1},kerning:v.metadata.Unicode.kerning||{}}:{font:v.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}.call(this,t);r=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/s;i.textIndent=t.textIndent?1*t.textIndent*this.internal.scaleFactor/s:0,i.lineIndent=t.lineIndent;var l,c,d=[];for(l=0,c=r.length;l<c;l++)d=d.concat(Pd.apply(this,[r[l],a,i]));return d},function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var e="klmnopqrstuvwxyz",t={},r={},s=0;s<e.length;s++)t[e[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=e[s];var i=function(v){return"0x"+parseInt(v,10).toString(16)},a=n.__fontmetrics__.compress=function(v){var m,f,y,_,j=["{"];for(var x in v){if(m=v[x],isNaN(parseInt(x,10))?f="'"+x+"'":(x=parseInt(x,10),f=(f=i(x).slice(2)).slice(0,-1)+r[f.slice(-1)]),typeof m=="number")m<0?(y=i(m).slice(3),_="-"):(y=i(m).slice(2),_=""),y=_+y.slice(0,-1)+r[y.slice(-1)];else{if(Kt(m)!=="object")throw new Error("Don't know what to do with value type "+Kt(m)+".");y=a(m)}j.push(f+y)}return j.push("}"),j.join("")},l=n.__fontmetrics__.uncompress=function(v){if(typeof v!="string")throw new Error("Invalid argument passed to uncompress.");for(var m,f,y,_,j={},x=1,k=j,S=[],N="",D="",M=v.length-1,R=1;R<M;R+=1)(_=v[R])=="'"?m?(y=m.join(""),m=void 0):m=[]:m?m.push(_):_=="{"?(S.push([k,y]),k={},y=void 0):_=="}"?((f=S.pop())[0][f[1]]=k,y=void 0,k=f[0]):_=="-"?x=-1:y===void 0?t.hasOwnProperty(_)?(N+=t[_],y=parseInt(N,16)*x,x=1,N=""):N+=_:t.hasOwnProperty(_)?(D+=t[_],k[y]=parseInt(D,16)*x,x=1,y=void 0,D=""):D+=_;return j},c={codePages:["WinAnsiEncoding"],WinAnsiEncoding:l("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},d={Unicode:{Courier:c,"Courier-Bold":c,"Courier-BoldOblique":c,"Courier-Oblique":c,Helvetica:c,"Helvetica-Bold":c,"Helvetica-BoldOblique":c,"Helvetica-Oblique":c,"Times-Roman":c,"Times-Bold":c,"Times-BoldItalic":c,"Times-Italic":c}},g={Unicode:{"Courier-Oblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":l("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":l("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:l("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":l("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:l("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":l("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":l("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":l("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":l("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(v){var m=v.font,f=g.Unicode[m.postScriptName];f&&(m.metadata.Unicode={},m.metadata.Unicode.widths=f.widths,m.metadata.Unicode.kerning=f.kerning);var y=d.Unicode[m.postScriptName];y&&(m.metadata.Unicode.encoding=y,m.encoding=y.codePages[0])}])}(tt.API),function(n){var e=function(t){for(var r=t.length,s=new Uint8Array(r),i=0;i<r;i++)s[i]=t.charCodeAt(i);return s};n.API.events.push(["addFont",function(t){var r=void 0,s=t.font,i=t.instance;if(!s.isStandardFont){if(i===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=i.existsFileInVFS(s.postScriptName)===!1?i.loadFile(s.postScriptName):i.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(a,l){l=/^\x00\x01\x00\x00/.test(l)?e(l):e(ho(l)),a.metadata=n.API.TTFFont.open(l),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(s,r)}}])}(tt),function(n){function e(){return(at.canvg?Promise.resolve(at.canvg):si(()=>import("./index.es-DC_IzSnG.js"),__vite__mapDeps([0,1,2]))).catch(function(t){return Promise.reject(new Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t})}tt.API.addSvgAsImage=function(t,r,s,i,a,l,c,d){if(isNaN(r)||isNaN(s))throw Vt.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(a))throw Vt.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var g=document.createElement("canvas");g.width=i,g.height=a;var v=g.getContext("2d");v.fillStyle="#fff",v.fillRect(0,0,g.width,g.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},f=this;return e().then(function(y){return y.fromString(v,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(y){return y.render(m)}).then(function(){f.addImage(g.toDataURL("image/jpeg",1),r,s,i,a,c,d)})}}(),tt.API.putTotalPages=function(n){var e,t=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(n,"g"),t=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),t=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(e,t);return this},tt.API.viewerPreferences=function(n,e){var t;n=n||{},e=e||!1;var r,s,i,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},l=Object.keys(a),c=[],d=0,g=0,v=0;function m(y,_){var j,x=!1;for(j=0;j<y.length;j+=1)y[j]===_&&(x=!0);return x}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),t=this.internal.viewerpreferences.configuration,n==="reset"||e===!0){var f=l.length;for(v=0;v<f;v+=1)t[l[v]].value=t[l[v]].defaultValue,t[l[v]].explicitSet=!1}if(Kt(n)==="object"){for(s in n)if(i=n[s],m(l,s)&&i!==void 0){if(t[s].type==="boolean"&&typeof i=="boolean")t[s].value=i;else if(t[s].type==="name"&&m(t[s].valueSet,i))t[s].value=i;else if(t[s].type==="integer"&&Number.isInteger(i))t[s].value=i;else if(t[s].type==="array"){for(d=0;d<i.length;d+=1)if(r=!0,i[d].length===1&&typeof i[d][0]=="number")c.push(String(i[d]-1));else if(i[d].length>1){for(g=0;g<i[d].length;g+=1)typeof i[d][g]!="number"&&(r=!1);r===!0&&c.push([i[d][0]-1,i[d][1]-1].join(" "))}t[s].value="["+c.join(" ")+"]"}else t[s].value=t[s].defaultValue;t[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var y,_=[];for(y in t)t[y].explicitSet===!0&&(t[y].type==="name"?_.push("/"+y+" /"+t[y].value):_.push("/"+y+" "+t[y].value));_.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+_.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=t,this},function(n){var e=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(r)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),l=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),c=unescape(encodeURIComponent("</x:xmpmeta>")),d=i.length+a.length+l.length+s.length+c.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+d+" >>"),this.internal.write("stream"),this.internal.write(s+i+a+l+c),this.internal.write("endstream"),this.internal.write("endobj")},t=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",t),this.internal.events.subscribe("postPutResources",e)),this}}(tt.API),function(n){var e=n.API,t=e.pdfEscape16=function(i,a){for(var l,c=a.metadata.Unicode.widths,d=["","0","00","000","0000"],g=[""],v=0,m=i.length;v<m;++v){if(l=a.metadata.characterToGlyph(i.charCodeAt(v)),a.metadata.glyIdsUsed.push(l),a.metadata.toUnicode[l]=i.charCodeAt(v),c.indexOf(l)==-1&&(c.push(l),c.push([parseInt(a.metadata.widthOfGlyph(l),10)])),l=="0")return g.join("");l=l.toString(16),g.push(d[4-l.length],l)}return g.join("")},r=function(i){var a,l,c,d,g,v,m;for(g=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,c=[],v=0,m=(l=Object.keys(i).sort(function(f,y){return f-y})).length;v<m;v++)a=l[v],c.length>=100&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar`,c=[]),i[a]!==void 0&&i[a]!==null&&typeof i[a].toString=="function"&&(d=("0000"+i[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),c.push("<"+a+"><"+d+">"));return c.length&&(g+=`
`+c.length+` beginbfchar
`+c.join(`
`)+`
endbfchar
`),g+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,d=a.newObject,g=a.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="Identity-H"){for(var v=l.metadata.Unicode.widths,m=l.metadata.subset.encode(l.metadata.glyIdsUsed,1),f="",y=0;y<m.length;y++)f+=String.fromCharCode(m[y]);var _=d();g({data:f,addLength1:!0,objectId:_}),c("endobj");var j=d();g({data:r(l.metadata.toUnicode),addLength1:!0,objectId:j}),c("endobj");var x=d();c("<<"),c("/Type /FontDescriptor"),c("/FontName /"+ga(l.fontName)),c("/FontFile2 "+_+" 0 R"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/Flags "+l.metadata.flags),c("/StemV "+l.metadata.stemV),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c(">>"),c("endobj");var k=d();c("<<"),c("/Type /Font"),c("/BaseFont /"+ga(l.fontName)),c("/FontDescriptor "+x+" 0 R"),c("/W "+n.API.PDFObject.convert(v)),c("/CIDToGIDMap /Identity"),c("/DW 1000"),c("/Subtype /CIDFontType2"),c("/CIDSystemInfo"),c("<<"),c("/Supplement 0"),c("/Registry (Adobe)"),c("/Ordering ("+l.encoding+")"),c(">>"),c(">>"),c("endobj"),l.objectNumber=d(),c("<<"),c("/Type /Font"),c("/Subtype /Type0"),c("/ToUnicode "+j+" 0 R"),c("/BaseFont /"+ga(l.fontName)),c("/Encoding /"+l.encoding),c("/DescendantFonts ["+k+" 0 R]"),c(">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]),e.events.push(["putFont",function(i){(function(a){var l=a.font,c=a.out,d=a.newObject,g=a.putStream;if(l.metadata instanceof n.API.TTFFont&&l.encoding==="WinAnsiEncoding"){for(var v=l.metadata.rawData,m="",f=0;f<v.length;f++)m+=String.fromCharCode(v[f]);var y=d();g({data:m,addLength1:!0,objectId:y}),c("endobj");var _=d();g({data:r(l.metadata.toUnicode),addLength1:!0,objectId:_}),c("endobj");var j=d();c("<<"),c("/Descent "+l.metadata.decender),c("/CapHeight "+l.metadata.capHeight),c("/StemV "+l.metadata.stemV),c("/Type /FontDescriptor"),c("/FontFile2 "+y+" 0 R"),c("/Flags 96"),c("/FontBBox "+n.API.PDFObject.convert(l.metadata.bbox)),c("/FontName /"+ga(l.fontName)),c("/ItalicAngle "+l.metadata.italicAngle),c("/Ascent "+l.metadata.ascender),c(">>"),c("endobj"),l.objectNumber=d();for(var x=0;x<l.metadata.hmtx.widths.length;x++)l.metadata.hmtx.widths[x]=parseInt(l.metadata.hmtx.widths[x]*(1e3/l.metadata.head.unitsPerEm));c("<</Subtype/TrueType/Type/Font/ToUnicode "+_+" 0 R/BaseFont/"+ga(l.fontName)+"/FontDescriptor "+j+" 0 R/Encoding/"+l.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(l.metadata.hmtx.widths)+">>"),c("endobj"),l.isAlreadyPutted=!0}})(i)}]);var s=function(i){var a,l=i.text||"",c=i.x,d=i.y,g=i.options||{},v=i.mutex||{},m=v.pdfEscape,f=v.activeFontKey,y=v.fonts,_=f,j="",x=0,k="",S=y[_].encoding;if(y[_].encoding!=="Identity-H")return{text:l,x:c,y:d,options:g,mutex:v};for(k=l,_=f,Array.isArray(l)&&(k=l[0]),x=0;x<k.length;x+=1)y[_].metadata.hasOwnProperty("cmap")&&(a=y[_].metadata.cmap.unicode.codeMap[k[x].charCodeAt(0)]),a||k[x].charCodeAt(0)<256&&y[_].metadata.hasOwnProperty("Unicode")?j+=k[x]:j+="";var N="";return parseInt(_.slice(1))<14||S==="WinAnsiEncoding"?N=m(j,_).split("").map(function(D){return D.charCodeAt(0).toString(16)}).join(""):S==="Identity-H"&&(N=t(j,y[_])),v.isHex=!0,{text:N,x:c,y:d,options:g,mutex:v}};e.events.push(["postProcessText",function(i){var a=i.text||"",l=[],c={text:a,x:i.x,y:i.y,options:i.options,mutex:i.mutex};if(Array.isArray(a)){var d=0;for(d=0;d<a.length;d+=1)Array.isArray(a[d])&&a[d].length===3?l.push([s(Object.assign({},c,{text:a[d][0]})).text,a[d][1],a[d][2]]):l.push(s(Object.assign({},c,{text:a[d]})).text);i.text=l}else i.text=s(Object.assign({},c,{text:a})).text}])}(tt),function(n){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0},n.addFileToVFS=function(t,r){return e.call(this),this.internal.vFS[t]=r,this},n.getFileFromVFS=function(t){return e.call(this),this.internal.vFS[t]!==void 0?this.internal.vFS[t]:null}}(tt.API),function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(r){var s,i,a,l,c,d,g,v=e,m=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],f=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],y={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},_={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},j=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],x=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),k=!1,S=0;this.__bidiEngine__={};var N=function(L){var A=L.charCodeAt(),U=A>>8,z=_[U];return z!==void 0?v[256*z+(255&A)]:U===252||U===253?"AL":x.test(U)?"L":U===8?"R":"N"},D=function(L){for(var A,U=0;U<L.length;U++){if((A=N(L.charAt(U)))==="L")return!1;if(A==="R")return!0}return!1},M=function(L,A,U,z){var te,$,W,Y,J=A[z];switch(J){case"L":case"R":k=!1;break;case"N":case"AN":break;case"EN":k&&(J="AN");break;case"AL":k=!0,J="R";break;case"WS":J="N";break;case"CS":z<1||z+1>=A.length||(te=U[z-1])!=="EN"&&te!=="AN"||($=A[z+1])!=="EN"&&$!=="AN"?J="N":k&&($="AN"),J=$===te?$:"N";break;case"ES":J=(te=z>0?U[z-1]:"B")==="EN"&&z+1<A.length&&A[z+1]==="EN"?"EN":"N";break;case"ET":if(z>0&&U[z-1]==="EN"){J="EN";break}if(k){J="N";break}for(W=z+1,Y=A.length;W<Y&&A[W]==="ET";)W++;J=W<Y&&A[W]==="EN"?"EN":"N";break;case"NSM":if(a&&!l){for(Y=A.length,W=z+1;W<Y&&A[W]==="NSM";)W++;if(W<Y){var ie=L[z],pe=ie>=1425&&ie<=2303||ie===64286;if(te=A[W],pe&&(te==="R"||te==="AL")){J="R";break}}}J=z<1||(te=A[z-1])==="B"?"N":U[z-1];break;case"B":k=!1,s=!0,J=S;break;case"S":i=!0,J="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":k=!1;break;case"BN":J="N"}return J},R=function(L,A,U){var z=L.split("");return U&&E(z,U,{hiLevel:S}),z.reverse(),A&&A.reverse(),z.join("")},E=function(L,A,U){var z,te,$,W,Y,J=-1,ie=L.length,pe=0,P=[],B=S?f:m,H=[];for(k=!1,s=!1,i=!1,te=0;te<ie;te++)H[te]=N(L[te]);for($=0;$<ie;$++){if(Y=pe,P[$]=M(L,H,P,$),z=240&(pe=B[Y][y[P[$]]]),pe&=15,A[$]=W=B[pe][5],z>0)if(z===16){for(te=J;te<$;te++)A[te]=1;J=-1}else J=-1;if(B[pe][6])J===-1&&(J=$);else if(J>-1){for(te=J;te<$;te++)A[te]=W;J=-1}H[$]==="B"&&(A[$]=0),U.hiLevel|=W}i&&function(Z,Q,le){for(var ue=0;ue<le;ue++)if(Z[ue]==="S"){Q[ue]=S;for(var he=ue-1;he>=0&&Z[he]==="WS";he--)Q[he]=S}}(H,A,ie)},V=function(L,A,U,z,te){if(!(te.hiLevel<L)){if(L===1&&S===1&&!s)return A.reverse(),void(U&&U.reverse());for(var $,W,Y,J,ie=A.length,pe=0;pe<ie;){if(z[pe]>=L){for(Y=pe+1;Y<ie&&z[Y]>=L;)Y++;for(J=pe,W=Y-1;J<W;J++,W--)$=A[J],A[J]=A[W],A[W]=$,U&&($=U[J],U[J]=U[W],U[W]=$);pe=Y}pe++}}},K=function(L,A,U){var z=L.split(""),te={hiLevel:S};return U||(U=[]),E(z,U,te),function($,W,Y){if(Y.hiLevel!==0&&g)for(var J,ie=0;ie<$.length;ie++)W[ie]===1&&(J=j.indexOf($[ie]))>=0&&($[ie]=j[J+1])}(z,U,te),V(2,z,A,U,te),V(1,z,A,U,te),z.join("")};return this.__bidiEngine__.doBidiReorder=function(L,A,U){if(function(te,$){if($)for(var W=0;W<te.length;W++)$[W]=W;l===void 0&&(l=D(te)),d===void 0&&(d=D(te))}(L,A),a||!c||d)if(a&&c&&l^d)S=l?1:0,L=R(L,A,U);else if(!a&&c&&d)S=l?1:0,L=K(L,A,U),L=R(L,A);else if(!a||l||c||d){if(a&&!c&&l^d)L=R(L,A),l?(S=0,L=K(L,A,U)):(S=1,L=K(L,A,U),L=R(L,A));else if(a&&l&&!c&&d)S=1,L=K(L,A,U),L=R(L,A);else if(!a&&!c&&l^d){var z=g;l?(S=1,L=K(L,A,U),S=0,g=!1,L=K(L,A,U),g=z):(S=0,L=K(L,A,U),L=R(L,A),S=1,g=!1,L=K(L,A,U),g=z,L=R(L,A))}}else S=0,L=K(L,A,U);else S=l?1:0,L=K(L,A,U);return L},this.__bidiEngine__.setOptions=function(L){L&&(a=L.isInputVisual,c=L.isOutputVisual,l=L.isInputRtl,d=L.isOutputRtl,g=L.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],t=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(r){var s=r.text,i=(r.x,r.y,r.options||{}),a=(r.mutex,i.lang,[]);if(i.isInputVisual=typeof i.isInputVisual!="boolean"||i.isInputVisual,t.setOptions(i),Object.prototype.toString.call(s)==="[object Array]"){var l=0;for(a=[],l=0;l<s.length;l+=1)Object.prototype.toString.call(s[l])==="[object Array]"?a.push([t.doBidiReorder(s[l][0]),s[l][1],s[l][2]]):a.push([t.doBidiReorder(s[l])]);r.text=a}else r.text=t.doBidiReorder(s);t.setOptions({isInputVisual:!0})}])}(tt),tt.API.TTFFont=function(){function n(e){var t;if(this.rawData=e,t=this.contents=new ai(e),this.contents.pos=4,t.readString(4)==="ttcf")throw new Error("TTCF not supported.");t.pos=0,this.parse(),this.subset=new u0(this),this.registerTTF()}return n.open=function(e){return new n(e)},n.prototype.parse=function(){return this.directory=new Y2(this.contents),this.head=new Z2(this),this.name=new n0(this),this.cmap=new Qf(this),this.toUnicode={},this.hhea=new Q2(this),this.maxp=new s0(this),this.hmtx=new i0(this),this.post=new t0(this),this.os2=new e0(this),this.loca=new c0(this),this.glyf=new a0(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var e,t,r,s,i;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=function(){var a,l,c,d;for(d=[],a=0,l=(c=this.bbox).length;a<l;a++)e=c[a],d.push(Math.round(e*this.scaleFactor));return d}.call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(t=s>>16)&&(t=-(1+(65535^t))),this.italicAngle=+(t+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(i=this.familyClass)===1||i===2||i===3||i===4||i===5||i===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(e){var t;return((t=this.cmap.unicode)!=null?t.codeMap[e]:void 0)||0},n.prototype.widthOfGlyph=function(e){var t;return t=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*t},n.prototype.widthOfString=function(e,t,r){var s,i,a,l;for(a=0,i=0,l=(e=""+e).length;0<=l?i<l:i>l;i=0<=l?++i:--i)s=e.charCodeAt(i),a+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/t)||0;return a*(t/1e3)},n.prototype.lineHeight=function(e,t){var r;return t==null&&(t=!1),r=t?this.lineGap:0,(this.ascender+r-this.decender)/1e3*e},n}();var is,ai=function(){function n(e){this.data=e??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(e){return this.data[this.pos++]=e},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},n.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},n.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},n.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},n.prototype.readString=function(e){var t,r;for(r=[],t=0;0<=e?t<e:t>e;t=0<=e?++t:--t)r[t]=String.fromCharCode(this.readByte());return r.join("")},n.prototype.writeString=function(e){var t,r,s;for(s=[],t=0,r=e.length;0<=r?t<r:t>r;t=0<=r?++t:--t)s.push(this.writeByte(e.charCodeAt(t)));return s},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(e){return this.writeInt16(e)},n.prototype.readLongLong=function(){var e,t,r,s,i,a,l,c;return e=this.readByte(),t=this.readByte(),r=this.readByte(),s=this.readByte(),i=this.readByte(),a=this.readByte(),l=this.readByte(),c=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^t)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^i)+65536*(255^a)+256*(255^l)+(255^c)+1):72057594037927940*e+281474976710656*t+1099511627776*r+4294967296*s+16777216*i+65536*a+256*l+c},n.prototype.writeLongLong=function(e){var t,r;return t=Math.floor(e/4294967296),r=4294967295&e,this.writeByte(t>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(e){return this.writeInt32(e)},n.prototype.read=function(e){var t,r;for(t=[],r=0;0<=e?r<e:r>e;r=0<=e?++r:--r)t.push(this.readByte());return t},n.prototype.write=function(e){var t,r,s,i;for(i=[],r=0,s=e.length;r<s;r++)t=e[r],i.push(this.writeByte(t));return i},n}(),Y2=function(){var n;function e(t){var r,s,i;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},s=0,i=this.tableCount;0<=i?s<i:s>i;s=0<=i?++s:--s)r={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[r.tag]=r}return e.prototype.encode=function(t){var r,s,i,a,l,c,d,g,v,m,f,y,_;for(_ in f=Object.keys(t).length,c=Math.log(2),v=16*Math.floor(Math.log(f)/c),a=Math.floor(v/c),g=16*f-v,(s=new ai).writeInt(this.scalarType),s.writeShort(f),s.writeShort(v),s.writeShort(a),s.writeShort(g),i=16*f,d=s.pos+i,l=null,y=[],t)for(m=t[_],s.writeString(_),s.writeInt(n(m)),s.writeInt(d),s.writeInt(m.length),y=y.concat(m),_==="head"&&(l=d),d+=m.length;d%4;)y.push(0),d++;return s.write(y),r=2981146554-n(s.data),s.pos=l+8,s.writeUInt32(r),s.data},n=function(t){var r,s,i,a;for(t=ep.call(t);t.length%4;)t.push(0);for(i=new ai(t),s=0,r=0,a=t.length;r<a;r=r+=4)s+=i.readUInt32();return 4294967295&s},e}(),X2={}.hasOwnProperty,vs=function(n,e){for(var t in e)X2.call(e,t)&&(n[t]=e[t]);function r(){this.constructor=n}return r.prototype=e.prototype,n.prototype=new r,n.__super__=e.prototype,n};is=function(){function n(e){var t;this.file=e,t=this.file.directory.tables[this.tag],this.exists=!!t,t&&(this.offset=t.offset,this.length=t.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n}();var Z2=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var r;return(r=new ai).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(t),r.writeShort(this.glyphDataFormat),r.data},e}(),Td=function(){function n(e,t){var r,s,i,a,l,c,d,g,v,m,f,y,_,j,x,k,S;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=t+e.readInt(),v=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(c=0;c<256;++c)this.codeMap[c]=e.readByte();break;case 4:for(f=e.readUInt16(),m=f/2,e.pos+=6,i=function(){var N,D;for(D=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)D.push(e.readUInt16());return D}(),e.pos+=2,_=function(){var N,D;for(D=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)D.push(e.readUInt16());return D}(),d=function(){var N,D;for(D=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)D.push(e.readUInt16());return D}(),g=function(){var N,D;for(D=[],c=N=0;0<=m?N<m:N>m;c=0<=m?++N:--N)D.push(e.readUInt16());return D}(),s=(this.length-e.pos+this.offset)/2,l=function(){var N,D;for(D=[],c=N=0;0<=s?N<s:N>s;c=0<=s?++N:--N)D.push(e.readUInt16());return D}(),c=x=0,S=i.length;x<S;c=++x)for(j=i[c],r=k=y=_[c];y<=j?k<=j:k>=j;r=y<=j?++k:--k)g[c]===0?a=r+d[c]:(a=l[g[c]/2+(r-y)-(m-c)]||0)!==0&&(a+=d[c]),this.codeMap[r]=65535&a}e.pos=v}return n.encode=function(e,t){var r,s,i,a,l,c,d,g,v,m,f,y,_,j,x,k,S,N,D,M,R,E,V,K,L,A,U,z,te,$,W,Y,J,ie,pe,P,B,H,Z,Q,le,ue,he,ge,Ae,Fe;switch(z=new ai,a=Object.keys(e).sort(function(Ee,rt){return Ee-rt}),t){case"macroman":for(_=0,j=function(){var Ee=[];for(y=0;y<256;++y)Ee.push(0);return Ee}(),k={0:0},i={},te=0,J=a.length;te<J;te++)k[he=e[s=a[te]]]==null&&(k[he]=++_),i[s]={old:e[s],new:k[e[s]]},j[s]=k[e[s]];return z.writeUInt16(1),z.writeUInt16(0),z.writeUInt32(12),z.writeUInt16(0),z.writeUInt16(262),z.writeUInt16(0),z.write(j),{charMap:i,subtable:z.data,maxGlyphID:_+1};case"unicode":for(A=[],v=[],S=0,k={},r={},x=d=null,$=0,ie=a.length;$<ie;$++)k[D=e[s=a[$]]]==null&&(k[D]=++S),r[s]={old:D,new:k[D]},l=k[D]-s,x!=null&&l===d||(x&&v.push(x),A.push(s),d=l),x=s;for(x&&v.push(x),v.push(65535),A.push(65535),K=2*(V=A.length),E=2*Math.pow(Math.log(V)/Math.LN2,2),m=Math.log(E/2)/Math.LN2,R=2*V-E,c=[],M=[],f=[],y=W=0,pe=A.length;W<pe;y=++W){if(L=A[y],g=v[y],L===65535){c.push(0),M.push(0);break}if(L-(U=r[L].new)>=32768)for(c.push(0),M.push(2*(f.length+V-y)),s=Y=L;L<=g?Y<=g:Y>=g;s=L<=g?++Y:--Y)f.push(r[s].new);else c.push(U-L),M.push(0)}for(z.writeUInt16(3),z.writeUInt16(1),z.writeUInt32(12),z.writeUInt16(4),z.writeUInt16(16+8*V+2*f.length),z.writeUInt16(0),z.writeUInt16(K),z.writeUInt16(E),z.writeUInt16(m),z.writeUInt16(R),le=0,P=v.length;le<P;le++)s=v[le],z.writeUInt16(s);for(z.writeUInt16(0),ue=0,B=A.length;ue<B;ue++)s=A[ue],z.writeUInt16(s);for(ge=0,H=c.length;ge<H;ge++)l=c[ge],z.writeUInt16(l);for(Ae=0,Z=M.length;Ae<Z;Ae++)N=M[Ae],z.writeUInt16(N);for(Fe=0,Q=f.length;Fe<Q;Fe++)_=f[Fe],z.writeUInt16(_);return{charMap:r,subtable:z.data,maxGlyphID:S+1}}},n}(),Qf=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="cmap",e.prototype.parse=function(t){var r,s,i;for(t.pos=this.offset,this.version=t.readUInt16(),i=t.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=i?s<i:s>i;s=0<=i?++s:--s)r=new Td(t,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},e.encode=function(t,r){var s,i;return r==null&&(r="macroman"),s=Td.encode(t,r),(i=new ai).writeUInt16(0),i.writeUInt16(1),s.table=i.data.concat(s.subtable),s},e}(),Q2=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),e0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(t.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(t.readInt());return s}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(t.readInt());return s}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),t0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="post",e.prototype.parse=function(t){var r,s,i;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:break;case 131072:var a;for(s=t.readUInt16(),this.glyphNameIndex=[],a=0;0<=s?a<s:a>s;a=0<=s?++a:--a)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],i=[];t.pos<this.offset+this.length;)r=t.readByte(),i.push(this.names.push(t.readString(r)));return i;case 151552:return s=t.readUInt16(),this.offsets=t.read(s);case 196608:break;case 262144:return this.map=function(){var l,c,d;for(d=[],a=l=0,c=this.file.maxp.numGlyphs;0<=c?l<c:l>c;a=0<=c?++l:--l)d.push(t.readUInt32());return d}.call(this)}},e}(),r0=function(n,e){this.raw=n,this.length=n.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},n0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="name",e.prototype.parse=function(t){var r,s,i,a,l,c,d,g,v,m,f;for(t.pos=this.offset,t.readShort(),r=t.readShort(),c=t.readShort(),s=[],a=0;0<=r?a<r:a>r;a=0<=r?++a:--a)s.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+c+t.readShort()});for(d={},a=v=0,m=s.length;v<m;a=++v)i=s[a],t.pos=i.offset,g=t.readString(i.length),l=new r0(g,i),d[f=i.nameID]==null&&(d[f]=[]),d[i.nameID].push(l);this.strings=d,this.copyright=d[0],this.fontFamily=d[1],this.fontSubfamily=d[2],this.uniqueSubfamily=d[3],this.fontName=d[4],this.version=d[5];try{this.postscriptName=d[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=d[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=d[7],this.manufacturer=d[8],this.designer=d[9],this.description=d[10],this.vendorUrl=d[11],this.designerUrl=d[12],this.license=d[13],this.licenseUrl=d[14],this.preferredFamily=d[15],this.preferredSubfamily=d[17],this.compatibleFull=d[18],this.sampleText=d[19]},e}(),s0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),i0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="hmtx",e.prototype.parse=function(t){var r,s,i,a,l,c,d;for(t.pos=this.offset,this.metrics=[],r=0,c=this.file.hhea.numberOfMetrics;0<=c?r<c:r>c;r=0<=c?++r:--r)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(i=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var g,v;for(v=[],r=g=0;0<=i?g<i:g>i;r=0<=i?++g:--g)v.push(t.readInt16());return v}(),this.widths=function(){var g,v,m,f;for(f=[],g=0,v=(m=this.metrics).length;g<v;g++)a=m[g],f.push(a.advance);return f}.call(this),s=this.widths[this.widths.length-1],d=[],r=l=0;0<=i?l<i:l>i;r=0<=i?++l:--l)d.push(this.widths.push(s));return d},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),ep=[].slice,a0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var r,s,i,a,l,c,d,g,v,m;return t in this.cache?this.cache[t]:(a=this.file.loca,r=this.file.contents,s=a.indexOf(t),(i=a.lengthOf(t))===0?this.cache[t]=null:(r.pos=this.offset+s,l=(c=new ai(r.read(i))).readShort(),g=c.readShort(),m=c.readShort(),d=c.readShort(),v=c.readShort(),this.cache[t]=l===-1?new l0(c,g,m,d,v):new o0(c,l,g,m,d,v),this.cache[t]))},e.prototype.encode=function(t,r,s){var i,a,l,c,d;for(l=[],a=[],c=0,d=r.length;c<d;c++)i=t[r[c]],a.push(l.length),i&&(l=l.concat(i.encode(s)));return a.push(l.length),{table:l,offsets:a}},e}(),o0=function(){function n(e,t,r,s,i,a){this.raw=e,this.numberOfContours=t,this.xMin=r,this.yMin=s,this.xMax=i,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n}(),l0=function(){function n(e,t,r,s,i){var a,l;for(this.raw=e,this.xMin=t,this.yMin=r,this.xMax=s,this.yMax=i,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;l=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&l;)a.pos+=1&l?4:2,128&l?a.pos+=8:64&l?a.pos+=4:8&l&&(a.pos+=2)}return n.prototype.encode=function(){var e,t,r;for(t=new ai(ep.call(this.raw.data)),e=0,r=this.glyphIDs.length;e<r;++e)t.pos=this.glyphOffsets[e];return t.data},n}(),c0=function(n){function e(){return e.__super__.constructor.apply(this,arguments)}return vs(e,is),e.prototype.tag="loca",e.prototype.parse=function(t){var r,s;return t.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=2)a.push(2*t.readUInt16());return a}.call(this):function(){var i,a;for(a=[],s=0,i=this.length;s<i;s+=4)a.push(t.readUInt32());return a}.call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,r){for(var s=new Uint32Array(this.offsets.length),i=0,a=0,l=0;l<s.length;++l)if(s[l]=i,a<r.length&&r[a]==l){++a,s[l]=i;var c=this.offsets[l],d=this.offsets[l+1]-c;d>0&&(i+=d)}for(var g=new Array(4*s.length),v=0;v<s.length;++v)g[4*v+3]=255&s[v],g[4*v+2]=(65280&s[v])>>8,g[4*v+1]=(16711680&s[v])>>16,g[4*v]=(4278190080&s[v])>>24;return g},e}(),u0=function(){function n(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var e,t,r,s,i;for(t in s=this.font.cmap.tables[0].codeMap,e={},i=this.subset)r=i[t],e[t]=s[r];return e},n.prototype.glyphsFor=function(e){var t,r,s,i,a,l,c;for(s={},a=0,l=e.length;a<l;a++)s[i=e[a]]=this.font.glyf.glyphFor(i);for(i in t=[],s)(r=s[i])!=null&&r.compound&&t.push.apply(t,r.glyphIDs);if(t.length>0)for(i in c=this.glyphsFor(t))r=c[i],s[i]=r;return s},n.prototype.encode=function(e,t){var r,s,i,a,l,c,d,g,v,m,f,y,_,j,x;for(s in r=Qf.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(e),f={0:0},x=r.charMap)f[(c=x[s]).old]=c.new;for(y in m=r.maxGlyphID,a)y in f||(f[y]=m++);return g=function(k){var S,N;for(S in N={},k)N[k[S]]=S;return N}(f),v=Object.keys(g).sort(function(k,S){return k-S}),_=function(){var k,S,N;for(N=[],k=0,S=v.length;k<S;k++)l=v[k],N.push(g[l]);return N}(),i=this.font.glyf.encode(a,_,f),d=this.font.loca.encode(i.offsets,_),j={cmap:this.font.cmap.raw(),glyf:i.table,loca:d,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(t)},this.font.os2.exists&&(j["OS/2"]=this.font.os2.raw()),this.font.directory.encode(j)},n}();tt.API.PDFObject=function(){var n;function e(){}return n=function(t,r){return(Array(r+1).join("0")+t).slice(-r)},e.convert=function(t){var r,s,i,a;if(Array.isArray(t))return"["+function(){var l,c,d;for(d=[],l=0,c=t.length;l<c;l++)r=t[l],d.push(e.convert(r));return d}().join(" ")+"]";if(typeof t=="string")return"/"+t;if(t?.isString)return"("+t+")";if(t instanceof Date)return"(D:"+n(t.getUTCFullYear(),4)+n(t.getUTCMonth(),2)+n(t.getUTCDate(),2)+n(t.getUTCHours(),2)+n(t.getUTCMinutes(),2)+n(t.getUTCSeconds(),2)+"Z)";if({}.toString.call(t)==="[object Object]"){for(s in i=["<<"],t)a=t[s],i.push("/"+s+" "+e.convert(a));return i.push(">>"),i.join(`
`)}return""+t},e}();const h0=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:z2,AcroFormAppearance:Ve,AcroFormButton:Pr,AcroFormCheckBox:go,AcroFormChoiceField:Ni,AcroFormComboBox:Ti,AcroFormEditBox:fo,AcroFormListBox:Ci,AcroFormPasswordField:mo,AcroFormPushButton:po,AcroFormRadioButton:Ri,AcroFormTextField:ni,GState:_o,ShadingPattern:Qs,TilingPattern:Li,default:tt,jsPDF:tt},Symbol.toStringTag,{value:"Module"}));var tp={exports:{}};const d0=Cu(h0);/*!
 * 
 *               jsPDF AutoTable plugin v3.8.4
 *
 *               Copyright (c) 2024 Simon Bengtsson, https://github.com/simonbengtsson/jsPDF-AutoTable
 *               Licensed under the MIT License.
 *               http://opensource.org/licenses/mit-license
 *
 */(function(n,e){(function(r,s){n.exports=s(function(){try{return d0}catch{}}())})(typeof globalThis<"u"?globalThis:typeof hn<"u"?hn:typeof window<"u"?window:typeof self<"u"?self:hn,function(t){return function(){var r={172:function(l,c){var d=this&&this.__extends||function(){var m=function(f,y){return m=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(_,j){_.__proto__=j}||function(_,j){for(var x in j)Object.prototype.hasOwnProperty.call(j,x)&&(_[x]=j[x])},m(f,y)};return function(f,y){if(typeof y!="function"&&y!==null)throw new TypeError("Class extends value "+String(y)+" is not a constructor or null");m(f,y);function _(){this.constructor=f}f.prototype=y===null?Object.create(y):(_.prototype=y.prototype,new _)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.CellHookData=c.HookData=void 0;var g=function(){function m(f,y,_){this.table=y,this.pageNumber=y.pageNumber,this.pageCount=this.pageNumber,this.settings=y.settings,this.cursor=_,this.doc=f.getDocument()}return m}();c.HookData=g;var v=function(m){d(f,m);function f(y,_,j,x,k,S){var N=m.call(this,y,_,S)||this;return N.cell=j,N.row=x,N.column=k,N.section=x.section,N}return f}(g);c.CellHookData=v},340:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0});var g=d(4),v=d(136),m=d(744),f=d(776),y=d(664),_=d(972);function j(x){x.API.autoTable=function(){for(var k=[],S=0;S<arguments.length;S++)k[S]=arguments[S];var N;k.length===1?N=k[0]:(console.error("Use of deprecated autoTable initiation"),N=k[2]||{},N.columns=k[0],N.body=k[1]);var D=(0,f.parseInput)(this,N),M=(0,_.createTable)(this,D);return(0,y.drawTable)(this,M),this},x.API.lastAutoTable=!1,x.API.previousAutoTable=!1,x.API.autoTable.previous=!1,x.API.autoTableText=function(k,S,N,D){(0,v.default)(k,S,N,D,this)},x.API.autoTableSetDefaults=function(k){return m.DocHandler.setDefaults(k,this),this},x.autoTableSetDefaults=function(k,S){m.DocHandler.setDefaults(k,S)},x.API.autoTableHtmlToJson=function(k,S){var N;if(S===void 0&&(S=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var D=new m.DocHandler(this),M=(0,g.parseHtml)(D,k,window,S,!1),R=M.head,E=M.body,V=((N=R[0])===null||N===void 0?void 0:N.map(function(K){return K.content}))||[];return{columns:V,rows:E,data:E}},x.API.autoTableEndPosY=function(){console.error("Use of deprecated function: autoTableEndPosY. Use doc.lastAutoTable.finalY instead.");var k=this.lastAutoTable;return k&&k.finalY?k.finalY:0},x.API.autoTableAddPageContent=function(k){return console.error("Use of deprecated function: autoTableAddPageContent. Use jsPDF.autoTableSetDefaults({didDrawPage: () => {}}) instead."),x.API.autoTable.globalDefaults||(x.API.autoTable.globalDefaults={}),x.API.autoTable.globalDefaults.addPageContent=k,this},x.API.autoTableAddPage=function(){return console.error("Use of deprecated function: autoTableAddPage. Use doc.addPage()"),this.addPage(),this}}c.default=j},136:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(g,v,m,f,y){f=f||{};var _=1.15,j=y.internal.scaleFactor,x=y.internal.getFontSize()/j,k=y.getLineHeightFactor?y.getLineHeightFactor():_,S=x*k,N=/\r\n|\r|\n/g,D="",M=1;if((f.valign==="middle"||f.valign==="bottom"||f.halign==="center"||f.halign==="right")&&(D=typeof g=="string"?g.split(N):g,M=D.length||1),m+=x*(2-_),f.valign==="middle"?m-=M/2*S:f.valign==="bottom"&&(m-=M*S),f.halign==="center"||f.halign==="right"){var R=x;if(f.halign==="center"&&(R*=.5),D&&M>=1){for(var E=0;E<D.length;E++)y.text(D[E],v-y.getStringUnitWidth(D[E])*R,m),m+=S;return y}v-=y.getStringUnitWidth(g)*R}return f.halign==="justify"?y.text(g,v,m,{maxWidth:f.maxWidth||100,align:"justify"}):y.text(g,v,m),y}c.default=d},420:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.getPageAvailableWidth=c.parseSpacing=c.getFillStyle=c.addTableBorder=c.getStringWidth=void 0;function d(y,_,j){j.applyStyles(_,!0);var x=Array.isArray(y)?y:[y],k=x.map(function(S){return j.getTextWidth(S)}).reduce(function(S,N){return Math.max(S,N)},0);return k}c.getStringWidth=d;function g(y,_,j,x){var k=_.settings.tableLineWidth,S=_.settings.tableLineColor;y.applyStyles({lineWidth:k,lineColor:S});var N=v(k,!1);N&&y.rect(j.x,j.y,_.getWidth(y.pageSize().width),x.y-j.y,N)}c.addTableBorder=g;function v(y,_){var j=y>0,x=_||_===0;return j&&x?"DF":j?"S":x?"F":null}c.getFillStyle=v;function m(y,_){var j,x,k,S;if(y=y||_,Array.isArray(y)){if(y.length>=4)return{top:y[0],right:y[1],bottom:y[2],left:y[3]};if(y.length===3)return{top:y[0],right:y[1],bottom:y[2],left:y[1]};if(y.length===2)return{top:y[0],right:y[1],bottom:y[0],left:y[1]};y.length===1?y=y[0]:y=_}return typeof y=="object"?(typeof y.vertical=="number"&&(y.top=y.vertical,y.bottom=y.vertical),typeof y.horizontal=="number"&&(y.right=y.horizontal,y.left=y.horizontal),{left:(j=y.left)!==null&&j!==void 0?j:_,top:(x=y.top)!==null&&x!==void 0?x:_,right:(k=y.right)!==null&&k!==void 0?k:_,bottom:(S=y.bottom)!==null&&S!==void 0?S:_}):(typeof y!="number"&&(y=_),{top:y,right:y,bottom:y,left:y})}c.parseSpacing=m;function f(y,_){var j=m(_.settings.margin,0);return y.pageSize().width-(j.left+j.right)}c.getPageAvailableWidth=f},796:function(l,c){var d=this&&this.__extends||function(){var f=function(y,_){return f=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(j,x){j.__proto__=x}||function(j,x){for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(j[k]=x[k])},f(y,_)};return function(y,_){if(typeof _!="function"&&_!==null)throw new TypeError("Class extends value "+String(_)+" is not a constructor or null");f(y,_);function j(){this.constructor=y}y.prototype=_===null?Object.create(_):(j.prototype=_.prototype,new j)}}();Object.defineProperty(c,"__esModule",{value:!0}),c.getTheme=c.defaultStyles=c.HtmlRowInput=void 0;var g=function(f){d(y,f);function y(_){var j=f.call(this)||this;return j._element=_,j}return y}(Array);c.HtmlRowInput=g;function v(f){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/f,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}c.defaultStyles=v;function m(f){var y={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return y[f]}c.getTheme=m},903:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseCss=void 0;var g=d(420);function v(j,x,k,S,N){var D={},M=1.3333333333333333,R=f(x,function(J){return N.getComputedStyle(J).backgroundColor});R!=null&&(D.fillColor=R);var E=f(x,function(J){return N.getComputedStyle(J).color});E!=null&&(D.textColor=E);var V=_(S,k);V&&(D.cellPadding=V);var K="borderTopColor",L=M*k,A=S.borderTopWidth;if(S.borderBottomWidth===A&&S.borderRightWidth===A&&S.borderLeftWidth===A){var U=(parseFloat(A)||0)/L;U&&(D.lineWidth=U)}else D.lineWidth={top:(parseFloat(S.borderTopWidth)||0)/L,right:(parseFloat(S.borderRightWidth)||0)/L,bottom:(parseFloat(S.borderBottomWidth)||0)/L,left:(parseFloat(S.borderLeftWidth)||0)/L},D.lineWidth.top||(D.lineWidth.right?K="borderRightColor":D.lineWidth.bottom?K="borderBottomColor":D.lineWidth.left&&(K="borderLeftColor"));var z=f(x,function(J){return N.getComputedStyle(J)[K]});z!=null&&(D.lineColor=z);var te=["left","right","center","justify"];te.indexOf(S.textAlign)!==-1&&(D.halign=S.textAlign),te=["middle","bottom","top"],te.indexOf(S.verticalAlign)!==-1&&(D.valign=S.verticalAlign);var $=parseInt(S.fontSize||"");isNaN($)||(D.fontSize=$/M);var W=m(S);W&&(D.fontStyle=W);var Y=(S.fontFamily||"").toLowerCase();return j.indexOf(Y)!==-1&&(D.font=Y),D}c.parseCss=v;function m(j){var x="";return(j.fontWeight==="bold"||j.fontWeight==="bolder"||parseInt(j.fontWeight)>=700)&&(x="bold"),(j.fontStyle==="italic"||j.fontStyle==="oblique")&&(x+="italic"),x}function f(j,x){var k=y(j,x);if(!k)return null;var S=k.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!S||!Array.isArray(S))return null;var N=[parseInt(S[1]),parseInt(S[2]),parseInt(S[3])],D=parseInt(S[4]);return D===0||isNaN(N[0])||isNaN(N[1])||isNaN(N[2])?null:N}function y(j,x){var k=x(j);return k==="rgba(0, 0, 0, 0)"||k==="transparent"||k==="initial"||k==="inherit"?j.parentElement==null?null:y(j.parentElement,x):k}function _(j,x){var k=[j.paddingTop,j.paddingRight,j.paddingBottom,j.paddingLeft],S=96/(72/x),N=(parseInt(j.lineHeight)-parseInt(j.fontSize))/x/2,D=k.map(function(R){return parseInt(R||"0")/S}),M=(0,g.parseSpacing)(D,0);return N>M.top&&(M.top=N),N>M.bottom&&(M.bottom=N),M}},744:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.DocHandler=void 0;var d={},g=function(){function v(m){this.jsPDFDocument=m,this.userStyles={textColor:m.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:m.internal.getFontSize(),fontStyle:m.internal.getFont().fontStyle,font:m.internal.getFont().fontName,lineWidth:m.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:m.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return v.setDefaults=function(m,f){f===void 0&&(f=null),f?f.__autoTableDocumentDefaults=m:d=m},v.unifyColor=function(m){return Array.isArray(m)?m:typeof m=="number"?[m,m,m]:typeof m=="string"?[m]:null},v.prototype.applyStyles=function(m,f){var y,_,j;f===void 0&&(f=!1),m.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(m.fontStyle);var x=this.jsPDFDocument.internal.getFont(),k=x.fontStyle,S=x.fontName;if(m.font&&(S=m.font),m.fontStyle){k=m.fontStyle;var N=this.getFontList()[S];N&&N.indexOf(k)===-1&&(this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(N[0]),k=N[0])}if(this.jsPDFDocument.setFont(S,k),m.fontSize&&this.jsPDFDocument.setFontSize(m.fontSize),!f){var D=v.unifyColor(m.fillColor);D&&(y=this.jsPDFDocument).setFillColor.apply(y,D),D=v.unifyColor(m.textColor),D&&(_=this.jsPDFDocument).setTextColor.apply(_,D),D=v.unifyColor(m.lineColor),D&&(j=this.jsPDFDocument).setDrawColor.apply(j,D),typeof m.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(m.lineWidth)}},v.prototype.splitTextToSize=function(m,f,y){return this.jsPDFDocument.splitTextToSize(m,f,y)},v.prototype.rect=function(m,f,y,_,j){return this.jsPDFDocument.rect(m,f,y,_,j)},v.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},v.prototype.getTextWidth=function(m){return this.jsPDFDocument.getTextWidth(m)},v.prototype.getDocument=function(){return this.jsPDFDocument},v.prototype.setPage=function(m){this.jsPDFDocument.setPage(m)},v.prototype.addPage=function(){return this.jsPDFDocument.addPage()},v.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},v.prototype.getGlobalOptions=function(){return d||{}},v.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},v.prototype.pageSize=function(){var m=this.jsPDFDocument.internal.pageSize;return m.width==null&&(m={width:m.getWidth(),height:m.getHeight()}),m},v.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},v.prototype.getLineHeightFactor=function(){var m=this.jsPDFDocument;return m.getLineHeightFactor?m.getLineHeightFactor():1.15},v.prototype.getLineHeight=function(m){return m/this.scaleFactor()*this.getLineHeightFactor()},v.prototype.pageNumber=function(){var m=this.jsPDFDocument.internal.getCurrentPageInfo();return m?m.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},v}();c.DocHandler=g},4:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseHtml=void 0;var g=d(903),v=d(796);function m(_,j,x,k,S){var N,D;k===void 0&&(k=!1),S===void 0&&(S=!1);var M;typeof j=="string"?M=x.document.querySelector(j):M=j;var R=Object.keys(_.getFontList()),E=_.scaleFactor(),V=[],K=[],L=[];if(!M)return console.error("Html table could not be found with input: ",j),{head:V,body:K,foot:L};for(var A=0;A<M.rows.length;A++){var U=M.rows[A],z=(D=(N=U?.parentElement)===null||N===void 0?void 0:N.tagName)===null||D===void 0?void 0:D.toLowerCase(),te=f(R,E,x,U,k,S);te&&(z==="thead"?V.push(te):z==="tfoot"?L.push(te):K.push(te))}return{head:V,body:K,foot:L}}c.parseHtml=m;function f(_,j,x,k,S,N){for(var D=new v.HtmlRowInput(k),M=0;M<k.cells.length;M++){var R=k.cells[M],E=x.getComputedStyle(R);if(S||E.display!=="none"){var V=void 0;N&&(V=(0,g.parseCss)(_,R,j,E,x)),D.push({rowSpan:R.rowSpan,colSpan:R.colSpan,styles:V,_element:R,content:y(R)})}}var K=x.getComputedStyle(k);if(D.length>0&&(S||K.display!=="none"))return D}function y(_){var j=_.cloneNode(!0);return j.innerHTML=j.innerHTML.replace(/\n/g,"").replace(/ +/g," "),j.innerHTML=j.innerHTML.split(/<br.*?>/).map(function(x){return x.trim()}).join(`
`),j.innerText||j.textContent||""}},776:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.parseInput=void 0;var g=d(4),v=d(356),m=d(420),f=d(744),y=d(792);function _(M,R){var E=new f.DocHandler(M),V=E.getDocumentOptions(),K=E.getGlobalOptions();(0,y.default)(E,K,V,R);var L=(0,v.assign)({},K,V,R),A;typeof window<"u"&&(A=window);var U=j(K,V,R),z=x(K,V,R),te=k(E,L),$=N(E,L,A);return{id:R.tableId,content:$,hooks:z,styles:U,settings:te}}c.parseInput=_;function j(M,R,E){for(var V={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},K=function(z){if(z==="columnStyles"){var te=M[z],$=R[z],W=E[z];V.columnStyles=(0,v.assign)({},te,$,W)}else{var Y=[M,R,E],J=Y.map(function(ie){return ie[z]||{}});V[z]=(0,v.assign)({},J[0],J[1],J[2])}},L=0,A=Object.keys(V);L<A.length;L++){var U=A[L];K(U)}return V}function x(M,R,E){for(var V=[M,R,E],K={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},L=0,A=V;L<A.length;L++){var U=A[L];U.didParseCell&&K.didParseCell.push(U.didParseCell),U.willDrawCell&&K.willDrawCell.push(U.willDrawCell),U.didDrawCell&&K.didDrawCell.push(U.didDrawCell),U.willDrawPage&&K.willDrawPage.push(U.willDrawPage),U.didDrawPage&&K.didDrawPage.push(U.didDrawPage)}return K}function k(M,R){var E,V,K,L,A,U,z,te,$,W,Y,J,ie=(0,m.parseSpacing)(R.margin,40/M.scaleFactor()),pe=(E=S(M,R.startY))!==null&&E!==void 0?E:ie.top,P;R.showFoot===!0?P="everyPage":R.showFoot===!1?P="never":P=(V=R.showFoot)!==null&&V!==void 0?V:"everyPage";var B;R.showHead===!0?B="everyPage":R.showHead===!1?B="never":B=(K=R.showHead)!==null&&K!==void 0?K:"everyPage";var H=(L=R.useCss)!==null&&L!==void 0?L:!1,Z=R.theme||(H?"plain":"striped"),Q=!!R.horizontalPageBreak,le=(A=R.horizontalPageBreakRepeat)!==null&&A!==void 0?A:null;return{includeHiddenHtml:(U=R.includeHiddenHtml)!==null&&U!==void 0?U:!1,useCss:H,theme:Z,startY:pe,margin:ie,pageBreak:(z=R.pageBreak)!==null&&z!==void 0?z:"auto",rowPageBreak:(te=R.rowPageBreak)!==null&&te!==void 0?te:"auto",tableWidth:($=R.tableWidth)!==null&&$!==void 0?$:"auto",showHead:B,showFoot:P,tableLineWidth:(W=R.tableLineWidth)!==null&&W!==void 0?W:0,tableLineColor:(Y=R.tableLineColor)!==null&&Y!==void 0?Y:200,horizontalPageBreak:Q,horizontalPageBreakRepeat:le,horizontalPageBreakBehaviour:(J=R.horizontalPageBreakBehaviour)!==null&&J!==void 0?J:"afterAllRows"}}function S(M,R){var E=M.getLastAutoTable(),V=M.scaleFactor(),K=M.pageNumber(),L=!1;if(E&&E.startPageNumber){var A=E.startPageNumber+E.pageNumber-1;L=A===K}return typeof R=="number"?R:(R==null||R===!1)&&L&&E?.finalY!=null?E.finalY+20/V:null}function N(M,R,E){var V=R.head||[],K=R.body||[],L=R.foot||[];if(R.html){var A=R.includeHiddenHtml;if(E){var U=(0,g.parseHtml)(M,R.html,E,A,R.useCss)||{};V=U.head||V,K=U.body||V,L=U.foot||V}else console.error("Cannot parse html in non browser environment")}var z=R.columns||D(V,K,L);return{columns:z,head:V,body:K,foot:L}}function D(M,R,E){var V=M[0]||R[0]||E[0]||[],K=[];return Object.keys(V).filter(function(L){return L!=="_element"}).forEach(function(L){var A=1,U;Array.isArray(V)?U=V[parseInt(L)]:U=V[L],typeof U=="object"&&!Array.isArray(U)&&(A=U?.colSpan||1);for(var z=0;z<A;z++){var te=void 0;Array.isArray(V)?te=K.length:te=L+(z>0?"_".concat(z):"");var $={dataKey:te};K.push($)}}),K}},792:function(l,c){Object.defineProperty(c,"__esModule",{value:!0});function d(v,m,f,y){for(var _=function(S){S&&typeof S!="object"&&console.error("The options parameter should be of type object, is: "+typeof S),typeof S.extendWidth<"u"&&(S.tableWidth=S.extendWidth?"auto":"wrap",console.error("Use of deprecated option: extendWidth, use tableWidth instead.")),typeof S.margins<"u"&&(typeof S.margin>"u"&&(S.margin=S.margins),console.error("Use of deprecated option: margins, use margin instead.")),S.startY&&typeof S.startY!="number"&&(console.error("Invalid value for startY option",S.startY),delete S.startY),!S.didDrawPage&&(S.afterPageContent||S.beforePageContent||S.afterPageAdd)&&(console.error("The afterPageContent, beforePageContent and afterPageAdd hooks are deprecated. Use didDrawPage instead"),S.didDrawPage=function(L){v.applyStyles(v.userStyles),S.beforePageContent&&S.beforePageContent(L),v.applyStyles(v.userStyles),S.afterPageContent&&S.afterPageContent(L),v.applyStyles(v.userStyles),S.afterPageAdd&&L.pageNumber>1&&L.afterPageAdd(L),v.applyStyles(v.userStyles)}),["createdHeaderCell","drawHeaderRow","drawRow","drawHeaderCell"].forEach(function(L){S[L]&&console.error('The "'.concat(L,'" hook has changed in version 3.0, check the changelog for how to migrate.'))}),[["showFoot","showFooter"],["showHead","showHeader"],["didDrawPage","addPageContent"],["didParseCell","createdCell"],["headStyles","headerStyles"]].forEach(function(L){var A=L[0],U=L[1];S[U]&&(console.error("Use of deprecated option ".concat(U,". Use ").concat(A," instead")),S[A]=S[U])}),[["padding","cellPadding"],["lineHeight","rowHeight"],"fontSize","overflow"].forEach(function(L){var A=typeof L=="string"?L:L[0],U=typeof L=="string"?L:L[1];typeof S[A]<"u"&&(typeof S.styles[U]>"u"&&(S.styles[U]=S[A]),console.error("Use of deprecated option: "+A+", use the style "+U+" instead."))});for(var N=0,D=["styles","bodyStyles","headStyles","footStyles"];N<D.length;N++){var M=D[N];g(S[M]||{})}for(var R=S.columnStyles||{},E=0,V=Object.keys(R);E<V.length;E++){var K=V[E];g(R[K]||{})}},j=0,x=[m,f,y];j<x.length;j++){var k=x[j];_(k)}}c.default=d;function g(v){v.rowHeight?(console.error("Use of deprecated style rowHeight. It is renamed to minCellHeight."),v.minCellHeight||(v.minCellHeight=v.rowHeight)):v.columnWidth&&(console.error("Use of deprecated style columnWidth. It is renamed to cellWidth."),v.cellWidth||(v.cellWidth=v.columnWidth))}},260:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.Column=c.Cell=c.Row=c.Table=void 0;var g=d(796),v=d(172),m=d(420),f=function(){function x(k,S){this.pageNumber=1,this.pageCount=1,this.id=k.id,this.settings=k.settings,this.styles=k.styles,this.hooks=k.hooks,this.columns=S.columns,this.head=S.head,this.body=S.body,this.foot=S.foot}return x.prototype.getHeadHeight=function(k){return this.head.reduce(function(S,N){return S+N.getMaxCellHeight(k)},0)},x.prototype.getFootHeight=function(k){return this.foot.reduce(function(S,N){return S+N.getMaxCellHeight(k)},0)},x.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},x.prototype.callCellHooks=function(k,S,N,D,M,R){for(var E=0,V=S;E<V.length;E++){var K=V[E],L=new v.CellHookData(k,this,N,D,M,R),A=K(L)===!1;if(N.text=Array.isArray(N.text)?N.text:[N.text],A)return!1}return!0},x.prototype.callEndPageHooks=function(k,S){k.applyStyles(k.userStyles);for(var N=0,D=this.hooks.didDrawPage;N<D.length;N++){var M=D[N];M(new v.HookData(k,this,S))}},x.prototype.callWillDrawPageHooks=function(k,S){for(var N=0,D=this.hooks.willDrawPage;N<D.length;N++){var M=D[N];M(new v.HookData(k,this,S))}},x.prototype.getWidth=function(k){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var S=this.columns.reduce(function(D,M){return D+M.wrappedWidth},0);return S}else{var N=this.settings.margin;return k-N.left-N.right}},x}();c.Table=f;var y=function(){function x(k,S,N,D,M){M===void 0&&(M=!1),this.height=0,this.raw=k,k instanceof g.HtmlRowInput&&(this.raw=k._element,this.element=k._element),this.index=S,this.section=N,this.cells=D,this.spansMultiplePages=M}return x.prototype.getMaxCellHeight=function(k){var S=this;return k.reduce(function(N,D){var M;return Math.max(N,((M=S.cells[D.index])===null||M===void 0?void 0:M.height)||0)},0)},x.prototype.hasRowSpan=function(k){var S=this;return k.filter(function(N){var D=S.cells[N.index];return D?D.rowSpan>1:!1}).length>0},x.prototype.canEntireRowFit=function(k,S){return this.getMaxCellHeight(S)<=k},x.prototype.getMinimumRowHeight=function(k,S){var N=this;return k.reduce(function(D,M){var R=N.cells[M.index];if(!R)return 0;var E=S.getLineHeight(R.styles.fontSize),V=R.padding("vertical"),K=V+E;return K>D?K:D},0)},x}();c.Row=y;var _=function(){function x(k,S,N){var D,M;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=S,this.section=N,this.raw=k;var R=k;k!=null&&typeof k=="object"&&!Array.isArray(k)?(this.rowSpan=k.rowSpan||1,this.colSpan=k.colSpan||1,R=(M=(D=k.content)!==null&&D!==void 0?D:k.title)!==null&&M!==void 0?M:k,k._element&&(this.raw=k._element)):(this.rowSpan=1,this.colSpan=1);var E=R!=null?""+R:"",V=/\r\n|\r|\n/g;this.text=E.split(V)}return x.prototype.getTextPos=function(){var k;if(this.styles.valign==="top")k=this.y+this.padding("top");else if(this.styles.valign==="bottom")k=this.y+this.height-this.padding("bottom");else{var S=this.height-this.padding("vertical");k=this.y+S/2+this.padding("top")}var N;if(this.styles.halign==="right")N=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var D=this.width-this.padding("horizontal");N=this.x+D/2+this.padding("left")}else N=this.x+this.padding("left");return{x:N,y:k}},x.prototype.getContentHeight=function(k,S){S===void 0&&(S=1.15);var N=Array.isArray(this.text)?this.text.length:1,D=this.styles.fontSize/k*S,M=N*D+this.padding("vertical");return Math.max(M,this.styles.minCellHeight)},x.prototype.padding=function(k){var S=(0,m.parseSpacing)(this.styles.cellPadding,0);return k==="vertical"?S.top+S.bottom:k==="horizontal"?S.left+S.right:S[k]},x}();c.Cell=_;var j=function(){function x(k,S,N){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=k,this.raw=S,this.index=N}return x.prototype.getMaxCustomCellWidth=function(k){for(var S=0,N=0,D=k.allRows();N<D.length;N++){var M=D[N],R=M.cells[this.index];R&&typeof R.styles.cellWidth=="number"&&(S=Math.max(S,R.styles.cellWidth))}return S},x}();c.Column=j},356:function(l,c){Object.defineProperty(c,"__esModule",{value:!0}),c.assign=void 0;function d(g,v,m,f,y){if(g==null)throw new TypeError("Cannot convert undefined or null to object");for(var _=Object(g),j=1;j<arguments.length;j++){var x=arguments[j];if(x!=null)for(var k in x)Object.prototype.hasOwnProperty.call(x,k)&&(_[k]=x[k])}return _}c.assign=d},972:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.createTable=void 0;var g=d(744),v=d(260),m=d(324),f=d(796),y=d(356);function _(M,R){var E=new g.DocHandler(M),V=j(R,E.scaleFactor()),K=new v.Table(R,V);return(0,m.calculateWidths)(E,K),E.applyStyles(E.userStyles),K}c.createTable=_;function j(M,R){var E=M.content,V=N(E.columns);if(E.head.length===0){var K=k(V,"head");K&&E.head.push(K)}if(E.foot.length===0){var K=k(V,"foot");K&&E.foot.push(K)}var L=M.settings.theme,A=M.styles;return{columns:V,head:x("head",E.head,V,A,L,R),body:x("body",E.body,V,A,L,R),foot:x("foot",E.foot,V,A,L,R)}}function x(M,R,E,V,K,L){var A={},U=R.map(function(z,te){for(var $=0,W={},Y=0,J=0,ie=0,pe=E;ie<pe.length;ie++){var P=pe[ie];if(A[P.index]==null||A[P.index].left===0)if(J===0){var B=void 0;Array.isArray(z)?B=z[P.index-Y-$]:B=z[P.dataKey];var H={};typeof B=="object"&&!Array.isArray(B)&&(H=B?.styles||{});var Z=D(M,P,te,K,V,L,H),Q=new v.Cell(B,Z,M);W[P.dataKey]=Q,W[P.index]=Q,J=Q.colSpan-1,A[P.index]={left:Q.rowSpan-1,times:J}}else J--,Y++;else A[P.index].left--,J=A[P.index].times,$++}return new v.Row(z,te,M,W)});return U}function k(M,R){var E={};return M.forEach(function(V){if(V.raw!=null){var K=S(R,V.raw);K!=null&&(E[V.dataKey]=K)}}),Object.keys(E).length>0?E:null}function S(M,R){if(M==="head"){if(typeof R=="object")return R.header||R.title||null;if(typeof R=="string"||typeof R=="number")return R}else if(M==="foot"&&typeof R=="object")return R.footer;return null}function N(M){return M.map(function(R,E){var V,K,L;return typeof R=="object"?L=(K=(V=R.dataKey)!==null&&V!==void 0?V:R.key)!==null&&K!==void 0?K:E:L=E,new v.Column(L,R,E)})}function D(M,R,E,V,K,L,A){var U=(0,f.getTheme)(V),z;M==="head"?z=K.headStyles:M==="body"?z=K.bodyStyles:M==="foot"&&(z=K.footStyles);var te=(0,y.assign)({},U.table,U[M],K.styles,z),$=K.columnStyles[R.dataKey]||K.columnStyles[R.index]||{},W=M==="body"?$:{},Y=M==="body"&&E%2===0?(0,y.assign)({},U.alternateRow,K.alternateRowStyles):{},J=(0,f.defaultStyles)(L),ie=(0,y.assign)({},J,te,Y,W);return(0,y.assign)(ie,A)}},664:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.addPage=c.drawTable=void 0;var g=d(420),v=d(260),m=d(744),f=d(356),y=d(136),_=d(224);function j($,W){var Y=W.settings,J=Y.startY,ie=Y.margin,pe={x:ie.left,y:J},P=W.getHeadHeight(W.columns)+W.getFootHeight(W.columns),B=J+ie.bottom+P;if(Y.pageBreak==="avoid"){var H=W.body,Z=H.reduce(function(ue,he){return ue+he.height},0);B+=Z}var Q=new m.DocHandler($);(Y.pageBreak==="always"||Y.startY!=null&&B>Q.pageSize().height)&&(te(Q),pe.y=ie.top),W.callWillDrawPageHooks(Q,pe);var le=(0,f.assign)({},pe);W.startPageNumber=Q.pageNumber(),Y.horizontalPageBreak?x(Q,W,le,pe):(Q.applyStyles(Q.userStyles),(Y.showHead==="firstPage"||Y.showHead==="everyPage")&&W.head.forEach(function(ue){return K(Q,W,ue,pe,W.columns)}),Q.applyStyles(Q.userStyles),W.body.forEach(function(ue,he){var ge=he===W.body.length-1;V(Q,W,ue,ge,le,pe,W.columns)}),Q.applyStyles(Q.userStyles),(Y.showFoot==="lastPage"||Y.showFoot==="everyPage")&&W.foot.forEach(function(ue){return K(Q,W,ue,pe,W.columns)})),(0,g.addTableBorder)(Q,W,le,pe),W.callEndPageHooks(Q,pe),W.finalY=pe.y,$.lastAutoTable=W,$.previousAutoTable=W,$.autoTable&&($.autoTable.previous=W),Q.applyStyles(Q.userStyles)}c.drawTable=j;function x($,W,Y,J){var ie=(0,_.calculateAllColumnsCanFitInPage)($,W),pe=W.settings;if(pe.horizontalPageBreakBehaviour==="afterAllRows")ie.forEach(function(Z,Q){$.applyStyles($.userStyles),Q>0?z($,W,Y,J,Z.columns,!0):k($,W,J,Z.columns),S($,W,Y,J,Z.columns),D($,W,J,Z.columns)});else for(var P=-1,B=ie[0],H=function(){var Z=P;if(B){$.applyStyles($.userStyles);var Q=B.columns;P>=0?z($,W,Y,J,Q,!0):k($,W,J,Q),Z=N($,W,P+1,J,Q),D($,W,J,Q)}var le=Z-P;ie.slice(1).forEach(function(ue){$.applyStyles($.userStyles),z($,W,Y,J,ue.columns,!0),N($,W,P+1,J,ue.columns,le),D($,W,J,ue.columns)}),P=Z};P<W.body.length-1;)H()}function k($,W,Y,J){var ie=W.settings;$.applyStyles($.userStyles),(ie.showHead==="firstPage"||ie.showHead==="everyPage")&&W.head.forEach(function(pe){return K($,W,pe,Y,J)})}function S($,W,Y,J,ie){$.applyStyles($.userStyles),W.body.forEach(function(pe,P){var B=P===W.body.length-1;V($,W,pe,B,Y,J,ie)})}function N($,W,Y,J,ie,pe){$.applyStyles($.userStyles),pe=pe??W.body.length;var P=Math.min(Y+pe,W.body.length),B=-1;return W.body.slice(Y,P).forEach(function(H,Z){var Q=Y+Z===W.body.length-1,le=U($,W,Q,J);H.canEntireRowFit(le,ie)&&(K($,W,H,J,ie),B=Y+Z)}),B}function D($,W,Y,J){var ie=W.settings;$.applyStyles($.userStyles),(ie.showFoot==="lastPage"||ie.showFoot==="everyPage")&&W.foot.forEach(function(pe){return K($,W,pe,Y,J)})}function M($,W,Y){var J=Y.getLineHeight($.styles.fontSize),ie=$.padding("vertical"),pe=Math.floor((W-ie)/J);return Math.max(0,pe)}function R($,W,Y,J){var ie={};$.spansMultiplePages=!0,$.height=0;for(var pe=0,P=0,B=Y.columns;P<B.length;P++){var H=B[P],Z=$.cells[H.index];if(Z){Array.isArray(Z.text)||(Z.text=[Z.text]);var Q=new v.Cell(Z.raw,Z.styles,Z.section);Q=(0,f.assign)(Q,Z),Q.text=[];var le=M(Z,W,J);Z.text.length>le&&(Q.text=Z.text.splice(le,Z.text.length));var ue=J.scaleFactor(),he=J.getLineHeightFactor();Z.contentHeight=Z.getContentHeight(ue,he),Z.contentHeight>=W&&(Z.contentHeight=W,Q.styles.minCellHeight-=W),Z.contentHeight>$.height&&($.height=Z.contentHeight),Q.contentHeight=Q.getContentHeight(ue,he),Q.contentHeight>pe&&(pe=Q.contentHeight),ie[H.index]=Q}}var ge=new v.Row($.raw,-1,$.section,ie,!0);ge.height=pe;for(var Ae=0,Fe=Y.columns;Ae<Fe.length;Ae++){var H=Fe[Ae],Q=ge.cells[H.index];Q&&(Q.height=ge.height);var Z=$.cells[H.index];Z&&(Z.height=$.height)}return ge}function E($,W,Y,J){var ie=$.pageSize().height,pe=J.settings.margin,P=pe.top+pe.bottom,B=ie-P;W.section==="body"&&(B-=J.getHeadHeight(J.columns)+J.getFootHeight(J.columns));var H=W.getMinimumRowHeight(J.columns,$),Z=H<Y;if(H>B)return console.error("Will not be able to print row ".concat(W.index," correctly since it's minimum height is larger than page height")),!0;if(!Z)return!1;var Q=W.hasRowSpan(J.columns),le=W.getMaxCellHeight(J.columns)>B;return le?(Q&&console.error("The content of row ".concat(W.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(Q||J.settings.rowPageBreak==="avoid")}function V($,W,Y,J,ie,pe,P){var B=U($,W,J,pe);if(Y.canEntireRowFit(B,P))K($,W,Y,pe,P);else if(E($,Y,B,W)){var H=R(Y,B,W,$);K($,W,Y,pe,P),z($,W,ie,pe,P),V($,W,H,J,ie,pe,P)}else z($,W,ie,pe,P),V($,W,Y,J,ie,pe,P)}function K($,W,Y,J,ie){J.x=W.settings.margin.left;for(var pe=0,P=ie;pe<P.length;pe++){var B=P[pe],H=Y.cells[B.index];if(!H){J.x+=B.width;continue}$.applyStyles(H.styles),H.x=J.x,H.y=J.y;var Z=W.callCellHooks($,W.hooks.willDrawCell,H,Y,B,J);if(Z===!1){J.x+=B.width;continue}L($,H,J);var Q=H.getTextPos();(0,y.default)(H.text,Q.x,Q.y,{halign:H.styles.halign,valign:H.styles.valign,maxWidth:Math.ceil(H.width-H.padding("left")-H.padding("right"))},$.getDocument()),W.callCellHooks($,W.hooks.didDrawCell,H,Y,B,J),J.x+=B.width}J.y+=Y.height}function L($,W,Y){var J=W.styles;if($.getDocument().setFillColor($.getDocument().getFillColor()),typeof J.lineWidth=="number"){var ie=(0,g.getFillStyle)(J.lineWidth,J.fillColor);ie&&$.rect(W.x,Y.y,W.width,W.height,ie)}else typeof J.lineWidth=="object"&&(J.fillColor&&$.rect(W.x,Y.y,W.width,W.height,"F"),A($,W,Y,J.lineWidth))}function A($,W,Y,J){var ie,pe,P,B;J.top&&(ie=Y.x,pe=Y.y,P=Y.x+W.width,B=Y.y,J.right&&(P+=.5*J.right),J.left&&(ie-=.5*J.left),H(J.top,ie,pe,P,B)),J.bottom&&(ie=Y.x,pe=Y.y+W.height,P=Y.x+W.width,B=Y.y+W.height,J.right&&(P+=.5*J.right),J.left&&(ie-=.5*J.left),H(J.bottom,ie,pe,P,B)),J.left&&(ie=Y.x,pe=Y.y,P=Y.x,B=Y.y+W.height,J.top&&(pe-=.5*J.top),J.bottom&&(B+=.5*J.bottom),H(J.left,ie,pe,P,B)),J.right&&(ie=Y.x+W.width,pe=Y.y,P=Y.x+W.width,B=Y.y+W.height,J.top&&(pe-=.5*J.top),J.bottom&&(B+=.5*J.bottom),H(J.right,ie,pe,P,B));function H(Z,Q,le,ue,he){$.getDocument().setLineWidth(Z),$.getDocument().line(Q,le,ue,he,"S")}}function U($,W,Y,J){var ie=W.settings.margin.bottom,pe=W.settings.showFoot;return(pe==="everyPage"||pe==="lastPage"&&Y)&&(ie+=W.getFootHeight(W.columns)),$.pageSize().height-J.y-ie}function z($,W,Y,J,ie,pe){ie===void 0&&(ie=[]),pe===void 0&&(pe=!1),$.applyStyles($.userStyles),W.settings.showFoot==="everyPage"&&!pe&&W.foot.forEach(function(B){return K($,W,B,J,ie)}),W.callEndPageHooks($,J);var P=W.settings.margin;(0,g.addTableBorder)($,W,Y,J),te($),W.pageNumber++,W.pageCount++,J.x=P.left,J.y=P.top,Y.y=P.top,W.callWillDrawPageHooks($,J),W.settings.showHead==="everyPage"&&(W.head.forEach(function(B){return K($,W,B,J,ie)}),$.applyStyles($.userStyles))}c.addPage=z;function te($){var W=$.pageNumber();$.setPage(W+1);var Y=$.pageNumber();return Y===W?($.addPage(),!0):!1}},224:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.calculateAllColumnsCanFitInPage=void 0;var g=d(420);function v(f,y,_){var j;_===void 0&&(_={});var x=(0,g.getPageAvailableWidth)(f,y),k=new Map,S=[],N=[],D=[];y.settings.horizontalPageBreakRepeat,Array.isArray(y.settings.horizontalPageBreakRepeat)?D=y.settings.horizontalPageBreakRepeat:(typeof y.settings.horizontalPageBreakRepeat=="string"||typeof y.settings.horizontalPageBreakRepeat=="number")&&(D=[y.settings.horizontalPageBreakRepeat]),D.forEach(function(V){var K=y.columns.find(function(L){return L.dataKey===V||L.index===V});K&&!k.has(K.index)&&(k.set(K.index,!0),S.push(K.index),N.push(y.columns[K.index]),x-=K.wrappedWidth)});for(var M=!0,R=(j=_?.start)!==null&&j!==void 0?j:0;R<y.columns.length;){if(k.has(R)){R++;continue}var E=y.columns[R].wrappedWidth;if(M||x>=E)M=!1,S.push(R),N.push(y.columns[R]),x-=E;else break;R++}return{colIndexes:S,columns:N,lastIndex:R-1}}function m(f,y){for(var _=[],j=0;j<y.columns.length;j++){var x=v(f,y,{start:j});x.columns.length&&(_.push(x),j=x.lastIndex)}return _}c.calculateAllColumnsCanFitInPage=m},324:function(l,c,d){Object.defineProperty(c,"__esModule",{value:!0}),c.ellipsize=c.resizeColumns=c.calculateWidths=void 0;var g=d(420);function v(S,N){m(S,N);var D=[],M=0;N.columns.forEach(function(E){var V=E.getMaxCustomCellWidth(N);V?E.width=V:(E.width=E.wrappedWidth,D.push(E)),M+=E.width});var R=N.getWidth(S.pageSize().width)-M;R&&(R=f(D,R,function(E){return Math.max(E.minReadableWidth,E.minWidth)})),R&&(R=f(D,R,function(E){return E.minWidth})),R=Math.abs(R),!N.settings.horizontalPageBreak&&R>.1/S.scaleFactor()&&(R=R<1?R:Math.round(R),console.warn("Of the table content, ".concat(R," units width could not fit page"))),_(N),j(N,S),y(N)}c.calculateWidths=v;function m(S,N){var D=S.scaleFactor(),M=N.settings.horizontalPageBreak,R=(0,g.getPageAvailableWidth)(S,N);N.allRows().forEach(function(E){for(var V=0,K=N.columns;V<K.length;V++){var L=K[V],A=E.cells[L.index];if(A){var U=N.hooks.didParseCell;N.callCellHooks(S,U,A,E,L,null);var z=A.padding("horizontal");A.contentWidth=(0,g.getStringWidth)(A.text,A.styles,S)+z;var te=(0,g.getStringWidth)(A.text.join(" ").split(/[^\S\u00A0]+/),A.styles,S);if(A.minReadableWidth=te+A.padding("horizontal"),typeof A.styles.cellWidth=="number")A.minWidth=A.styles.cellWidth,A.wrappedWidth=A.styles.cellWidth;else if(A.styles.cellWidth==="wrap"||M===!0)A.contentWidth>R?(A.minWidth=R,A.wrappedWidth=R):(A.minWidth=A.contentWidth,A.wrappedWidth=A.contentWidth);else{var $=10/D;A.minWidth=A.styles.minCellWidth||$,A.wrappedWidth=A.contentWidth,A.minWidth>A.wrappedWidth&&(A.wrappedWidth=A.minWidth)}}}}),N.allRows().forEach(function(E){for(var V=0,K=N.columns;V<K.length;V++){var L=K[V],A=E.cells[L.index];if(A&&A.colSpan===1)L.wrappedWidth=Math.max(L.wrappedWidth,A.wrappedWidth),L.minWidth=Math.max(L.minWidth,A.minWidth),L.minReadableWidth=Math.max(L.minReadableWidth,A.minReadableWidth);else{var U=N.styles.columnStyles[L.dataKey]||N.styles.columnStyles[L.index]||{},z=U.cellWidth||U.minCellWidth;z&&typeof z=="number"&&(L.minWidth=z,L.wrappedWidth=z)}A&&(A.colSpan>1&&!L.minWidth&&(L.minWidth=A.minWidth),A.colSpan>1&&!L.wrappedWidth&&(L.wrappedWidth=A.minWidth))}})}function f(S,N,D){for(var M=N,R=S.reduce(function($,W){return $+W.wrappedWidth},0),E=0;E<S.length;E++){var V=S[E],K=V.wrappedWidth/R,L=M*K,A=V.width+L,U=D(V),z=A<U?U:A;N-=z-V.width,V.width=z}if(N=Math.round(N*1e10)/1e10,N){var te=S.filter(function($){return N<0?$.width>D($):!0});te.length&&(N=f(te,N,D))}return N}c.resizeColumns=f;function y(S){for(var N={},D=1,M=S.allRows(),R=0;R<M.length;R++)for(var E=M[R],V=0,K=S.columns;V<K.length;V++){var L=K[V],A=N[L.index];if(D>1)D--,delete E.cells[L.index];else if(A)A.cell.height+=E.height,D=A.cell.colSpan,delete E.cells[L.index],A.left--,A.left<=1&&delete N[L.index];else{var U=E.cells[L.index];if(!U)continue;if(U.height=E.height,U.rowSpan>1){var z=M.length-R,te=U.rowSpan>z?z:U.rowSpan;N[L.index]={cell:U,left:te,row:E}}}}}function _(S){for(var N=S.allRows(),D=0;D<N.length;D++)for(var M=N[D],R=null,E=0,V=0,K=0;K<S.columns.length;K++){var L=S.columns[K];if(V-=1,V>1&&S.columns[K+1])E+=L.width,delete M.cells[L.index];else if(R){var A=R;delete M.cells[L.index],R=null,A.width=L.width+E}else{var A=M.cells[L.index];if(!A)continue;if(V=A.colSpan,E=0,A.colSpan>1){R=A,E+=L.width;continue}A.width=L.width+E}}}function j(S,N){for(var D={count:0,height:0},M=0,R=S.allRows();M<R.length;M++){for(var E=R[M],V=0,K=S.columns;V<K.length;V++){var L=K[V],A=E.cells[L.index];if(A){N.applyStyles(A.styles,!0);var U=A.width-A.padding("horizontal");if(A.styles.overflow==="linebreak")A.text=N.splitTextToSize(A.text,U+1/N.scaleFactor(),{fontSize:A.styles.fontSize});else if(A.styles.overflow==="ellipsize")A.text=x(A.text,U,A.styles,N,"...");else if(A.styles.overflow==="hidden")A.text=x(A.text,U,A.styles,N,"");else if(typeof A.styles.overflow=="function"){var z=A.styles.overflow(A.text,U);typeof z=="string"?A.text=[z]:A.text=z}A.contentHeight=A.getContentHeight(N.scaleFactor(),N.getLineHeightFactor());var te=A.contentHeight/A.rowSpan;A.rowSpan>1&&D.count*D.height<te*A.rowSpan?D={height:te,count:A.rowSpan}:D&&D.count>0&&D.height>te&&(te=D.height),te>E.height&&(E.height=te)}}D.count--}}function x(S,N,D,M,R){return S.map(function(E){return k(E,N,D,M,R)})}c.ellipsize=x;function k(S,N,D,M,R){var E=1e4*M.scaleFactor();if(N=Math.ceil(N*E)/E,N>=(0,g.getStringWidth)(S,D,M))return S;for(;N<(0,g.getStringWidth)(S+R,D,M)&&!(S.length<=1);)S=S.substring(0,S.length-1);return S.trim()+R}},964:function(l){if(typeof t>"u"){var c=new Error("Cannot find module 'undefined'");throw c.code="MODULE_NOT_FOUND",c}l.exports=t}},s={};function i(l){var c=s[l];if(c!==void 0)return c.exports;var d=s[l]={exports:{}};return r[l].call(d.exports,d,d.exports,i),d.exports}var a={};return function(){var l=a;Object.defineProperty(l,"__esModule",{value:!0}),l.Cell=l.Column=l.Row=l.Table=l.CellHookData=l.__drawTable=l.__createTable=l.applyPlugin=void 0;var c=i(340),d=i(776),g=i(664),v=i(972),m=i(260);Object.defineProperty(l,"Table",{enumerable:!0,get:function(){return m.Table}});var f=i(172);Object.defineProperty(l,"CellHookData",{enumerable:!0,get:function(){return f.CellHookData}});var y=i(260);Object.defineProperty(l,"Cell",{enumerable:!0,get:function(){return y.Cell}}),Object.defineProperty(l,"Column",{enumerable:!0,get:function(){return y.Column}}),Object.defineProperty(l,"Row",{enumerable:!0,get:function(){return y.Row}});function _(N){(0,c.default)(N)}l.applyPlugin=_;function j(N,D){var M=(0,d.parseInput)(N,D),R=(0,v.createTable)(N,M);(0,g.drawTable)(N,R)}function x(N,D){var M=(0,d.parseInput)(N,D);return(0,v.createTable)(N,M)}l.__createTable=x;function k(N,D){(0,g.drawTable)(N,D)}l.__drawTable=k;try{var S=i(964);S.jsPDF&&(S=S.jsPDF),_(S)}catch{}l.default=j}(),a}()})})(tp);var f0=tp.exports;const vu=w1(f0),p0=(n,e,t,r,s,i,a,l,c,d,g,v)=>{const m=new tt,f=new Date().toLocaleDateString();m.setFontSize(20),m.setTextColor(25,118,210),m.text("Brain",20,15),m.setTextColor(46,125,50),m.text("Board",47,15),m.setFontSize(10),m.setTextColor(128,128,128),m.text(`Generated on: ${f}`,20,25),m.setFontSize(16),m.setTextColor(0,0,0),m.text(`${v("student_reports")}: ${n}`,20,35);const y=[];if(a==="sequence")r.forEach(x=>{const k=t[i][x.name]??"-",S=s[e]?.[i]||v("no_comment");y.push([x.name,k.toString(),S])}),vu(m,{startY:45,head:[[v("subject_name"),v("mark"),v("teacher_comment")]],body:y});else{let x,k;a==="firstTerm"?(x=l.find(S=>S.student===n),k=[[v("total_marks"),v("average"),v("rank")]],x&&y.push([x.totalMarks.toFixed(2),x.average.toFixed(2),x.rank.toString()])):a==="secondTerm"?(x=c.find(S=>S.student===n),k=[[v("total_marks"),v("average"),v("rank")]],x&&y.push([x.totalMarks.toFixed(2),x.average.toFixed(2),x.rank.toString()])):a==="thirdTerm"?(x=d.find(S=>S.student===n),k=[[v("total_marks"),v("average"),v("rank")]],x&&y.push([x.totalMarks.toFixed(2),x.average.toFixed(2),x.rank.toString()])):a==="annual"&&(x=g.find(S=>S.student===n),k=[[v("first_term_avg"),v("second_term_avg"),v("third_term_avg"),v("final_avg"),v("rank")]],x&&y.push([x.firstTermAverage.toFixed(2),x.secondTermAverage.toFixed(2),x.thirdTermAverage.toFixed(2),x.finalAverage.toFixed(2),x.rank.toString()])),y.length>0&&vu(m,{startY:45,head:k,body:y})}const _=m.lastAutoTable.finalY||45,j=s[e]?.[i]||v("no_comment");m.setFontSize(12),m.text(v("teacher_comment"),20,_+10),m.text(j,20,_+20),m.save(`${n}_${a}_report.pdf`)},g0=(n,e,t,r,s,i)=>{const a=new tt,l=new Date().toLocaleDateString();a.setFontSize(20),a.setTextColor(25,118,210),a.text("Brain",20,15),a.setTextColor(46,125,50),a.text("Board",47,15),a.setFontSize(10),a.setTextColor(128,128,128),a.text(`Generated on: ${l}`,20,25),a.setFontSize(16),a.setTextColor(0,0,0),a.text(`${n}`,20,35);const c=s?[[i("rank"),i("student"),i("first_term_avg"),i("second_term_avg"),i("third_term_avg"),i("final_avg")]]:[[i("rank"),i("student"),i("total_marks"),i("average")]],d=s?e.map(v=>[v.rank.toString(),v.student,v.firstTermAverage.toFixed(2),v.secondTermAverage.toFixed(2),v.thirdTermAverage.toFixed(2),v.finalAverage.toFixed(2)]):e.map(v=>[v.rank.toString(),v.student,v.totalMarks.toFixed(2),v.average.toFixed(2)]);vu(a,{startY:45,head:c,body:d});const g=a.lastAutoTable.finalY||45;a.text(i("class_average",{value:t.toFixed(2)}),20,g+10),a.text(i("pass_percentage",{value:r.toFixed(2)}),20,g+20),a.save(`${n.toLowerCase().replace(" ","-")}.pdf`)},m0=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>ka);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)};class Qu extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class v0 extends Qu{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Rd extends Qu{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Ed extends Qu{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var bu;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(bu||(bu={}));var b0=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};class y0{constructor(e,{headers:t={},customFetch:r,region:s=bu.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=m0(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var r;return b0(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:a}=t;let l={},{region:c}=t;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let g;a&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&a instanceof Blob||a instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",g=a):typeof a=="string"?(l["Content-Type"]="text/plain",g=a):typeof FormData<"u"&&a instanceof FormData?g=a:(l["Content-Type"]="application/json",g=JSON.stringify(a)));const v=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),s),body:g}).catch(_=>{throw new v0(_)}),m=v.headers.get("x-relay-error");if(m&&m==="true")throw new Rd(v);if(!v.ok)throw new Ed(v);let f=((r=v.headers.get("Content-Type"))!==null&&r!==void 0?r:"text/plain").split(";")[0].trim(),y;return f==="application/json"?y=yield v.json():f==="application/octet-stream"?y=yield v.blob():f==="text/event-stream"?y=v:f==="multipart/form-data"?y=yield v.formData():y=yield v.text(),{data:y,error:null,response:v}}catch(s){return{data:null,error:s,response:s instanceof Ed||s instanceof Rd?s.context:void 0}}})}}var wn={},eh={},Gl={},No={},Kl={},Jl={},x0=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},_a=x0();const w0=_a.fetch,rp=_a.fetch.bind(_a),np=_a.Headers,_0=_a.Request,S0=_a.Response,ka=Object.freeze(Object.defineProperty({__proto__:null,Headers:np,Request:_0,Response:S0,default:rp,fetch:w0},Symbol.toStringTag,{value:"Module"})),j0=Cu(ka);var Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});let A0=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Yl.default=A0;var sp=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Jl,"__esModule",{value:!0});const k0=sp(j0),L0=sp(Yl);let P0=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=k0.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const r=this.fetch;let s=r(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var a,l,c;let d=null,g=null,v=null,m=i.status,f=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?g=x:g=JSON.parse(x))}const _=(a=this.headers.Prefer)===null||a===void 0?void 0:a.match(/count=(exact|planned|estimated)/),j=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");_&&j&&j.length>1&&(v=parseInt(j[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(g)&&(g.length>1?(d={code:"PGRST116",details:`Results contain ${g.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},g=null,v=null,m=406,f="Not Acceptable"):g.length===1?g=g[0]:g=null)}else{const _=await i.text();try{d=JSON.parse(_),Array.isArray(d)&&i.status===404&&(g=[],d=null,m=200,f="OK")}catch{i.status===404&&_===""?(m=204,f="No Content"):d={message:_}}if(d&&this.isMaybeSingle&&(!((c=d?.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,m=200,f="OK"),d&&this.shouldThrowOnError)throw new L0.default(d)}return{error:d,data:g,count:v,status:m,statusText:f}});return this.shouldThrowOnError||(s=s.catch(i=>{var a,l,c;return{error:{message:`${(a=i?.name)!==null&&a!==void 0?a:"FetchError"}: ${i?.message}`,details:`${(l=i?.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i?.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),s.then(e,t)}returns(){return this}overrideTypes(){return this}};Jl.default=P0;var N0=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Kl,"__esModule",{value:!0});const C0=N0(Jl);let T0=class extends C0.default{select(e){let t=!1;const r=(e??"*").split("").map(s=>/\s/.test(s)&&!t?"":(s==='"'&&(t=!t),s)).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:s,referencedTable:i=s}={}){const a=i?`${i}.order`:"order",l=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${l?`${l},`:""}${e}.${t?"asc":"desc"}${r===void 0?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const s=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:s=r}={}){const i=typeof s>"u"?"offset":`${s}.offset`,a=typeof s>"u"?"limit":`${s}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(a,`${t-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:s=!1,wal:i=!1,format:a="text"}={}){var l;const c=[e?"analyze":null,t?"verbose":null,r?"settings":null,s?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${a}; for="${d}"; options=${c};`,a==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Kl.default=T0;var R0=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(No,"__esModule",{value:!0});const E0=R0(Kl);let I0=class extends E0.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const r=Array.from(new Set(t)).map(s=>typeof s=="string"&&new RegExp("[,()]").test(s)?`"${s}"`:`${s}`).join(",");return this.url.searchParams.append(e,`in.(${r})`),this}contains(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return typeof t=="string"?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return typeof t=="string"?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:s}={}){let i="";s==="plain"?i="pl":s==="phrase"?i="ph":s==="websearch"&&(i="w");const a=r===void 0?"":`(${r})`;return this.url.searchParams.append(e,`${i}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([t,r])=>{this.url.searchParams.append(t,`eq.${r}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const s=r?`${r}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}};No.default=I0;var O0=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Gl,"__esModule",{value:!0});const ao=O0(No);let F0=class{constructor(e,{headers:t={},schema:r,fetch:s}){this.url=e,this.headers=t,this.schema=r,this.fetch=s}select(e,{head:t=!1,count:r}={}){const s=t?"HEAD":"GET";let i=!1;const a=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",a),r&&(this.headers.Prefer=`count=${r}`),new ao.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:r=!0}={}){const s="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),t&&i.push(`count=${t}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const a=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(a.length>0){const l=[...new Set(a)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new ao.default({method:s,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:r=!1,count:s,defaultToNull:i=!0}={}){const a="POST",l=[`resolution=${r?"ignore":"merge"}-duplicates`];if(t!==void 0&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&l.push(this.headers.Prefer),s&&l.push(`count=${s}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,g)=>d.concat(Object.keys(g)),[]);if(c.length>0){const d=[...new Set(c)].map(g=>`"${g}"`);this.url.searchParams.set("columns",d.join(","))}}return new ao.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const r="PATCH",s=[];return this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),this.headers.Prefer=s.join(","),new ao.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t="DELETE",r=[];return e&&r.push(`count=${e}`),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new ao.default({method:t,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Gl.default=F0;var Xl={},Zl={};Object.defineProperty(Zl,"__esModule",{value:!0});Zl.version=void 0;Zl.version="0.0.0-automated";Object.defineProperty(Xl,"__esModule",{value:!0});Xl.DEFAULT_HEADERS=void 0;const D0=Zl;Xl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${D0.version}`};var ip=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(eh,"__esModule",{value:!0});const M0=ip(Gl),B0=ip(No),q0=Xl;let $0=class ap{constructor(e,{headers:t={},schema:r,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},q0.DEFAULT_HEADERS),t),this.schemaName=r,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new M0.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new ap(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:r=!1,get:s=!1,count:i}={}){let a;const l=new URL(`${this.url}/rpc/${e}`);let c;r||s?(a=r?"HEAD":"GET",Object.entries(t).filter(([g,v])=>v!==void 0).map(([g,v])=>[g,Array.isArray(v)?`{${v.join(",")}}`:`${v}`]).forEach(([g,v])=>{l.searchParams.append(g,v)})):(a="POST",c=t);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new B0.default({method:a,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};eh.default=$0;var La=hn&&hn.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(wn,"__esModule",{value:!0});wn.PostgrestError=wn.PostgrestBuilder=wn.PostgrestTransformBuilder=wn.PostgrestFilterBuilder=wn.PostgrestQueryBuilder=wn.PostgrestClient=void 0;const op=La(eh);wn.PostgrestClient=op.default;const lp=La(Gl);wn.PostgrestQueryBuilder=lp.default;const cp=La(No);wn.PostgrestFilterBuilder=cp.default;const up=La(Kl);wn.PostgrestTransformBuilder=up.default;const hp=La(Jl);wn.PostgrestBuilder=hp.default;const dp=La(Yl);wn.PostgrestError=dp.default;var z0=wn.default={PostgrestClient:op.default,PostgrestQueryBuilder:lp.default,PostgrestFilterBuilder:cp.default,PostgrestTransformBuilder:up.default,PostgrestBuilder:hp.default,PostgrestError:dp.default};const{PostgrestClient:U0,PostgrestQueryBuilder:f4,PostgrestFilterBuilder:p4,PostgrestTransformBuilder:g4,PostgrestBuilder:m4,PostgrestError:v4}=z0;class W0{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"&&process.versions&&process.versions.node){const t=parseInt(process.versions.node.split(".")[0]);return t>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${t} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${t} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`

Suggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){const r=this.getWebSocketConstructor();return new r(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const H0="2.15.1",V0=`realtime-js/${H0}`,G0="1.0.0",yu=1e4,K0=1e3,J0=100;var vo;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(vo||(vo={}));var kr;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(kr||(kr={}));var rs;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(rs||(rs={}));var xu;(function(n){n.websocket="websocket"})(xu||(xu={}));var Ai;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(Ai||(Ai={}));class Y0{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}_decodeBroadcast(e,t,r){const s=t.getUint8(1),i=t.getUint8(2);let a=this.HEADER_LENGTH+2;const l=r.decode(e.slice(a,a+s));a=a+s;const c=r.decode(e.slice(a,a+i));a=a+i;const d=JSON.parse(r.decode(e.slice(a,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class fp{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Xt;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(Xt||(Xt={}));const Id=(n,e,t={})=>{var r;const s=(r=t.skipTypes)!==null&&r!==void 0?r:[];return Object.keys(e).reduce((i,a)=>(i[a]=X0(a,n,e,s),i),{})},X0=(n,e,t,r)=>{const s=e.find(l=>l.name===n),i=s?.type,a=t[n];return i&&!r.includes(i)?pp(i,a):wu(a)},pp=(n,e)=>{if(n.charAt(0)==="_"){const t=n.slice(1,n.length);return t5(e,t)}switch(n){case Xt.bool:return Z0(e);case Xt.float4:case Xt.float8:case Xt.int2:case Xt.int4:case Xt.int8:case Xt.numeric:case Xt.oid:return Q0(e);case Xt.json:case Xt.jsonb:return e5(e);case Xt.timestamp:return r5(e);case Xt.abstime:case Xt.date:case Xt.daterange:case Xt.int4range:case Xt.int8range:case Xt.money:case Xt.reltime:case Xt.text:case Xt.time:case Xt.timestamptz:case Xt.timetz:case Xt.tsrange:case Xt.tstzrange:return wu(e);default:return wu(e)}},wu=n=>n,Z0=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},Q0=n=>{if(typeof n=="string"){const e=parseFloat(n);if(!Number.isNaN(e))return e}return n},e5=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(e){return console.log(`JSON parse error: ${e}`),n}return n},t5=(n,e)=>{if(typeof n!="string")return n;const t=n.length-1,r=n[t];if(n[0]==="{"&&r==="}"){let i;const a=n.slice(1,t);try{i=JSON.parse("["+a+"]")}catch{i=a?a.split(","):[]}return i.map(l=>pp(e,l))}return n},r5=n=>typeof n=="string"?n.replace(" ","T"):n,gp=n=>{let e=n;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Gc{constructor(e,t,r={},s=yu){this.channel=e,this.event=t,this.payload=r,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t((r=this.receivedResp)===null||r===void 0?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=t=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=t,this._matchReceive(t)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(r=>r.status===e).forEach(r=>r.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Od;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Od||(Od={}));class bo{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=t?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=bo.syncState(this.state,s,i,a),this.pendingDiffs.forEach(c=>{this.state=bo.syncDiff(this.state,c,i,a)}),this.pendingDiffs=[],l()}),this.channel._on(r.diff,{},s=>{const{onJoin:i,onLeave:a,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=bo.syncDiff(this.state,s,i,a),l())}),this.onJoin((s,i,a)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:a})}),this.onLeave((s,i,a)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,s){const i=this.cloneDeep(e),a=this.transformState(t),l={},c={};return this.map(i,(d,g)=>{a[d]||(c[d]=g)}),this.map(a,(d,g)=>{const v=i[d];if(v){const m=g.map(j=>j.presence_ref),f=v.map(j=>j.presence_ref),y=g.filter(j=>f.indexOf(j.presence_ref)<0),_=v.filter(j=>m.indexOf(j.presence_ref)<0);y.length>0&&(l[d]=y),_.length>0&&(c[d]=_)}else l[d]=g}),this.syncDiff(i,{joins:l,leaves:c},r,s)}static syncDiff(e,t,r,s){const{joins:i,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),s||(s=()=>{}),this.map(i,(l,c)=>{var d;const g=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),g.length>0){const v=e[l].map(f=>f.presence_ref),m=g.filter(f=>v.indexOf(f.presence_ref)<0);e[l].unshift(...m)}r(l,g,c)}),this.map(a,(l,c)=>{let d=e[l];if(!d)return;const g=c.map(v=>v.presence_ref);d=d.filter(v=>g.indexOf(v.presence_ref)<0),e[l]=d,s(l,d,c),d.length===0&&delete e[l]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const s=e[r];return"metas"in s?t[r]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):t[r]=s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Fd;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Fd||(Fd={}));var yo;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(yo||(yo={}));var Ts;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(Ts||(Ts={}));class th{constructor(e,t={config:{}},r){this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=kr.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Gc(this,rs.join,this.params,this.timeout),this.rejoinTimer=new fp(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=kr.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=kr.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=kr.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=kr.errored,this.rejoinTimer.scheduleTimeout())}),this._on(rs.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new bo(this),this.broadcastEndpointURL=gp(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var r,s;if(this.socket.isConnected()||this.socket.connect(),this.state==kr.closed){const{config:{broadcast:i,presence:a,private:l}}=this.params,c=(s=(r=this.bindings.postgres_changes)===null||r===void 0?void 0:r.map(m=>m.filter))!==null&&s!==void 0?s:[],d=!!this.bindings[yo.PRESENCE]&&this.bindings[yo.PRESENCE].length>0,g={},v={broadcast:i,presence:Object.assign(Object.assign({},a),{enabled:d}),postgres_changes:c,private:l};this.socket.accessTokenValue&&(g.access_token=this.socket.accessTokenValue),this._onError(m=>e?.(Ts.CHANNEL_ERROR,m)),this._onClose(()=>e?.(Ts.CLOSED)),this.updateJoinPayload(Object.assign({config:v},g)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:m})=>{var f;if(this.socket.setAuth(),m===void 0){e?.(Ts.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,_=(f=y?.length)!==null&&f!==void 0?f:0,j=[];for(let x=0;x<_;x++){const k=y[x],{filter:{event:S,schema:N,table:D,filter:M}}=k,R=m&&m[x];if(R&&R.event===S&&R.schema===N&&R.table===D&&R.filter===M)j.push(Object.assign(Object.assign({},k),{id:R.id}));else{this.unsubscribe(),this.state=kr.errored,e?.(Ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=j,e&&e(Ts.SUBSCRIBED);return}}).receive("error",m=>{this.state=kr.errored,e?.(Ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(m).join(", ")||"error")))}).receive("timeout",()=>{e?.(Ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===kr.joined&&e===yo.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async send(e,t={}){var r,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:a}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:a,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(r=t.timeout)!==null&&r!==void 0?r:this.timeout);return await((s=d.body)===null||s===void 0?void 0:s.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var a,l,c;const d=this._push(e.type,e,t.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=kr.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(rs.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(s=>{r=new Gc(this,rs.leave,{},e),r.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{r?.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=kr.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const s=new AbortController,i=setTimeout(()=>s.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(i),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Gc(this,e,t,r);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>J0){const t=this.pushBuffer.shift();t&&(t.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${t.event}`,t.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var s,i;const a=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:g}=rs;if(r&&[l,c,d,g].indexOf(a)>=0&&r!==this._joinRef())return;let m=this._onMessage(a,t,r);if(t&&!m)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(f=>{var y,_,j;return((y=f.filter)===null||y===void 0?void 0:y.event)==="*"||((j=(_=f.filter)===null||_===void 0?void 0:_.event)===null||j===void 0?void 0:j.toLocaleLowerCase())===a}).map(f=>f.callback(m,r)):(i=this.bindings[a])===null||i===void 0||i.filter(f=>{var y,_,j,x,k,S;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in f){const N=f.id,D=(y=f.filter)===null||y===void 0?void 0:y.event;return N&&((_=t.ids)===null||_===void 0?void 0:_.includes(N))&&(D==="*"||D?.toLocaleLowerCase()===((j=t.data)===null||j===void 0?void 0:j.type.toLocaleLowerCase()))}else{const N=(k=(x=f?.filter)===null||x===void 0?void 0:x.event)===null||k===void 0?void 0:k.toLocaleLowerCase();return N==="*"||N===((S=t?.event)===null||S===void 0?void 0:S.toLocaleLowerCase())}else return f.type.toLocaleLowerCase()===a}).map(f=>{if(typeof m=="object"&&"ids"in m){const y=m.data,{schema:_,table:j,commit_timestamp:x,type:k,errors:S}=y;m=Object.assign(Object.assign({},{schema:_,table:j,commit_timestamp:x,eventType:k,new:{},old:{},errors:S}),this._getPayloadRecords(y))}f.callback(m,r)})}_isClosed(){return this.state===kr.closed}_isJoined(){return this.state===kr.joined}_isJoining(){return this.state===kr.joining}_isLeaving(){return this.state===kr.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const s=e.toLocaleLowerCase(),i={type:s,filter:t,callback:r};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===r&&th.isEqual(s.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(rs.close,{},e)}_onError(e){this._on(rs.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=kr.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(t.new=Id(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(t.old=Id(e.columns,e.old_record)),t}}const Dd=()=>{},yl={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},n5=[1e3,2e3,5e3,1e4],s5=1e4,i5=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a5{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=yu,this.transport=null,this.heartbeatIntervalMs=yl.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Dd,this.ref=0,this.reconnectTimer=null,this.logger=Dd,this.conn=null,this.sendBuffer=[],this.serializer=new Y0,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...a)=>si(async()=>{const{default:l}=await Promise.resolve().then(()=>ka);return{default:l}},void 0).then(({default:l})=>l(...a)).catch(l=>{throw new Error(`Failed to load @supabase/node-fetch: ${l.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...a)=>i(...a)},!(!((r=t?.params)===null||r===void 0)&&r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${xu.websocket}`,this.httpEndpoint=gp(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(t?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=W0.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;throw t.includes("Node.js")?new Error(`${t}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:G0}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},e?this.conn.close(e,t??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(t=>t.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case vo.connecting:return Ai.Connecting;case vo.open:return Ai.Open;case vo.closing:return Ai.Closing;default:return Ai.Closed}}isConnected(){return this.connectionState()===Ai.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,t={config:{}}){const r=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===r);if(s)return s;{const i=new th(`realtime:${e}`,t,this);return this.channels.push(i),i}}push(e){const{topic:t,event:r,payload:s,ref:i}=e,a=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${t} ${r} (${i})`,s),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(K0,"heartbeat timeout"),setTimeout(()=>{var t;this.isConnected()||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout()},yl.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(r=>r.topic===e&&(r._isJoined()||r._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,t=>{t.topic==="phoenix"&&t.event==="phx_reply"&&this.heartbeatCallback(t.payload.status==="ok"?"ok":"error"),t.ref&&t.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:r,event:s,payload:i,ref:a}=t,l=a?`(${a})`:"",c=i.status||"";this.log("receive",`${c} ${r} ${s} ${l}`.trim(),i),this.channels.filter(d=>d._isMember(r)).forEach(d=>d._trigger(s,i,a)),this._triggerStateCallbacks("message",t)})}_clearTimer(e){var t;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((t=this.reconnectTimer)===null||t===void 0||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=t=>{this.log("worker","worker error",t.message),this.workerRef.terminate()},this.workerRef.onmessage=t=>{t.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(t=this.reconnectTimer)===null||t===void 0||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(rs.error))}_appendParams(e,t){if(Object.keys(t).length===0)return e;const r=e.match(/\?/)?"&":"?",s=new URLSearchParams(t);return`${e}${r}${s}`}_workerObjectUrl(e){let t;if(e)t=e;else{const r=new Blob([i5],{type:"application/javascript"});t=URL.createObjectURL(r)}return t}_setConnectionState(e,t=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;e?t=e:this.accessToken?t=await this.accessToken():t=this.accessTokenValue,this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(r=>{const s={access_token:t,version:V0};t&&r.updateJoinPayload(s),r.joinedOnce&&r._isJoined()&&r._push(rs.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new fp(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},yl.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,s,i,a,l,c,d;if(this.transport=(t=e?.transport)!==null&&t!==void 0?t:null,this.timeout=(r=e?.timeout)!==null&&r!==void 0?r:yu,this.heartbeatIntervalMs=(s=e?.heartbeatIntervalMs)!==null&&s!==void 0?s:yl.HEARTBEAT_INTERVAL,this.worker=(i=e?.worker)!==null&&i!==void 0?i:!1,this.accessToken=(a=e?.accessToken)!==null&&a!==void 0?a:null,e?.params&&(this.params=e.params),e?.logger&&(this.logger=e.logger),(e?.logLevel||e?.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(l=e?.reconnectAfterMs)!==null&&l!==void 0?l:g=>n5[g-1]||s5,this.encode=(c=e?.encode)!==null&&c!==void 0?c:(g,v)=>v(JSON.stringify(g)),this.decode=(d=e?.decode)!==null&&d!==void 0?d:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e?.workerUrl}}}class rh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Lr(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class o5 extends rh{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class _u extends rh{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var l5=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};const mp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>ka);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},c5=()=>l5(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield si(()=>Promise.resolve().then(()=>ka),void 0)).Response:Response}),Su=n=>{if(Array.isArray(n))return n.map(t=>Su(t));if(typeof n=="function"||n!==Object(n))return n;const e={};return Object.entries(n).forEach(([t,r])=>{const s=t.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Su(r)}),e},u5=n=>{if(typeof n!="object"||n===null)return!1;const e=Object.getPrototypeOf(n);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)};var Ii=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};const Kc=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),h5=(n,e,t)=>Ii(void 0,void 0,void 0,function*(){const r=yield c5();n instanceof r&&!t?.noResolveJson?n.json().then(s=>{const i=n.status||500,a=s?.statusCode||i+"";e(new o5(Kc(s),i,a))}).catch(s=>{e(new _u(Kc(s),s))}):e(new _u(Kc(n),n))}),d5=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"||!r?s:(u5(r)?(s.headers=Object.assign({"Content-Type":"application/json"},e?.headers),s.body=JSON.stringify(r)):s.body=r,e?.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),t))};function Co(n,e,t,r,s,i){return Ii(this,void 0,void 0,function*(){return new Promise((a,l)=>{n(t,d5(e,r,s,i)).then(c=>{if(!c.ok)throw c;return r?.noResolveJson?c:c.json()}).then(c=>a(c)).catch(c=>h5(c,l,r))})})}function Fl(n,e,t,r){return Ii(this,void 0,void 0,function*(){return Co(n,"GET",e,t,r)})}function ds(n,e,t,r,s){return Ii(this,void 0,void 0,function*(){return Co(n,"POST",e,r,s,t)})}function ju(n,e,t,r,s){return Ii(this,void 0,void 0,function*(){return Co(n,"PUT",e,r,s,t)})}function f5(n,e,t,r){return Ii(this,void 0,void 0,function*(){return Co(n,"HEAD",e,Object.assign(Object.assign({},t),{noResolveJson:!0}),r)})}function vp(n,e,t,r,s){return Ii(this,void 0,void 0,function*(){return Co(n,"DELETE",e,r,s,t)})}var cn=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};const p5={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Md={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class g5{constructor(e,t={},r,s){this.url=e,this.headers=t,this.bucketId=r,this.fetch=mp(s)}uploadOrUpdate(e,t,r,s){return cn(this,void 0,void 0,function*(){try{let i;const a=Object.assign(Object.assign({},Md),s);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(a.upsert)});const c=a.metadata;typeof Blob<"u"&&r instanceof Blob?(i=new FormData,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",r)):typeof FormData<"u"&&r instanceof FormData?(i=r,i.append("cacheControl",a.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=r,l["cache-control"]=`max-age=${a.cacheControl}`,l["content-type"]=a.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s?.headers&&(l=Object.assign(Object.assign({},l),s.headers));const d=this._removeEmptyFolders(t),g=this._getFinalPath(d),v=yield(e=="PUT"?ju:ds)(this.fetch,`${this.url}/object/${g}`,i,Object.assign({headers:l},a?.duplex?{duplex:a.duplex}:{}));return{data:{path:d,id:v.Id,fullPath:v.Key},error:null}}catch(i){if(Lr(i))return{data:null,error:i};throw i}})}upload(e,t,r){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,s){return cn(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),a=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${a}`);l.searchParams.set("token",t);try{let c;const d=Object.assign({upsert:Md.upsert},s),g=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&r instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",r)):typeof FormData<"u"&&r instanceof FormData?(c=r,c.append("cacheControl",d.cacheControl)):(c=r,g["cache-control"]=`max-age=${d.cacheControl}`,g["content-type"]=d.contentType);const v=yield ju(this.fetch,l.toString(),c,{headers:g});return{data:{path:i,fullPath:v.Key},error:null}}catch(c){if(Lr(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,t){return cn(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const s=Object.assign({},this.headers);t?.upsert&&(s["x-upsert"]="true");const i=yield ds(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:s}),a=new URL(this.url+i.url),l=a.searchParams.get("token");if(!l)throw new rh("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:l},error:null}}catch(r){if(Lr(r))return{data:null,error:r};throw r}})}update(e,t,r){return cn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return cn(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(Lr(s))return{data:null,error:s};throw s}})}copy(e,t,r){return cn(this,void 0,void 0,function*(){try{return{data:{path:(yield ds(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:r?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(Lr(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,r){return cn(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ds(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},r?.transform?{transform:r.transform}:{}),{headers:this.headers});const a=r?.download?`&download=${r.download===!0?"":r.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${a}`)},{data:i,error:null}}catch(s){if(Lr(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,r){return cn(this,void 0,void 0,function*(){try{const s=yield ds(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),i=r?.download?`&download=${r.download===!0?"":r.download}`:"";return{data:s.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${i}`):null})),error:null}}catch(s){if(Lr(s))return{data:null,error:s};throw s}})}download(e,t){return cn(this,void 0,void 0,function*(){const s=typeof t?.transform<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString(t?.transform||{}),a=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Fl(this.fetch,`${this.url}/${s}/${l}${a}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Lr(l))return{data:null,error:l};throw l}})}info(e){return cn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const r=yield Fl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Su(r),error:null}}catch(r){if(Lr(r))return{data:null,error:r};throw r}})}exists(e){return cn(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield f5(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(Lr(r)&&r instanceof _u){const s=r.originalError;if([400,404].includes(s?.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),s=[],i=t?.download?`download=${t.download===!0?"":t.download}`:"";i!==""&&s.push(i);const l=typeof t?.transform<"u"?"render/image":"object",c=this.transformOptsToQueryString(t?.transform||{});c!==""&&s.push(c);let d=s.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${r}${d}`)}}}remove(e){return cn(this,void 0,void 0,function*(){try{return{data:yield vp(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(Lr(t))return{data:null,error:t};throw t}})}list(e,t,r){return cn(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},p5),t),{prefix:e||""});return{data:yield ds(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},r),error:null}}catch(s){if(Lr(s))return{data:null,error:s};throw s}})}listV2(e,t){return cn(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield ds(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(Lr(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const m5="2.11.0",v5={"X-Client-Info":`storage-js/${m5}`};var ia=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};class b5{constructor(e,t={},r,s){const i=new URL(e);s?.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},v5),t),this.fetch=mp(r)}listBuckets(){return ia(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Lr(e))return{data:null,error:e};throw e}})}getBucket(e){return ia(this,void 0,void 0,function*(){try{return{data:yield Fl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(Lr(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return ia(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Lr(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return ia(this,void 0,void 0,function*(){try{return{data:yield ju(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(Lr(r))return{data:null,error:r};throw r}})}emptyBucket(e){return ia(this,void 0,void 0,function*(){try{return{data:yield ds(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(Lr(t))return{data:null,error:t};throw t}})}deleteBucket(e){return ia(this,void 0,void 0,function*(){try{return{data:yield vp(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(Lr(t))return{data:null,error:t};throw t}})}}class y5 extends b5{constructor(e,t={},r,s){super(e,t,r,s)}from(e){return new g5(this.url,this.headers,e,this.fetch)}}const x5="2.55.0";let lo="";typeof Deno<"u"?lo="deno":typeof document<"u"?lo="web":typeof navigator<"u"&&navigator.product==="ReactNative"?lo="react-native":lo="node";const w5={"X-Client-Info":`supabase-js-${lo}/${x5}`},_5={headers:w5},S5={schema:"public"},j5={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A5={};var k5=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};const L5=n=>{let e;return n?e=n:typeof fetch>"u"?e=rp:e=fetch,(...t)=>e(...t)},P5=()=>typeof Headers>"u"?np:Headers,N5=(n,e,t)=>{const r=L5(t),s=P5();return(i,a)=>k5(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:n;let d=new s(a?.headers);return d.has("apikey")||d.set("apikey",n),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),r(i,Object.assign(Object.assign({},a),{headers:d}))})};var C5=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};function T5(n){return n.endsWith("/")?n:n+"/"}function R5(n,e){var t,r;const{db:s,auth:i,realtime:a,global:l}=n,{db:c,auth:d,realtime:g,global:v}=e,m={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},g),a),storage:{},global:Object.assign(Object.assign(Object.assign({},v),l),{headers:Object.assign(Object.assign({},(t=v?.headers)!==null&&t!==void 0?t:{}),(r=l?.headers)!==null&&r!==void 0?r:{})}),accessToken:()=>C5(this,void 0,void 0,function*(){return""})};return n.accessToken?m.accessToken=n.accessToken:delete m.accessToken,m}const bp="2.71.1",ma=30*1e3,Au=3,Jc=Au*ma,E5="http://localhost:9999",I5="supabase.auth.token",O5={"X-Client-Info":`gotrue-js/${bp}`},ku="X-Supabase-Api-Version",yp={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},F5=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,D5=10*60*1e3;class nh extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function xt(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class M5 extends nh{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}function B5(n){return xt(n)&&n.name==="AuthApiError"}class xp extends nh{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class li extends nh{constructor(e,t,r,s){super(e,r,s),this.name=t,this.status=r}}class Zs extends li{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function q5(n){return xt(n)&&n.name==="AuthSessionMissingError"}class xl extends li{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class wl extends li{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _l extends li{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function $5(n){return xt(n)&&n.name==="AuthImplicitGrantRedirectError"}class Bd extends li{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Lu extends li{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Yc(n){return xt(n)&&n.name==="AuthRetryableFetchError"}class qd extends li{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Pu extends li{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Dl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$d=` 	
\r=`.split(""),z5=(()=>{const n=new Array(128);for(let e=0;e<n.length;e+=1)n[e]=-1;for(let e=0;e<$d.length;e+=1)n[$d[e].charCodeAt(0)]=-2;for(let e=0;e<Dl.length;e+=1)n[Dl[e].charCodeAt(0)]=e;return n})();function zd(n,e,t){if(n!==null)for(e.queue=e.queue<<8|n,e.queuedBits+=8;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Dl[r]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const r=e.queue>>e.queuedBits-6&63;t(Dl[r]),e.queuedBits-=6}}function wp(n,e,t){const r=z5[n];if(r>-1)for(e.queue=e.queue<<6|r,e.queuedBits+=6;e.queuedBits>=8;)t(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(r===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function Ud(n){const e=[],t=a=>{e.push(String.fromCodePoint(a))},r={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=a=>{H5(a,r,t)};for(let a=0;a<n.length;a+=1)wp(n.charCodeAt(a),s,i);return e.join("")}function U5(n,e){if(n<=127){e(n);return}else if(n<=2047){e(192|n>>6),e(128|n&63);return}else if(n<=65535){e(224|n>>12),e(128|n>>6&63),e(128|n&63);return}else if(n<=1114111){e(240|n>>18),e(128|n>>12&63),e(128|n>>6&63),e(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function W5(n,e){for(let t=0;t<n.length;t+=1){let r=n.charCodeAt(t);if(r>55295&&r<=56319){const s=(r-55296)*1024&65535;r=(n.charCodeAt(t+1)-56320&65535|s)+65536,t+=1}U5(r,e)}}function H5(n,e,t){if(e.utf8seq===0){if(n<=127){t(n);return}for(let r=1;r<6;r+=1)if(!(n>>7-r&1)){e.utf8seq=r;break}if(e.utf8seq===2)e.codepoint=n&31;else if(e.utf8seq===3)e.codepoint=n&15;else if(e.utf8seq===4)e.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|n&63,e.utf8seq-=1,e.utf8seq===0&&t(e.codepoint)}}function V5(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};for(let s=0;s<n.length;s+=1)wp(n.charCodeAt(s),t,r);return new Uint8Array(e)}function G5(n){const e=[];return W5(n,t=>e.push(t)),new Uint8Array(e)}function K5(n){const e=[],t={queue:0,queuedBits:0},r=s=>{e.push(s)};return n.forEach(s=>zd(s,t,r)),zd(null,t,r),e.join("")}function J5(n){return Math.round(Date.now()/1e3)+n}function Y5(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){const e=Math.random()*16|0;return(n=="x"?e:e&3|8).toString(16)})}const es=()=>typeof window<"u"&&typeof document<"u",wi={tested:!1,writable:!1},_p=()=>{if(!es())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(wi.tested)return wi.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),wi.tested=!0,wi.writable=!0}catch{wi.tested=!0,wi.writable=!1}return wi.writable};function X5(n){const e={},t=new URL(n);if(t.hash&&t.hash[0]==="#")try{new URLSearchParams(t.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return t.searchParams.forEach((r,s)=>{e[s]=r}),e}const Sp=n=>{let e;return n?e=n:typeof fetch>"u"?e=(...t)=>si(async()=>{const{default:r}=await Promise.resolve().then(()=>ka);return{default:r}},void 0).then(({default:r})=>r(...t)):e=fetch,(...t)=>e(...t)},Z5=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",va=async(n,e,t)=>{await n.setItem(e,JSON.stringify(t))},_i=async(n,e)=>{const t=await n.getItem(e);if(!t)return null;try{return JSON.parse(t)}catch{return t}},Xs=async(n,e)=>{await n.removeItem(e)};class Ql{constructor(){this.promise=new Ql.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}Ql.promiseConstructor=Promise;function Xc(n){const e=n.split(".");if(e.length!==3)throw new Pu("Invalid JWT structure");for(let r=0;r<e.length;r++)if(!F5.test(e[r]))throw new Pu("JWT not in base64url format");return{header:JSON.parse(Ud(e[0])),payload:JSON.parse(Ud(e[1])),signature:V5(e[2]),raw:{header:e[0],payload:e[1]}}}async function Q5(n){return await new Promise(e=>{setTimeout(()=>e(null),n)})}function ev(n,e){return new Promise((r,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const a=await n(i);if(!e(i,null,a)){r(a);return}}catch(a){if(!e(i,a)){s(a);return}}})()})}function tv(n){return("0"+n.toString(16)).substr(-2)}function rv(){const e=new Uint32Array(56);if(typeof crypto>"u"){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",r=t.length;let s="";for(let i=0;i<56;i++)s+=t.charAt(Math.floor(Math.random()*r));return s}return crypto.getRandomValues(e),Array.from(e,tv).join("")}async function nv(n){const t=new TextEncoder().encode(n),r=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(r);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function sv(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const t=await nv(n);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function aa(n,e,t=!1){const r=rv();let s=r;t&&(s+="/PASSWORD_RECOVERY"),await va(n,`${e}-code-verifier`,s);const i=await sv(r);return[i,r===i?"plain":"s256"]}const iv=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function av(n){const e=n.headers.get(ku);if(!e||!e.match(iv))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ov(n){if(!n)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(n<=e)throw new Error("JWT has expired")}function lv(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const cv=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function oa(n){if(!cv.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Zc(){const n={};return new Proxy(n,{get:(e,t)=>{if(t==="__isUserNotAvailableProxy")return!0;if(typeof t=="symbol"){const r=t.toString();if(r==="Symbol(Symbol.toPrimitive)"||r==="Symbol(Symbol.toStringTag)"||r==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Wd(n){return JSON.parse(JSON.stringify(n))}var uv=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};const ji=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),hv=[502,503,504];async function Hd(n){var e;if(!Z5(n))throw new Lu(ji(n),0);if(hv.includes(n.status))throw new Lu(ji(n),n.status);let t;try{t=await n.json()}catch(i){throw new xp(ji(i),i)}let r;const s=av(n);if(s&&s.getTime()>=yp["2024-01-01"].timestamp&&typeof t=="object"&&t&&typeof t.code=="string"?r=t.code:typeof t=="object"&&t&&typeof t.error_code=="string"&&(r=t.error_code),r){if(r==="weak_password")throw new qd(ji(t),n.status,((e=t.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(r==="session_not_found")throw new Zs}else if(typeof t=="object"&&t&&typeof t.weak_password=="object"&&t.weak_password&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.reasons.reduce((i,a)=>i&&typeof a=="string",!0))throw new qd(ji(t),n.status,t.weak_password.reasons);throw new M5(ji(t),n.status||500,r)}const dv=(n,e,t,r)=>{const s={method:n,headers:e?.headers||{}};return n==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e?.headers),s.body=JSON.stringify(r),Object.assign(Object.assign({},s),t))};async function kt(n,e,t,r){var s;const i=Object.assign({},r?.headers);i[ku]||(i[ku]=yp["2024-01-01"].name),r?.jwt&&(i.Authorization=`Bearer ${r.jwt}`);const a=(s=r?.query)!==null&&s!==void 0?s:{};r?.redirectTo&&(a.redirect_to=r.redirectTo);const l=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",c=await fv(n,e,t+l,{headers:i,noResolveJson:r?.noResolveJson},{},r?.body);return r?.xform?r?.xform(c):{data:Object.assign({},c),error:null}}async function fv(n,e,t,r,s,i){const a=dv(e,r,s,i);let l;try{l=await n(t,Object.assign({},a))}catch(c){throw console.error(c),new Lu(ji(c),0)}if(l.ok||await Hd(l),r?.noResolveJson)return l;try{return await l.json()}catch(c){await Hd(c)}}function Cs(n){var e;let t=null;vv(n)&&(t=Object.assign({},n),n.expires_at||(t.expires_at=J5(n.expires_in)));const r=(e=n.user)!==null&&e!==void 0?e:n;return{data:{session:t,user:r},error:null}}function Vd(n){const e=Cs(n);return!e.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((t,r)=>t&&typeof r=="string",!0)&&(e.data.weak_password=n.weak_password),e}function ei(n){var e;return{data:{user:(e=n.user)!==null&&e!==void 0?e:n},error:null}}function pv(n){return{data:n,error:null}}function gv(n){const{action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i}=n,a=uv(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:t,hashed_token:r,redirect_to:s,verification_type:i},c=Object.assign({},a);return{data:{properties:l,user:c},error:null}}function mv(n){return n}function vv(n){return n.access_token&&n.refresh_token&&n.expires_in}const Qc=["global","local","others"];var bv=function(n,e){var t={};for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&e.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(n);s<r.length;s++)e.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(n,r[s])&&(t[r[s]]=n[r[s]]);return t};class yv{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Sp(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=Qc[0]){if(Qc.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Qc.join(", ")}`);try{return await kt(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await kt(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ei})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=bv(e,["options"]),s=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(s.new_email=r?.newEmail,delete s.newEmail),await kt(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:gv,redirectTo:t?.redirectTo})}catch(t){if(xt(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await kt(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ei})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,s,i,a,l,c;try{const d={nextPage:null,lastPage:0,total:0},g=await kt(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(r=(t=e?.page)===null||t===void 0?void 0:t.toString())!==null&&r!==void 0?r:"",per_page:(i=(s=e?.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:mv});if(g.error)throw g.error;const v=await g.json(),m=(a=g.headers.get("x-total-count"))!==null&&a!==void 0?a:0,f=(c=(l=g.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return f.length>0&&(f.forEach(y=>{const _=parseInt(y.split(";")[0].split("=")[1].substring(0,1)),j=JSON.parse(y.split(";")[1].split("=")[1]);d[`${j}Page`]=_}),d.total=parseInt(m)),{data:Object.assign(Object.assign({},v),d),error:null}}catch(d){if(xt(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){oa(e);try{return await kt(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ei})}catch(t){if(xt(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){oa(e);try{return await kt(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ei})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){oa(e);try{return await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ei})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){oa(e.userId);try{const{data:t,error:r}=await kt(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:t,error:r}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _deleteFactor(e){oa(e.userId),oa(e.id);try{return{data:await kt(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}}function Gd(n={}){return{getItem:e=>n[e]||null,setItem:(e,t)=>{n[e]=t},removeItem:e=>{delete n[e]}}}function xv(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const la={debug:!!(globalThis&&_p()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class jp extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wv extends jp{}async function _v(n,e,t){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,e);const r=new globalThis.AbortController;return e>0&&setTimeout(()=>{r.abort(),la.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:r.signal},async s=>{if(s){la.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,s.name);try{return await t()}finally{la.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,s.name)}}else{if(e===0)throw la.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new wv(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(la.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await t()}}))}xv();const Sv={url:E5,storageKey:I5,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:O5,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Kd(n,e,t){return await t()}const ca={};class So{constructor(e){var t,r;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=So.nextInstanceID,So.nextInstanceID+=1,this.instanceID>0&&es()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},Sv),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new yv({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Sp(s.fetch),this.lock=s.lock||Kd,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:es()&&(!((t=globalThis?.navigator)===null||t===void 0)&&t.locks)?this.lock=_v:this.lock=Kd,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:_p()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Gd(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Gd(this.memoryStorage)),es()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(r=this.broadcastChannel)===null||r===void 0||r.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,t;return(t=(e=ca[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&t!==void 0?t:{keys:[]}}set jwks(e){ca[this.storageKey]=Object.assign(Object.assign({},ca[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return(t=(e=ca[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&t!==void 0?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){ca[this.storageKey]=Object.assign(Object.assign({},ca[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${bp}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const t=X5(window.location.href);let r="none";if(this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce"),es()&&this.detectSessionInUrl&&r!=="none"){const{data:s,error:i}=await this._getSessionFromURL(t,r);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),$5(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:a,redirectType:l}=s;return this._debug("#_initialize()","detected session in URL",a,"redirect type",l),await this._saveSession(a),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return xt(t)?{error:t}:{error:new xp("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,s;try{const i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(r=(t=e?.options)===null||t===void 0?void 0:t.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:Cs}),{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xt(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var t,r,s;try{let i;if("email"in e){const{email:g,password:v,options:m}=e;let f=null,y=null;this.flowType==="pkce"&&([f,y]=await aa(this.storage,this.storageKey)),i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:m?.emailRedirectTo,body:{email:g,password:v,data:(t=m?.data)!==null&&t!==void 0?t:{},gotrue_meta_security:{captcha_token:m?.captchaToken},code_challenge:f,code_challenge_method:y},xform:Cs})}else if("phone"in e){const{phone:g,password:v,options:m}=e;i=await kt(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:g,password:v,data:(r=m?.data)!==null&&r!==void 0?r:{},channel:(s=m?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:m?.captchaToken}},xform:Cs})}else throw new wl("You must provide either an email or phone number and a password");const{data:a,error:l}=i;if(l||!a)return{data:{user:null,session:null},error:l};const c=a.session,d=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(xt(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let t;if("email"in e){const{email:i,password:a,options:l}=e;t=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vd})}else if("phone"in e){const{phone:i,password:a,options:l}=e;t=await kt(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vd})}else throw new wl("You must provide either an email or phone number and a password");const{data:r,error:s}=t;return s?{data:{user:null,session:null},error:s}:!r||!r.session||!r.user?{data:{user:null,session:null},error:new xl}:(r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),{data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:s})}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,r,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(t=e.options)===null||t===void 0?void 0:t.redirectTo,scopes:(r=e.options)===null||r===void 0?void 0:r.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if(t==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,r,s,i,a,l,c,d,g,v,m,f;let y,_;if("message"in e)y=e.message,_=e.signature;else{const{chain:j,wallet:x,statement:k,options:S}=e;let N;if(es())if(typeof x=="object")N=x;else{const M=window;if("solana"in M&&typeof M.solana=="object"&&("signIn"in M.solana&&typeof M.solana.signIn=="function"||"signMessage"in M.solana&&typeof M.solana.signMessage=="function"))N=M.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!S?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const D=new URL((t=S?.url)!==null&&t!==void 0?t:window.location.href);if("signIn"in N&&N.signIn){const M=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},S?.signInWithSolana),{version:"1",domain:D.host,uri:D.href}),k?{statement:k}:null));let R;if(Array.isArray(M)&&M[0]&&typeof M[0]=="object")R=M[0];else if(M&&typeof M=="object"&&"signedMessage"in M&&"signature"in M)R=M;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in R&&"signature"in R&&(typeof R.signedMessage=="string"||R.signedMessage instanceof Uint8Array)&&R.signature instanceof Uint8Array)y=typeof R.signedMessage=="string"?R.signedMessage:new TextDecoder().decode(R.signedMessage),_=R.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");y=[`${D.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...k?["",k,""]:[""],"Version: 1",`URI: ${D.href}`,`Issued At: ${(s=(r=S?.signInWithSolana)===null||r===void 0?void 0:r.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=S?.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${S.signInWithSolana.notBefore}`]:[],...!((a=S?.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${S.signInWithSolana.expirationTime}`]:[],...!((l=S?.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${S.signInWithSolana.chainId}`]:[],...!((c=S?.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${S.signInWithSolana.nonce}`]:[],...!((d=S?.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${S.signInWithSolana.requestId}`]:[],...!((v=(g=S?.signInWithSolana)===null||g===void 0?void 0:g.resources)===null||v===void 0)&&v.length?["Resources",...S.signInWithSolana.resources.map(R=>`- ${R}`)]:[]].join(`
`);const M=await N.signMessage(new TextEncoder().encode(y),"utf8");if(!M||!(M instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");_=M}}try{const{data:j,error:x}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:y,signature:K5(_)},!((m=e.options)===null||m===void 0)&&m.captchaToken?{gotrue_meta_security:{captcha_token:(f=e.options)===null||f===void 0?void 0:f.captchaToken}}:null),xform:Cs});if(x)throw x;return!j||!j.session||!j.user?{data:{user:null,session:null},error:new xl}:(j.session&&(await this._saveSession(j.session),await this._notifyAllSubscribers("SIGNED_IN",j.session)),{data:Object.assign({},j),error:x})}catch(j){if(xt(j))return{data:{user:null,session:null},error:j};throw j}}async _exchangeCodeForSession(e){const t=await _i(this.storage,`${this.storageKey}-code-verifier`),[r,s]=(t??"").split("/");try{const{data:i,error:a}=await kt(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:Cs});if(await Xs(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new xl}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:a})}catch(i){if(xt(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:t,provider:r,token:s,access_token:i,nonce:a}=e,l=await kt(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:s,access_token:i,nonce:a,gotrue_meta_security:{captcha_token:t?.captchaToken}},xform:Cs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new xl}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,r,s,i,a;try{if("email"in e){const{email:l,options:c}=e;let d=null,g=null;this.flowType==="pkce"&&([d,g]=await aa(this.storage,this.storageKey));const{error:v}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(t=c?.data)!==null&&t!==void 0?t:{},create_user:(r=c?.shouldCreateUser)!==null&&r!==void 0?r:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:d,code_challenge_method:g},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:v}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:g}=await kt(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:d?.message_id},error:g}}throw new wl("You must provide either an email or phone number.")}catch(l){if(xt(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var t,r;try{let s,i;"options"in e&&(s=(t=e.options)===null||t===void 0?void 0:t.redirectTo,i=(r=e.options)===null||r===void 0?void 0:r.captchaToken);const{data:a,error:l}=await kt(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:Cs});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");const c=a.session,d=a.user;return c?.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(s){if(xt(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,r,s;try{let i=null,a=null;return this.flowType==="pkce"&&([i,a]=await aa(this.storage,this.storageKey)),await kt(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(r=(t=e.options)===null||t===void 0?void 0:t.redirectTo)!==null&&r!==void 0?r:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:a}),headers:this.headers,xform:pv})}catch(i){if(xt(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new Zs;const{error:s}=await kt(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(xt(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:s,options:i}=e,{error:a}=await kt(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}},redirectTo:i?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){const{phone:r,type:s,options:i}=e,{data:a,error:l}=await kt(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:s,gotrue_meta_security:{captcha_token:i?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new wl("You must provide either an email or phone number and a type")}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async t=>t))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const r=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await r,await t()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const r=t();for(this.pendingInLock.push((async()=>{try{await r}catch{}})()),await r;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await r}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const t=await _i(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),t!==null&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=e.expires_at?e.expires_at*1e3-Date.now()<Jc:!1;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const a=await _i(this.userStorage,this.storageKey+"-user");a?.user?e.user=a.user:e.user=Zc()}if(this.storage.isServer&&e.user){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,g)=>(!a&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,g))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ei}):await this._useSession(async t=>{var r,s,i;const{data:a,error:l}=t;if(l)throw l;return!(!((r=a.session)===null||r===void 0)&&r.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Zs}:await kt(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:ei})})}catch(t){if(xt(t))return q5(t)&&(await this._removeSession(),await Xs(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:s,error:i}=r;if(i)throw i;if(!s.session)throw new Zs;const a=s.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await aa(this.storage,this.storageKey));const{data:d,error:g}=await kt(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:t?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:a.access_token,xform:ei});if(g)throw g;return a.user=d.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),{data:{user:a.user},error:null}})}catch(r){if(xt(r))return{data:{user:null},error:r};throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Zs;const t=Date.now()/1e3;let r=t,s=!0,i=null;const{payload:a}=Xc(e.access_token);if(a.exp&&(r=a.exp,s=r<=t),s){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(t){if(xt(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:a,error:l}=t;if(l)throw l;e=(r=a.session)!==null&&r!==void 0?r:void 0}if(!e?.refresh_token)throw new Zs;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(xt(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!es())throw new _l("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _l(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if(this.flowType==="pkce")throw new Bd("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new _l("Not a valid implicit grant flow url.");break;default:}if(t==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Bd("No code detected.");const{data:k,error:S}=await this._exchangeCodeForSession(e.code);if(S)throw S;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:k.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:s,access_token:i,refresh_token:a,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!a||!d)throw new _l("No session defined in URL");const g=Math.round(Date.now()/1e3),v=parseInt(l);let m=g+v;c&&(m=parseInt(c));const f=m-g;f*1e3<=ma&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${f}s, should have been closer to ${v}s`);const y=m-v;g-y>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",y,m,g):g-y<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",y,m,g);const{data:_,error:j}=await this._getUser(i);if(j)throw j;const x={provider_token:r,provider_refresh_token:s,access_token:i,expires_in:v,expires_at:m,refresh_token:a,token_type:d,user:_.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(r){if(xt(r))return{data:{session:null,redirectType:null},error:r};throw r}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await _i(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{error:i};const a=(r=s.session)===null||r===void 0?void 0:r.access_token;if(a){const{error:l}=await this.admin.signOut(a,e);if(l&&!(B5(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Xs(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t=Y5(),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})))(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,s;try{const{data:{session:i},error:a}=t;if(a)throw a;await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,t={}){let r=null,s=null;this.flowType==="pkce"&&([r,s]=await aa(this.storage,this.storageKey,!0));try{return await kt(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(i){if(xt(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return{data:{identities:(e=t.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(t){if(xt(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:r,error:s}=await this._useSession(async i=>{var a,l,c,d,g;const{data:v,error:m}=i;if(m)throw m;const f=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await kt(this.fetch,"GET",f,{headers:this.headers,jwt:(g=(d=v.session)===null||d===void 0?void 0:d.access_token)!==null&&g!==void 0?g:void 0})});if(s)throw s;return es()&&!(!((t=e.options)===null||t===void 0)&&t.skipBrowserRedirect)&&window.location.assign(r?.url),{data:{provider:e.provider,url:r?.url},error:null}}catch(r){if(xt(r))return{data:{provider:e.provider,url:null},error:r};throw r}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)throw a;return await kt(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(r=i.session)===null||r===void 0?void 0:r.access_token)!==null&&s!==void 0?s:void 0})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await ev(async s=>(s>0&&await Q5(200*Math.pow(2,s-1)),this._debug(t,"refreshing attempt",s),await kt(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Cs})),(s,i)=>{const a=200*Math.pow(2,s);return i&&Yc(i)&&Date.now()+a-r<ma})}catch(r){if(this._debug(t,"error",r),xt(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),es()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await _i(this.storage,this.storageKey);if(s&&this.userStorage){let a=await _i(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:s.user},await va(this.userStorage,this.storageKey+"-user",a)),s.user=(e=a?.user)!==null&&e!==void 0?e:Zc()}else if(s&&!s.user&&!s.user){const a=await _i(this.storage,this.storageKey+"-user");a&&a?.user?(s.user=a.user,await Xs(this.storage,this.storageKey+"-user"),await va(this.storage,this.storageKey,s)):s.user=Zc()}if(this._debug(r,"session from storage",s),!this._isValidSession(s)){this._debug(r,"session is not valid"),s!==null&&await this._removeSession();return}const i=((t=s.expires_at)!==null&&t!==void 0?t:1/0)*1e3-Date.now()<Jc;if(this._debug(r,`session has${i?"":" not"} expired with margin of ${Jc}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:a}=await this._callRefreshToken(s.refresh_token);a&&(console.error(a),Yc(a)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:l}=await this._getUser(s.access_token);!l&&a?.user?(s.user=a.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(r,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(r,"error",s),console.error(s);return}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new Zs;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ql;const{data:i,error:a}=await this._refreshAccessToken(e);if(a)throw a;if(!i.session)throw new Zs;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(s,"error",i),xt(i)){const a={session:null,error:i};return Yc(i)||await this._removeSession(),(t=this.refreshingDeferred)===null||t===void 0||t.resolve(a),a}throw(r=this.refreshingDeferred)===null||r===void 0||r.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,r=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const i=[],a=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,t)}catch(c){i.push(c)}});if(await Promise.all(a),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&t.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!r&&t.user&&await va(this.userStorage,this.storageKey+"-user",{user:t.user});const s=Object.assign({},t);delete s.user;const i=Wd(s);await va(this.storage,this.storageKey,i)}else{const s=Wd(t);await va(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await Xs(this.storage,this.storageKey),await Xs(this.storage,this.storageKey+"-code-verifier"),await Xs(this.storage,this.storageKey+"-user"),this.userStorage&&await Xs(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&es()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ma);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async t=>{const{data:{session:r}}=t;if(!r||!r.refresh_token||!r.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((r.expires_at*1e3-e)/ma);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${ma}ms, refresh threshold is ${Au} ticks`),s<=Au&&await this._callRefreshToken(r.refresh_token)})}catch(t){console.error("Auto refresh tick failed with error. This is likely a transient error.",t)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof jp)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!es()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const s=[`provider=${encodeURIComponent(t)}`];if(r?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),r?.scopes&&s.push(`scopes=${encodeURIComponent(r.scopes)}`),this.flowType==="pkce"){const[i,a]=await aa(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(r?.queryParams){const i=new URLSearchParams(r.queryParams);s.push(i.toString())}return r?.skipBrowserRedirect&&s.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await kt(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,s;const{data:i,error:a}=t;if(a)return{data:null,error:a};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await kt(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(r=i?.session)===null||r===void 0?void 0:r.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(t){if(xt(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;if(i)return{data:null,error:i};const{data:a,error:l}=await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})})}catch(t){if(xt(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:s,error:i}=t;return i?{data:null,error:i}:await kt(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(r=s?.session)===null||r===void 0?void 0:r.access_token})})}catch(t){if(xt(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?{data:null,error:r}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const r=e?.factors||[],s=r.filter(a=>a.factor_type==="totp"&&a.status==="verified"),i=r.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:r,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,r;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:a}=Xc(s.access_token);let l=null;a.aal&&(l=a.aal);let c=l;((r=(t=s.user.factors)===null||t===void 0?void 0:t.filter(v=>v.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(c="aal2");const g=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:g},error:null}}))}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(l=>l.kid===e);if(r)return r;const s=Date.now();if(r=this.jwks.keys.find(l=>l.kid===e),r&&this.jwks_cached_at+D5>s)return r;const{data:i,error:a}=await kt(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,r=i.keys.find(l=>l.kid===e),!r)?null:r}async getClaims(e,t={}){try{let r=e;if(!r){const{data:f,error:y}=await this.getSession();if(y||!f.session)return{data:null,error:y};r=f.session.access_token}const{header:s,payload:i,signature:a,raw:{header:l,payload:c}}=Xc(r);t?.allowExpired||ov(i.exp);const d=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,t?.keys?{keys:t.keys}:t?.jwks);if(!d){const{error:f}=await this.getUser(r);if(f)throw f;return{data:{claims:i,header:s,signature:a},error:null}}const g=lv(s.alg),v=await crypto.subtle.importKey("jwk",d,g,!0,["verify"]);if(!await crypto.subtle.verify(g,v,a,G5(`${l}.${c}`)))throw new Pu("Invalid JWT signature");return{data:{claims:i,header:s,signature:a},error:null}}catch(r){if(xt(r))return{data:null,error:r};throw r}}}So.nextInstanceID=0;const jv=So;class Av extends jv{constructor(e){super(e)}}var kv=function(n,e,t,r){function s(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function l(g){try{d(r.next(g))}catch(v){a(v)}}function c(g){try{d(r.throw(g))}catch(v){a(v)}}function d(g){g.done?i(g.value):s(g.value).then(l,c)}d((r=r.apply(n,e||[])).next())})};class Lv{constructor(e,t,r){var s,i,a;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const l=T5(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,g={db:S5,realtime:A5,auth:Object.assign(Object.assign({},j5),{storageKey:d}),global:_5},v=R5(r??{},g);this.storageKey=(s=v.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=v.global.headers)!==null&&i!==void 0?i:{},v.accessToken?(this.accessToken=v.accessToken,this.auth=new Proxy({},{get:(m,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=v.auth)!==null&&a!==void 0?a:{},this.headers,v.global.fetch),this.fetch=N5(t,this._getAccessToken.bind(this),v.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},v.realtime)),this.rest=new U0(new URL("rest/v1",c).href,{headers:this.headers,schema:v.db.schema,fetch:this.fetch}),this.storage=new y5(this.storageUrl.href,this.headers,this.fetch,r?.storage),v.accessToken||this._listenForAuthEvents()}get functions(){return new y0(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return kv(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:r}=yield this.auth.getSession();return(t=(e=r.session)===null||e===void 0?void 0:e.access_token)!==null&&t!==void 0?t:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,storageKey:i,flowType:a,lock:l,debug:c},d,g){const v={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Av({url:this.authUrl.href,headers:Object.assign(Object.assign({},v),d),storageKey:i,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:s,flowType:a,lock:l,debug:c,fetch:g,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new a5(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((t,r)=>{this._handleTokenChanged(t,"CLIENT",r?.access_token)})}_handleTokenChanged(e,t,r){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==r?this.changedAccessToken=r:e==="SIGNED_OUT"&&(this.realtime.setAuth(),t=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Pv=(n,e,t)=>new Lv(n,e,t);function Nv(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const e=n.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}Nv()&&console.warn("⚠️  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Cv="https://vynivklkqczimdkhyydo.supabase.co",Tv="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZ5bml2a2xrcWN6aW1ka2h5eWRvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTUzNDU1ODgsImV4cCI6MjA3MDkyMTU4OH0.Ns7OnRE6yO6Z8eogkjmf8wv8OGC0QOhA6CVG-Uazb-E",ua="student-images",ha=Pv(Cv,Tv);var sh={},Rv=dn;Object.defineProperty(sh,"__esModule",{value:!0});var ih=sh.default=void 0;Ov(xe);var Ev=Rv(pn()),Iv=h;function Ap(n){if(typeof WeakMap!="function")return null;var e=new WeakMap,t=new WeakMap;return(Ap=function(r){return r?t:e})(n)}function Ov(n,e){if(n&&n.__esModule)return n;if(n===null||typeof n!="object"&&typeof n!="function")return{default:n};var t=Ap(e);if(t&&t.has(n))return t.get(n);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var i in n)if(i!=="default"&&Object.prototype.hasOwnProperty.call(n,i)){var a=s?Object.getOwnPropertyDescriptor(n,i):null;a&&(a.get||a.set)?Object.defineProperty(r,i,a):r[i]=n[i]}return r.default=n,t&&t.set(n,r),r}ih=sh.default=(0,Ev.default)((0,Iv.jsx)("path",{d:"M12.545,10.239v3.821h5.445c-0.712,2.315-2.647,3.972-5.445,3.972c-3.332,0-6.033-2.701-6.033-6.032s2.701-6.032,6.033-6.032c1.498,0,2.866,0.549,3.921,1.453l2.814-2.814C17.503,2.988,15.139,2,12.545,2C7.021,2,2.543,6.477,2.543,12s4.478,10,10.002,10c8.396,0,10.249-7.85,9.426-11.748L12.545,10.239z"}),"Google");const Fv=({onSwitchToSignup:n})=>{const{t:e}=fn(),[t,r]=xe.useState(""),[s,i]=xe.useState(""),[a,l]=xe.useState(""),[c,d]=xe.useState(!1),g=async m=>{m.preventDefault(),l(""),d(!0);try{await W1(wa,t,s)}catch{l(e("login_error"))}finally{d(!1)}},v=async()=>{l(""),d(!0);try{const m=new ff;await pf(wa,m)}catch{l(e("google_signin_error"))}finally{d(!1)}};return h.jsxs(Le,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3},children:[h.jsx(_e,{variant:"h4",component:"h1",gutterBottom:!0,children:e("login")}),a&&h.jsx(Tu,{severity:"error",sx:{mb:2,width:"100%",maxWidth:400},children:a}),h.jsxs(Le,{component:"form",onSubmit:g,sx:{width:"100%",maxWidth:400,display:"flex",flexDirection:"column",gap:2},children:[h.jsx(wt,{required:!0,fullWidth:!0,label:e("email"),type:"email",value:t,onChange:m=>r(m.target.value),disabled:c}),h.jsx(wt,{required:!0,fullWidth:!0,label:e("password"),type:"password",value:s,onChange:m=>i(m.target.value),disabled:c}),h.jsx(Gt,{type:"submit",fullWidth:!0,variant:"contained",disabled:c,children:e("login")}),h.jsx(En,{sx:{my:2},children:e("or")}),h.jsx(Gt,{fullWidth:!0,variant:"outlined",startIcon:h.jsx(ih,{}),onClick:v,disabled:c,children:e("signin_with_google")}),h.jsx(Gt,{fullWidth:!0,variant:"text",onClick:n,disabled:c,sx:{mt:1},children:e("need_account")})]})]})},Dv=({onSwitchToLogin:n})=>{const{t:e}=fn(),[t,r]=xe.useState(""),[s,i]=xe.useState(""),[a,l]=xe.useState(""),[c,d]=xe.useState(""),[g,v]=xe.useState(""),[m,f]=xe.useState(!1),y=async j=>{if(j.preventDefault(),v(""),s!==a)return v(e("passwords_dont_match"));if(!c||c.length<9)return v(e("invalid_phone"));f(!0);try{const x=await H1(wa,t,s);await ya(un(tr,"users",x.user.uid),{email:t,phoneNumber:c,createdAt:new Date().toISOString()})}catch{v(e("signup_error"))}finally{f(!1)}},_=async()=>{v(""),f(!0);try{const j=new ff,x=await pf(wa,j);await ya(un(tr,"users",x.user.uid),{email:x.user.email,phoneNumber:x.user.phoneNumber||"",createdAt:new Date().toISOString()})}catch{v(e("google_signin_error"))}finally{f(!1)}};return h.jsxs(Le,{sx:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",minHeight:"100vh",p:3},children:[h.jsx(_e,{variant:"h4",component:"h1",gutterBottom:!0,children:e("signup")}),g&&h.jsx(Tu,{severity:"error",sx:{mb:2,width:"100%",maxWidth:400},children:g}),h.jsxs(Le,{component:"form",onSubmit:y,sx:{width:"100%",maxWidth:400,display:"flex",flexDirection:"column",gap:2},children:[h.jsx(wt,{required:!0,fullWidth:!0,label:e("email"),type:"email",value:t,onChange:j=>r(j.target.value),disabled:m}),h.jsx(wt,{required:!0,fullWidth:!0,label:e("phone"),type:"tel",value:c,onChange:j=>d(j.target.value),disabled:m,placeholder:"e.g., 677123456"}),h.jsx(wt,{required:!0,fullWidth:!0,label:e("password"),type:"password",value:s,onChange:j=>i(j.target.value),disabled:m}),h.jsx(wt,{required:!0,fullWidth:!0,label:e("confirm_password"),type:"password",value:a,onChange:j=>l(j.target.value),disabled:m}),h.jsx(Gt,{type:"submit",fullWidth:!0,variant:"contained",disabled:m,children:e("signup")}),h.jsx(En,{sx:{my:2},children:e("or")}),h.jsx(Gt,{fullWidth:!0,variant:"outlined",startIcon:h.jsx(ih,{}),onClick:_,disabled:m,children:e("signup_with_google")}),h.jsx(Gt,{fullWidth:!0,variant:"text",onClick:n,disabled:m,sx:{mt:1},children:e("have_account")})]})]})},Mv=({children:n})=>{const[e,t]=xe.useState(!0),{currentUser:r,loading:s}=Ku();return s?h.jsx(Le,{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",children:h.jsx(co,{})}):r?h.jsx(h.Fragment,{children:n}):e?h.jsx(Fv,{onSwitchToSignup:()=>t(!1)}):h.jsx(Dv,{onSwitchToLogin:()=>t(!0)})};function Bv(){const{t:n,i18n:e}=fn(),t=Sa(),{currentUser:r,loading:s,logout:i}=Ku(),[a,l]=xe.useState([]),[c,d]=xe.useState([]),[g,v]=xe.useState(!1),[m,f]=xe.useState(!1),[y,_]=xe.useState(!1),[j,x]=xe.useState(!1),[k,S]=xe.useState(null),[N,D]=xe.useState(null),[M,R]=xe.useState(!1),[E,V]=xe.useState([]),[K,L]=xe.useState("firstSequence"),[A,U]=xe.useState("sequence"),[z,te]=xe.useState({}),[$,W]=xe.useState(!0),[Y,J]=xe.useState(null),[ie,pe]=xe.useState(!1),[P,B]=xe.useState(0),[H,Z]=xe.useState("home"),Q=!!Y,[le,ue]=xe.useState([]),[he,ge]=xe.useState([]),[Ae,Fe]=xe.useState([]),[Ee,rt]=xe.useState([]),[be,ee]=xe.useState([]),[ut,Ge]=xe.useState(null),[Ne,Ie]=xe.useState(null),[$e,Me]=xe.useState(null),[Je,ot]=xe.useState(null),[ht,bt]=xe.useState(null),[At,Ft]=xe.useState(null),[Qe,_t]=xe.useState(null),[qe,vr]=xe.useState(null),[jt,Zr]=xe.useState(null),[Et,$t]=xe.useState(null),hr=10,Nt=xe.useRef([]),Hn=xe.useRef({}),Ut=xe.useRef({}),$r=xe.useRef({});xe.useEffect(()=>{Nt.current=E},[E]),xe.useEffect(()=>{Hn.current=z},[z]),xe.useEffect(()=>()=>{Object.values(Ut.current).forEach(me=>clearTimeout(me)),Object.values($r.current).forEach(me=>clearTimeout(me))},[]),xe.useEffect(()=>{(async()=>{if(r)try{const Re=(await to(xi(tr,`users/${r.uid}/stats`))).docs.find(ze=>ze.id==="current");if(Re){const ze=Re.data();typeof ze.firstTermClassAverage=="number"&&Ie(ze.firstTermClassAverage),typeof ze.secondTermClassAverage=="number"&&Me(ze.secondTermClassAverage),typeof ze.thirdTermClassAverage=="number"&&ot(ze.thirdTermClassAverage),typeof ze.annualClassAverage=="number"&&bt(ze.annualClassAverage),typeof ze.firstTermPassPercentage=="number"&&_t(ze.firstTermPassPercentage),typeof ze.secondTermPassPercentage=="number"&&vr(ze.secondTermPassPercentage),typeof ze.thirdTermPassPercentage=="number"&&Zr(ze.thirdTermPassPercentage),typeof ze.annualPassPercentage=="number"&&$t(ze.annualPassPercentage)}}catch(Te){console.warn("Failed to load cached stats:",Te)}})()},[r]);const Qr=async()=>{if(r)try{const me={firstTermClassAverage:Ne,secondTermClassAverage:$e,thirdTermClassAverage:Je,annualClassAverage:ht,firstTermPassPercentage:Qe,secondTermPassPercentage:qe,thirdTermPassPercentage:jt,annualPassPercentage:Et,updatedAt:new Date().toISOString()},Te=un(tr,`users/${r.uid}/stats/current`);try{await ro(Te,me)}catch{await ya(Te,me)}}catch(me){console.warn("Failed to save quick stats:",me)}};xe.useEffect(()=>{$||!a.length||!c.length||(Fr(),ir(),rr(),setTimeout(()=>{zr()},0))},[$,a,c,E]),xe.useEffect(()=>{if(!r){l([]),d([]),V([]),te({}),W(!1);return}(async()=>{try{W(!0);const Re=(await to(xi(tr,`users/${r.uid}/students`))).docs.map(st=>({id:st.id,...st.data()}));l(Re);const Ye=(await to(xi(tr,`users/${r.uid}/subjects`))).docs.map(st=>({id:st.id,...st.data()}));d(Ye);const Ce=(await to(xi(tr,`users/${r.uid}/marks`))).docs.map(st=>{const Pt=st.data();return{id:st.id,firstSequence:Pt.firstSequence||{},secondSequence:Pt.secondSequence||{},thirdSequence:Pt.thirdSequence||{},fourthSequence:Pt.fourthSequence||{},fifthSequence:Pt.fifthSequence||{},sixthSequence:Pt.sixthSequence||{}}});V(Ce);const Ze=(await to(xi(tr,`users/${r.uid}/comments`))).docs.reduce((st,Pt)=>(st[Number(Pt.id)]=Pt.data(),st),{});te(Ze)}catch(Te){console.error("Error fetching data:",Te)}finally{W(!1)}})()},[r]);const Wt=me=>{e.changeLanguage(me),localStorage.setItem("language",me)},ct=async(me,Te)=>{if(r)try{const Re=await zh(xi(tr,`users/${r.uid}/students`),{name:me,createdAt:new Date().toISOString()});let ze,Ye;if(Te)try{Ye=`users/${r.uid}/students/${Re.id}/${Date.now()}_${Te.name}`;const{error:Oe}=await ha.storage.from(ua).upload(Ye,Te,{upsert:!0,contentType:Te.type,cacheControl:"3600"});if(Oe)console.error("Error uploading student image:",Oe),alert(`Failed to upload image. Please verify the Supabase Storage configuration and try again.

${Oe.message||String(Oe)}`);else{const{data:Ze}=ha.storage.from(ua).getPublicUrl(Ye);Ze?.publicUrl?(ze=Ze.publicUrl,await ro(un(tr,`users/${r.uid}/students/${Re.id}`),{imageUrl:ze,imagePath:Ye})):(console.warn("No public URL returned. Ensure the bucket is set to Public in Supabase."),alert("Image uploaded, but the app couldn't obtain a public URL. Make sure the bucket is set to Public."))}}catch(Oe){console.error("Error uploading student image:",Oe)}const Ke={id:Re.id,name:me,...ze?{imageUrl:ze}:{},...Ye?{imagePath:Ye}:{}};l(Oe=>[...Oe,Ke]);const Ce={id:Re.id,firstSequence:{},secondSequence:{},thirdSequence:{},fourthSequence:{},fifthSequence:{},sixthSequence:{}};await ya(un(tr,`users/${r.uid}/marks/${Re.id}`),Ce),V(Oe=>[...Oe,Ce])}catch(Re){console.error("Error adding student:",Re)}},Tt=async(me,Te,Re)=>{if(!r)return;const ze=a[me];try{await ro(un(tr,`users/${r.uid}/students/${ze.id}`),{name:Te});let Ye,Ke;const Ce=ze.imagePath;if(Re)try{Ke=`users/${r.uid}/students/${ze.id}/${Date.now()}_${Re.name}`;const{error:Ze}=await ha.storage.from(ua).upload(Ke,Re,{upsert:!0,contentType:Re.type,cacheControl:"3600"});if(Ze)console.error("Error uploading student image:",Ze),alert(`Failed to upload image. Please verify the Supabase Storage configuration and try again.

${Ze.message||String(Ze)}`);else{const{data:st}=ha.storage.from(ua).getPublicUrl(Ke);if(st?.publicUrl){if(Ye=st.publicUrl,await ro(un(tr,`users/${r.uid}/students/${ze.id}`),{imageUrl:Ye,imagePath:Ke}),Ce)try{await ha.storage.from(ua).remove([Ce])}catch{}}else console.warn("No public URL returned. Ensure the bucket is set to Public in Supabase."),alert("Image uploaded, but the app couldn't obtain a public URL. Make sure the bucket is set to Public.")}}catch(Ze){console.error("Error uploading student image:",Ze)}const Oe=[...a];Oe[me]={...ze,name:Te,...Ye?{imageUrl:Ye}:{},...Ke?{imagePath:Ke}:{}},l(Oe)}catch(Ye){console.error("Error updating student:",Ye)}},as=async me=>{if(!r)return;const Te=a[me];try{const Re=$h(tr);if(Re.delete(un(tr,`users/${r.uid}/students/${Te.id}`)),Re.delete(un(tr,`users/${r.uid}/marks/${Te.id}`)),Re.delete(un(tr,`users/${r.uid}/comments/${me}`)),await Re.commit(),Te.imagePath)try{await ha.storage.from(ua).remove([Te.imagePath])}catch{}l(a.filter((Ye,Ke)=>Ke!==me)),V(E.filter((Ye,Ke)=>Ke!==me));const ze={...z};delete ze[me],te(ze)}catch(Re){console.error("Error deleting student:",Re)}},br=async(me,Te,Re)=>{if(r)try{const ze={name:me,total:Te,createdAt:new Date().toISOString()};typeof Re=="string"&&Re.trim()!==""&&(ze.teacher=Re.trim());const Ke={id:(await zh(xi(tr,`users/${r.uid}/subjects`),ze)).id,name:me,total:Te,teacher:ze.teacher};d(Ce=>[...Ce,Ke])}catch(ze){console.error("Error adding subject:",ze)}},Sn=async(me,Te,Re,ze)=>{if(!r)return;const Ye=c[me];if(Ye)try{const Ke={name:Te,total:Re};typeof ze<"u"&&ze.trim()!==""&&(Ke.teacher=ze.trim()),await ro(un(tr,`users/${r.uid}/subjects/${Ye.id}`),Ke);const Ce={...Ye,name:Te,total:Re};Ke.teacher&&(Ce.teacher=Ke.teacher),d(Oe=>{const Ze=[...Oe];return Ze[me]=Ce,Ze})}catch(Ke){console.error("Error updating subject:",Ke)}},jn=async me=>{if(!r)return;const Te=c[me];if(Te)try{await V1(un(tr,`users/${r.uid}/subjects/${Te.id}`)),d(c.filter((Ye,Ke)=>Ke!==me));const Re=E.map(Ye=>{const Ke={...Ye};return["firstSequence","secondSequence","thirdSequence","fourthSequence","fifthSequence","sixthSequence"].forEach(Ce=>{if(Ke[Ce]){const Oe={...Ke[Ce]};delete Oe[Te.name],Ke[Ce]=Oe}}),Ke});V(Re);const ze=$h(tr);a.forEach((Ye,Ke)=>{ze.update(un(tr,`users/${r.uid}/marks/${Ye.id}`),Re[Ke])}),await ze.commit()}catch(Re){console.error("Error deleting subject:",Re)}},et=async(me,Te,Re,ze)=>{if(!r)return;const Ye=Re===""?"":Number(Re);if(Re===""||typeof Ye=="number"&&!isNaN(Ye)&&Ye>=0&&Ye<=ze)try{const Ke=a[me],Ce=Nt.current[me]||{firstSequence:{},secondSequence:{},thirdSequence:{},fourthSequence:{},fifthSequence:{},sixthSequence:{}},Oe={...Ce,[K]:{...Ce[K],[Te]:Ye}};V(st=>{const Pt=[...st];return Pt[me]=Oe,Pt});const Ze=String(me);Ut.current[Ze]&&clearTimeout(Ut.current[Ze]),Ut.current[Ze]=setTimeout(async()=>{try{const st=Nt.current[me]||Oe;await ya(un(tr,`users/${r.uid}/marks/${Ke.id}`),st)}catch(st){console.error("Error updating mark:",st)}},500)}catch(Ke){console.error("Error updating mark:",Ke)}},An=async(me,Te,Re)=>{if(r)try{const Ye={...Hn.current[me]||{},[Te]:Re};te(Ce=>({...Ce,[me]:Ye}));const Ke=String(me);$r.current[Ke]&&clearTimeout($r.current[Ke]),$r.current[Ke]=setTimeout(async()=>{try{const Ce=Hn.current[me]||Ye;await ya(un(tr,`users/${r.uid}/comments/${me}`),Ce)}catch(Ce){console.error("Error updating comment:",Ce)}},500)}catch(ze){console.error("Error updating comment:",ze)}},Or=me=>a.some((Te,Re)=>c.some(ze=>{const Ye=E[Re]?.[me]?.[ze.name];return Ye!=null&&Ye!==""})),Fr=()=>{if(!Or("firstSequence")||!Or("secondSequence"))return;const me=a.map((Ce,Oe)=>{let Ze=0,st=0;c.forEach(Dt=>{const Nr=Number(E[Oe]?.firstSequence?.[Dt.name]??0),On=Number(E[Oe]?.secondSequence?.[Dt.name]??0);Ze+=Nr+On,st+=Dt.total*2});const Pt=Ze/st*20;return{student:Ce.name,totalMarks:Ze,average:Pt}}),Re=[...me].sort((Ce,Oe)=>Oe.average-Ce.average).map((Ce,Oe)=>({...Ce,rank:Oe+1})),ze=me.reduce((Ce,{average:Oe})=>Ce+Oe,0)/me.length,Ke=me.filter(({average:Ce})=>Ce>=hr).length/me.length*100;ge(Re),Ie(ze),_t(Ke),Qr()},ir=()=>{if(!Or("thirdSequence")||!Or("fourthSequence"))return;const me=a.map((Ce,Oe)=>{let Ze=0,st=0;c.forEach(Dt=>{const Nr=Number(E[Oe]?.thirdSequence?.[Dt.name]??0),On=Number(E[Oe]?.fourthSequence?.[Dt.name]??0);Ze+=Nr+On,st+=Dt.total*2});const Pt=Ze/st*20;return{student:Ce.name,totalMarks:Ze,average:Pt}}),Re=[...me].sort((Ce,Oe)=>Oe.average-Ce.average).map((Ce,Oe)=>({...Ce,rank:Oe+1})),ze=me.reduce((Ce,{average:Oe})=>Ce+Oe,0)/me.length,Ke=me.filter(({average:Ce})=>Ce>=hr).length/me.length*100;Fe(Re),Me(ze),vr(Ke),Qr()},rr=()=>{if(!Or("fifthSequence")||!Or("sixthSequence"))return;const me=a.map((Ce,Oe)=>{let Ze=0,st=0;c.forEach(Dt=>{const Nr=Number(E[Oe]?.fifthSequence?.[Dt.name]??0),On=Number(E[Oe]?.sixthSequence?.[Dt.name]??0);Ze+=Nr+On,st+=Dt.total*2});const Pt=Ze/st*20;return{student:Ce.name,totalMarks:Ze,average:Pt}}),Re=[...me].sort((Ce,Oe)=>Oe.average-Ce.average).map((Ce,Oe)=>({...Ce,rank:Oe+1})),ze=me.reduce((Ce,{average:Oe})=>Ce+Oe,0)/me.length,Ke=me.filter(({average:Ce})=>Ce>=hr).length/me.length*100;rt(Re),ot(ze),Zr(Ke),Qr()},zr=()=>{if(he.length===0||Ae.length===0||Ee.length===0)return;const me=a.map(Ce=>{const Oe=he.find(Dt=>Dt.student===Ce.name)?.average||0,Ze=Ae.find(Dt=>Dt.student===Ce.name)?.average||0,st=Ee.find(Dt=>Dt.student===Ce.name)?.average||0,Pt=(Oe+Ze+st)/3;return{student:Ce.name,firstTermAverage:Oe,secondTermAverage:Ze,thirdTermAverage:st,finalAverage:Pt}}),Re=[...me].sort((Ce,Oe)=>Oe.finalAverage-Ce.finalAverage).map((Ce,Oe)=>({...Ce,rank:Oe+1})),ze=me.reduce((Ce,{finalAverage:Oe})=>Ce+Oe,0)/me.length,Ke=me.filter(({finalAverage:Ce})=>Ce>=hr).length/me.length*100;ee(Re),bt(ze),$t(Ke),Qr()},Rs=()=>{const me=a.map((Ce,Oe)=>{let Ze=0,st=0;c.forEach(Dt=>{const Nr=Number(E[Oe]?.[K]?.[Dt.name]??0);Ze+=Nr,st+=Dt.total});const Pt=Ze/st*20;return{student:Ce.name,totalMarks:Ze,average:Pt}}),Re=[...me].sort((Ce,Oe)=>Oe.average-Ce.average).map((Ce,Oe)=>({...Ce,rank:Oe+1})),ze=me.reduce((Ce,{average:Oe})=>Ce+Oe,0)/me.length,Ke=me.filter(({average:Ce})=>Ce>=hr).length/me.length*100;ue(Re),Ge(ze),Ft(Ke),U("sequence"),K==="firstSequence"||K==="secondSequence"?Fr():K==="thirdSequence"||K==="fourthSequence"?ir():(K==="fifthSequence"||K==="sixthSequence")&&rr(),setTimeout(()=>{zr()},100)},Vn=()=>{const me=a.map((pt,St)=>{let jr=0,sn=0;c.forEach(Dr=>{const Gn=Number(E[St]?.firstSequence?.[Dr.name]??0),ys=Number(E[St]?.secondSequence?.[Dr.name]??0);jr+=Gn+ys,sn+=Dr.total*2});const Pn=jr/sn*20;return{student:pt.name,totalMarks:jr,average:Pn}}),Te=a.map((pt,St)=>{let jr=0,sn=0;c.forEach(Dr=>{const Gn=Number(E[St]?.thirdSequence?.[Dr.name]??0),ys=Number(E[St]?.fourthSequence?.[Dr.name]??0);jr+=Gn+ys,sn+=Dr.total*2});const Pn=jr/sn*20;return{student:pt.name,totalMarks:jr,average:Pn}}),Re=a.map((pt,St)=>{let jr=0,sn=0;c.forEach(Dr=>{const Gn=Number(E[St]?.fifthSequence?.[Dr.name]??0),ys=Number(E[St]?.sixthSequence?.[Dr.name]??0);jr+=Gn+ys,sn+=Dr.total*2});const Pn=jr/sn*20;return{student:pt.name,totalMarks:jr,average:Pn}}),Ye=[...me].sort((pt,St)=>St.average-pt.average).map((pt,St)=>({...pt,rank:St+1})),Ce=[...Te].sort((pt,St)=>St.average-pt.average).map((pt,St)=>({...pt,rank:St+1})),Ze=[...Re].sort((pt,St)=>St.average-pt.average).map((pt,St)=>({...pt,rank:St+1})),st=a.map((pt,St)=>{const jr=me[St].average,sn=Te[St].average,Pn=Re[St].average,Dr=(jr+sn+Pn)/3;return{student:pt.name,firstTermAverage:jr,secondTermAverage:sn,thirdTermAverage:Pn,finalAverage:Dr}}),Dt=[...st].sort((pt,St)=>St.finalAverage-pt.finalAverage).map((pt,St)=>({...pt,rank:St+1})),Nr=me.reduce((pt,{average:St})=>pt+St,0)/me.length,On=Te.reduce((pt,{average:St})=>pt+St,0)/Te.length,lt=Re.reduce((pt,{average:St})=>pt+St,0)/Re.length,er=st.reduce((pt,{finalAverage:St})=>pt+St,0)/st.length,Zt=me.filter(({average:pt})=>pt>=hr).length,Cr=Te.filter(({average:pt})=>pt>=hr).length,rn=Re.filter(({average:pt})=>pt>=hr).length,ci=st.filter(({finalAverage:pt})=>pt>=hr).length,yr=Zt/me.length*100,Wr=Cr/Te.length*100,nr=rn/Re.length*100,nn=ci/st.length*100;ge(Ye),Fe(Ce),rt(Ze),ee(Dt),Ie(Nr),Me(On),ot(lt),bt(er),_t(yr),vr(Wr),Zr(nr),$t(nn),U("firstTerm"),Qr()},en=me=>{const Te=a[me].name;p0(Te,me,E[me],c.map(Re=>({name:Re.name,total:Re.total})),z,K,A,he,Ae,Ee,be,n)},gn=()=>{a.forEach((me,Te)=>en(Te))},kn=me=>"/templates/classic-a4-template.html",Ur=me=>{const Te=me<0?-1:1,Re=Math.abs(me),ze=Math.floor(Re*100)/100;return(Te*ze).toFixed(2)},tn=me=>{const Te=N||{},Re=a[me]?.name||"",ze=lt=>lt==="firstTerm"?["firstSequence","secondSequence"]:lt==="secondTerm"?["thirdSequence","fourthSequence"]:lt==="thirdTerm"?["fifthSequence","sixthSequence"]:[],Ye=c.map(lt=>{let er="",Zt="",Cr="";if(A==="annual"){const yr=["firstSequence","secondSequence","thirdSequence","fourthSequence","fifthSequence","sixthSequence"],Wr=[];yr.forEach(nr=>{const nn=(E[me]?.[nr]||{})[lt.name];typeof nn=="number"&&Wr.push(nn)}),Wr.length>0&&(Cr=Wr.reduce((nr,nn)=>nr+nn,0)/Wr.length)}else{const[yr,Wr]=ze(A),nr=yr?(E[me]?.[yr]||{})[lt.name]:void 0,nn=Wr?(E[me]?.[Wr]||{})[lt.name]:void 0;er=typeof nr=="number"?nr:"",Zt=typeof nn=="number"?nn:"",typeof er=="number"&&typeof Zt=="number"?Cr=(er+Zt)/2:typeof er=="number"?Cr=er:typeof Zt=="number"&&(Cr=Zt)}const rn=Te?.subjectsMeta?.find(yr=>yr.name===lt.name)||{},ci=typeof Cr=="number"?Ur(Cr):"";return{name:lt.name,teacher:rn.teacher||"",coefficient:rn.coefficient??"",seq1:er===""?"":er,seq2:Zt===""?"":Zt,average:ci,performance:rn.performance||"",remark:rn.remark||""}}),Ke=A==="firstTerm"?"FIRST TERM REPORT CARD":A==="secondTerm"?"SECOND TERM REPORT CARD":A==="thirdTerm"?"THIRD TERM REPORT CARD":A==="annual"?"ANNUAL REPORT CARD":"REPORT CARD",Ce=A==="firstTerm"?"BULLETIN DU PREMIER TRIMESTRE":A==="secondTerm"?"BULLETIN DU DEUXIÈME TRIMESTRE":A==="thirdTerm"?"BULLETIN DU TROISIÈME TRIMESTRE":A==="annual"?"BULLETIN ANNUEL":"BULLETIN SCOLAIRE";let Oe;A==="firstTerm"?Oe=he.find(lt=>lt.student===Re):A==="secondTerm"?Oe=Ae.find(lt=>lt.student===Re):A==="thirdTerm"&&(Oe=Ee.find(lt=>lt.student===Re));const Ze=be.find(lt=>lt.student===Re);let st="";if(A==="annual"){let lt=0;Ye.forEach(er=>{const Zt=typeof er.average=="number"?er.average:NaN,Cr=typeof er.coefficient=="number"?er.coefficient:Number(er.coefficient)||1;isNaN(Zt)||(lt+=Zt*Cr)}),st=lt}let Pt="",Dt="";if(A!=="annual"){let lt=0,er=0;Ye.forEach(Zt=>{const Cr=typeof Zt.average=="number"?Zt.average:typeof Zt.average=="string"?Number(Zt.average):NaN,rn=typeof Zt.coefficient=="number"?Zt.coefficient:Number(Zt.coefficient)||1;isNaN(Cr)||(lt+=Cr*rn,er+=rn)}),er>0&&(Pt=lt,Dt=lt/er)}const Nr={title:Te?.termTitleEn||Ke,titleFr:Te?.termTitleFr||Ce,mention:Te?.mention||"",performanceFactors:Te?.performanceFactors||"",teacherComment:Te?.teacherComment||"",principalComment:Te?.principalComment||"",totalMarks:A==="annual"?st===""?"":st:typeof Oe?.totalMarks=="number"?Oe.totalMarks:Pt===""?"":Pt,position:A==="annual"?Ze?.rank??"":Oe?.rank??"",average:A==="annual"?typeof Ze?.finalAverage=="number"?Ur(Ze.finalAverage):"":typeof Oe?.average=="number"?Ur(Oe.average):Dt===""?"":Ur(Dt),classSize:a.length||"",annualAverage:A==="annual"&&typeof Ze?.finalAverage=="number"?Ur(Ze.finalAverage):""};return{studentData:{name:Re,id:Te?.matricule||"",dateOfBirth:Te?.dateOfBirth||"",placeOfBirth:Te?.placeOfBirth||"",className:Te?.className||"",branchOfStudy:Te?.branchOfStudy||"",option:Te?.option||""},subjectsData:Ye,termData:Nr}},Ln=(me,Te)=>{try{localStorage.setItem("bb_template_payload",JSON.stringify(Te||{}))}catch(ze){console.error("Failed to store template payload:",ze)}const Re=kn(me);window.open(Re,"_blank")},bs=me=>{if(!j)return en(me);const Te=tn(me);Ln(k,Te),_(!1),x(!1),S(null)},Es=()=>{if(!j)return gn();a.forEach((me,Te)=>{setTimeout(()=>{const Re=tn(Te);Ln(k,Re)},Te*200)}),_(!1),x(!1),S(null)},Is=E.some(me=>me[K]?Object.values(me[K]).some(Te=>Te!==""):!1);return s||$?h.jsx(Le,{sx:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:h.jsxs(Le,{sx:{position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[h.jsx(Le,{component:"img",src:"/pwa-192x192.png",alt:"BrainBoard Logo",sx:{width:{xs:80,sm:100,md:120},height:{xs:80,sm:100,md:120},mb:2,zIndex:1,opacity:.9,display:"block"}}),h.jsx(co,{size:64,sx:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",zIndex:2}})]})}):h.jsxs(Mv,{children:[h.jsx(_1,{position:"static",color:"default",elevation:0,sx:{mb:2},children:h.jsxs(S1,{sx:{display:"flex",justifyContent:"space-between",px:{xs:1,sm:2,md:4}},children:[h.jsxs(Le,{sx:{display:"flex",alignItems:"center"},children:[h.jsx(Le,{component:"img",src:"/pwa-192x192.png",alt:"BrainBoard Logo",sx:{height:{xs:32,sm:40},width:"auto",mr:1.5,borderRadius:1,boxShadow:1,display:"block"}}),h.jsxs(_e,{variant:"h4",component:"h1",sx:{display:"flex",alignItems:"center",gap:1,color:t.palette.primary.main,fontWeight:"bold",fontSize:{xs:"1.5rem",sm:"2.125rem"}},children:[h.jsx("span",{style:{color:t.palette.primary.main},children:"Brain"}),h.jsx("span",{style:{color:t.palette.secondary.main},children:"Board"})]})]}),h.jsx(Le,{sx:{display:{xs:"block",sm:"none"}},children:h.jsx(ur,{edge:"end",color:"inherit",onClick:()=>pe(!0),children:h.jsx(yf,{})})}),h.jsxs(Le,{sx:{display:{xs:"none",sm:"flex"},alignItems:"center",gap:2},children:[h.jsx(ur,{color:"inherit",onClick:me=>J(me.currentTarget),children:h.jsx(su,{})}),h.jsxs(j1,{anchorEl:Y,open:Q,onClose:()=>J(null),children:[h.jsx(xn,{onClick:()=>{Wt("en"),J(null)},children:n("english")}),h.jsx(xn,{onClick:()=>{Wt("fr"),J(null)},children:n("french")})]}),h.jsx(ur,{color:"inherit",onClick:i,children:h.jsx(iu,{})})]})]})}),h.jsx(A1,{anchor:"right",open:ie,onClose:()=>pe(!1),children:h.jsx(Le,{sx:{width:220},role:"presentation",onClick:()=>pe(!1),children:h.jsxs(Cl,{children:[h.jsxs(dl,{button:!0,onClick:()=>J(document.body),children:[h.jsx(Tl,{children:h.jsx(su,{})}),h.jsx(ba,{primary:n("language")})]}),h.jsxs(Cl,{component:"div",disablePadding:!0,sx:{pl:3},children:[h.jsx(dl,{button:!0,onClick:()=>Wt("en"),children:h.jsx(ba,{primary:n("english")})}),h.jsx(dl,{button:!0,onClick:()=>Wt("fr"),children:h.jsx(ba,{primary:n("french")})})]}),h.jsx(En,{}),h.jsxs(dl,{button:!0,onClick:i,children:[h.jsx(Tl,{children:h.jsx(iu,{})}),h.jsx(ba,{primary:n("logout")})]})]})})}),h.jsxs(ja,{maxWidth:"xl",sx:{px:{xs:1,sm:2,md:4},mt:{xs:2,sm:4},mb:{xs:2,sm:4}},children:[H==="home"&&(()=>{const me=K==="firstSequence"||K==="secondSequence",Te=K==="thirdSequence"||K==="fourthSequence",Re=K==="fifthSequence"||K==="sixthSequence",ze=Number.isFinite(Number(Qe)),Ye=Number.isFinite(Number(qe)),Ke=Number.isFinite(Number(jt)),Ce=me&&ze?"firstTerm":Te&&Ye?"secondTerm":Re&&Ke?"thirdTerm":"sequence",Ze=Number(Ce==="firstTerm"?Qe:Ce==="secondTerm"?qe:Ce==="thirdTerm"?jt:At),st=Number.isFinite(Ze)?Math.min(100,Math.max(0,Ze)):0,Pt=Ce==="firstTerm"?"First Term Pass Rate":Ce==="secondTerm"?"Second Term Pass Rate":Ce==="thirdTerm"?"Third Term Pass Rate":"Sequence Pass Rate";return h.jsx(e2,{firstTermAverage:Ce==="firstTerm"?Ne:null,secondTermAverage:Ce==="secondTerm"?$e:null,thirdTermAverage:Ce==="thirdTerm"?Je:null,annualAverage:null,annualPassPercentage:st,passRateLabel:Pt,totalStudents:a.length,totalSubjects:c.length})})(),H==="grades"&&h.jsx(t2,{students:a,subjects:c,onAddStudent:ct,onEditStudent:Tt,onDeleteStudent:as,onAddSubject:br,onEditSubject:Sn,onDeleteSubject:jn,onOpenStudentModal:()=>v(!0),onOpenSubjectModal:()=>f(!0)}),H==="calculate"&&h.jsx(a2,{students:a,subjects:c,marks:E,selectedSequence:K,studentComments:z,hasMarks:Is,onSequenceChange:L,onMarkChange:et,onCommentChange:An,onCalculateSequenceResults:Rs,onCalculateTermResults:Vn,onOpenBulkMarksModal:()=>R(!0)}),H==="results"&&h.jsx(o2,{selectedResultView:A,sequenceResults:le,firstTermResults:he,secondTermResults:Ae,thirdTermResults:Ee,annualResults:be,sequenceClassAverage:ut,firstTermClassAverage:Ne,secondTermClassAverage:$e,thirdTermClassAverage:Je,annualClassAverage:ht,sequencePassPercentage:At,firstTermPassPercentage:Qe,secondTermPassPercentage:qe,thirdTermPassPercentage:jt,annualPassPercentage:Et,passingMark:hr,onResultViewChange:U,onDownloadPDF:()=>{g0(n(A),A==="sequence"?le:A==="firstTerm"?he:A==="secondTerm"?Ae:A==="thirdTerm"?Ee:be,A==="sequence"?ut:A==="firstTerm"?Ne:A==="secondTerm"?$e:A==="thirdTerm"?Je:ht,A==="sequence"?At:A==="firstTerm"?Qe:A==="secondTerm"?qe:A==="thirdTerm"?jt:Et,A==="annual",n)}}),H==="print"&&h.jsx(u2,{subjects:c.map(me=>({name:me.name,total:me.total})),availableData:{termTitleEn:A==="firstTerm"?"FIRST TERM REPORT CARD":A==="secondTerm"?"SECOND TERM REPORT CARD":A==="thirdTerm"?"THIRD TERM REPORT CARD":void 0,termTitleFr:A==="firstTerm"?"BULLETIN DU PREMIER TRIMESTRE":A==="secondTerm"?"BULLETIN DU DEUXIÈME TRIMESTRE":A==="thirdTerm"?"BULLETIN DU TROISIÈME TRIMESTRE":void 0},onSelectTemplate:(me,Te)=>{x(!0),S(me),D(Te||{}),_(!0)},onBack:()=>{Z("home"),B(0)}}),h.jsx($g,{open:g,onClose:()=>v(!1),students:a.map(me=>me.name),studentImageUrls:a.map(me=>me.imageUrl),onAddStudent:ct,onEditStudent:Tt,onDeleteStudent:as}),h.jsx(zg,{open:m,onClose:()=>f(!1),subjects:c.map(me=>({name:me.name,total:me.total,teacher:me.teacher})),onAddSubject:br,onEditSubject:Sn,onDeleteSubject:jn}),h.jsx(Ug,{open:y,onClose:()=>_(!1),students:a.map(me=>me.name),onGenerateReport:j?bs:en,onGenerateAllReports:j?Es:gn,selectedSequence:K,selectedResultView:A,enableTermChoice:j,onChangeResultView:me=>U(me)}),h.jsx(Wg,{open:M,onClose:()=>R(!1),students:a.map(me=>me.name),subjects:c.map(me=>({name:me.name,total:me.total})),selectedSequence:K,onSave:et}),h.jsx(am,{value:P,onChange:(me,Te)=>{switch(B(Te),Te){case 0:Z("home");break;case 1:Z("grades");break;case 2:Z("calculate");break;case 3:Z("results");break;case 4:Z("print");break;default:Z("home")}}})]})]})}const ft=n=>typeof n=="string",oo=()=>{let n,e;const t=new Promise((r,s)=>{n=r,e=s});return t.resolve=n,t.reject=e,t},Jd=n=>n==null?"":""+n,qv=(n,e,t)=>{n.forEach(r=>{e[r]&&(t[r]=e[r])})},$v=/###/g,Yd=n=>n&&n.indexOf("###")>-1?n.replace($v,"."):n,Xd=n=>!n||ft(n),xo=(n,e,t)=>{const r=ft(e)?e.split("."):e;let s=0;for(;s<r.length-1;){if(Xd(n))return{};const i=Yd(r[s]);!n[i]&&t&&(n[i]=new t),Object.prototype.hasOwnProperty.call(n,i)?n=n[i]:n={},++s}return Xd(n)?{}:{obj:n,k:Yd(r[s])}},Zd=(n,e,t)=>{const{obj:r,k:s}=xo(n,e,Object);if(r!==void 0||e.length===1){r[s]=t;return}let i=e[e.length-1],a=e.slice(0,e.length-1),l=xo(n,a,Object);for(;l.obj===void 0&&a.length;)i=`${a[a.length-1]}.${i}`,a=a.slice(0,a.length-1),l=xo(n,a,Object),l&&l.obj&&typeof l.obj[`${l.k}.${i}`]<"u"&&(l.obj=void 0);l.obj[`${l.k}.${i}`]=t},zv=(n,e,t,r)=>{const{obj:s,k:i}=xo(n,e,Object);s[i]=s[i]||[],s[i].push(t)},Ml=(n,e)=>{const{obj:t,k:r}=xo(n,e);if(t)return t[r]},Uv=(n,e,t)=>{const r=Ml(n,t);return r!==void 0?r:Ml(e,t)},kp=(n,e,t)=>{for(const r in e)r!=="__proto__"&&r!=="constructor"&&(r in n?ft(n[r])||n[r]instanceof String||ft(e[r])||e[r]instanceof String?t&&(n[r]=e[r]):kp(n[r],e[r],t):n[r]=e[r]);return n},da=n=>n.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Wv={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Hv=n=>ft(n)?n.replace(/[&<>"'\/]/g,e=>Wv[e]):n;class Vv{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(t!==void 0)return t;const r=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,r),this.regExpQueue.push(e),r}}const Gv=[" ",",","?","!",";"],Kv=new Vv(20),Jv=(n,e,t)=>{e=e||"",t=t||"";const r=Gv.filter(a=>e.indexOf(a)<0&&t.indexOf(a)<0);if(r.length===0)return!0;const s=Kv.getRegExp(`(${r.map(a=>a==="?"?"\\?":a).join("|")})`);let i=!s.test(n);if(!i){const a=n.indexOf(t);a>0&&!s.test(n.substring(0,a))&&(i=!0)}return i},Nu=function(n,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!n)return;if(n[e])return n[e];const r=e.split(t);let s=n;for(let i=0;i<r.length;){if(!s||typeof s!="object")return;let a,l="";for(let c=i;c<r.length;++c)if(c!==i&&(l+=t),l+=r[c],a=s[l],a!==void 0){if(["string","number","boolean"].indexOf(typeof a)>-1&&c<r.length-1)continue;i+=c-i+1;break}s=a}return s},Bl=n=>n&&n.replace("_","-"),Yv={type:"logger",log(n){this.output("log",n)},warn(n){this.output("warn",n)},error(n){this.output("error",n)},output(n,e){console&&console[n]&&console[n].apply(console,e)}};class ql{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Yv,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,r,s){return s&&!this.debug?null:(ft(e[0])&&(e[0]=`${r}${this.prefix} ${e[0]}`),this.logger[t](e))}create(e){return new ql(this.logger,{prefix:`${this.prefix}:${e}:`,...this.options})}clone(e){return e=e||this.options,e.prefix=e.prefix||this.prefix,new ql(this.logger,e)}}var ps=new ql;class ec{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const s=this.observers[r].get(t)||0;this.observers[r].set(t,s+1)}),this}off(e,t){if(this.observers[e]){if(!t){delete this.observers[e];return}this.observers[e].delete(t)}}emit(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];this.observers[e]&&Array.from(this.observers[e].entries()).forEach(a=>{let[l,c]=a;for(let d=0;d<c;d++)l(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(a=>{let[l,c]=a;for(let d=0;d<c;d++)l.apply(l,[e,...r])})}}class Qd extends ec{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=s.keySeparator!==void 0?s.keySeparator:this.options.keySeparator,a=s.ignoreJSONStructure!==void 0?s.ignoreJSONStructure:this.options.ignoreJSONStructure;let l;e.indexOf(".")>-1?l=e.split("."):(l=[e,t],r&&(Array.isArray(r)?l.push(...r):ft(r)&&i?l.push(...r.split(i)):l.push(r)));const c=Ml(this.data,l);return!c&&!t&&!r&&e.indexOf(".")>-1&&(e=l[0],t=l[1],r=l.slice(2).join(".")),c||!a||!ft(r)?c:Nu(this.data&&this.data[e]&&this.data[e][t],r,i)}addResource(e,t,r,s){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const a=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let l=[e,t];r&&(l=l.concat(a?r.split(a):r)),e.indexOf(".")>-1&&(l=e.split("."),s=t,t=l[1]),this.addNamespaces(t),Zd(this.data,l,s),i.silent||this.emit("added",e,t,r,s)}addResources(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(ft(r[i])||Array.isArray(r[i]))&&this.addResource(e,t,i,r[i],{silent:!0});s.silent||this.emit("added",e,t,r)}addResourceBundle(e,t,r,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},l=[e,t];e.indexOf(".")>-1&&(l=e.split("."),s=r,r=t,t=l[1]),this.addNamespaces(t);let c=Ml(this.data,l)||{};a.skipCopy||(r=JSON.parse(JSON.stringify(r))),s?kp(c,r,i):c={...c,...r},Zd(this.data,l,c),a.silent||this.emit("added",e,t,r)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return this.getResource(e,t)!==void 0}getResourceBundle(e,t){return t||(t=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(e,t)}:this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(s=>t[s]&&Object.keys(t[s]).length>0)}toJSON(){return this.data}}var Lp={processors:{},addPostProcessor(n){this.processors[n.name]=n},handle(n,e,t,r,s){return n.forEach(i=>{this.processors[i]&&(e=this.processors[i].process(e,t,r,s))}),e}};const ef={};class $l extends ec{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),qv(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=ps.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(e==null)return!1;const r=this.resolve(e,t);return r&&r.res!==void 0}extractFromKey(e,t){let r=t.nsSeparator!==void 0?t.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const s=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const a=r&&e.indexOf(r)>-1,l=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!Jv(e,r,s);if(a&&!l){const c=e.match(this.interpolator.nestingRegexp);if(c&&c.length>0)return{key:e,namespaces:ft(i)?[i]:i};const d=e.split(r);(r!==s||r===s&&this.options.ns.indexOf(d[0])>-1)&&(i=d.shift()),e=d.join(s)}return{key:e,namespaces:ft(i)?[i]:i}}translate(e,t,r){if(typeof t!="object"&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),typeof t=="object"&&(t={...t}),t||(t={}),e==null)return"";Array.isArray(e)||(e=[String(e)]);const s=t.returnDetails!==void 0?t.returnDetails:this.options.returnDetails,i=t.keySeparator!==void 0?t.keySeparator:this.options.keySeparator,{key:a,namespaces:l}=this.extractFromKey(e[e.length-1],t),c=l[l.length-1],d=t.lng||this.language,g=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(d&&d.toLowerCase()==="cimode"){if(g){const N=t.nsSeparator||this.options.nsSeparator;return s?{res:`${c}${N}${a}`,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:`${c}${N}${a}`}return s?{res:a,usedKey:a,exactUsedKey:a,usedLng:d,usedNS:c,usedParams:this.getUsedParamsDetails(t)}:a}const v=this.resolve(e,t);let m=v&&v.res;const f=v&&v.usedKey||a,y=v&&v.exactUsedKey||a,_=Object.prototype.toString.apply(m),j=["[object Number]","[object Function]","[object RegExp]"],x=t.joinArrays!==void 0?t.joinArrays:this.options.joinArrays,k=!this.i18nFormat||this.i18nFormat.handleAsObject,S=!ft(m)&&typeof m!="boolean"&&typeof m!="number";if(k&&m&&S&&j.indexOf(_)<0&&!(ft(x)&&Array.isArray(m))){if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const N=this.options.returnedObjectHandler?this.options.returnedObjectHandler(f,m,{...t,ns:l}):`key '${a} (${this.language})' returned an object instead of string.`;return s?(v.res=N,v.usedParams=this.getUsedParamsDetails(t),v):N}if(i){const N=Array.isArray(m),D=N?[]:{},M=N?y:f;for(const R in m)if(Object.prototype.hasOwnProperty.call(m,R)){const E=`${M}${i}${R}`;D[R]=this.translate(E,{...t,joinArrays:!1,ns:l}),D[R]===E&&(D[R]=m[R])}m=D}}else if(k&&ft(x)&&Array.isArray(m))m=m.join(x),m&&(m=this.extendTranslation(m,e,t,r));else{let N=!1,D=!1;const M=t.count!==void 0&&!ft(t.count),R=$l.hasDefaultValue(t),E=M?this.pluralResolver.getSuffix(d,t.count,t):"",V=t.ordinal&&M?this.pluralResolver.getSuffix(d,t.count,{ordinal:!1}):"",K=M&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),L=K&&t[`defaultValue${this.options.pluralSeparator}zero`]||t[`defaultValue${E}`]||t[`defaultValue${V}`]||t.defaultValue;!this.isValidLookup(m)&&R&&(N=!0,m=L),this.isValidLookup(m)||(D=!0,m=a);const U=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&D?void 0:m,z=R&&L!==m&&this.options.updateMissing;if(D||N||z){if(this.logger.log(z?"updateKey":"missingKey",d,c,a,z?L:m),i){const Y=this.resolve(a,{...t,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let te=[];const $=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if(this.options.saveMissingTo==="fallback"&&$&&$[0])for(let Y=0;Y<$.length;Y++)te.push($[Y]);else this.options.saveMissingTo==="all"?te=this.languageUtils.toResolveHierarchy(t.lng||this.language):te.push(t.lng||this.language);const W=(Y,J,ie)=>{const pe=R&&ie!==m?ie:U;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,c,J,pe,z,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Y,c,J,pe,z,t),this.emit("missingKey",Y,c,J,m)};this.options.saveMissing&&(this.options.saveMissingPlurals&&M?te.forEach(Y=>{const J=this.pluralResolver.getSuffixes(Y,t);K&&t[`defaultValue${this.options.pluralSeparator}zero`]&&J.indexOf(`${this.options.pluralSeparator}zero`)<0&&J.push(`${this.options.pluralSeparator}zero`),J.forEach(ie=>{W([Y],a+ie,t[`defaultValue${ie}`]||L)})}):W(te,a,L))}m=this.extendTranslation(m,e,t,v,r),D&&m===a&&this.options.appendNamespaceToMissingKey&&(m=`${c}:${a}`),(D||N)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?m=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${c}:${a}`:a,N?m:void 0):m=this.options.parseMissingKeyHandler(m))}return s?(v.res=m,v.usedParams=this.getUsedParamsDetails(t),v):m}extendTranslation(e,t,r,s,i){var a=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||s.usedLng,s.usedNS,s.usedKey,{resolved:s});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const d=ft(e)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let g;if(d){const m=e.match(this.interpolator.nestingRegexp);g=m&&m.length}let v=r.replace&&!ft(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(v={...this.options.interpolation.defaultVariables,...v}),e=this.interpolator.interpolate(e,v,r.lng||this.language||s.usedLng,r),d){const m=e.match(this.interpolator.nestingRegexp),f=m&&m.length;g<f&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&s&&s.res&&(r.lng=this.language||s.usedLng),r.nest!==!1&&(e=this.interpolator.nest(e,function(){for(var m=arguments.length,f=new Array(m),y=0;y<m;y++)f[y]=arguments[y];return i&&i[0]===f[0]&&!r.context?(a.logger.warn(`It seems you are nesting recursively key: ${f[0]} in key: ${t[0]}`),null):a.translate(...f,t)},r)),r.interpolation&&this.interpolator.reset()}const l=r.postProcess||this.options.postProcess,c=ft(l)?[l]:l;return e!=null&&c&&c.length&&r.applyPostProcessor!==!1&&(e=Lp.handle(c,e,t,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...s,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),e}resolve(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,s,i,a,l;return ft(e)&&(e=[e]),e.forEach(c=>{if(this.isValidLookup(r))return;const d=this.extractFromKey(c,t),g=d.key;s=g;let v=d.namespaces;this.options.fallbackNS&&(v=v.concat(this.options.fallbackNS));const m=t.count!==void 0&&!ft(t.count),f=m&&!t.ordinal&&t.count===0&&this.pluralResolver.shouldUseIntlApi(),y=t.context!==void 0&&(ft(t.context)||typeof t.context=="number")&&t.context!=="",_=t.lngs?t.lngs:this.languageUtils.toResolveHierarchy(t.lng||this.language,t.fallbackLng);v.forEach(j=>{this.isValidLookup(r)||(l=j,!ef[`${_[0]}-${j}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(l)&&(ef[`${_[0]}-${j}`]=!0,this.logger.warn(`key "${s}" for languages "${_.join(", ")}" won't get resolved as namespace "${l}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),_.forEach(x=>{if(this.isValidLookup(r))return;a=x;const k=[g];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(k,g,x,j,t);else{let N;m&&(N=this.pluralResolver.getSuffix(x,t.count,t));const D=`${this.options.pluralSeparator}zero`,M=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(m&&(k.push(g+N),t.ordinal&&N.indexOf(M)===0&&k.push(g+N.replace(M,this.options.pluralSeparator)),f&&k.push(g+D)),y){const R=`${g}${this.options.contextSeparator}${t.context}`;k.push(R),m&&(k.push(R+N),t.ordinal&&N.indexOf(M)===0&&k.push(R+N.replace(M,this.options.pluralSeparator)),f&&k.push(R+D))}}let S;for(;S=k.pop();)this.isValidLookup(r)||(i=S,r=this.getResource(x,j,S,t))}))})}),{res:r,usedKey:s,exactUsedKey:i,usedLng:a,usedNS:l}}isValidLookup(e){return e!==void 0&&!(!this.options.returnNull&&e===null)&&!(!this.options.returnEmptyString&&e==="")}getResource(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,r,s):this.resourceStore.getResource(e,t,r,s)}getUsedParamsDetails(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=e.replace&&!ft(e.replace);let s=r?e.replace:e;if(r&&typeof e.count<"u"&&(s.count=e.count),this.options.interpolation.defaultVariables&&(s={...this.options.interpolation.defaultVariables,...s}),!r){s={...s};for(const i of t)delete s[i]}return s}static hasDefaultValue(e){const t="defaultValue";for(const r in e)if(Object.prototype.hasOwnProperty.call(e,r)&&t===r.substring(0,t.length)&&e[r]!==void 0)return!0;return!1}}const eu=n=>n.charAt(0).toUpperCase()+n.slice(1);class tf{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=ps.create("languageUtils")}getScriptPartFromCode(e){if(e=Bl(e),!e||e.indexOf("-")<0)return null;const t=e.split("-");return t.length===2||(t.pop(),t[t.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(t.join("-"))}getLanguagePartFromCode(e){if(e=Bl(e),!e||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(ft(e)&&e.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let s=Intl.getCanonicalLocales(e)[0];if(s&&this.options.lowerCaseLng&&(s=s.toLowerCase()),s)return s}catch{}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let r=e.split("-");return this.options.lowerCaseLng?r=r.map(s=>s.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=eu(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),t.indexOf(r[1].toLowerCase())>-1&&(r[1]=eu(r[1].toLowerCase())),t.indexOf(r[2].toLowerCase())>-1&&(r[2]=eu(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(r=>{if(t)return;const s=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(s))&&(t=s)}),!t&&this.options.supportedLngs&&e.forEach(r=>{if(t)return;const s=this.getLanguagePartFromCode(r);if(this.isSupportedCode(s))return t=s;t=this.options.supportedLngs.find(i=>{if(i===s)return i;if(!(i.indexOf("-")<0&&s.indexOf("-")<0)&&(i.indexOf("-")>0&&s.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===s||i.indexOf(s)===0&&s.length>1))return i})}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if(typeof e=="function"&&(e=e(t)),ft(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let r=e[t];return r||(r=e[this.getScriptPartFromCode(t)]),r||(r=e[this.formatLanguageCode(t)]),r||(r=e[this.getLanguagePartFromCode(t)]),r||(r=e.default),r||[]}toResolveHierarchy(e,t){const r=this.getFallbackCodes(t||this.options.fallbackLng||[],e),s=[],i=a=>{a&&(this.isSupportedCode(a)?s.push(a):this.logger.warn(`rejecting language code not found in supportedLngs: ${a}`))};return ft(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(e)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(e)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(e))):ft(e)&&i(this.formatLanguageCode(e)),r.forEach(a=>{s.indexOf(a)<0&&i(this.formatLanguageCode(a))}),s}}let Xv=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],Zv={1:n=>+(n>1),2:n=>+(n!=1),3:n=>0,4:n=>n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,5:n=>n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5,6:n=>n==1?0:n>=2&&n<=4?1:2,7:n=>n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2,8:n=>n==1?0:n==2?1:n!=8&&n!=11?2:3,9:n=>+(n>=2),10:n=>n==1?0:n==2?1:n<7?2:n<11?3:4,11:n=>n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3,12:n=>+(n%10!=1||n%100==11),13:n=>+(n!==0),14:n=>n==1?0:n==2?1:n==3?2:3,15:n=>n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2,16:n=>n%10==1&&n%100!=11?0:n!==0?1:2,17:n=>n==1||n%10==1&&n%100!=11?0:1,18:n=>n==0?0:n==1?1:2,19:n=>n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3,20:n=>n==1?0:n==0||n%100>0&&n%100<20?1:2,21:n=>n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0,22:n=>n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3};const Qv=["v1","v2","v3"],eb=["v4"],rf={zero:0,one:1,two:2,few:3,many:4,other:5},tb=()=>{const n={};return Xv.forEach(e=>{e.lngs.forEach(t=>{n[t]={numbers:e.nr,plurals:Zv[e.fc]}})}),n};class rb{constructor(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=ps.create("pluralResolver"),(!this.options.compatibilityJSON||eb.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=tb(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Bl(e==="dev"?"en":e),s=t.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:s});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let a;try{a=new Intl.PluralRules(r,{type:s})}catch{if(!e.match(/-|_/))return;const c=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(c,t)}return this.pluralRulesCache[i]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(e,r).map(s=>`${t}${s}`)}getSuffixes(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(e,t);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((s,i)=>rf[s]-rf[i]).map(s=>`${this.options.prepend}${t.ordinal?`ordinal${this.options.prepend}`:""}${s}`):r.numbers.map(s=>this.getSuffix(e,s,t)):[]}getSuffix(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const s=this.getRule(e,r);return s?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${s.select(t)}`:this.getSuffixRetroCompatible(s,t):(this.logger.warn(`no plural rule found for: ${e}`),"")}getSuffixRetroCompatible(e,t){const r=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let s=e.numbers[r];this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1&&(s===2?s="plural":s===1&&(s=""));const i=()=>this.options.prepend&&s.toString()?this.options.prepend+s.toString():s.toString();return this.options.compatibilityJSON==="v1"?s===1?"":typeof s=="number"?`_plural_${s.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&e.numbers.length===2&&e.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!Qv.includes(this.options.compatibilityJSON)}}const nf=function(n,e,t){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=Uv(n,e,t);return!i&&s&&ft(t)&&(i=Nu(n,t,r),i===void 0&&(i=Nu(e,t,r))),i},tu=n=>n.replace(/\$/g,"$$$$");class nb{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ps.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(t=>t),this.init(e)}init(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:r,useRawValueToEscape:s,prefix:i,prefixEscaped:a,suffix:l,suffixEscaped:c,formatSeparator:d,unescapeSuffix:g,unescapePrefix:v,nestingPrefix:m,nestingPrefixEscaped:f,nestingSuffix:y,nestingSuffixEscaped:_,nestingOptionsSeparator:j,maxReplaces:x,alwaysFormat:k}=e.interpolation;this.escape=t!==void 0?t:Hv,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=s!==void 0?s:!1,this.prefix=i?da(i):a||"{{",this.suffix=l?da(l):c||"}}",this.formatSeparator=d||",",this.unescapePrefix=g?"":v||"-",this.unescapeSuffix=this.unescapePrefix?"":g||"",this.nestingPrefix=m?da(m):f||da("$t("),this.nestingSuffix=y?da(y):_||da(")"),this.nestingOptionsSeparator=j||",",this.maxReplaces=x||1e3,this.alwaysFormat=k!==void 0?k:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(t,r)=>t&&t.source===r?(t.lastIndex=0,t):new RegExp(r,"g");this.regexp=e(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=e(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=e(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(e,t,r,s){let i,a,l;const c=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},d=f=>{if(f.indexOf(this.formatSeparator)<0){const x=nf(t,c,f,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(x,void 0,r,{...s,...t,interpolationkey:f}):x}const y=f.split(this.formatSeparator),_=y.shift().trim(),j=y.join(this.formatSeparator).trim();return this.format(nf(t,c,_,this.options.keySeparator,this.options.ignoreJSONStructure),j,r,{...s,...t,interpolationkey:_})};this.resetRegExp();const g=s&&s.missingInterpolationHandler||this.options.missingInterpolationHandler,v=s&&s.interpolation&&s.interpolation.skipOnVariables!==void 0?s.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:f=>tu(f)},{regex:this.regexp,safeValue:f=>this.escapeValue?tu(this.escape(f)):tu(f)}].forEach(f=>{for(l=0;i=f.regex.exec(e);){const y=i[1].trim();if(a=d(y),a===void 0)if(typeof g=="function"){const j=g(e,i,s);a=ft(j)?j:""}else if(s&&Object.prototype.hasOwnProperty.call(s,y))a="";else if(v){a=i[0];continue}else this.logger.warn(`missed to pass in variable ${y} for interpolating ${e}`),a="";else!ft(a)&&!this.useRawValueToEscape&&(a=Jd(a));const _=f.safeValue(a);if(e=e.replace(i[0],_),v?(f.regex.lastIndex+=a.length,f.regex.lastIndex-=i[0].length):f.regex.lastIndex=0,l++,l>=this.maxReplaces)break}}),e}nest(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s,i,a;const l=(c,d)=>{const g=this.nestingOptionsSeparator;if(c.indexOf(g)<0)return c;const v=c.split(new RegExp(`${g}[ ]*{`));let m=`{${v[1]}`;c=v[0],m=this.interpolate(m,a);const f=m.match(/'/g),y=m.match(/"/g);(f&&f.length%2===0&&!y||y.length%2!==0)&&(m=m.replace(/'/g,'"'));try{a=JSON.parse(m),d&&(a={...d,...a})}catch(_){return this.logger.warn(`failed parsing options string in nesting for key ${c}`,_),`${c}${g}${m}`}return a.defaultValue&&a.defaultValue.indexOf(this.prefix)>-1&&delete a.defaultValue,c};for(;s=this.nestingRegexp.exec(e);){let c=[];a={...r},a=a.replace&&!ft(a.replace)?a.replace:a,a.applyPostProcessor=!1,delete a.defaultValue;let d=!1;if(s[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(s[1])){const g=s[1].split(this.formatSeparator).map(v=>v.trim());s[1]=g.shift(),c=g,d=!0}if(i=t(l.call(this,s[1].trim(),a),a),i&&s[0]===e&&!ft(i))return i;ft(i)||(i=Jd(i)),i||(this.logger.warn(`missed to resolve ${s[1]} for nesting ${e}`),i=""),d&&(i=c.reduce((g,v)=>this.format(g,v,r.lng,{...r,interpolationkey:s[1].trim()}),i.trim())),e=e.replace(s[0],i),this.regexp.lastIndex=0}return e}}const sb=n=>{let e=n.toLowerCase().trim();const t={};if(n.indexOf("(")>-1){const r=n.split("(");e=r[0].toLowerCase().trim();const s=r[1].substring(0,r[1].length-1);e==="currency"&&s.indexOf(":")<0?t.currency||(t.currency=s.trim()):e==="relativetime"&&s.indexOf(":")<0?t.range||(t.range=s.trim()):s.split(";").forEach(a=>{if(a){const[l,...c]=a.split(":"),d=c.join(":").trim().replace(/^'+|'+$/g,""),g=l.trim();t[g]||(t[g]=d),d==="false"&&(t[g]=!1),d==="true"&&(t[g]=!0),isNaN(d)||(t[g]=parseInt(d,10))}})}return{formatName:e,formatOptions:t}},fa=n=>{const e={};return(t,r,s)=>{let i=s;s&&s.interpolationkey&&s.formatParams&&s.formatParams[s.interpolationkey]&&s[s.interpolationkey]&&(i={...i,[s.interpolationkey]:void 0});const a=r+JSON.stringify(i);let l=e[a];return l||(l=n(Bl(r),s),e[a]=l),l(t)}};class ib{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=ps.create("formatter"),this.options=e,this.formats={number:fa((t,r)=>{const s=new Intl.NumberFormat(t,{...r});return i=>s.format(i)}),currency:fa((t,r)=>{const s=new Intl.NumberFormat(t,{...r,style:"currency"});return i=>s.format(i)}),datetime:fa((t,r)=>{const s=new Intl.DateTimeFormat(t,{...r});return i=>s.format(i)}),relativetime:fa((t,r)=>{const s=new Intl.RelativeTimeFormat(t,{...r});return i=>s.format(i,r.range||"day")}),list:fa((t,r)=>{const s=new Intl.ListFormat(t,{...r});return i=>s.format(i)})},this.init(e)}init(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=fa(t)}format(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(l=>l.indexOf(")")>-1)){const l=i.findIndex(c=>c.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,l)].join(this.formatSeparator)}return i.reduce((l,c)=>{const{formatName:d,formatOptions:g}=sb(c);if(this.formats[d]){let v=l;try{const m=s&&s.formatParams&&s.formatParams[s.interpolationkey]||{},f=m.locale||m.lng||s.locale||s.lng||r;v=this.formats[d](l,f,{...g,...s,...m})}catch(m){this.logger.warn(m)}return v}else this.logger.warn(`there was no format function for ${d}`);return l},e)}}const ab=(n,e)=>{n.pending[e]!==void 0&&(delete n.pending[e],n.pendingCount--)};class ob extends ec{constructor(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=r,this.languageUtils=r.languageUtils,this.options=s,this.logger=ps.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=s.maxParallelReads||10,this.readingCalls=0,this.maxRetries=s.maxRetries>=0?s.maxRetries:5,this.retryTimeout=s.retryTimeout>=1?s.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,s.backend,s)}queueLoad(e,t,r,s){const i={},a={},l={},c={};return e.forEach(d=>{let g=!0;t.forEach(v=>{const m=`${d}|${v}`;!r.reload&&this.store.hasResourceBundle(d,v)?this.state[m]=2:this.state[m]<0||(this.state[m]===1?a[m]===void 0&&(a[m]=!0):(this.state[m]=1,g=!1,a[m]===void 0&&(a[m]=!0),i[m]===void 0&&(i[m]=!0),c[v]===void 0&&(c[v]=!0)))}),g||(l[d]=!0)}),(Object.keys(i).length||Object.keys(a).length)&&this.queue.push({pending:a,pendingCount:Object.keys(a).length,loaded:{},errors:[],callback:s}),{toLoad:Object.keys(i),pending:Object.keys(a),toLoadLanguages:Object.keys(l),toLoadNamespaces:Object.keys(c)}}loaded(e,t,r){const s=e.split("|"),i=s[0],a=s[1];t&&this.emit("failedLoading",i,a,t),!t&&r&&this.store.addResourceBundle(i,a,r,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&r&&(this.state[e]=0);const l={};this.queue.forEach(c=>{zv(c.loaded,[i],a),ab(c,e),t&&c.errors.push(t),c.pendingCount===0&&!c.done&&(Object.keys(c.loaded).forEach(d=>{l[d]||(l[d]={});const g=c.loaded[d];g.length&&g.forEach(v=>{l[d][v]===void 0&&(l[d][v]=!0)})}),c.done=!0,c.errors.length?c.callback(c.errors):c.callback())}),this.emit("loaded",l),this.queue=this.queue.filter(c=>!c.done)}read(e,t,r){let s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,a=arguments.length>5?arguments[5]:void 0;if(!e.length)return a(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:e,ns:t,fcName:r,tried:s,wait:i,callback:a});return}this.readingCalls++;const l=(d,g)=>{if(this.readingCalls--,this.waitingReads.length>0){const v=this.waitingReads.shift();this.read(v.lng,v.ns,v.fcName,v.tried,v.wait,v.callback)}if(d&&g&&s<this.maxRetries){setTimeout(()=>{this.read.call(this,e,t,r,s+1,i*2,a)},i);return}a(d,g)},c=this.backend[r].bind(this.backend);if(c.length===2){try{const d=c(e,t);d&&typeof d.then=="function"?d.then(g=>l(null,g)).catch(l):l(null,d)}catch(d){l(d)}return}return c(e,t,l)}prepareLoading(e,t){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},s=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),s&&s();ft(e)&&(e=this.languageUtils.toResolveHierarchy(e)),ft(t)&&(t=[t]);const i=this.queueLoad(e,t,r,s);if(!i.toLoad.length)return i.pending.length||s(),null;i.toLoad.forEach(a=>{this.loadOne(a)})}load(e,t,r){this.prepareLoading(e,t,{},r)}reload(e,t,r){this.prepareLoading(e,t,{reload:!0},r)}loadOne(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=e.split("|"),s=r[0],i=r[1];this.read(s,i,"read",void 0,void 0,(a,l)=>{a&&this.logger.warn(`${t}loading namespace ${i} for language ${s} failed`,a),!a&&l&&this.logger.log(`${t}loaded namespace ${i} for language ${s}`,l),this.loaded(e,a,l)})}saveMissing(e,t,r,s,i){let a=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},l=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t)){this.logger.warn(`did not save key "${r}" as the namespace "${t}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const c={...a,isUpdate:i},d=this.backend.create.bind(this.backend);if(d.length<6)try{let g;d.length===5?g=d(e,t,r,s,c):g=d(e,t,r,s),g&&typeof g.then=="function"?g.then(v=>l(null,v)).catch(l):l(null,g)}catch(g){l(g)}else d(e,t,r,s,l,c)}!e||!e[0]||this.store.addResource(e[0],t,r,s)}}}const sf=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:n=>{let e={};if(typeof n[1]=="object"&&(e=n[1]),ft(n[1])&&(e.defaultValue=n[1]),ft(n[2])&&(e.tDescription=n[2]),typeof n[2]=="object"||typeof n[3]=="object"){const t=n[3]||n[2];Object.keys(t).forEach(r=>{e[r]=t[r]})}return e},interpolation:{escapeValue:!0,format:n=>n,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),af=n=>(ft(n.ns)&&(n.ns=[n.ns]),ft(n.fallbackLng)&&(n.fallbackLng=[n.fallbackLng]),ft(n.fallbackNS)&&(n.fallbackNS=[n.fallbackNS]),n.supportedLngs&&n.supportedLngs.indexOf("cimode")<0&&(n.supportedLngs=n.supportedLngs.concat(["cimode"])),n),Sl=()=>{},lb=n=>{Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(t=>{typeof n[t]=="function"&&(n[t]=n[t].bind(n))})};class jo extends ec{constructor(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(super(),this.options=af(e),this.services={},this.logger=ps,this.modules={external:[]},lb(this),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof t=="function"&&(r=t,t={}),!t.defaultNS&&t.defaultNS!==!1&&t.ns&&(ft(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const s=sf();this.options={...s,...this.options,...af(t)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...s.interpolation,...this.options.interpolation}),t.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=t.keySeparator),t.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=g=>g?typeof g=="function"?new g:g:null;if(!this.options.isClone){this.modules.logger?ps.init(i(this.modules.logger),this.options):ps.init(null,this.options);let g;this.modules.formatter?g=this.modules.formatter:typeof Intl<"u"&&(g=ib);const v=new tf(this.options);this.store=new Qd(this.options.resources,this.options);const m=this.services;m.logger=ps,m.resourceStore=this.store,m.languageUtils=v,m.pluralResolver=new rb(v,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),g&&(!this.options.interpolation.format||this.options.interpolation.format===s.interpolation.format)&&(m.formatter=i(g),m.formatter.init(m,this.options),this.options.interpolation.format=m.formatter.format.bind(m.formatter)),m.interpolator=new nb(this.options),m.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},m.backendConnector=new ob(i(this.modules.backend),m.resourceStore,m,this.options),m.backendConnector.on("*",function(f){for(var y=arguments.length,_=new Array(y>1?y-1:0),j=1;j<y;j++)_[j-1]=arguments[j];e.emit(f,..._)}),this.modules.languageDetector&&(m.languageDetector=i(this.modules.languageDetector),m.languageDetector.init&&m.languageDetector.init(m,this.options.detection,this.options)),this.modules.i18nFormat&&(m.i18nFormat=i(this.modules.i18nFormat),m.i18nFormat.init&&m.i18nFormat.init(this)),this.translator=new $l(this.services,this.options),this.translator.on("*",function(f){for(var y=arguments.length,_=new Array(y>1?y-1:0),j=1;j<y;j++)_[j-1]=arguments[j];e.emit(f,..._)}),this.modules.external.forEach(f=>{f.init&&f.init(this)})}if(this.format=this.options.interpolation.format,r||(r=Sl),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const g=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);g.length>0&&g[0]!=="dev"&&(this.options.lng=g[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(g=>{this[g]=function(){return e.store[g](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(g=>{this[g]=function(){return e.store[g](...arguments),e}});const c=oo(),d=()=>{const g=(v,m)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),c.resolve(m),r(v,m)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return g(null,this.t.bind(this));this.changeLanguage(this.options.lng,g)};return this.options.resources||!this.options.initImmediate?d():setTimeout(d,0),c}loadResources(e){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sl;const s=ft(e)?e:this.language;if(typeof e=="function"&&(r=e),!this.options.resources||this.options.partialBundledLanguages){if(s&&s.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],a=l=>{if(!l||l==="cimode")return;this.services.languageUtils.toResolveHierarchy(l).forEach(d=>{d!=="cimode"&&i.indexOf(d)<0&&i.push(d)})};s?a(s):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(c=>a(c)),this.options.preload&&this.options.preload.forEach(l=>a(l)),this.services.backendConnector.load(i,this.options.ns,l=>{!l&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(l)})}else r(null)}reloadResources(e,t,r){const s=oo();return typeof e=="function"&&(r=e,e=void 0),typeof t=="function"&&(r=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),r||(r=Sl),this.services.backendConnector.reload(e,t,i=>{s.resolve(),r(i)}),s}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return e.type==="backend"&&(this.modules.backend=e),(e.type==="logger"||e.log&&e.warn&&e.error)&&(this.modules.logger=e),e.type==="languageDetector"&&(this.modules.languageDetector=e),e.type==="i18nFormat"&&(this.modules.i18nFormat=e),e.type==="postProcessor"&&Lp.addPostProcessor(e),e.type==="formatter"&&(this.modules.formatter=e),e.type==="3rdParty"&&this.modules.external.push(e),this}setResolvedLanguage(e){if(!(!e||!this.languages)&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const r=this.languages[t];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(e,t){var r=this;this.isLanguageChangingTo=e;const s=oo();this.emit("languageChanging",e);const i=c=>{this.language=c,this.languages=this.services.languageUtils.toResolveHierarchy(c),this.resolvedLanguage=void 0,this.setResolvedLanguage(c)},a=(c,d)=>{d?(i(d),this.translator.changeLanguage(d),this.isLanguageChangingTo=void 0,this.emit("languageChanged",d),this.logger.log("languageChanged",d)):this.isLanguageChangingTo=void 0,s.resolve(function(){return r.t(...arguments)}),t&&t(c,function(){return r.t(...arguments)})},l=c=>{!e&&!c&&this.services.languageDetector&&(c=[]);const d=ft(c)?c:this.services.languageUtils.getBestMatchFromCodes(c);d&&(this.language||i(d),this.translator.language||this.translator.changeLanguage(d),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(d)),this.loadResources(d,g=>{a(g,d)})};return!e&&this.services.languageDetector&&!this.services.languageDetector.async?l(this.services.languageDetector.detect()):!e&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(l):this.services.languageDetector.detect(l):l(e),s}getFixedT(e,t,r){var s=this;const i=function(a,l){let c;if(typeof l!="object"){for(var d=arguments.length,g=new Array(d>2?d-2:0),v=2;v<d;v++)g[v-2]=arguments[v];c=s.options.overloadTranslationOptionHandler([a,l].concat(g))}else c={...l};c.lng=c.lng||i.lng,c.lngs=c.lngs||i.lngs,c.ns=c.ns||i.ns,c.keyPrefix!==""&&(c.keyPrefix=c.keyPrefix||r||i.keyPrefix);const m=s.options.keySeparator||".";let f;return c.keyPrefix&&Array.isArray(a)?f=a.map(y=>`${c.keyPrefix}${m}${y}`):f=c.keyPrefix?`${c.keyPrefix}${m}${a}`:a,s.t(f,c)};return ft(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=t.lng||this.resolvedLanguage||this.languages[0],s=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const a=(l,c)=>{const d=this.services.backendConnector.state[`${l}|${c}`];return d===-1||d===0||d===2};if(t.precheck){const l=t.precheck(this,a);if(l!==void 0)return l}return!!(this.hasResourceBundle(r,e)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||a(r,e)&&(!s||a(i,e)))}loadNamespaces(e,t){const r=oo();return this.options.ns?(ft(e)&&(e=[e]),e.forEach(s=>{this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}),this.loadResources(s=>{r.resolve(),t&&t(s)}),r):(t&&t(),Promise.resolve())}loadLanguages(e,t){const r=oo();ft(e)&&(e=[e]);const s=this.options.preload||[],i=e.filter(a=>s.indexOf(a)<0&&this.services.languageUtils.isSupportedCode(a));return i.length?(this.options.preload=s.concat(i),this.loadResources(a=>{r.resolve(),t&&t(a)}),r):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new tf(sf());return t.indexOf(r.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return new jo(e,t)}cloneInstance(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Sl;const r=e.forkResourceStore;r&&delete e.forkResourceStore;const s={...this.options,...e,isClone:!0},i=new jo(s);return(e.debug!==void 0||e.prefix!==void 0)&&(i.logger=i.logger.clone(e)),["store","services","language"].forEach(l=>{i[l]=this[l]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new Qd(this.store.data,s),i.services.resourceStore=i.store),i.translator=new $l(i.services,s),i.translator.on("*",function(l){for(var c=arguments.length,d=new Array(c>1?c-1:0),g=1;g<c;g++)d[g-1]=arguments[g];i.emit(l,...d)}),i.init(s,t),i.translator.options=s,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const qr=jo.createInstance();qr.createInstance=jo.createInstance;qr.createInstance;qr.dir;qr.init;qr.loadResources;qr.reloadResources;qr.use;qr.changeLanguage;qr.getFixedT;qr.t;qr.exists;qr.setDefaultNamespace;qr.hasLoadedNamespace;qr.loadNamespaces;qr.loadLanguages;const cb="Student Result Management System",ub="Language",hb="English",db="French",fb="Students",pb="Subjects",gb="Reset Data",mb="Enter Marks & Comments",vb="Sequence",bb="First Sequence",yb="Second Sequence",xb="Third Sequence",wb="Fourth Sequence",_b="Fifth Sequence",Sb="Sixth Sequence",jb="Student",Ab="Comment",kb="Enter comment",Lb="Calculate Results",Pb="Term Results",Nb="Student Reports",Cb="Bulk Marks Entry",Tb="Results",Rb="Result View",Eb="Rank",Ib="Total Marks",Ob="Average",Fb="First Term",Db="Second Term",Mb="Third Term",Bb="Annual Summary",qb="First Term Avg",$b="Second Term Avg",zb="Third Term Avg",Ub="Final Average",Wb="Class Average: {{value}}",Hb="Pass Percentage: {{value}}%",Vb="Download PDF",Gb="Student List",Kb="Name",Jb="Actions",Yb="Enter student name",Xb="Subject List",Zb="Subject Name",Qb="Total Score",ey="Total",ty="Enter subject name",ry="Generate Student Reports",ny="Select Student",sy="Generate Report",iy="Generate All Reports",ay="Are you sure you want to reset all data? This cannot be undone.",oy="No comment provided",ly="No progress notes available",cy="Progress Notes",uy="Term Summary",hy="Period",dy="Teacher's Comment",fy="Mark",py="Login",gy="Sign Up",my="Email",vy="Phone Number",by="Password",yy="Confirm Password",xy="Need an account? Sign Up",wy="Already have an account? Login",_y="Failed to log in. Please check your credentials.",Sy="Failed to create account. Please try again.",jy="Passwords don't match",Ay="Please enter a valid phone number",ky="Logout",Ly="Add",Py="OR",Ny="Sign in with Google",Cy="Sign up with Google",Ty="Failed to sign in with Google. Please try again.",Ry="Home",Ey="Grades",Iy="Calculate",Oy="Print",Fy="Good morning",Dy="Good afternoon",My="Good evening",By="Welcome back to Brain-Board",qy="Student Performance",$y="School Year Activities",zy="What teachers say",Uy="Share your experience",Wy="Tell us how Brain-Board helped you improve your teaching and student management.",Hy="Your Name",Vy="Your Role",Gy="Your Feedback",Ky="Share your experience with Brain-Board...",Jy="Sending...",Yy="Send Feedback",Xy="Thanks! Your feedback has been sent.",Zy="Close",Qy="Pass Rate",ex="Grades Management",tx="Manage your students and subjects efficiently",rx="Total Students",nx="Total Subjects",sx="Avg Subject Total",ix="Students List",ax="Subjects List",ox="No students added yet",lx="Add your first student to get started",cx="No subjects added yet",ux="Add your first subject to get started",hx="Student ID",dx="Active",fx="View Details",px="Max Score",gx="points",mx="Difficulty Level",vx="High",bx="Medium",yx="Low",xx="View Analytics",wx="Add Student",_x="Add Subject",Sx="Enter marks and calculate student results",jx="Setup Required",Ax="Please add students and subjects first in the Grades section",kx="Please add students first in the Grades section",Lx="Please add subjects first in the Grades section",Px="Results View",Nx="Print View",Cx="Advanced results analytics coming soon!",Tx="Advanced printing features coming soon!",Rx="Calculate Marks",Ex="Enter student marks, add comments, and calculate results",Ix="Marks Entered",Ox="Completion Rate",Fx="Current Sequence",Dx="Overall Progress",Mx="Calculation Process",Bx="Enter Marks",qx="Input student marks and comments",$x="Calculate",zx="Process calculations and generate results",Ux="View Results",Wx="Review calculated results in Results page",Hx="Marks Entry Section",Vx="Enter marks and comments for each student",Gx="Complete",Kx="Select Sequence",Jx="Calculating...",Yx="Calculate Sequence",Xx="Calculate Terms",Zx="Bulk Entry",Qx="Auto-saved",ew="Calculation completed successfully! Check the Results page to view detailed results.",tw="Go to Grades",rw="Results & Analytics",nw="View and analyze calculated student results with advanced insights",sw="Refresh Data",iw="Share Results",aw="Table View",ow="Analytics View",lw="Class Average",cw="Passed Students",uw="Top Rank",hw="Sequence Results",dw="First Term Results",fw="Second Term Results",pw="Third Term Results",gw="Annual Results",mw="Detailed results table with rankings and statistics",vw="Download PDF",bw="Generate Reports",yw="Advanced analytics charts and visualizations coming soon! For now, enjoy the enhanced table view below.",xw="Download Results",ww="No Results Available",_w="Please calculate results first in the Calculate section to view them here.",Sw="Go to Calculate",jw="Back to Selection",Aw="Sequence",kw="View results for individual sequences",Lw="Terms",Pw="View results for terms and annual averages",Nw="Available",Cw="No data available",Tw={app_title:cb,language:ub,english:hb,french:db,students:fb,subjects:pb,reset_data:gb,enter_marks_comments:mb,sequence:vb,first_sequence:bb,second_sequence:yb,third_sequence:xb,fourth_sequence:wb,fifth_sequence:_b,sixth_sequence:Sb,student:jb,comment:Ab,enter_comment:kb,calculate_results:Lb,term_results:Pb,student_reports:Nb,bulk_marks_entry:Cb,results:Tb,result_view:Rb,rank:Eb,total_marks:Ib,average:Ob,first_term:Fb,second_term:Db,third_term:Mb,annual_summary:Bb,first_term_avg:qb,second_term_avg:$b,third_term_avg:zb,final_avg:Ub,class_average_with_value:Wb,pass_percentage_with_value:Hb,download_pdf_old:Vb,student_list:Gb,name:Kb,actions:Jb,enter_student_name:Yb,subject_list:Xb,subject_name:Zb,total_score:Qb,total:ey,enter_subject_name:ty,generate_student_reports:ry,select_student:ny,generate_report:sy,generate_all_reports:iy,confirm_reset:ay,no_comment:oy,no_progress_note:ly,progress_notes:cy,term_summary:uy,period:hy,teacher_comment:dy,mark:fy,login:py,signup:gy,email:my,phone:vy,password:by,confirm_password:yy,need_account:xy,have_account:wy,login_error:_y,signup_error:Sy,passwords_dont_match:jy,invalid_phone:Ay,logout:ky,add:Ly,or:Py,signin_with_google:Ny,signup_with_google:Cy,google_signin_error:Ty,home:Ry,grades:Ey,calculate_nav:Iy,print:Oy,good_morning:Fy,good_afternoon:Dy,good_evening:My,welcome_back:By,student_performance:qy,school_events:$y,testimonials:zy,share_experience:Uy,feedback_description:Wy,your_name:Hy,your_role:Vy,your_feedback:Gy,feedback_placeholder:Ky,sending:Jy,send_feedback:Yy,feedback_sent:Xy,close:Zy,pass_rate:Qy,grades_management:ex,manage_students_subjects:tx,total_students:rx,total_subjects:nx,avg_subject_total:sx,students_list:ix,subjects_list:ax,no_students_yet:ox,add_first_student:lx,no_subjects_yet:cx,add_first_subject:ux,student_id:hx,active:dx,view_details:fx,max_score:px,points:gx,difficulty_level:mx,high:vx,medium:bx,low:yx,view_analytics:xx,add_student:wx,add_subject:_x,enter_marks_calculate:Sx,setup_required:jx,add_students_subjects_first:Ax,add_students_first:kx,add_subjects_first:Lx,results_view:Px,print_view:Nx,results_coming_soon:Cx,print_coming_soon:Tx,calculate_marks:Rx,enter_marks_and_calculate:Ex,marks_entered:Ix,completion_rate:Ox,current_sequence:Fx,overall_progress:Dx,calculation_process:Mx,enter_marks:Bx,input_student_marks:qx,calculate_action:$x,process_calculations:zx,view_results:Ux,review_calculated_results:Wx,marks_entry_section:Hx,enter_marks_and_comments_desc:Vx,complete:Gx,select_sequence:Kx,calculating:Jx,calculate_sequence:Yx,calculate_terms:Xx,bulk_entry:Zx,auto_saved:Qx,calculation_complete:ew,go_to_grades:tw,results_analytics:rw,view_analyze_results:nw,refresh_data:sw,share_results:iw,table_view:aw,analytics_view:ow,class_average:lw,passed_students:cw,top_rank:uw,sequence_results:hw,first_term_results:dw,second_term_results:fw,third_term_results:pw,annual_results:gw,detailed_results_table:mw,download_pdf:vw,generate_reports:bw,analytics_coming_soon:yw,download_results:xw,no_results_yet:ww,calculate_results_first:_w,go_to_calculate:Sw,back_to_selection:jw,sequence_feature:Aw,view_sequence_results:kw,terms_feature:Lw,view_term_results:Pw,available:Nw,no_data_available:Cw},Rw="Système de Gestion des Résultats des Élèves",Ew="Langue",Iw="Anglais",Ow="Français",Fw="Élèves",Dw="Matières",Mw="Réinitialiser",Bw="Entrer Notes & Commentaires",qw="Séquence",$w="Première Séquence",zw="Deuxième Séquence",Uw="Troisième Séquence",Ww="Quatrième Séquence",Hw="Cinquième Séquence",Vw="Sixième Séquence",Gw="Élève",Kw="Commentaire",Jw="Entrer commentaire",Yw="Calculer Résultats",Xw="Résultats du Trimestre",Zw="Bulletins des Élèves",Qw="Entrée en Masse",e_="Résultats",t_="Vue des Résultats",r_="Rang",n_="Total Points",s_="Moyenne",i_="Premier Trimestre",a_="Deuxième Trimestre",o_="Troisième Trimestre",l_="Récapitulatif Annuel",c_="Moy. 1er Trim.",u_="Moy. 2e Trim.",h_="Moy. 3e Trim.",d_="Moyenne Finale",f_="Moyenne de la Classe: {{value}}",p_="Pourcentage de Réussite: {{value}}%",g_="Télécharger PDF",m_="Liste des Élèves",v_="Nom",b_="Actions",y_="Entrer nom de l'élève",x_="Liste des Matières",w_="Nom de la Matière",__="Total des Points",S_="Total",j_="Entrer nom de la matière",A_="Générer les Bulletins",k_="Sélectionner un Élève",L_="Générer Bulletin",P_="Générer Tous les Bulletins",N_="Êtes-vous sûr de vouloir réinitialiser toutes les données? Cette action est irréversible.",C_="Aucun commentaire fourni",T_="Aucune note de progression disponible",R_="Notes de Progression",E_="Résumé du Trimestre",I_="Période",O_="Commentaire du Professeur",F_="Note",D_="Connexion",M_="Inscription",B_="Email",q_="Numéro de Téléphone",$_="Mot de passe",z_="Confirmer le mot de passe",U_="Besoin d'un compte? S'inscrire",W_="Déjà un compte? Se connecter",H_="Échec de la connexion. Veuillez vérifier vos identifiants.",V_="Échec de la création du compte. Veuillez réessayer.",G_="Les mots de passe ne correspondent pas",K_="Veuillez entrer un numéro de téléphone valide",J_="Déconnexion",Y_="Ajouter",X_="OU",Z_="Se connecter avec Google",Q_="S'inscrire avec Google",e3="Échec de la connexion avec Google. Veuillez réessayer.",t3="Accueil",r3="Notes",n3="Calculer",s3="Imprimer",i3="Bonjour",a3="Bon après-midi",o3="Bonsoir",l3="Bienvenue sur Brain-Board",c3="Performance des Élèves",u3="Activités de l'Année Scolaire",h3="Ce que disent les enseignants",d3="Partagez votre expérience",f3="Dites-nous comment Brain-Board vous a aidé à améliorer votre enseignement et la gestion des élèves.",p3="Votre Nom",g3="Votre Rôle",m3="Vos Commentaires",v3="Partagez votre expérience avec Brain-Board...",b3="Envoi en cours...",y3="Envoyer les Commentaires",x3="Merci ! Vos commentaires ont été envoyés.",w3="Fermer",_3="Taux de Réussite",S3="Gestion des Notes",j3="Gérez vos élèves et matières efficacement",A3="Total Élèves",k3="Total Matières",L3="Total Moyen Matière",P3="Liste des Élèves",N3="Liste des Matières",C3="Aucun élève ajouté pour le moment",T3="Ajoutez votre premier élève pour commencer",R3="Aucune matière ajoutée pour le moment",E3="Ajoutez votre première matière pour commencer",I3="ID Élève",O3="Actif",F3="Voir Détails",D3="Score Max",M3="points",B3="Niveau de Difficulté",q3="Haut",$3="Moyen",z3="Bas",U3="Voir Analytiques",W3="Ajouter Élève",H3="Ajouter Matière",V3="Entrez les notes et calculez les résultats des élèves",G3="Configuration Requise",K3="Veuillez d'abord ajouter des élèves et des matières dans la section Notes",J3="Veuillez d'abord ajouter des élèves dans la section Notes",Y3="Veuillez d'abord ajouter des matières dans la section Notes",X3="Vue Résultats",Z3="Vue Impression",Q3="Analyses avancées des résultats bientôt disponibles!",e4="Fonctionnalités d'impression avancées bientôt disponibles!",t4={app_title:Rw,language:Ew,english:Iw,french:Ow,students:Fw,subjects:Dw,reset_data:Mw,enter_marks_comments:Bw,sequence:qw,first_sequence:$w,second_sequence:zw,third_sequence:Uw,fourth_sequence:Ww,fifth_sequence:Hw,sixth_sequence:Vw,student:Gw,comment:Kw,enter_comment:Jw,calculate_results:Yw,term_results:Xw,student_reports:Zw,bulk_marks_entry:Qw,results:e_,result_view:t_,rank:r_,total_marks:n_,average:s_,first_term:i_,second_term:a_,third_term:o_,annual_summary:l_,first_term_avg:c_,second_term_avg:u_,third_term_avg:h_,final_avg:d_,class_average:f_,pass_percentage:p_,download_pdf:g_,student_list:m_,name:v_,actions:b_,enter_student_name:y_,subject_list:x_,subject_name:w_,total_score:__,total:S_,enter_subject_name:j_,generate_student_reports:A_,select_student:k_,generate_report:L_,generate_all_reports:P_,confirm_reset:N_,no_comment:C_,no_progress_note:T_,progress_notes:R_,term_summary:E_,period:I_,teacher_comment:O_,mark:F_,login:D_,signup:M_,email:B_,phone:q_,password:$_,confirm_password:z_,need_account:U_,have_account:W_,login_error:H_,signup_error:V_,passwords_dont_match:G_,invalid_phone:K_,logout:J_,add:Y_,or:X_,signin_with_google:Z_,signup_with_google:Q_,google_signin_error:e3,home:t3,grades:r3,calculate:n3,print:s3,good_morning:i3,good_afternoon:a3,good_evening:o3,welcome_back:l3,student_performance:c3,school_events:u3,testimonials:h3,share_experience:d3,feedback_description:f3,your_name:p3,your_role:g3,your_feedback:m3,feedback_placeholder:v3,sending:b3,send_feedback:y3,feedback_sent:x3,close:w3,pass_rate:_3,grades_management:S3,manage_students_subjects:j3,total_students:A3,total_subjects:k3,avg_subject_total:L3,students_list:P3,subjects_list:N3,no_students_yet:C3,add_first_student:T3,no_subjects_yet:R3,add_first_subject:E3,student_id:I3,active:O3,view_details:F3,max_score:D3,points:M3,difficulty_level:B3,high:q3,medium:$3,low:z3,view_analytics:U3,add_student:W3,add_subject:H3,enter_marks_calculate:V3,setup_required:G3,add_students_subjects_first:K3,add_students_first:J3,add_subjects_first:Y3,results_view:X3,print_view:Z3,results_coming_soon:Q3,print_coming_soon:e4},r4={en:{translation:Tw},fr:{translation:t4}};qr.use(ig).init({resources:r4,lng:localStorage.getItem("language")||"en",fallbackLng:"en",interpolation:{escapeValue:!1}});const n4=k1({palette:{primary:{main:"#1976d2",light:"#4791db",dark:"#115293"},secondary:{main:"#2e7d32",light:"#4caf50",dark:"#1b5e20"}},typography:{fontFamily:"'Roboto', 'Helvetica', 'Arial', sans-serif",h4:{fontWeight:500,background:"linear-gradient(45deg, #1976d2, #2e7d32)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent"},h6:{fontWeight:500}},components:{MuiButton:{styleOverrides:{root:{textTransform:"none",fontWeight:500}}},MuiPaper:{styleOverrides:{root:{backgroundImage:"none"}}}}}),s4=document.getElementById("root"),i4=gf(s4);i4.render(h.jsx(hf.StrictMode,{children:h.jsxs(L1,{theme:n4,children:[h.jsx(P1,{}),h.jsx(gg,{i18n:qr,children:h.jsx(Zm,{children:h.jsx(xe.Suspense,{fallback:h.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}),children:h.jsx(Bv,{})})})})]})}));export{mf as _};
